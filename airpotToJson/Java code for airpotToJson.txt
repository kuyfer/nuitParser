package org.example;

import org.json.JSONArray;
import org.json.JSONObject;

import java.io.*;
import java.nio.file.Files;
import java.nio.file.Paths;

public class TxtToJsonConverter {
    public static void main(String[] args) {
        String inputFile = "C:\\Users\\pc\\Desktop\\stage\\airpotToJson\\src\\main\\java\\org\\example\\airports.txt.txt";
        String outputFile = "C:\\Users\\pc\\Desktop\\stage\\airports.json";


        JSONArray airportList = new JSONArray();

        try (BufferedReader br = new BufferedReader(new FileReader(inputFile))) {
            String line;
            while ((line = br.readLine()) != null) {
                String[] parts = line.split("\t");

                if (parts.length == 3) {
                    JSONObject airport = new JSONObject();
                    airport.put("code", parts[0].trim());
                    airport.put("city", parts[1].trim());
                    airport.put("country", parts[2].trim());

                    airportList.put(airport);
                } else {
                    System.err.println("Invalid line: " + line);
                }
            }

            // Write JSON array to file
            Files.write(Paths.get(outputFile), airportList.toString(4).getBytes());
            System.out.println("JSON file written to: " + outputFile);

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
