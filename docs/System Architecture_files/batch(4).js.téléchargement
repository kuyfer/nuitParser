WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.stiltsoft.confluence.plugin.tablefilter.tablefilter:0743e71f5a8d25f6287e8be4d1e7377d', location = 'build/4802.js' */
"use strict";(self.webpackChunkcom_stiltsoft_confluence_plugin_tablefilter=self.webpackChunkcom_stiltsoft_confluence_plugin_tablefilter||[]).push([[4802],{54802:function(t,e,n){var c=n(88810),f=n(92128),o=n(99467),r=n(28969),s=n(33071),i=n(84028);c({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(t){for(var e,n,c=r(t),f=s.f,l=o(c),u={},a=0;l.length>a;)void 0!==(n=f(c,e=l[a++]))&&i(u,e,n);return u}})},84028:function(t,e,n){var c=n(92128),f=n(86005),o=n(25936);t.exports=function(t,e,n){c?f.f(t,e,o(0,n)):t[e]=n}}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.stiltsoft.confluence.plugin.tablefilter.tablefilter:macro-inserter-resources', location = 'build/macro-insertion.js' */
!function(){var e,t={49170:function(e){if(void 0===(t=window.TFInserterTamplate=window.TFInserterTamplate||{}))var t={};t.panel=function(e,i){for(var n='<div id="tfac-macro-inserter-container"><button class="aui-button aui-button-compact aui-button-subtle aui-dropdown2-trigger" aria-controls="tfac-macro-inserter" title="'+soy.$$escapeHtml("Ins\u00e9rer les macros de tableau")+'"><span class="aui-icon aui-icon-small aui-iconfont-add"></span></button><aui-dropdown-menu id="tfac-macro-inserter"><aui-section>',a=e.macros,r=a.length,o=0;o<r;o++){var l=a[o];n+='<aui-item-link href="#" data-macro="'+soy.$$escapeHtml(l.name)+'"><span class="aui-icon aui-icon-small '+soy.$$escapeHtml(l.name)+'-inserter"></span>'+t.title({macro:l.id})+'<span class="aui-icon aui-icon-wait"></span></aui-item-link>'}return n+="</aui-section><aui-section><aui-item-link "+(e.isAdmin?' href="'+soy.$$escapeHtml(AJS.contextPath())+'/admin/plugins/tfac/config.action" ':'href="'+soy.$$escapeHtml(AJS.contextPath())+'/users/tfac-settings.action" ')+'><span class="aui-icon aui-icon-small aui-iconfont-configure" title="'+soy.$$escapeHtml("Configurer la visibilit\u00e9")+'"></span>'+soy.$$escapeHtml("Configurer la visibilit\u00e9 des boutons")+"</aui-item-link></aui-section></aui-dropdown-menu></div>"},{}.DEBUG&&(t.panel.soyTemplateName="TFInserterTamplate.panel"),t.title=function(e,t){return""+("tf"==e.macro?soy.$$escapeHtml("Filtrer les donn\u00e9es du tableau"):"pivot"==e.macro?soy.$$escapeHtml("Cr\u00e9er un tableau crois\u00e9 dynamique"):soy.$$escapeHtml("Cr\u00e9er un graphique \u00e0 partir d\u0027une s\u00e9rie de donn\u00e9es"))},{}.DEBUG&&(t.title.soyTemplateName="TFInserterTamplate.title"),e.exports=t},92559:function(e,t,i){"use strict";i(52321),i(54802),i(6558),i(63544);var n=i(56059);function a(e,t){t||(t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return $('\n    <section id="tfac-wizard-dialog" class="aui-dialog2 aui-dialog2-xlarge" role="dialog">\n        <header class="aui-dialog2-header">\n            <h2 class="aui-dialog2-header-main">'.concat(e,'</h2>\n        </header>\n        <div class="aui-dialog2-content">\n            ').concat(t,'\n        </div>\n        <footer class="aui-dialog2-footer">\n            <div class="aui-dialog2-footer-actions">\n                <aui-spinner class="hidden"></aui-spinner>\n                <button class="aui-button back hidden">').concat("Retour",'</button>\n                <button class="aui-button aui-button-primary add hidden" disabled>').concat("Ajouter",'</button>\n                <button class="aui-button aui-button-primary next" disabled>').concat("Suivant",'</button>\n                <button class="aui-button aui-button-link close">').concat("Fermer","</button>\n            </div>\n        </footer>\n    </section>\n  "))}("Ajouter un tableau"),$("body").append(t),AJS.dialog2(t).show()),t.find(".close").click((()=>AJS.dialog2(t).hide()));var i=t.find(".back"),n=t.find(".next"),a=t.find(".add"),r=t.find("aui-spinner"),o=t.find(".aui-dialog2-header-main");return a.click((()=>{a.prop("disabled",!0),r.removeClass("hidden")})),i.click((()=>{i.addClass("hidden"),a.addClass("hidden").prop("disabled",!0),n.removeClass("hidden"),r.addClass("hidden"),o.text("Ajouter un tableau")})),n.click((()=>{i.removeClass("hidden"),a.removeClass("hidden").prop("disabled",!0),n.addClass("hidden").prop("disabled",!0),r.removeClass("hidden"),o.text("Choisissez un graphique")})),{close:()=>AJS.dialog2(t).hide(),$container:t.find(".aui-dialog2-content"),$btnBack:i,$btnNext:n,$btnOk:a,$spinner:r}}var r=i(49170),o=i.n(r),l=i(57196),s=i(68631),c=i(89494);function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){f(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function f(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e,t,i,n,a,r,o){try{var l=e[r](o),s=l.value}catch(e){return void i(e)}l.done?t(s):Promise.resolve(s).then(n,a)}function b(e){return function(){var t=this,i=arguments;return new Promise((function(n,a){var r=e.apply(t,i);function o(e){p(r,n,a,o,l,"next",e)}function l(e){p(r,n,a,o,l,"throw",e)}o(void 0)}))}}var m=class{constructor(e,t,i){this.content=e,this.pageId=t,this.timer=null,this.activeTable=null,this.panel=$(o().panel({macros:i,isAdmin:AJS.params.isConfluenceAdmin})),this.panelBtnWrapper=this.panel.filter("#tfac-macro-inserter-container"),this.panelBtn=this.panelBtnWrapper.find("button"),this.content.append(this.panel),this.bindPanel()}init(e,t,i){var n=this.hasInlineFilter(e,t),a=e.parent(),r=a.hasClass("tf-fixed-rows");e.unbind("mouseover.tf-insert").bind("mouseover.tf-insert",(()=>{if(!e.is(this.activeTable)&&!this.isOpen()){this.activeTable=e,this.params=i,this.panelBtn.addClass("visible"),this.panel.find("aui-item-link[data-macro]").hide().filter('[data-macro="'.concat(t.map((e=>e.name)).join('"],[data-macro="'),'"]')).show();var o=e.offset(),l=a.offset();this.panelBtnWrapper.show(),this.panelBtnWrapper.offset({top:Math.max(o.top,r?l.top:0)+(n||this.isPivotHidePane(e)?28:0),left:Math.max(o.left,l.left)+Math.min(e.width(),a.width())-3})}})).unbind("mouseleave.tf-insert").bind("mouseleave.tf-insert",(()=>this.removePanel())),e.unbind("macro-inserted.tf-insert").one("macro-inserted.tf-insert",((i,n)=>{this.isOpen()&&this.panelBtn.click(),this.removePanel(),t=t.filter((e=>e.name!==n)),e.trigger("mouseover")})),e.bind("tablesorter-initialized",((n,a)=>e.is(a)&&this.init(e,t,i))),n||$(document).bind("tf-live-filter.init",(()=>n=this.hasInlineFilter(e,t)))}bindPanel(){var e=this;e.panel.find("aui-item-link[data-macro]").click(b((function*(){if(!e.panel.hasClass("disabled")){e.panel.addClass("disabled");var t=$(this);t.addClass("disabled");var i=t.data("macro"),r=n.default.getTableData(e.params,e.content),o=(new Date).getTime();if("table-chart"===i){var d=a(),f=new(yield new Promise((e=>{WRM.require("com.stiltsoft.confluence.plugin.tablefilter.tablefilter:chart-wizard-resources",(()=>{e(window.ChartWizard)}))})))(u(u({$tables:e.params.table},d),{},{callBack:function(t){n.default.storeMacro(i,r,e.pageId,e.content,(()=>{e.insertChart(o,t,d,r),e.params.table.trigger("reinit-tf-insert")}),(()=>{}),o,t)}}));f.init(),e.panel.removeClass("disabled"),t.removeClass("disabled")}else{var p;if("pivot-table"===i){var m=new(yield new Promise((e=>{WRM.require("com.stiltsoft.confluence.plugin.tablefilter.tablefilter:pivot-data-analyzer-resources",(()=>{e(window.PivotDataAnalyzer)}))})))(e.params.table);m.init(),p=m.defaultParams}else"table-filter"===i&&(p={hidePane:s.HIDE_PANE.PANEL});n.default.storeMacro(i,r,e.pageId,e.content,function(){var n=b((function*(n){"table-filter"===i?(yield(0,l.initTF)(r,e.content,o,e.pageId,!0,null,s.HIDE_PANE.PANEL,null,n),$(".tf-inline-filter").removeClass("active"),$(".tf-inline-btn-container").hide(),e.params.table.off("mouseleave.tf-live mouseover.tf-live"),e.params.table.unbind("mouseleave.tf-live mouseover.tf-live")):(Object.assign(p,n),yield(0,l.initPivot)(r,o,e.pageId,p)),e.panel.removeClass("disabled"),t.removeClass("disabled"),e.content.click(),e.params.table.trigger("reinit-tf-insert")}));return function(e){return n.apply(this,arguments)}}(),(()=>{e.panel.removeClass("disabled"),t.removeClass("disabled")}),o,p),"table-filter"===i?(0,c.ga4SendEvent)("quickTF_macroTF_added"):"pivot-table"===i&&(0,c.ga4SendEvent)("quickPivot_macroPivot_added")}return!1}})))}insertChart(e){var t=arguments,i=this;return b((function*(){var n=t.length>1&&void 0!==t[1]?t[1]:{},a=t.length>2?t[2]:void 0,r=t.length>3?t[3]:void 0;yield(0,l.initChart)(r,e,i.pageId,n),a.close()}))()}removePanel(){this.isOpen()||(this.panelBtn.removeClass("visible"),this.activeTable=null)}isOpen(){return this.panelBtn.hasClass("active")}hasInlineFilter(e,t){return!e.hasClass("pivot-table-result")&&(0===t.filter((e=>"tf"===e.id)).length?e.parents(".tablefilter-outer-wrapper").find(".tf-inline-filter").length:$(".tf-inline-filter.main").length)}isPivotHidePane(e){return e.hasClass("pivot-table-result")&&e.closest("div.pivot-content").hasClass("hidden-pane")}},h=i(38755);AJS.$,AJS.toInit((function(){var e;h.default.isEditable()&&h.default.bind(((t,i,n)=>{e||(e=new m(h.default.getContent(),h.default.getPageId(),h.default.tfacMacros.filter((e=>"tj"!==e.id)))),e.init(t,i,n)}))}))}},i={};function n(e){var a=i[e];if(void 0!==a)return a.exports;var r=i[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,e=[],n.O=function(t,i,a,r){if(!i){var o=1/0;for(d=0;d<e.length;d++){i=e[d][0],a=e[d][1],r=e[d][2];for(var l=!0,s=0;s<i.length;s++)(!1&r||o>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[s])}))?i.splice(s--,1):(l=!1,r<o&&(o=r));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[i,a,r]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={9765:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,o=i[0],l=i[1],s=i[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var d=s(n)}for(t&&t(i);c<o.length;c++)r=o[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},i=self.webpackChunkcom_stiltsoft_confluence_plugin_tablefilter=self.webpackChunkcom_stiltsoft_confluence_plugin_tablefilter||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var a=n.O(void 0,[7062,8810,7267,8303,7073,3844,6467,4267,1141,1314,6558,5344,4802,4584,7809,4492,3985,4034,5433,2321,2896,4412,8631,6099,8984,5416,1121,3622,4125,4510,7736,6444],(function(){return n(92559)}));a=n.O(a)}();
}catch(e){WRMCB(e)};