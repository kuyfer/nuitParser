WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-editor-plugin:split_vendors~core', location = 'vendors~core.js' */
/*! For license information please see vendors~core.js.LICENSE.txt */
(window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff=window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff||[]).push([["vendors~core"],{21:function(e,t,r){var n;"undefined"!=typeof self&&self,void 0===(n=function(){return function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,r=function(e,r,n,o){var a=n;return r.replace(t,(function(e,t,r,n,i){t=t||n,a&&(t+":html"in a?(a=a[t+":html"],o=!0):t in a&&(a=a[t]),i&&"function"==typeof a&&(a=a()))})),null!=a&&a!==n||(a=e),a=String(a),o||(a=i.escape(a)),a},n=function(t){return this.template=this.template.replace(e,(function(e,n){return r(e,n,t,!0)})),this},o=function(t){return this.template=this.template.replace(e,(function(e,n){return r(e,n,t)})),this},a=function(){return this.template},i=function(e){function t(){return t.template}return t.template=String(e),t.toString=t.valueOf=a,t.fill=o,t.fillHtml=n,t},l={},s=[],d=function(e){return document.querySelector('script[title="'+e+'"]')};i.load=function(e){if(e=String(e),!l.hasOwnProperty(e)){s.length>=1e3&&delete l[s.shift()],s.push(e);var t=d(e);t&&(l[e]=t.text)}return this(l[e])};var c={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;","`":"&#96;"},m=new RegExp("["+Object.keys(c).join("")+"]","g");function u(e){return String(e||"").replace(m,(function(e){return c[e]}))}return i.escape=u,i}()}.call(t,r,t,e))||(e.exports=n)},28:function(e,t,r){"use strict";e.exports=function(e,t){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||t?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},30:function(e,t,r){"use strict";t.decode=t.parse=r(51),t.encode=t.stringify=r(52)},36:function(e,t,r){"use strict";var n=["interactive","complete"],o=function(e,t){return new Promise((function(r){e&&"function"!=typeof e&&(t=e,e=null),t=t||window.document;var o=function(){return r(void(e&&setTimeout(e)))};-1!==n.indexOf(t.readyState)?o():t.addEventListener("DOMContentLoaded",o)}))};o.resume=function(e){return function(t){return o(e).then((function(){return t}))}},t.a=o},39:function(e,t,r){r(40)},40:function(e,t){function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager"),t=e=>t=>{return i=typeof(r=t),(null===r?"null":"object"===i&&Array.isArray(r)?"array":"object"===i&&(l=n=r,(o=String).prototype.isPrototypeOf(l)||(null===(a=n.constructor)||void 0===a?void 0:a.name)===o.name)?"string":i)===e;var r,n,o,a,i,l},r=e=>t=>typeof t===e,o=e=>t=>e===t,a=t("string"),i=t("object"),l=t("array"),s=o(null),d=r("boolean"),c=o(void 0),m=e=>!(e=>null==e)(e),u=r("function"),f=r("number"),g=()=>{},p=e=>()=>e,v=e=>e,h=(e,t)=>e===t;function b(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}var y=e=>t=>!e(t),C=e=>e(),w=p(!1),S=p(!0);class x{constructor(e,t){this.tag=e,this.value=t}static some(e){return new x(!0,e)}static none(){return x.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?x.some(e(this.value)):x.none()}bind(e){return this.tag?e(this.value):x.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:x.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return m(e)?x.some(e):x.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}x.singletonNone=new x(!1);var E,k,_,N,T=Array.prototype.slice,R=Array.prototype.indexOf,D=Array.prototype.push,A=(e,t)=>{return r=e,n=t,R.call(r,n)>-1;var r,n},O=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return!0}return!1},B=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(t(n));return r},P=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},L=(e,t)=>{for(var r=0,n=e.length;r<n;r++){t(e[r],r)}},M=(e,t)=>{for(var r=[],n=[],o=0,a=e.length;o<a;o++){var i=e[o];(t(i,o)?r:n).push(i)}return{pass:r,fail:n}},I=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},F=(e,t,r)=>(((e,t)=>{for(var r=e.length-1;r>=0;r--)t(e[r],r)})(e,((e,n)=>{r=t(r,e,n)})),r),j=(e,t,r)=>(L(e,((e,n)=>{r=t(r,e,n)})),r),U=(e,t)=>((e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return x.some(a);if(r(a,n))break}return x.none()})(e,t,w),z=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return x.some(r)}return x.none()},H=e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!l(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);D.apply(t,e[r])}return t},$=(e,t)=>H(P(e,t)),W=(e,t)=>{for(var r=0,n=e.length;r<n;++r){if(!0!==t(e[r],r))return!1}return!0},V=(e,t)=>{for(var r={},n=0,o=e.length;n<o;n++){var a=e[n];r[String(a)]=t(a,n)}return r},q=(e,t)=>t>=0&&t<e.length?x.some(e[t]):x.none(),K=e=>q(e,0),G=e=>q(e,e.length-1),Y=(e,t)=>{for(var r=0;r<e.length;r++){var n=t(e[r],r);if(n.isSome())return n}return x.none()},X=Object.keys,Q=Object.hasOwnProperty,Z=(e,t)=>{for(var r=X(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},J=(e,t)=>ee(e,((e,r)=>({k:r,v:t(e,r)}))),ee=(e,t)=>{var r={};return Z(e,((e,n)=>{var o=t(e,n);r[o.k]=o.v})),r},te=(e,t)=>{var r={};return((e,t,r,n)=>{Z(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))})(e,t,(e=>(t,r)=>{e[r]=t})(r),g),r},re=(e,t)=>{var r=[];return Z(e,((e,n)=>{r.push(t(e,n))})),r},ne=e=>re(e,v),oe=(e,t)=>Q.call(e,t),ae="undefined"!=typeof window?window:Function("return this;")(),ie=(e,t)=>((e,t)=>{for(var r=null!=t?t:ae,n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r})(e.split("."),t),le=(e,t)=>{var r=((e,t)=>ie(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r},se=Object.getPrototypeOf,de=e=>{var t=ie("ownerDocument.defaultView",e);return i(e)&&((e=>le("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(se(e).constructor.name))},ce=e=>e.dom.nodeName.toLowerCase(),me=e=>e.dom.nodeType,ue=e=>t=>me(t)===e,fe=e=>8===me(e)||"#comment"===ce(e),ge=e=>pe(e)&&de(e.dom),pe=ue(1),ve=ue(3),he=ue(9),be=ue(11),ye=e=>t=>pe(t)&&ce(t)===e,Ce=(e,t,r)=>{if(!(a(r)||d(r)||f(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},we=(e,t,r)=>{Ce(e.dom,t,r)},Se=(e,t)=>{var r=e.dom;Z(t,((e,t)=>{Ce(r,t,e)}))},xe=(e,t)=>{var r=e.dom.getAttribute(t);return null===r?void 0:r},Ee=(e,t)=>x.from(xe(e,t)),ke=(e,t)=>{e.dom.removeAttribute(t)},_e=e=>j(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),Ne=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Te={fromHtml:(e,t)=>{var r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){var n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return Ne(r.childNodes[0])},fromTag:(e,t)=>{var r=(t||document).createElement(e);return Ne(r)},fromText:(e,t)=>{var r=(t||document).createTextNode(e);return Ne(r)},fromDom:Ne,fromPoint:(e,t,r)=>x.from(e.dom.elementFromPoint(t,r)).map(Ne)},Re=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},De=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Ae=(e,t)=>{var r=void 0===t?document:t.dom;return De(r)?x.none():x.from(r.querySelector(e)).map(Te.fromDom)},Oe=(e,t)=>e.dom===t.dom,Be=(e,t)=>{var r=e.dom,n=t.dom;return r!==n&&r.contains(n)},Pe=Re,Le=e=>Te.fromDom(e.dom.ownerDocument),Me=e=>he(e)?e:Le(e),Ie=e=>x.from(e.dom.parentNode).map(Te.fromDom),Fe=e=>x.from(e.dom.parentElement).map(Te.fromDom),je=(e,t)=>{for(var r=u(t)?t:w,n=e.dom,o=[];null!==n.parentNode&&void 0!==n.parentNode;){var a=n.parentNode,i=Te.fromDom(a);if(o.push(i),!0===r(i))break;n=a}return o},Ue=e=>x.from(e.dom.previousSibling).map(Te.fromDom),ze=e=>x.from(e.dom.nextSibling).map(Te.fromDom),He=e=>P(e.dom.childNodes,Te.fromDom),$e=(e,t)=>{var r=e.dom.childNodes;return x.from(r[t]).map(Te.fromDom)},We=(e,t)=>{Ie(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},Ve=(e,t)=>{ze(e).fold((()=>{Ie(e).each((e=>{Ke(e,t)}))}),(e=>{We(e,t)}))},qe=(e,t)=>{var r=(e=>$e(e,0))(e);r.fold((()=>{Ke(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))},Ke=(e,t)=>{e.dom.appendChild(t.dom)},Ge=(e,t)=>{We(e,t),Ke(t,e)},Ye=(e,t)=>{L(t,((r,n)=>{var o=0===n?e:t[n-1];Ve(o,r)}))},Xe=(e,t)=>{L(t,(t=>{Ke(e,t)}))},Qe=e=>{e.dom.textContent="",L(He(e),(e=>{Ze(e)}))},Ze=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Je=e=>{var t=He(e);t.length>0&&Ye(e,t),Ze(e)},et=(e,t)=>Te.fromDom(e.dom.cloneNode(t)),tt=e=>et(e,!1),rt=e=>et(e,!0),nt=(e,t)=>{var r=Te.fromTag(t),n=_e(e);return Se(r,n),r},ot=["tfoot","thead","tbody","colgroup"],at=(e,t,r)=>({element:e,rowspan:t,colspan:r}),it=(e,t,r)=>({element:e,cells:t,section:r}),lt=(e,t,r)=>({element:e,isNew:t,isLocked:r}),st=(e,t,r,n)=>({element:e,cells:t,section:r,isNew:n}),dt=u(Element.prototype.attachShadow)&&u(Node.prototype.getRootNode),ct=p(dt),mt=dt?e=>Te.fromDom(e.dom.getRootNode()):Me,ut=e=>{var t,r=mt(e);return be(t=r)&&m(t.dom.host)?x.some(r):x.none()},ft=e=>Te.fromDom(e.dom.host),gt=e=>m(e.dom.shadowRoot),pt=e=>{var t=ve(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var r,n,o=t.ownerDocument;return ut(Te.fromDom(t)).fold((()=>o.body.contains(t)),(r=pt,n=ft,e=>r(n(e))))},vt=e=>{var t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return Te.fromDom(t)},ht=(e,t)=>{var r=[];return L(He(e),(e=>{t(e)&&(r=r.concat([e])),r=r.concat(ht(e,t))})),r},bt=(e,t,r)=>((e,t,r)=>I(je(e,r),t))(e,(e=>Re(e,t)),r),yt=(e,t)=>((e,t)=>I(He(e),t))(e,(e=>Re(e,t))),Ct=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return De(r)?[]:P(r.querySelectorAll(e),Te.fromDom)})(t,e),wt=(e,t,r,n,o)=>e(r,n)?x.some(r):u(o)&&o(r)?x.none():t(r,n,o),St=(e,t,r)=>{for(var n=e.dom,o=u(r)?r:w;n.parentNode;){n=n.parentNode;var a=Te.fromDom(n);if(t(a))return x.some(a);if(o(a))break}return x.none()},xt=(e,t,r)=>wt(((e,t)=>t(e)),St,e,t,r),Et=(e,t,r)=>St(e,(e=>Re(e,t)),r),kt=(e,t)=>((e,t)=>U(e.dom.childNodes,(e=>t(Te.fromDom(e)))).map(Te.fromDom))(e,(e=>Re(e,t))),_t=(e,t)=>Ae(t,e),Nt=(e,t,r)=>wt(((e,t)=>Re(e,t)),Et,e,t,r),Tt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return e.exists((e=>r(e,t)))},Rt=e=>{for(var t=[],r=e=>{t.push(e)},n=0;n<e.length;n++)e[n].each(r);return t},Dt=(e,t)=>e?x.some(t):x.none(),At=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,Ot=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=e.indexOf(t,r);return-1!==o&&(!!c(n)||o+t.length<=n)},Bt=(e,t)=>At(e,t,0),Pt=(e,t)=>At(e,t,e.length-t.length),Lt=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),Mt=e=>e.length>0,It=e=>void 0!==e.style&&u(e.style.getPropertyValue),Ft=(e,t,r)=>{if(!a(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);It(e)&&e.style.setProperty(t,r)},jt=(e,t,r)=>{var n=e.dom;Ft(n,t,r)},Ut=(e,t)=>{var r=e.dom;Z(t,((e,t)=>{Ft(r,t,e)}))},zt=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||pt(e)?n:Ht(r,t)},Ht=(e,t)=>It(e)?e.style.getPropertyValue(t):"",$t=(e,t)=>{var r=e.dom,n=Ht(r,t);return x.from(n).filter((e=>e.length>0))},Wt=(e,t)=>{((e,t)=>{It(e)&&e.style.removeProperty(t)})(e.dom,t),Tt(Ee(e,"style").map(Lt),"")&&ke(e,"style")},Vt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ee(e,t).map((e=>parseInt(e,10))).getOr(r)},qt=(e,t)=>Vt(e,t,1),Kt=e=>ye("col")(e)?Vt(e,"span",1)>1:qt(e,"colspan")>1,Gt=(e,t)=>parseInt(zt(e,t),10),Yt=p(10),Xt=p(10),Qt=(e,t)=>Zt(e,t,S),Zt=(e,t,r)=>$(He(e),(e=>Re(e,t)?r(e)?[e]:[]:Zt(e,t,r))),Jt=(e,t)=>function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;return r(t)?x.none():A(e,ce(t))?x.some(t):Et(t,e.join(","),(e=>Re(e,"table")||r(e)))}(["td","th"],e,t),er=e=>Qt(e,"th,td"),tr=e=>Re(e,"colgroup")?yt(e,"col"):$(or(e),(e=>yt(e,"col"))),rr=(e,t)=>Nt(e,"table",t),nr=e=>Qt(e,"tr"),or=e=>rr(e).fold(p([]),(e=>yt(e,"colgroup"))),ar=(e,t)=>P(e,(e=>{if("colgroup"===ce(e)){var r=P(tr(e),(e=>{var t=Vt(e,"span",1);return at(e,1,t)}));return it(e,r,"colgroup")}var n=P(er(e),(e=>{var t=Vt(e,"rowspan",1),r=Vt(e,"colspan",1);return at(e,t,r)}));return it(e,n,t(e))})),ir=e=>Ie(e).map((e=>{var t=ce(e);return(e=>A(ot,e))(t)?t:"tbody"})).getOr("tbody"),lr=e=>{var t=nr(e),r=[...or(e),...t];return ar(r,ir)},sr=e=>{var t,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=e.apply(null,o)}return t}},dr=()=>cr(0,0),cr=(e,t)=>({major:e,minor:t}),mr={nu:cr,detect:(e,t)=>{var r=String(t).toLowerCase();return 0===e.length?dr():((e,t)=>{var r=((e,t)=>{for(var r=0;r<e.length;r++){var n=e[r];if(n.test(t))return n}})(e,t);if(!r)return{major:0,minor:0};var n=e=>Number(t.replace(r,"$"+e));return cr(n(1),n(2))})(e,r)},unknown:dr},ur=(e,t)=>{var r=String(t).toLowerCase();return U(e,(e=>e.search(r)))},fr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,gr=e=>t=>Ot(t,e),pr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ot(e,"edge/")&&Ot(e,"chrome")&&Ot(e,"safari")&&Ot(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,fr],search:e=>Ot(e,"chrome")&&!Ot(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ot(e,"msie")||Ot(e,"trident")},{name:"Opera",versionRegexes:[fr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:gr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:gr("firefox")},{name:"Safari",versionRegexes:[fr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ot(e,"safari")||Ot(e,"mobile/"))&&Ot(e,"applewebkit")}],vr=[{name:"Windows",search:gr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ot(e,"iphone")||Ot(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:gr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:gr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:gr("linux"),versionRegexes:[]},{name:"Solaris",search:gr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:gr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:gr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],hr={browsers:p(pr),oses:p(vr)},br="Edge",yr="Chromium",Cr="Opera",wr="Firefox",Sr="Safari",xr=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(br),isChromium:n(yr),isIE:n("IE"),isOpera:n(Cr),isFirefox:n(wr),isSafari:n(Sr)}},Er={unknown:()=>xr({current:void 0,version:mr.unknown()}),nu:xr,edge:p(br),chromium:p(yr),ie:p("IE"),opera:p(Cr),firefox:p(wr),safari:p(Sr)},kr="Windows",_r="Android",Nr="Linux",Tr="macOS",Rr="Solaris",Dr="FreeBSD",Ar="ChromeOS",Or=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(kr),isiOS:n("iOS"),isAndroid:n(_r),isMacOS:n(Tr),isLinux:n(Nr),isSolaris:n(Rr),isFreeBSD:n(Dr),isChromeOS:n(Ar)}},Br={unknown:()=>Or({current:void 0,version:mr.unknown()}),nu:Or,windows:p(kr),ios:p("iOS"),android:p(_r),linux:p(Nr),macos:p(Tr),solaris:p(Rr),freebsd:p(Dr),chromeos:p(Ar)},Pr=(e,t,r)=>{var n=hr.browsers(),o=hr.oses(),a=t.bind((e=>((e,t)=>Y(t.brands,(t=>{var r=t.brand.toLowerCase();return U(e,(e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:mr.nu(parseInt(t.version,10),0)})))})))(n,e))).orThunk((()=>((e,t)=>ur(e,t).map((e=>{var r=mr.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(n,e))).fold(Er.unknown,Er.nu),i=((e,t)=>ur(e,t).map((e=>{var r=mr.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(o,e).fold(Br.unknown,Br.nu),l=((e,t,r,n)=>{var o=e.isiOS()&&!0===/ipad/i.test(r),a=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),l=i||n("(pointer:coarse)"),s=o||!a&&i&&n("(min-device-width:768px)"),d=a||i&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),m=!d&&!s&&!c;return{isiPad:p(o),isiPhone:p(a),isTablet:p(s),isPhone:p(d),isTouch:p(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:p(c),isDesktop:p(m)}})(i,a,e,r);return{browser:a,os:i,deviceType:l}},Lr=e=>window.matchMedia(e).matches,Mr=sr((()=>Pr(navigator.userAgent,x.from(navigator.userAgentData),Lr))),Ir=()=>Mr(),Fr=(e,t)=>{var r=r=>{var n=t(r);if(n<=0||null===n){var o=zt(r,e);return parseFloat(o)||0}return n},n=(e,t)=>j(t,((t,r)=>{var n=zt(e,r),o=void 0===n?0:parseInt(n,10);return isNaN(o)?t:t+o}),0);return{set:(t,r)=>{if(!f(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);var n=t.dom;It(n)&&(n.style[e]=r+"px")},get:r,getOuter:r,aggregate:n,max:(e,t,r)=>{var o=n(e,r);return t>o?t-o:0}}},jr=(e,t)=>(e=>{var t=parseFloat(e);return isNaN(t)?x.none():x.some(t)})(e).getOr(t),Ur=(e,t,r)=>jr(zt(e,t),r),zr=(e,t)=>{var r=e.dom,n=r.getBoundingClientRect().width||r.offsetWidth;return"border-box"===t?n:((e,t,r,n)=>t-Ur(e,`padding-${r}`,0)-Ur(e,`padding-${n}`,0)-Ur(e,`border-${r}-width`,0)-Ur(e,`border-${n}-width`,0))(e,n,"left","right")},Hr=Fr("width",(e=>e.dom.offsetWidth)),$r=e=>Hr.get(e),Wr=e=>Hr.getOuter(e),Vr=e=>zr(e,"content-box"),qr=e=>Ur(e,"width",e.dom.offsetWidth),Kr=(e,t,r)=>{var n=e.cells,o=n.slice(0,t),a=n.slice(t),i=o.concat(r).concat(a);return Xr(e,i)},Gr=(e,t,r)=>Kr(e,t,[r]),Yr=(e,t,r)=>{e.cells[t]=r},Xr=(e,t)=>st(e.element,t,e.section,e.isNew),Qr=(e,t)=>e.cells[t],Zr=(e,t)=>Qr(e,t).element,Jr=e=>e.cells.length,en=e=>{var t=M(e,(e=>"colgroup"===e.section));return{rows:t.fail,cols:t.pass}},tn=(e,t,r)=>{var n=P(e.cells,r);return st(t(e.element),n,e.section,!0)},rn="data-snooker-locked-cols",nn=e=>Ee(e,rn).bind((e=>x.from(e.match(/\d+/g)))).map((e=>V(e,S))),on=e=>{var t=j(en(e).rows,((e,t)=>(L(t.cells,((t,r)=>{t.isLocked&&(e[r]=!0)})),e)),{}),r=re(t,((e,t)=>parseInt(t,10)));return((e,t)=>{var r=T.call(e,0);return r.sort(t),r})(r)},an=(e,t)=>e+","+t,ln=(e,t)=>{var r=$(e.all,(e=>e.cells));return I(r,t)},sn=e=>{var t={},r=[],n=K(e).map((e=>e.element)).bind(rr).bind(nn).getOr({}),o=0,a=0,i=0,l=M(e,(e=>"colgroup"===e.section)),s=l.pass,d=l.fail;L(d,(e=>{var l=[];L(e.cells,(e=>{for(var r=0;void 0!==t[an(i,r)];)r++;for(var o=((e,t)=>oe(e,t)&&void 0!==e[t]&&null!==e[t])(n,r.toString()),s=((e,t,r,n,o,a)=>({element:e,rowspan:t,colspan:r,row:n,column:o,isLocked:a}))(e.element,e.rowspan,e.colspan,i,r,o),d=0;d<e.colspan;d++)for(var c=0;c<e.rowspan;c++){var m=r+d,u=an(i+c,m);t[u]=s,a=Math.max(a,m+1)}l.push(s)})),o++,r.push(it(e.element,l,e.section)),i++}));var c=G(s).map((e=>{var t=(e=>{var t={},r=0;return L(e.cells,(e=>{var n=e.colspan;B(n,(o=>{var a=r+o;t[a]=((e,t,r)=>({element:e,colspan:t,column:r}))(e.element,n,a)})),r+=n})),t})(e),r=((e,t)=>({element:e,columns:t}))(e.element,ne(t));return{colgroups:[r],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),m=c.columns,u=c.colgroups,f=((e,t)=>({rows:e,columns:t}))(o,a);return{grid:f,access:t,all:r,columns:m,colgroups:u}},dn={fromTable:e=>{var t=lr(e);return sn(t)},generate:sn,getAt:(e,t,r)=>x.from(e.access[an(t,r)]),findItem:(e,t,r)=>{var n=ln(e,(e=>r(t,e.element)));return n.length>0?x.some(n[0]):x.none()},filterItems:ln,justCells:e=>$(e.all,(e=>e.cells)),justColumns:e=>ne(e.columns),hasColumns:e=>X(e.columns).length>0,getColumnAt:(e,t)=>x.from(e.columns[t])},cn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,r=e.grid,n=B(r.columns,v),o=B(r.rows,v);return P(n,(r=>mn((()=>$(o,(t=>dn.getAt(e,t,r).filter((e=>e.column===r)).toArray()))),(e=>1===e.colspan&&t(e.element)),(()=>dn.getAt(e,0,r)))))},mn=(e,t,r)=>{var n=e();return U(n,t).orThunk((()=>x.from(n[0]).orThunk(r))).map((e=>e.element))},un=e=>{var t=e.grid,r=B(t.rows,v),n=B(t.columns,v);return P(r,(t=>mn((()=>$(n,(r=>dn.getAt(e,t,r).filter((e=>e.row===t)).fold(p([]),(e=>[e]))))),(e=>1===e.rowspan),(()=>dn.getAt(e,t,0)))))},fn=(e,t)=>{if(t<0||t>=e.length-1)return x.none();var r=e[t].fold((()=>{var r=(e=>{var t=T.call(e,0);return t.reverse(),t})(e.slice(0,t));return Y(r,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>x.some({value:e,delta:0}))),n=e[t+1].fold((()=>{var r=e.slice(t+1);return Y(r,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>x.some({value:e,delta:1})));return r.bind((e=>n.map((t=>{var r=t.delta+e.delta;return Math.abs(t.value-e.value)/r}))))},gn=(e,t)=>r=>"rtl"===pn(r)?t:e,pn=e=>"rtl"===zt(e,"direction")?"rtl":"ltr",vn=Fr("height",(e=>{var t=e.dom;return pt(e)?t.getBoundingClientRect().height:t.offsetHeight})),hn=e=>vn.get(e),bn=e=>vn.getOuter(e),yn=e=>Ur(e,"height",e.dom.offsetHeight),Cn=(e,t)=>({left:e,top:t,translate:(r,n)=>Cn(e+r,t+n)}),wn=Cn,Sn=(e,t)=>void 0!==e?e:void 0!==t?t:0,xn=e=>{var t=e.dom.ownerDocument,r=t.body,n=t.defaultView,o=t.documentElement;if(r===e.dom)return wn(r.offsetLeft,r.offsetTop);var a=Sn(null==n?void 0:n.pageYOffset,o.scrollTop),i=Sn(null==n?void 0:n.pageXOffset,o.scrollLeft),l=Sn(o.clientTop,r.clientTop),s=Sn(o.clientLeft,r.clientLeft);return En(e).translate(i-s,a-l)},En=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?wn(r.offsetLeft,r.offsetTop):pt(e)?(e=>{var t=e.getBoundingClientRect();return wn(t.left,t.top)})(t):wn(0,0)},kn=(e,t)=>({row:e,y:t}),_n=(e,t)=>({col:e,x:t}),Nn=e=>xn(e).left+Wr(e),Tn=e=>xn(e).left,Rn=(e,t)=>_n(e,Tn(t)),Dn=(e,t)=>_n(e,Nn(t)),An=e=>xn(e).top,On=(e,t)=>kn(e,An(t)),Bn=(e,t)=>kn(e,An(t)+bn(t)),Pn=(e,t,r)=>{if(0===r.length)return[];var n=P(r.slice(1),((t,r)=>t.map((t=>e(r,t))))),o=r[r.length-1].map((e=>t(r.length-1,e)));return n.concat([o])},Ln={delta:v,positions:e=>Pn(On,Bn,e),edge:An},Mn={delta:v,edge:Tn,positions:e=>Pn(Rn,Dn,e)},In={delta:e=>-e,edge:Nn,positions:e=>Pn(Dn,Rn,e)},Fn=gn(Mn,In),jn={delta:(e,t)=>Fn(t).delta(e,t),positions:(e,t)=>Fn(t).positions(e,t),edge:e=>Fn(e).edge(e)},Un={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},zn=(E="[0-9]+",k="[eE][+-]?"+E,_=e=>`(?:${e})?`,N=["Infinity",E+"\\."+_(E)+_(k),"\\."+E+_(k),E+_(k)].join("|"),new RegExp(`^([+-]?(?:${N}))(.*)$`)),Hn=(e,t)=>x.from(zn.exec(e)).bind((e=>{var r=Number(e[1]),n=e[2];return((e,t)=>O(t,(t=>O(Un[t],(t=>e===t)))))(n,t)?x.some({value:r,unit:n}):x.none()})),$n=/(\d+(\.\d+)?)%/,Wn=/(\d+(\.\d+)?)px|em/,Vn=ye("col"),qn=ye("tr"),Kn=(e,t,r)=>{var n=Fe(e).getOrThunk((()=>vt(Le(e))));return t(e)/r(n)*100},Gn=(e,t)=>{jt(e,"width",t+"px")},Yn=(e,t)=>{jt(e,"width",t+"%")},Xn=(e,t)=>{jt(e,"height",t+"px")},Qn=(e,t,r,n)=>{var o=parseFloat(e);return Pt(e,"%")&&"table"!==ce(t)?((e,t,r,n)=>{var o=rr(e).map((e=>{var n=r(e);return Math.floor(t/100*n)})).getOr(t);return n(e,o),o})(t,o,r,n):o},Zn=e=>{var t=(e=>yn(e)+"px")(e);return t?Qn(t,e,hn,Xn):hn(e)},Jn=(e,t)=>$t(e,t).orThunk((()=>Ee(e,t).map((e=>e+"px")))),eo=e=>Jn(e,"width"),to=e=>Kn(e,$r,Vr),ro=e=>Vn(e)?$r(e):qr(e),no=e=>qn(e)?hn(e):((e,t,r)=>r(e)/qt(e,t))(e,"rowspan",Zn),oo=(e,t,r)=>{jt(e,"width",t+r)},ao=e=>Kn(e,$r,Vr)+"%",io=p($n),lo=ye("col"),so=e=>eo(e).getOrThunk((()=>ro(e)+"px")),co=e=>{return(t=e,Jn(t,"height")).getOrThunk((()=>no(e)+"px"));var t},mo=(e,t,r,n,o,a)=>e.filter(n).fold((()=>a(fn(r,t))),(e=>o(e))),uo=(e,t,r,n)=>{var o=cn(e),a=dn.hasColumns(e)?(e=>P(dn.justColumns(e),(e=>x.from(e.element))))(e):o,i=[x.some(jn.edge(t))].concat(P(jn.positions(o,t),(e=>e.map((e=>e.x))))),l=y(Kt);return P(a,((e,t)=>mo(e,t,i,l,(e=>{if((e=>{var t=Ir().browser,r=t.isChromium()||t.isFirefox();return!lo(e)||r})(e))return r(e);var a,s,d=(a=o[t],s=v,null!=a?s(a):x.none());return mo(d,t,i,l,(e=>n(x.some($r(e)))),n)}),n)))},fo=e=>e.map((e=>e+"px")).getOr(""),go=(e,t,r)=>uo(e,t,ro,(e=>e.getOrThunk(r.minCellWidth))),po=(e,t,r,n)=>{var o=un(e),a=P(e.all,(e=>x.some(e.element))),i=[x.some(Ln.edge(t))].concat(P(Ln.positions(o,t),(e=>e.map((e=>e.y)))));return P(a,((e,t)=>mo(e,t,i,S,r,n)))},vo=(e,t)=>()=>pt(e)?t(e):parseFloat($t(e,"width").getOr("0")),ho=e=>{var t=vo(e,$r),r=p(0);return{width:t,pixelWidth:t,getWidths:(t,r)=>go(t,e,r),getCellDelta:r,singleColumnWidth:p([0]),minCellWidth:r,setElementWidth:g,adjustTableWidth:g,isRelative:!0,label:"none"}},bo=e=>{var t=vo(e,(e=>parseFloat(ao(e)))),r=vo(e,$r);return{width:t,pixelWidth:r,getWidths:(t,r)=>((e,t,r)=>uo(e,t,to,(e=>e.fold((()=>r.minCellWidth()),(e=>e/r.pixelWidth()*100)))))(t,e,r),getCellDelta:e=>e/r()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>Yt()/r()*100,setElementWidth:Yn,adjustTableWidth:r=>{var n=t();Yn(e,n+r/100*n)},isRelative:!0,label:"percent"}},yo=e=>{var t=vo(e,$r);return{width:t,pixelWidth:t,getWidths:(t,r)=>go(t,e,r),getCellDelta:v,singleColumnWidth:(e,t)=>[Math.max(Yt(),e+t)-e],minCellWidth:Yt,setElementWidth:Gn,adjustTableWidth:r=>{var n=t()+r;Gn(e,n)},isRelative:!1,label:"pixel"}},Co=e=>eo(e).fold((()=>ho(e)),(t=>((e,t)=>null!==io().exec(t)?bo(e):yo(e))(e,t))),wo=yo,So=bo,xo=(e,t,r)=>{var n=e[r].element,o=Te.fromTag("td");Ke(o,Te.fromTag("br")),(t?Ke:qe)(n,o)},Eo=(e,t)=>{var r=e=>Re(e.element,t),n=rt(e),o=lr(n),a=Co(e),i=dn.generate(o),l=((e,t)=>{var r=e.grid.columns,n=e.grid.rows,o=r,a=0,i=0,l=[],s=[];return Z(e.access,(e=>{if(l.push(e),t(e)){s.push(e);var r=e.row,d=r+e.rowspan-1,c=e.column,m=c+e.colspan-1;r<n?n=r:d>a&&(a=d),c<o?o=c:m>i&&(i=m)}})),((e,t,r,n,o,a)=>({minRow:e,minCol:t,maxRow:r,maxCol:n,allCells:o,selectedCells:a}))(n,o,a,i,l,s)})(i,r),s="th:not("+t+"),td:not("+t+")",d=Zt(n,"th,td",(e=>Re(e,s)));L(d,Ze),((e,t,r,n)=>{for(var o=I(e,(e=>"colgroup"!==e.section)),a=t.grid.columns,i=t.grid.rows,l=0;l<i;l++)for(var s=!1,d=0;d<a;d++)l<r.minRow||l>r.maxRow||d<r.minCol||d>r.maxCol||(dn.getAt(t,l,d).filter(n).isNone()?xo(o,s,l):s=!0)})(o,i,l,r);var c=((e,t,r,n)=>{if(0===n.minCol&&t.grid.columns===n.maxCol+1)return 0;var o=go(t,e,r),a=j(o,((e,t)=>e+t),0),i=j(o.slice(n.minCol,n.maxCol+1),((e,t)=>e+t),0),l=i/a*r.pixelWidth()-r.pixelWidth();return r.getCellDelta(l)})(e,dn.fromTable(e),a,l);return((e,t,r,n)=>{Z(r.columns,(e=>{(e.column<t.minCol||e.column>t.maxCol)&&Ze(e.element)}));var o=I(Qt(e,"tr"),(e=>0===e.dom.childElementCount));L(o,Ze),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||L(Qt(e,"th,td"),(e=>{ke(e,"rowspan"),ke(e,"colspan")})),ke(e,rn),ke(e,"data-snooker-col-series"),Co(e).adjustTableWidth(n)})(n,l,i,c),n},ko=((e,t)=>{var r=t=>e(t)?x.from(t.dom.nodeValue):x.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return r(n).getOr("")},getOption:r,set:(r,n)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=n}}})(ve,"text"),_o=e=>ko.get(e),No=e=>ko.getOption(e),To=(e,t)=>ko.set(e,t),Ro=e=>"img"===ce(e)?1:No(e).fold((()=>He(e).length),(e=>e.length)),Do=["img","br"],Ao=e=>No(e).filter((e=>0!==e.trim().length||e.indexOf("Â ")>-1)).isSome()||A(Do,ce(e))||(e=>ge(e)&&"false"===xe(e,"contenteditable"))(e),Oo=e=>{return t=Ao,(r=e=>{for(var n=0;n<e.childNodes.length;n++){var o=Te.fromDom(e.childNodes[n]);if(t(o))return x.some(o);var a=r(e.childNodes[n]);if(a.isSome())return a}return x.none()})(e.dom);var t,r},Bo=e=>Po(e,Ao),Po=(e,t)=>{var r=e=>{for(var n=He(e),o=n.length-1;o>=0;o--){var a=n[o];if(t(a))return x.some(a);var i=r(a);if(i.isSome())return i}return x.none()};return r(e)},Lo={scope:["row","col"]},Mo=e=>()=>{var t=Te.fromTag("td",e.dom);return Ke(t,Te.fromTag("br",e.dom)),t},Io=e=>()=>Te.fromTag("col",e.dom),Fo=e=>()=>Te.fromTag("colgroup",e.dom),jo=e=>()=>Te.fromTag("tr",e.dom),Uo=(e,t,r)=>{var n=((e,t)=>{var r=nt(e,t),n=He(rt(e));return Xe(r,n),r})(e,t);return Z(r,((e,t)=>{null===e?ke(n,t):we(n,t,e)})),n},zo=e=>e,Ho=(e,t,r)=>{var n=(e,t)=>{var r,n,o,a;r=e.element,n=t,o=r.dom,a=n.dom,It(o)&&It(a)&&(a.style.cssText=o.style.cssText),Wt(t,"height"),1!==e.colspan&&Wt(t,"width")};return{col:r=>{var o=Te.fromTag(ce(r.element),t.dom);return n(r,o),e(r.element,o),o},colgroup:Fo(t),row:jo(t),cell:o=>{var a=Te.fromTag(ce(o.element),t.dom),i=r.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),l=i.length>0?((e,t,r)=>Oo(e).map((n=>{var o=r.join(","),a=bt(n,o,(t=>Oe(t,e)));return F(a,((e,t)=>{var r=tt(t);return Ke(e,r),r}),t)})).getOr(t))(o.element,a,i):a;return Ke(l,Te.fromTag("br")),n(o,a),((e,t)=>{Z(Lo,((r,n)=>Ee(e,n).filter((e=>A(r,e))).each((e=>we(t,n,e)))))})(o.element,a),e(o.element,a),a},replace:Uo,colGap:Io(t),gap:Mo(t)}},$o=e=>({col:Io(e),colgroup:Fo(e),row:jo(e),cell:Mo(e),replace:zo,colGap:Io(e),gap:Mo(e)}),Wo=e=>t=>t.options.get(e),Vo="100%",qo=e=>{var t,r=e.dom,n=null!==(t=r.getParent(e.selection.getStart(),r.isBlock))&&void 0!==t?t:e.getBody();return Vr(Te.fromDom(n))+"px"},Ko=e=>x.from(e.options.get("table_clone_elements")),Go=Wo("table_header_type"),Yo=Wo("table_column_resizing"),Xo=e=>"preservetable"===Yo(e),Qo=e=>"resizetable"===Yo(e),Zo=Wo("table_sizing_mode"),Jo=e=>"relative"===Zo(e),ea=e=>"fixed"===Zo(e),ta=e=>"responsive"===Zo(e),ra=Wo("table_resize_bars"),na=Wo("table_style_by_css"),oa=Wo("table_merge_content_on_paste"),aa=e=>{var t=e.options,r=t.get("table_default_attributes");return t.isSet("table_default_attributes")?r:((e,t)=>ta(e)||na(e)?t:ea(e)?n(n({},t),{},{width:qo(e)}):n(n({},t),{},{width:Vo}))(e,r)},ia=e=>{var t=e.options,r=t.get("table_default_styles");return t.isSet("table_default_styles")?r:((e,t)=>ta(e)||!na(e)?t:ea(e)?n(n({},t),{},{width:qo(e)}):n(n({},t),{},{width:Vo}))(e,r)},la=Wo("table_use_colgroups"),sa=e=>Nt(e,"[contenteditable]"),da=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pt(e)?e.dom.isContentEditable:sa(e).fold(p(t),(e=>"true"===ca(e)))},ca=e=>e.dom.contentEditable,ma=e=>Te.fromDom(e.getBody()),ua=e=>t=>Oe(t,ma(e)),fa=e=>{ke(e,"data-mce-style");var t=e=>ke(e,"data-mce-style");L(er(e),t),L(tr(e),t),L(nr(e),t)},ga=e=>Te.fromDom(e.selection.getStart()),pa=e=>e.getBoundingClientRect().width,va=e=>e.getBoundingClientRect().height,ha=e=>(t,r)=>{var n=t.dom.getStyle(r,e)||t.dom.getAttrib(r,e);return x.from(n).filter(Mt)},ba=ha("width"),ya=ha("height"),Ca=e=>xt(e,ye("table")).exists(da),wa=(e,t)=>{var r=t.column,n=t.column+t.colspan-1,o=t.row,a=t.row+t.rowspan-1;return r<=e.finishCol&&n>=e.startCol&&o<=e.finishRow&&a>=e.startRow},Sa=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,xa=(e,t,r)=>{var n=dn.findItem(e,t,Oe),o=dn.findItem(e,r,Oe);return n.bind((e=>o.map((t=>{return r=e,n=t,o=Math.min(r.row,n.row),a=Math.min(r.column,n.column),i=Math.max(r.row+r.rowspan-1,n.row+n.rowspan-1),l=Math.max(r.column+r.colspan-1,n.column+n.colspan-1),{startRow:o,startCol:a,finishRow:i,finishCol:l};var r,n,o,a,i,l}))))},Ea=(e,t,r)=>xa(e,t,r).bind((t=>((e,t)=>{for(var r=!0,n=b(Sa,t),o=t.startRow;o<=t.finishRow;o++)for(var a=t.startCol;a<=t.finishCol;a++)r=r&&dn.getAt(e,o,a).exists(n);return r?x.some(t):x.none()})(e,t))),ka=(e,t,r)=>xa(e,t,r).map((t=>{var r=dn.filterItems(e,b(wa,t));return P(r,(e=>e.element))})),_a=(e,t)=>dn.findItem(e,t,((e,t)=>Be(t,e))).map((e=>e.element)),Na=(e,t,r)=>rr(e).bind((n=>((e,t,r,n)=>dn.findItem(e,t,Oe).bind((t=>{var o=r>0?t.row+t.rowspan-1:t.row,a=n>0?t.column+t.colspan-1:t.column;return dn.getAt(e,o+r,a+n).map((e=>e.element))})))(Da(n),e,t,r))),Ta=(e,t,r)=>{var n=Da(e);return ka(n,t,r)},Ra=(e,t,r,n,o)=>{var a=Da(e),i=Oe(e,r)?x.some(t):_a(a,t),l=Oe(e,o)?x.some(n):_a(a,n);return i.bind((e=>l.bind((t=>ka(a,e,t)))))},Da=dn.fromTable,Aa=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Oa=()=>({up:p({selector:Et,closest:Nt,predicate:St,all:je}),down:p({selector:Ct,predicate:ht}),styles:p({get:zt,getRaw:$t,set:jt,remove:Wt}),attrs:p({get:xe,set:we,remove:ke,copyTo:(e,t)=>{var r=_e(e);Se(t,r)}}),insert:p({before:We,after:Ve,afterAll:Ye,append:Ke,appendAll:Xe,prepend:qe,wrap:Ge}),remove:p({unwrap:Je,remove:Ze}),create:p({nu:Te.fromTag,clone:e=>Te.fromDom(e.dom.cloneNode(!1)),text:Te.fromText}),query:p({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:Ue,nextSibling:ze}),property:p({children:He,name:ce,parent:Ie,document:e=>Me(e).dom,isText:ve,isComment:fe,isElement:pe,isSpecial:e=>{var t=ce(e);return A(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>pe(e)?Ee(e,"lang"):x.none(),getText:_o,setText:To,isBoundary:e=>!!pe(e)&&("body"===ce(e)||A(Aa,ce(e))),isEmptyTag:e=>!!pe(e)&&A(["br","img","hr","input"],ce(e)),isNonEditable:e=>pe(e)&&"false"===xe(e,"contenteditable")}),eq:Oe,is:Pe}),Ba=(e,t,r,n)=>{var o=t(e,r);return F(n,((r,n)=>{var o=t(e,n);return Pa(e,r,o)}),o)},Pa=(e,t,r)=>t.bind((t=>r.filter(b(e.eq,t)))),La=(e,t,r)=>r.length>0?((e,t,r,n)=>n(e,t,r[0],r.slice(1)))(e,t,r,Ba):x.none(),Ma=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w,o=[t].concat(e.up().all(t)),a=[r].concat(e.up().all(r)),i=e=>z(e,n).fold((()=>e),(t=>e.slice(0,t+1))),l=i(o),s=i(a),d=U(l,(t=>O(s,((e,t)=>b(e.eq,t))(e,t))));return{firstpath:l,secondpath:s,shared:d}},Ia=Oa(),Fa=(e,t)=>La(Ia,((t,r)=>e(r)),t),ja=e=>Et(e,"table"),Ua=(e,t,r)=>{var n=e=>t=>void 0!==r&&r(t)||Oe(t,e);return Oe(e,t)?x.some({boxes:x.some([e]),start:e,finish:t}):ja(e).bind((o=>ja(t).bind((a=>{if(Oe(o,a))return x.some({boxes:Ta(o,e,t),start:e,finish:t});if(Be(o,a)){var i=bt(t,"td,th",n(o)),l=i.length>0?i[i.length-1]:t;return x.some({boxes:Ra(o,e,o,t,a),start:e,finish:l})}if(Be(a,o)){var s=bt(e,"td,th",n(a)),d=s.length>0?s[s.length-1]:e;return x.some({boxes:Ra(a,e,o,t,a),start:e,finish:d})}return((e,t,r)=>Ma(Ia,e,t,r))(e,t).shared.bind((i=>Nt(i,"table",r).bind((r=>{var i=bt(t,"td,th",n(r)),l=i.length>0?i[i.length-1]:t,s=bt(e,"td,th",n(r)),d=s.length>0?s[s.length-1]:e;return x.some({boxes:Ra(r,e,o,t,a),start:d,finish:l})}))))}))))},za=(e,t)=>{var r=Ct(e,t);return r.length>0?x.some(r):x.none()},Ha=(e,t,r)=>_t(e,t).bind((t=>_t(e,r).bind((e=>Fa(ja,[t,e]).map((r=>({first:t,last:e,table:r}))))))),$a=(e,t,r,n,o)=>((e,t)=>U(e,(e=>Re(e,t))))(e,o).bind((e=>Na(e,t,r).bind((e=>((e,t)=>Et(e,"table").bind((r=>_t(r,t).bind((t=>Ua(t,e).bind((e=>e.boxes.map((t=>({boxes:t,start:e.start,finish:e.finish}))))))))))(e,n))))),Wa=(e,t)=>za(e,t),Va=(e,t,r)=>Ha(e,t,r).bind((t=>{var r=t=>Oe(e,t),n="thead,tfoot,tbody,table",o=Et(t.first,n,r),a=Et(t.last,n,r);return o.bind((e=>a.bind((r=>Oe(e,r)?((e,t,r)=>{var n=Da(e);return Ea(n,t,r)})(t.table,t.first,t.last):x.none()))))})),qa=v,Ka=e=>{var t=(e,t)=>Ee(e,t).exists((e=>parseInt(e,10)>1));return e.length>0&&W(e,(e=>t(e,"rowspan")||t(e,"colspan")))?x.some(e):x.none()},Ga=(e,t,r)=>t.length<=1?x.none():Va(e,r.firstSelectedSelector,r.lastSelectedSelector).map((e=>({bounds:e,cells:t}))),Ya="data-mce-selected",Xa="td["+Ya+"],th["+Ya+"]",Qa="["+Ya+"]",Za="data-mce-first-selected",Ja="td["+Za+"],th["+Za+"]",ei="data-mce-last-selected",ti="td["+ei+"],th["+ei+"]",ri=Qa,ni={selected:Ya,selectedSelector:Xa,firstSelected:Za,firstSelectedSelector:Ja,lastSelected:ei,lastSelectedSelector:ti},oi=(e,t,r)=>({element:r,mergable:Ga(t,e,ni),unmergable:Ka(e),selection:qa(e)}),ai=e=>(t,r)=>{var n,o=ce(t),a="col"===o||"colgroup"===o?rr(n=t).bind((e=>Wa(e,ni.firstSelectedSelector))).fold(p(n),(e=>e[0])):t;return Nt(a,e,r)},ii=ai("th,td,caption"),li=ai("th,td"),si=e=>{return t=e.model.table.getSelectedCells(),P(t,Te.fromDom);var t},di=(e,t)=>{e.on("BeforeGetContent",(t=>{if(!0===t.selection){var r=(e=>I(si(e),(e=>Re(e,ni.selectedSelector))))(e);r.length>=1&&(r=>{t.preventDefault(),(e=>rr(e[0]).map((e=>{var t=Eo(e,ri);return fa(t),[t]})))(r).each((r=>{t.content="text"===t.format?(e=>P(e,(e=>e.dom.innerText)).join(""))(r):((e,t)=>P(t,(t=>e.selection.serializer.serialize(t.dom,{}))).join(""))(e,r)}))})(r)}})),e.on("BeforeSetContent",(r=>{if(!0===r.selection&&!0===r.paste){var n=si(e);K(n).each((n=>{rr(n).each((o=>{var a,i,l,s=I((a=r.content,(l=(i||document).createElement("div")).innerHTML=a,He(Te.fromDom(l))),(e=>"meta"!==ce(e))),d=ye("table");if(oa(e)&&1===s.length&&d(s[0])){r.preventDefault();var c=Te.fromDom(e.getDoc()),m=$o(c),u=((e,t,r)=>({element:e,clipboard:t,generators:r}))(n,s[0],m);t.pasteCells(o,u).each((()=>{e.focus()}))}}))}))}}))},ci=(e,t)=>({element:e,offset:t}),mi=(e,t,r)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?r(t).bind((t=>mi(e,t,r).orThunk((()=>x.some(t))))):x.none(),ui=(e,t)=>e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length,fi=(e,t)=>{var r=mi(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(r))return ci(r,ui(e,r));var n=e.property().children(r);return n.length>0?fi(e,n[n.length-1]):ci(r,ui(e,r))},gi=fi,pi=Oa(),vi=(e,t)=>{if(!Kt(e)){var r=(e=>eo(e).bind((e=>Hn(e,["fixed","relative","empty"]))))(e);r.each((r=>{var n=r.value/2;oo(e,n,r.unit),oo(t,n,r.unit)}))}},hi=e=>P(e,p(0)),bi=(e,t,r,n,o)=>o(e.slice(0,t)).concat(n).concat(o(e.slice(r))),yi=e=>(t,r,n,o)=>{if(e(n)){var a=Math.max(o,t[r]-Math.abs(n)),i=Math.abs(a-t[r]);return n>=0?i:-i}return n},Ci=yi((e=>e<0)),wi=yi(S),Si=()=>{var e=(e,t,r,n)=>{var o=(100+r)/100,a=Math.max(n,(e[t]+r)/o);return P(e,((e,r)=>(r===t?a:e/o)-e))},t=(t,r,n,o,a,i)=>i?e(t,r,o,a):((e,t,r,n,o)=>{var a=Ci(e,t,n,o);return bi(e,t,r+1,[a,0],hi)})(t,r,n,o,a);return{resizeTable:(e,t)=>e(t),clampTableDelta:Ci,calcLeftEdgeDeltas:t,calcMiddleDeltas:(e,r,n,o,a,i,l)=>t(e,n,o,a,i,l),calcRightEdgeDeltas:(t,r,n,o,a,i)=>{if(i)return e(t,n,o,a);var l=Ci(t,n,o,a);return hi(t.slice(0,n)).concat([l])},calcRedestributedWidths:(e,t,r,n)=>{if(n){var o=(t+r)/t,a=P(e,(e=>e/o));return{delta:100*o-100,newSizes:a}}return{delta:r,newSizes:e}}}},xi=()=>{var e=(e,t,r,n,o)=>{var a=wi(e,n>=0?r:t,n,o);return bi(e,t,r+1,[a,-a],hi)};return{resizeTable:(e,t,r)=>{r&&e(t)},clampTableDelta:(e,t,r,n,o)=>{if(o){if(r>=0)return r;var a=j(e,((e,t)=>e+t-n),0);return Math.max(-a,r)}return Ci(e,t,r,n)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,r,n,o,a,i)=>e(t,n,o,a,i),calcRightEdgeDeltas:(e,t,r,n,o,a)=>{if(a)return hi(e);var i=n/e.length;return P(e,p(i))},calcRedestributedWidths:(e,t,r,n)=>({delta:0,newSizes:e})}},Ei=e=>dn.fromTable(e).grid,ki=ye("th"),_i=e=>W(e,(e=>ki(e.element))),Ni=(e,t)=>e&&t?"sectionCells":e?"section":"cells",Ti=e=>{var t="thead"===e.section,r=Tt(Ri(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:Ni(t,r)}:{type:"body"}},Ri=e=>{var t=I(e,(e=>ki(e.element)));return 0===t.length?x.some("td"):t.length===e.length?x.some("th"):x.none()},Di=(e,t,r)=>lt(r(e.element,t),!0,e.isLocked),Ai=(e,t)=>e.section!==t?st(e.element,e.cells,t,e.isNew):e,Oi=()=>({transformRow:Ai,transformCell:(e,t,r)=>{var n=r(e.element,t),o="td"!==ce(n)?((e,t)=>{var r=nt(e,t);Ve(e,r);var n=He(e);return Xe(r,n),Ze(e),r})(n,"td"):n;return lt(o,e.isNew,e.isLocked)}}),Bi=()=>({transformRow:Ai,transformCell:Di}),Pi=()=>({transformRow:(e,t)=>Ai(e,"thead"===t?"tbody":t),transformCell:Di}),Li=(e,t)=>{var r=(e=>Y(e.all,(e=>{var t=Ti(e);return"header"===t.type?x.from(t.subType):x.none()})))(dn.fromTable(e)).getOr(t);switch(r){case"section":return Oi();case"sectionCells":return Bi();case"cells":return Pi()}},Mi=Oi,Ii=Bi,Fi=Pi,ji=()=>({transformRow:v,transformCell:Di}),Ui=(e,t,r,n)=>{r===n?ke(e,t):we(e,t,r)},zi=(e,t,r)=>{G(yt(e,t)).fold((()=>qe(e,r)),(e=>Ve(e,r)))},Hi=(e,t)=>{var r=[],n=[],o=e=>P(e,(e=>{e.isNew&&r.push(e.element);var t=e.element;return Qe(t),L(e.cells,(e=>{e.isNew&&n.push(e.element),Ui(e.element,"colspan",e.colspan,1),Ui(e.element,"rowspan",e.rowspan,1),Ke(t,e.element)})),t})),a=e=>$(e,(e=>P(e.cells,(e=>(Ui(e.element,"span",e.colspan,1),e.element))))),i=(t,r)=>{var n=((e,t)=>{var r=kt(e,t).getOrThunk((()=>{var r=Te.fromTag(t,Le(e).dom);return"thead"===t?zi(e,"caption,colgroup",r):"colgroup"===t?zi(e,"caption",r):Ke(e,r),r}));return Qe(r),r})(e,r),i=("colgroup"===r?a:o)(t);Xe(n,i)},l=(t,r)=>{t.length>0?i(t,r):(t=>{kt(e,t).each(Ze)})(r)},s=[],d=[],c=[],m=[];return L(t,(e=>{switch(e.section){case"thead":s.push(e);break;case"tbody":d.push(e);break;case"tfoot":c.push(e);break;case"colgroup":m.push(e)}})),l(m,"colgroup"),l(s,"thead"),l(d,"tbody"),l(c,"tfoot"),{newRows:r,newCells:n}},$i=(e,t)=>{if(0===e.length)return 0;var r=e[0];return z(e,(e=>!t(r.element,e.element))).getOr(e.length)},Wi=(e,t,r,n)=>{var o=((e,t)=>e[t])(e,t),a="colgroup"===o.section,i=$i(o.cells.slice(r),n),l=a?1:$i(((e,t)=>P(e,(e=>Qr(e,t))))(e.slice(t),r),n);return{colspan:i,rowspan:l}},Vi=(e,t)=>{var r=P(e,(e=>P(e.cells,w)));return P(e,((n,o)=>{var a=$(n.cells,((n,a)=>{if(!1===r[o][a]){var i=Wi(e,o,a,t);return((e,t,n,o)=>{for(var a=e;a<e+n;a++)for(var i=t;i<t+o;i++)r[a][i]=!0})(o,a,i.rowspan,i.colspan),[(l=n.element,s=i.rowspan,d=i.colspan,c=n.isNew,{element:l,rowspan:s,colspan:d,isNew:c})]}return[];var l,s,d,c}));return((e,t,r,n)=>({element:e,cells:t,section:r,isNew:n}))(n.element,a,n.section,n.isNew)}))},qi=(e,t,r)=>{var n=[];L(e.colgroups,(o=>{for(var a=[],i=0;i<e.grid.columns;i++){var l=dn.getColumnAt(e,i).map((e=>lt(e.element,r,!1))).getOrThunk((()=>lt(t.colGap(),!0,!1)));a.push(l)}n.push(st(o.element,a,"colgroup",r))}));for(var o=0;o<e.grid.rows;o++){for(var a=[],i=0;i<e.grid.columns;i++){var l=dn.getAt(e,o,i).map((e=>lt(e.element,r,e.isLocked))).getOrThunk((()=>lt(t.gap(),!0,!1)));a.push(l)}var s=e.all[o],d=st(s.element,a,s.section,r);n.push(d)}return n},Ki=e=>Vi(e,Oe),Gi=(e,t)=>Y(e.all,(e=>U(e.cells,(e=>Oe(t,e.element))))),Yi=(e,t,r)=>{var n=P(t.selection,(t=>Jt(t).bind((t=>Gi(e,t))).filter(r))),o=Rt(n);return Dt(o.length>0,o)},Xi=(e,t,r,n,o)=>(a,i,l,s)=>{var d=dn.fromTable(a),c=x.from(null==s?void 0:s.section).getOrThunk(ji);return t(d,i).map((t=>{var r=((e,t)=>qi(e,t,!1))(d,l),n=e(r,t,Oe,o(l),c),a=on(n.grid);return{info:t,grid:Ki(n.grid),cursor:n.cursor,lockedColumns:a}})).bind((e=>{var t=Hi(a,e.grid),o=x.from(null==s?void 0:s.sizing).getOrThunk((()=>Co(a))),i=x.from(null==s?void 0:s.resize).getOrThunk(xi);return r(a,e.grid,e.info,{sizing:o,resize:i,section:c}),n(a),ke(a,rn),e.lockedColumns.length>0&&we(a,rn,e.lockedColumns.join(",")),x.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))},Qi=(e,t)=>Yi(e,t,S).map((e=>({cells:e,generators:t.generators,clipboard:t.clipboard}))),Zi=(e,t)=>Yi(e,t,S),Ji=(e,t)=>Yi(e,t,(e=>!e.isLocked)),el=(e,t)=>W(t,(t=>((e,t)=>Gi(e,t).exists((e=>!e.isLocked)))(e,t))),tl=(e,t,r,n)=>{for(var o=en(e).rows,a=!0,i=0;i<o.length;i++)for(var l=0;l<Jr(o[0]);l++){var s=o[i],d=Qr(s,l),c=r(d.element,t);c&&!a?Yr(s,l,lt(n(),!0,d.isLocked)):c&&(a=!1)}return e},rl=(e,t,r,n)=>{var o=en(e).rows;if(t>0&&t<o.length){var a=((e,t)=>j(e,((e,r)=>O(e,(e=>t(e.element,r.element)))?e:e.concat([r])),[]))(o[t-1].cells,r);L(a,(e=>{for(var a=x.none(),i=t;i<o.length;i++)for(var l=function(t){var l=o[i],s=Qr(l,t);r(s.element,e.element)&&(a.isNone()&&(a=x.some(n())),a.each((e=>{Yr(l,t,lt(e,!0,s.isLocked))})))},s=0;s<Jr(o[0]);s++)l(s)}))}return e},nl=e=>{var t=t=>t(e),r=p(e),n=()=>o,o={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:S,isError:w,map:t=>al.value(t(e)),mapError:n,bind:t,exists:t,forall:t,getOr:r,or:n,getOrThunk:r,orThunk:n,getOrDie:r,each:t=>{t(e)},toOptional:()=>x.some(e)};return o},ol=e=>{var t,r=()=>n,n={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:w,isError:S,map:r,mapError:t=>al.error(t(e)),bind:r,exists:w,forall:S,getOr:v,or:v,getOrThunk:C,orThunk:C,getOrDie:(t=String(e),()=>{throw new Error(t)}),each:g,toOptional:x.none};return n},al={value:nl,error:ol,fromOption:(e,t)=>e.fold((()=>ol(t)),nl)},il=(e,t)=>({rowDelta:0,colDelta:Jr(e[0])-Jr(t[0])}),ll=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),sl=(e,t,r,n)=>{var o="colgroup"===t.section?r.col:r.cell;return B(e,(e=>lt(o(),!0,n(e))))},dl=(e,t,r,n)=>{var o=e[e.length-1];return e.concat(B(t,(()=>{var e="colgroup"===o.section?r.colgroup:r.row,t=tn(o,e,v),a=sl(t.cells.length,t,r,(e=>oe(n,e.toString())));return Xr(t,a)})))},cl=(e,t,r,n)=>P(e,(e=>{var o=sl(t,e,r,w);return Kr(e,n,o)})),ml=(e,t,r)=>{var n=t.colDelta<0?cl:v,o=t.rowDelta<0?dl:v,a=on(e),i=Jr(e[0]),l=O(a,(e=>e===i-1)),s=n(e,Math.abs(t.colDelta),r,l?i-1:i),d=on(s);return o(s,Math.abs(t.rowDelta),r,V(d,S))},ul=(e,t,r,n)=>{var o=b(n,Qr(e[t],r).element),a=e[t];return e.length>1&&Jr(a)>1&&(r>0&&o(Zr(a,r-1))||r<a.cells.length-1&&o(Zr(a,r+1))||t>0&&o(Zr(e[t-1],r))||t<e.length-1&&o(Zr(e[t+1],r)))},fl=(e,t,r)=>I(r,(r=>r>=e.column&&r<=Jr(t[0])+e.column)),gl=(e,t,r,o,a)=>{var i=on(t),l=((e,t,r)=>{var n=Jr(t[0]),o=en(t).cols.length+e.row,a=B(n-e.column,(t=>t+e.column)),i=U(a,(e=>W(r,(t=>t!==e)))).getOr(n-1);return{row:o,column:i}})(e,t,i),s=en(r).rows,d=fl(l,s,i),c=((e,t,r)=>{if(e.row>=t.length||e.column>Jr(t[0]))return al.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);var n=t.slice(e.row),o=n[0].cells.slice(e.column),a=Jr(r[0]),i=r.length;return al.value({rowDelta:n.length-i,colDelta:o.length-a})})(l,t,s);return c.map((e=>{var r=n(n({},e),{},{colDelta:e.colDelta-d.length}),i=ml(t,r,o),c=on(i),m=fl(l,s,c);return((e,t,r,n,o,a)=>{for(var i=e.row,l=e.column,s=i+r.length,d=l+Jr(r[0])+a.length,c=V(a,S),m=i;m<s;m++)for(var u=0,f=l;f<d;f++)if(c[f])u++;else{ul(t,m,f,o)&&tl(t,Zr(t[m],f),o,n.cell);var g=f-l-u,p=Qr(r[m-i],g),v=p.element,h=n.replace(v);Yr(t[m],f,lt(h,!0,p.isLocked))}return t})(l,i,s,o,a,m)}))},pl=(e,t,r,n,o)=>{((e,t,r,n)=>{t>0&&t<e[0].cells.length&&L(e,(e=>{for(var o=e.cells[t-1],a=0,i=n();e.cells.length>t+a&&r(o.element,e.cells[t+a].element);)Yr(e,t+a,lt(i,!0,e.cells[t+a].isLocked)),a++}))})(t,e,o,n.cell);var a=ll(r,t),i=ml(r,a,n),l=ll(t,i),s=ml(t,l,n);return P(s,((t,r)=>Kr(t,e,i[r].cells)))},vl=(e,t,r,o,a)=>{rl(t,e,a,o.cell);var i=on(t),l=il(t,r),s=n(n({},l),{},{colDelta:l.colDelta-i.length}),d=ml(t,s,o),c=en(d),m=c.cols,u=c.rows,f=on(d),g=il(r,t),p=n(n({},g),{},{colDelta:g.colDelta+f.length}),v=((e,t,r)=>P(e,(e=>j(r,((r,n)=>{var o=sl(1,e,t,S)[0];return Gr(r,n,o)}),e))))(r,o,f),h=ml(v,p,o);return[...m,...u.slice(0,e),...h,...u.slice(e,u.length)]},hl=(e,t,r,n,o)=>{var a=en(e),i=a.rows,l=a.cols,s=i.slice(0,t),d=i.slice(t),c=((e,t,r,n)=>tn(e,(e=>n(e,r)),t))(i[r],((e,r)=>t>0&&t<i.length&&n(Zr(i[t-1],r),Zr(i[t],r))?Qr(i[t],r):lt(o(e.element,n),!0,e.isLocked)),n,o);return[...l,...s,c,...d]},bl=(e,t,r,n,o)=>P(e,(e=>{var a=t>0&&t<Jr(e)&&n(Zr(e,t-1),Zr(e,t)),i=((e,t,r,n,o,a,i)=>{if("colgroup"!==r&&n)return Qr(e,t);var l=Qr(e,o);return lt(i(l.element,a),!0,!1)})(e,t,e.section,a,r,n,o);return Gr(e,t,i)})),yl=(e,t,r,n)=>((e,t,r,n)=>void 0!==Zr(e[t],r)&&t>0&&n(Zr(e[t-1],r),Zr(e[t],r)))(e,t,r,n)||((e,t,r)=>t>0&&r(Zr(e,t-1),Zr(e,t)))(e[t],r,n),Cl=(e,t,r,n)=>{var o=e=>"row"===e?(e=>qt(e,"rowspan")>1)(t):Kt(t),a=e=>o(e)?`${e}group`:e;return e?ki(t)?a(r):null:n&&ki(t)?a("row"===r?"col":"row"):null},wl=(e,t,r)=>lt(r(e.element,t),!0,e.isLocked),Sl=(e,t,r,n,o,a,i)=>P(e,((e,l)=>((e,t)=>{var r=e.cells,n=P(r,t);return st(e.element,n,e.section,e.isNew)})(e,((e,s)=>{if((e=>O(t,(t=>r(e.element,t.element))))(e)){var d=i(e,l,s)?o(e,r,n):e;return a(d,l,s).each((e=>{var t,r;t=d.element,r={scope:x.from(e)},Z(r,((e,r)=>{e.fold((()=>{ke(t,r)}),(e=>{Ce(t.dom,r,e)}))}))})),d}return e})))),xl=(e,t,r)=>$(e,((n,o)=>yl(e,o,t,r)?[]:[Qr(n,t)])),El=(e,t,r,n,o)=>{var a=en(e).rows,i=$(t,(e=>xl(a,e,n))),l=P(a,(e=>_i(e.cells))),s=((e,t)=>W(t,v)&&_i(e)?S:(e,r,n)=>!("th"===ce(e.element)&&t[r]))(i,l),d=((e,t)=>(r,n)=>x.some(Cl(e,r.element,"row",t[n])))(r,l);return Sl(e,i,n,o,wl,d,s)},kl=(e,t,r,n,o,a,i)=>{var l=en(e),s=l.cols,d=l.rows,c=d[t[0]],m=$(t,(e=>((e,t,r)=>{var n=e[t];return $(n.cells,((n,o)=>yl(e,t,o,r)?[]:[n]))})(d,e,o))),u=P(c.cells,((e,t)=>_i(xl(d,t,o)))),f=[...d];L(t,(e=>{f[e]=i.transformRow(d[e],r)}));var g=[...s,...f],p=((e,t)=>W(t,v)&&_i(e.cells)?S:(e,r,n)=>!("th"===ce(e.element)&&t[n]))(c,u),h=((e,t)=>(r,n,o)=>x.some(Cl(e,r.element,"col",t[o])))(n,u);return Sl(g,m,o,a,i.transformCell,h,p)},_l=(e,t,r,n)=>{var o=en(e).rows,a=P(t,(e=>Qr(o[e.row],e.column)));return Sl(e,a,r,n,wl,x.none,S)},Nl=e=>{if(!l(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],r={};return L(e,((n,o)=>{var a=X(n);if(1!==a.length)throw new Error("one and only one name per case");var i=a[0],s=n[i];if(void 0!==r[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!l(s))throw new Error("case arguments must be an array");t.push(i),r[i]=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var l=n.length;if(l!==s.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+s.length+" ("+s+"), got "+l);return{fold:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+r.length);return r[o].apply(null,n)},match:e=>{var r=X(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!W(t,(e=>A(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}})),r},Tl=Nl([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Rl=n({},Tl),Dl=(e,t,r,n,o)=>{var a=e.slice(0),i=((e,t)=>0===e.length?Rl.none():1===e.length?Rl.only(0):0===t?Rl.left(0,1):t===e.length-1?Rl.right(t-1,t):t>0&&t<e.length-1?Rl.middle(t-1,t,t+1):Rl.none())(e,t),l=p(P(a,p(0)));return i.fold(l,(e=>n.singleColumnWidth(a[e],r)),((e,t)=>o.calcLeftEdgeDeltas(a,e,t,r,n.minCellWidth(),n.isRelative)),((e,t,i)=>o.calcMiddleDeltas(a,e,t,i,r,n.minCellWidth(),n.isRelative)),((e,t)=>o.calcRightEdgeDeltas(a,e,t,r,n.minCellWidth(),n.isRelative)))},Al=(e,t)=>dn.hasColumns(e)?((e,t)=>{var r=dn.justColumns(e);return P(r,((e,r)=>({element:e.element,width:t[r],colspan:e.colspan})))})(e,t):((e,t)=>{var r=dn.justCells(e);return P(r,(e=>{var r=((e,t,r)=>{for(var n=0,o=e;o<t;o++)n+=void 0!==r[o]?r[o]:0;return n})(e.column,e.column+e.colspan,t);return{element:e.element,width:r,colspan:e.colspan}}))})(e,t),Ol=(e,t,r)=>{var n=Al(e,t);L(n,(e=>{r.setElementWidth(e.element,e.width)}))},Bl=(e,t,r,n,o)=>{var a=dn.fromTable(e),i=o.getCellDelta(t),l=o.getWidths(a,o),s=r===a.grid.columns-1,d=n.clampTableDelta(l,r,i,o.minCellWidth(),s),c=Dl(l,r,d,o,n),m=P(c,((e,t)=>e+l[t]));Ol(a,m,o),n.resizeTable(o.adjustTableWidth,d,s)},Pl=(e,t,r)=>{var n=dn.fromTable(e),o=((e,t)=>po(e,t,no,(e=>e.getOrThunk(Xt))))(n,e),a=P(o,((e,n)=>r===n?Math.max(t+e,Xt()):e)),i=((e,t)=>P(e.all,((e,r)=>({element:e.element,height:t[r]}))))(n,a);L(i,(e=>{Xn(e.element,e.height)})),L(dn.justCells(n),(e=>{(e=>{Wt(e,"height")})(e.element)}));var l=F(a,((e,t)=>e+t),0);Xn(e,l)},Ll=e=>j(e,((e,t)=>O(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),Ml=ye("col"),Il=ye("colgroup"),Fl=e=>"tr"===ce(e)||Il(e),jl=e=>({element:e,colspan:Vt(e,"colspan",1),rowspan:Vt(e,"rowspan",1)}),Ul=e=>Ee(e,"scope").map((e=>e.substr(0,3))),zl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jl,r=r=>{if(Fl(r))return Il((o={element:r}).element)?e.colgroup(o):e.row(o);var o,a=r,i=(t=>Ml(t.element)?e.col(t):e.cell(t))(t(a));return n=x.some({item:a,replacement:i}),i},n=x.none();return{getOrInit:(e,t)=>n.fold((()=>r(e)),(n=>t(e,n.item)?n.replacement:r(e)))}},Hl=e=>t=>{var r=[],n=n=>{var o="td"===e?{scope:null}:{},a=t.replace(n,e,o);return r.push({item:n,sub:a}),a};return{replaceOrInit:(e,t)=>{if(Fl(e)||Ml(e))return e;var o=e;return((e,t)=>U(r,(r=>t(r.item,e))))(o,t).fold((()=>n(o)),(r=>t(e,r.item)?r.sub:n(o)))}}},$l=e=>({unmerge:t=>{var r=Ul(t);return r.each((e=>we(t,"scope",e))),()=>{var n=e.cell({element:t,colspan:1,rowspan:1});return Wt(n,"width"),Wt(t,"width"),r.each((e=>we(n,"scope",e))),n}},merge:e=>(Wt(e[0],"width"),(()=>{var t=Rt(P(e,Ul));if(0===t.length)return x.none();var r=t[0],n=["row","col"];return O(t,(e=>e!==r&&A(n,e)))?x.none():x.from(r)})().fold((()=>ke(e[0],"scope")),(t=>we(e[0],"scope",t+"group"))),p(e[0]))}),Wl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Vl=Oa(),ql=e=>((e,t)=>{var r=e.property().name(t);return A(Wl,r)})(Vl,e),Kl=e=>((e,t)=>{var r=e.property().name(t);return A(["ol","ul"],r)})(Vl,e),Gl=e=>((e,t)=>A(["br","img","hr","input"],e.property().name(t)))(Vl,e),Yl=e=>{var t,r=ye("br"),n=e=>Bo(e).bind((t=>{var n=ze(t).map((e=>!!ql(e)||!!Gl(e)&&"img"!==ce(e))).getOr(!1);return Ie(t).map((o=>!0===n||(e=>"li"===ce(e)||St(e,Kl).isSome())(o)||r(t)||ql(o)&&!Oe(e,o)?[]:[Te.fromTag("br")]))})).getOr([]),o=(t=$(e,(e=>{var t=He(e);return(e=>W(e,(e=>r(e)||ve(e)&&0===_o(e).trim().length)))(t)?[]:t.concat(n(e))})),0===t.length?[Te.fromTag("br")]:t);Qe(e[0]),Xe(e[0],o)},Xl=e=>da(e,!0),Ql=e=>{0===er(e).length&&Ze(e)},Zl=(e,t)=>({grid:e,cursor:t}),Jl=(e,t,r)=>{var n,o,a=en(e).rows;return x.from(null===(o=null===(n=a[t])||void 0===n?void 0:n.cells[r])||void 0===o?void 0:o.element).filter(Xl).orThunk((()=>(e=>Y(e,(e=>Y(e.cells,(e=>{var t=e.element;return Dt(Xl(t),t)})))))(a)))},es=(e,t,r)=>{var n=Jl(e,t,r);return Zl(e,n)},ts=e=>j(e,((e,t)=>O(e,(e=>e.row===t.row))?e:e.concat([t])),[]).sort(((e,t)=>e.row-t.row)),rs=(e,t)=>(r,n,o,a,i)=>{var l=ts(n),s=P(l,(e=>e.row)),d=kl(r,s,e,t,o,a.replaceOrInit,i);return es(d,n[0].row,n[0].column)},ns=rs("thead",!0),os=rs("tbody",!1),as=rs("tfoot",!1),is=(e,t,r)=>{var n=((e,t)=>ar(e,(()=>t)))(e,r.section),o=dn.generate(n);return qi(o,t,!0)},ls=(e,t,r,n)=>((e,t,r,n)=>{var o=dn.generate(t),a=n.getWidths(o,n);Ol(o,a,n)})(0,t,0,n.sizing),ss=(e,t,r,n)=>((e,t,r,n,o)=>{var a=dn.generate(t),i=n.getWidths(a,n),l=n.pixelWidth(),s=o.calcRedestributedWidths(i,l,r.pixelDelta,n.isRelative),d=s.newSizes,c=s.delta;Ol(a,d,n),n.adjustTableWidth(c)})(0,t,r,n.sizing,n.resize),ds=(e,t)=>O(t,(e=>0===e.column&&e.isLocked)),cs=(e,t)=>O(t,(t=>t.column+t.colspan>=e.grid.columns&&t.isLocked)),ms=(e,t)=>{var r=cn(e),n=Ll(t);return j(n,((e,t)=>e+r[t.column].map(Wr).getOr(0)),0)},us=e=>(t,r)=>Zi(t,r).filter((r=>!(e?ds:cs)(t,r))).map((e=>({details:e,pixelDelta:ms(t,e)}))),fs=e=>(t,r)=>Qi(t,r).filter((r=>!(e?ds:cs)(t,r.cells))),gs=Hl("th"),ps=Hl("td"),vs=Xi(((e,t,r,n)=>{var o=t[0].row,a=ts(t),i=F(a,((e,t)=>({grid:hl(e.grid,o,t.row+e.delta,r,n.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return es(i,o,t[0].column)}),Zi,g,g,zl),hs=Xi(((e,t,r,n)=>{var o=ts(t),a=o[o.length-1],i=a.row+a.rowspan,l=F(o,((e,t)=>hl(e,i,t.row,r,n.getOrInit)),e);return es(l,i,t[0].column)}),Zi,g,g,zl),bs=Xi(((e,t,r,n)=>{var o=t.details,a=Ll(o),i=a[0].column,l=F(a,((e,t)=>({grid:bl(e.grid,i,t.column+e.delta,r,n.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return es(l,o[0].row,i)}),us(!0),ss,g,zl),ys=Xi(((e,t,r,n)=>{var o=t.details,a=o[o.length-1],i=a.column+a.colspan,l=Ll(o),s=F(l,((e,t)=>bl(e,i,t.column,r,n.getOrInit)),e);return es(s,o[0].row,i)}),us(!1),ss,g,zl),Cs=Xi(((e,t,r,n)=>{var o=Ll(t.details),a=((e,t)=>$(e,(e=>{var r=e.cells,n=F(t,((e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e),r);return n.length>0?[st(e.element,n,e.section,e.isNew)]:[]})))(e,P(o,(e=>e.column))),i=a.length>0?a[0].cells.length-1:0;return es(a,o[0].row,Math.min(o[0].column,i))}),((e,t)=>Ji(e,t).map((t=>({details:t,pixelDelta:-ms(e,t)})))),ss,Ql,zl),ws=Xi(((e,t,r,n)=>{var o=ts(t),a=((e,t,r)=>{var n=en(e),o=n.rows;return[...n.cols,...o.slice(0,t),...o.slice(r+1)]})(e,o[0].row,o[o.length-1].row),i=Math.max(en(a).rows.length-1,0);return es(a,Math.min(t[0].row,i),t[0].column)}),Zi,g,Ql,zl),Ss=Xi(((e,t,r,n)=>{var o=Ll(t),a=P(o,(e=>e.column)),i=El(e,a,!0,r,n.replaceOrInit);return es(i,t[0].row,t[0].column)}),Ji,g,g,gs),xs=Xi(((e,t,r,n)=>{var o=Ll(t),a=P(o,(e=>e.column)),i=El(e,a,!1,r,n.replaceOrInit);return es(i,t[0].row,t[0].column)}),Ji,g,g,ps),Es=Xi(ns,Ji,g,g,gs),ks=Xi(os,Ji,g,g,ps),_s=Xi(as,Ji,g,g,ps),Ns=Xi(((e,t,r,n)=>{var o=_l(e,t,r,n.replaceOrInit);return es(o,t[0].row,t[0].column)}),Ji,g,g,gs),Ts=Xi(((e,t,r,n)=>{var o=_l(e,t,r,n.replaceOrInit);return es(o,t[0].row,t[0].column)}),Ji,g,g,ps),Rs=Xi(((e,t,r,n)=>{var o=t.cells;Yl(o);var a=((e,t,r,n)=>{var o=en(e).rows;if(0===o.length)return e;for(var a=t.startRow;a<=t.finishRow;a++)for(var i=t.startCol;i<=t.finishCol;i++){var l=o[a],s=Qr(l,i).isLocked;Yr(l,i,lt(n(),!1,s))}return e})(e,t.bounds,0,n.merge(o));return Zl(a,x.from(o[0]))}),((e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>el(e,t.cells)))),ls,g,$l),Ds=Xi(((e,t,r,n)=>{var o=F(t,((e,t)=>tl(e,t,r,n.unmerge(t))),e);return Zl(o,x.from(t[0]))}),((e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>el(e,t)))),ls,g,$l),As=Xi(((e,t,r,n)=>{var o=((e,t)=>{var r=dn.fromTable(e);return qi(r,t,!0)})(t.clipboard,t.generators),a=((e,t)=>({row:e,column:t}))(t.row,t.column);return gl(a,e,o,t.generators,r).fold((()=>Zl(e,x.some(t.element))),(e=>es(e,t.row,t.column)))}),((e,t)=>Jt(t.element).bind((r=>Gi(e,r).map((e=>n(n({},e),{},{generators:t.generators,clipboard:t.clipboard})))))),ls,g,zl),Os=Xi(((e,t,r,n)=>{var o=en(e).rows,a=t.cells[0].column,i=o[t.cells[0].row],l=is(t.clipboard,t.generators,i),s=pl(a,e,l,t.generators,r);return es(s,t.cells[0].row,t.cells[0].column)}),fs(!0),g,g,zl),Bs=Xi(((e,t,r,n)=>{var o=en(e).rows,a=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,i=o[t.cells[0].row],l=is(t.clipboard,t.generators,i),s=pl(a,e,l,t.generators,r);return es(s,t.cells[0].row,a)}),fs(!1),g,g,zl),Ps=Xi(((e,t,r,n)=>{var o=en(e).rows,a=t.cells[0].row,i=o[a],l=is(t.clipboard,t.generators,i),s=vl(a,e,l,t.generators,r);return es(s,t.cells[0].row,t.cells[0].column)}),Qi,g,g,zl),Ls=Xi(((e,t,r,n)=>{var o=en(e).rows,a=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,i=o[t.cells[0].row],l=is(t.clipboard,t.generators,i),s=vl(a,e,l,t.generators,r);return es(s,a,t.cells[0].column)}),Qi,g,g,zl),Ms=(e,t)=>{var r=dn.fromTable(e);return Zi(r,t).bind((e=>{var t=e[e.length-1],n=e[0].column,o=t.column+t.colspan,a=H(P(r.all,(e=>I(e.cells,(e=>e.column>=n&&e.column<o)))));return Ri(a)})).getOr("")},Is=(e,t)=>{var r=dn.fromTable(e);return Zi(r,t).bind(Ri).getOr("")},Fs=(e,t)=>{var r=dn.fromTable(e);return Zi(r,t).bind((e=>{var t=e[e.length-1],n=e[0].row,o=t.row+t.rowspan;return(e=>{var t=P(e,(e=>Ti(e).type)),r=A(t,"header"),n=A(t,"footer");if(r||n){var o=A(t,"body");return!r||o||n?r||o||!n?x.none():x.some("footer"):x.some("header")}return x.some("body")})(r.all.slice(n,o))})).getOr("")},js=(e,t)=>e.dispatch("NewRow",{node:t}),Us=(e,t)=>e.dispatch("NewCell",{node:t}),zs=(e,t,r)=>{e.dispatch("TableModified",n(n({},r),{},{table:t}))},Hs={structure:!1,style:!0},$s={structure:!0,style:!1},Ws={structure:!0,style:!0},Vs=(e,t)=>Jo(e)?So(t):ea(e)?wo(t):Co(t),qs=(e,t,r)=>{var n=e=>"table"===ce(ma(e)),o=Ko(e),a=Qo(e)?g:vi,i=t=>{switch(Go(e)){case"section":return Mi();case"sectionCells":return Ii();case"cells":return Fi();default:return Li(t,"section")}},l=(t,n)=>n.cursor.fold((()=>{var n=er(t);return K(n).filter(pt).map((n=>{r.clearSelectedCells(t.dom);var o=e.dom.createRng();return o.selectNode(n.dom),e.selection.setRng(o),we(n,"data-mce-selected","1"),o}))}),(n=>{var o=gi(pi,n),a=e.dom.createRng();return a.setStart(o.element.dom,o.offset),a.setEnd(o.element.dom,o.offset),e.selection.setRng(a),r.clearSelectedCells(t.dom),x.some(a)})),s=(r,n,a,s)=>function(d,c){var m=arguments.length>2&&void 0!==arguments[2]&&arguments[2];fa(d);var u=Te.fromDom(e.getDoc()),f=Ho(a,u,o),g={sizing:Vs(e,d),resize:Qo(e)?Si():xi(),section:i(d)};return n(d)?r(d,c,f,g).bind((r=>{t.refresh(d.dom),L(r.newRows,(t=>{js(e,t.dom)})),L(r.newCells,(t=>{Us(e,t.dom)}));var n=l(d,r);return pt(d)&&(fa(d),m||zs(e,d.dom,s)),n.map((e=>({rng:e,effect:s})))})):x.none()},d=s(ws,(t=>!n(e)||Ei(t).rows>1),g,$s),c=s(Cs,(t=>!n(e)||Ei(t).columns>1),g,$s);return{deleteRow:d,deleteColumn:c,insertRowsBefore:s(vs,S,g,$s),insertRowsAfter:s(hs,S,g,$s),insertColumnsBefore:s(bs,S,a,$s),insertColumnsAfter:s(ys,S,a,$s),mergeCells:s(Rs,S,g,$s),unmergeCells:s(Ds,S,g,$s),pasteColsBefore:s(Os,S,g,$s),pasteColsAfter:s(Bs,S,g,$s),pasteRowsBefore:s(Ps,S,g,$s),pasteRowsAfter:s(Ls,S,g,$s),pasteCells:s(As,S,g,Ws),makeCellsHeader:s(Ns,S,g,$s),unmakeCellsHeader:s(Ts,S,g,$s),makeColumnsHeader:s(Ss,S,g,$s),unmakeColumnsHeader:s(xs,S,g,$s),makeRowsHeader:s(Es,S,g,$s),makeRowsBody:s(ks,S,g,$s),makeRowsFooter:s(_s,S,g,$s),getTableRowType:Fs,getTableCellType:Is,getTableColType:Ms}},Ks=(e,t,r)=>{var n=Vt(e,t,1);1===r||n<=1?ke(e,t):we(e,t,Math.min(r,n))},Gs=(e,t)=>r=>{var n=r.column+r.colspan-1,o=r.column;return n>=e&&o<t},Ys=(e,t)=>{var r=dn.fromTable(e);return Ji(r,t).map((e=>{var t=e[e.length-1],n=e[0].column,o=t.column+t.colspan,a=((e,t,r)=>{if(dn.hasColumns(e)){var n=I(dn.justColumns(e),Gs(t,r)),o=P(n,(e=>{var n=rt(e.element);return Ks(n,"span",r-t),n})),a=Te.fromTag("colgroup");return Xe(a,o),[a]}return[]})(r,n,o),i=((e,t,r)=>P(e.all,(e=>{var n=I(e.cells,Gs(t,r)),o=P(n,(e=>{var n=rt(e.element);return Ks(n,"colspan",r-t),n})),a=Te.fromTag("tr");return Xe(a,o),a})))(r,n,o);return[...a,...i]}))},Xs=(e,t,r)=>{var o=dn.fromTable(e);return Zi(o,t).bind((e=>{var t=qi(o,r,!1),a=en(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),i=$(a,(e=>{var t=I(e.cells,(e=>!e.isLocked));return t.length>0?[n(n({},e),{},{cells:t})]:[]})),l=Ki(i);return Dt(l.length>0,l)})).map((e=>(e=>P(e,(e=>{var t=tt(e.element);return L(e.cells,(e=>{var r=rt(e.element);Ui(r,"colspan",e.colspan,1),Ui(r,"rowspan",e.rowspan,1),Ke(t,r)})),t})))(e)))},Qs=Nl([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Zs=(e,t,r)=>{var n=r.substring(0,r.length-e.length),o=parseFloat(n);return n===o.toString()?t(o):Qs.invalid(r)},Js=n(n({},Qs),{},{from:e=>Pt(e,"%")?Zs("%",Qs.percent,e):Pt(e,"px")?Zs("px",Qs.pixels,e):Qs.invalid(e)}),ed=(e,t,r)=>e.fold((()=>t),(e=>((e,t,r)=>{var n=r/t;return P(e,(e=>Js.from(e).fold((()=>e),(e=>e*n+"px"),(e=>e/100*r+"px"))))})(t,r,e)),(e=>((e,t)=>P(e,(e=>Js.from(e).fold((()=>e),(e=>e/t*100+"%"),(e=>e+"%")))))(t,r))),td=(e,t,r)=>{var n=Js.from(r),o=W(e,(e=>"0px"===e))?((e,t)=>{var r=e.fold((()=>p("")),(e=>p(e/t+"px")),(()=>p(100/t+"%")));return B(t,r)})(n,e.length):ed(n,e,t);return od(o)},rd=(e,t)=>0===e.length?t:F(e,((e,t)=>Js.from(t).fold(p(0),v,v)+e),0),nd=(e,t)=>Js.from(e).fold(p(e),(e=>e+t+"px"),(e=>e+t+"%")),od=e=>{if(0===e.length)return e;var t=F(e,((e,t)=>{var r=Js.from(t).fold((()=>({value:t,remainder:0})),(e=>((e,t)=>{var r=Math.floor(e);return{value:r+t,remainder:e-r}})(e,"px")),(e=>({value:e+"%",remainder:0})));return{output:[r.value].concat(e.output),remainder:e.remainder+r.remainder}}),{output:[],remainder:0}),r=t.output;return r.slice(0,r.length-1).concat([nd(r[r.length-1],Math.round(t.remainder))])},ad=Js.from,id=(e,t,r)=>{var n=dn.fromTable(e),o=n.all,a=dn.justCells(n),i=dn.justColumns(n);t.each((t=>{var r=ad(t).fold(p("px"),p("px"),p("%")),o=$r(e),l=((e,t)=>uo(e,t,so,fo))(n,e),s=td(l,o,t);dn.hasColumns(n)?((e,t,r)=>{L(t,((t,n)=>{var o=rd([e[n]],Yt());jt(t.element,"width",o+r)}))})(s,i,r):((e,t,r)=>{L(t,(t=>{var n=e.slice(t.column,t.colspan+t.column),o=rd(n,Yt());jt(t.element,"width",o+r)}))})(s,a,r),jt(e,"width",t)})),r.each((t=>{var r=hn(e),i=((e,t)=>po(e,t,co,fo))(n,e);((e,t,r)=>{L(r,(e=>{Wt(e.element,"height")})),L(t,((t,r)=>{jt(t.element,"height",e[r])}))})(td(i,r,t),o,a),jt(e,"height",t)}))},ld=e=>eo(e).exists((e=>$n.test(e))),sd=e=>eo(e).exists((e=>Wn.test(e))),dd=e=>eo(e).isNone(),cd=e=>{ke(e,"width"),ke(e,"height")},md=e=>{var t=ao(e);id(e,x.some(t),x.none()),cd(e)},ud=e=>{var t=(e=>$r(e)+"px")(e);id(e,x.some(t),x.none()),cd(e)},fd=e=>{var t=(e=>hn(e)+"px")(e);id(e,x.none(),x.some(t)),cd(e)},gd=e=>{Wt(e,"width");var t=tr(e),r=t.length>0?t:er(e);L(r,(e=>{Wt(e,"width"),cd(e)})),cd(e)},pd={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},vd=e=>{var t=Te.fromTag("colgroup");return B(e,(()=>Ke(t,Te.fromTag("col")))),t},hd=(e,t,r,n)=>B(e,(e=>((e,t,r,n)=>{for(var o=Te.fromTag("tr"),a=0;a<e;a++){var i=n<t||a<r?Te.fromTag("th"):Te.fromTag("td");a<r&&we(i,"scope","row"),n<t&&we(i,"scope","col"),Ke(i,Te.fromTag("br")),Ke(o,i)}return o})(t,r,n,e))),bd=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},yd=(e,t,r,n,o)=>{var i=ia(e),l={styles:i,attributes:aa(e),colGroups:la(e)};return e.undoManager.ignore((()=>{var a=function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pd,i=Te.fromTag("table"),l="cells"!==o;Ut(i,a.styles),Se(i,a.attributes),a.colGroups&&Ke(i,vd(t));var s=Math.min(e,r);if(l&&r>0){var d=Te.fromTag("thead");Ke(i,d);var c=hd(r,t,"sectionCells"===o?s:0,n);Xe(d,c)}var m=Te.fromTag("tbody");Ke(i,m);var u=hd(l?e-s:e,t,l?0:r,n);return Xe(m,u),i}(r,t,o,n,Go(e),l);we(a,"data-mce-id","__mce");var i=(e=>{var t=Te.fromTag("div"),r=Te.fromDom(e.dom.cloneNode(!0));return Ke(t,r),(e=>e.dom.innerHTML)(t)})(a);e.insertContent(i),e.addVisual()})),_t(ma(e),'table[data-mce-id="__mce"]').map((t=>(ea(e)?ud(t):ta(e)?gd(t):(Jo(e)||(e=>a(e)&&-1!==e.indexOf("%"))(i.width))&&md(t),fa(t),ke(t,"data-mce-id"),((e,t)=>{L(Ct(t,"tr"),(t=>{js(e,t.dom),L(Ct(t,"th,td"),(t=>{Us(e,t.dom)}))}))})(e,t),((e,t)=>{_t(t,"td,th").each(b(bd,e))})(e,t),t.dom))).getOrNull()},Cd=tinymce.util.Tools.resolve("tinymce.FakeClipboard"),wd="x-tinymce/dom-table-",Sd=wd+"rows",xd=wd+"columns",Ed=e=>{var t=Cd.FakeClipboardItem(e);Cd.write([t])},kd=e=>{var t,r=null!==(t=Cd.read())&&void 0!==t?t:[];return Y(r,(t=>x.from(t.getType(e))))},_d=e=>{kd(e).isSome()&&Cd.clear()},Nd=e=>{e.fold(Rd,(e=>Ed({[Sd]:e})))},Td=()=>kd(Sd),Rd=()=>_d(Sd),Dd=e=>{e.fold(Od,(e=>Ed({[xd]:e})))},Ad=()=>kd(xd),Od=()=>_d(xd),Bd=e=>ii(ga(e),ua(e)).filter(Ca),Pd=(e,t)=>{var r=ua(e),n=e=>rr(e,r),o=t=>(e=>li(ga(e),ua(e)).filter(Ca))(e).bind((e=>n(e).map((r=>t(r,e))))),l=t=>{e.focus()},s=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o(((n,o)=>{var a=oi(si(e),n,o);t(n,a,r).each(l)}))},d=()=>o(((t,r)=>{var n=oi(si(e),t,r),o=Ho(g,Te.fromDom(e.getDoc()),x.none());return Xs(t,n,o)})),c=()=>o(((t,r)=>{var n=oi(si(e),t,r);return Ys(t,n)})),m=(t,r)=>r().each((r=>{var n=P(r,(e=>rt(e)));o(((r,o)=>{var a=$o(Te.fromDom(e.getDoc())),i=((e,t,r,n)=>({selection:qa(e),clipboard:r,generators:n}))(si(e),0,n,a);t(r,i).each(l)}))})),u=e=>(t,r)=>((e,t)=>oe(e,t)?x.from(e[t]):x.none())(r,"type").each((t=>{s(e(t),r.no_events)}));Z({mceTableSplitCells:()=>s(t.unmergeCells),mceTableMergeCells:()=>s(t.mergeCells),mceTableInsertRowBefore:()=>s(t.insertRowsBefore),mceTableInsertRowAfter:()=>s(t.insertRowsAfter),mceTableInsertColBefore:()=>s(t.insertColumnsBefore),mceTableInsertColAfter:()=>s(t.insertColumnsAfter),mceTableDeleteCol:()=>s(t.deleteColumn),mceTableDeleteRow:()=>s(t.deleteRow),mceTableCutCol:()=>c().each((e=>{Dd(e),s(t.deleteColumn)})),mceTableCutRow:()=>d().each((e=>{Nd(e),s(t.deleteRow)})),mceTableCopyCol:()=>c().each((e=>Dd(e))),mceTableCopyRow:()=>d().each((e=>Nd(e))),mceTablePasteColBefore:()=>m(t.pasteColsBefore,Ad),mceTablePasteColAfter:()=>m(t.pasteColsAfter,Ad),mceTablePasteRowBefore:()=>m(t.pasteRowsBefore,Td),mceTablePasteRowAfter:()=>m(t.pasteRowsAfter,Td),mceTableDelete:()=>Bd(e).each((t=>{rr(t,r).filter(y(r)).each((t=>{var r=Te.fromText("");if(Ve(t,r),Ze(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{var n=e.dom.createRng();n.setStart(r.dom,0),n.setEnd(r.dom,0),e.selection.setRng(n),e.nodeChanged()}}))})),mceTableCellToggleClass:(t,r)=>{o((t=>{var n=si(e),o=W(n,(t=>e.formatter.match("tablecellclass",{value:r},t.dom))),a=o?e.formatter.remove:e.formatter.apply;L(n,(e=>a("tablecellclass",{value:r},e.dom))),zs(e,t.dom,Hs)}))},mceTableToggleClass:(t,r)=>{o((t=>{e.formatter.toggle("tableclass",{value:r},t.dom),zs(e,t.dom,Hs)}))},mceTableToggleCaption:()=>{Bd(e).each((t=>{rr(t,r).each((r=>{kt(r,"caption").fold((()=>{var t=Te.fromTag("caption");Ke(t,Te.fromText("Caption")),((e,t,r)=>{$e(e,r).fold((()=>{Ke(e,t)}),(e=>{We(e,t)}))})(r,t,0),e.selection.setCursorLocation(t.dom,0)}),(n=>{ye("caption")(t)&&Ae("td",r).each((t=>e.selection.setCursorLocation(t.dom,0))),Ze(n)})),zs(e,r.dom,$s)}))}))},mceTableSizingMode:(t,n)=>(t=>Bd(e).each((n=>{ta(e)||ea(e)||Jo(e)||rr(n,r).each((r=>{"relative"!==t||ld(r)?"fixed"!==t||sd(r)?"responsive"!==t||dd(r)||gd(r):ud(r):md(r),fa(r),zs(e,r.dom,$s)}))})))(n),mceTableCellType:u((e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader)),mceTableColType:u((e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader)),mceTableRowType:u((e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}}))},((t,r)=>e.addCommand(r,t))),e.addCommand("mceInsertTable",((t,r)=>{!function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=e=>f(e)&&e>0;if(o(t)&&o(r)){var a=n.headerRows||0,i=n.headerColumns||0;return yd(e,r,t,i,a)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")}(e,r.rows,r.columns,r.options)})),e.addCommand("mceTableApplyCellStyle",((t,r)=>{var o=e=>"tablecell"+e.toLowerCase().replace("-","");if(i(r)){var l=I(si(e),Ca);if(0!==l.length){var s=te(r,((t,r)=>e.formatter.has(o(r))&&a(t)));(e=>{for(var t in e)if(Q.call(e,t))return!1;return!0})(s)||(Z(s,((t,r)=>{var n=o(r);L(l,(r=>{""===t?e.formatter.remove(n,{value:null},r.dom,!0):e.formatter.apply(n,{value:t},r.dom)}))})),n(l[0]).each((t=>zs(e,t.dom,Hs))))}}}))},Ld=Nl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Md={before:Ld.before,on:Ld.on,after:Ld.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(v,v,v)},Id=(e,t)=>({selection:e,kill:t}),Fd=(e,t)=>{var r=e.document.createRange();return r.selectNode(t.dom),r},jd=(e,t)=>{var r=e.document.createRange();return Ud(r,t),r},Ud=(e,t)=>e.selectNodeContents(t.dom),zd=(e,t,r)=>{var n,o=e.document.createRange();return n=o,t.fold((e=>{n.setStartBefore(e.dom)}),((e,t)=>{n.setStart(e.dom,t)}),(e=>{n.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,r)=>{e.setEnd(t.dom,r)}),(t=>{e.setEndAfter(t.dom)}))})(o,r),o},Hd=(e,t,r,n,o)=>{var a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},$d=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Wd=Nl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Vd=(e,t,r)=>t(Te.fromDom(r.startContainer),r.startOffset,Te.fromDom(r.endContainer),r.endOffset),qd=(e,t)=>{var r=((e,t)=>t.match({domRange:e=>({ltr:p(e),rtl:x.none}),relative:(t,r)=>({ltr:sr((()=>zd(e,t,r))),rtl:sr((()=>x.some(zd(e,r,t))))}),exact:(t,r,n,o)=>({ltr:sr((()=>Hd(e,t,r,n,o))),rtl:sr((()=>x.some(Hd(e,n,o,t,r))))})}))(e,t);return((e,t)=>{var r=t.ltr();return r.collapsed?t.rtl().filter((e=>!1===e.collapsed)).map((e=>Wd.rtl(Te.fromDom(e.endContainer),e.endOffset,Te.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>Vd(0,Wd.ltr,r))):Vd(0,Wd.ltr,r)})(0,r)},Kd=(e,t)=>qd(e,t).match({ltr:(t,r,n,o)=>{var a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},rtl:(t,r,n,o)=>{var a=e.document.createRange();return a.setStart(n.dom,o),a.setEnd(t.dom,r),a}});Wd.ltr,Wd.rtl;var Gd=(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n}),Yd=(e,t,r,n)=>({start:Md.on(e,t),finish:Md.on(r,n)}),Xd=(e,t)=>{var r=Kd(e,t);return Gd(Te.fromDom(r.startContainer),r.startOffset,Te.fromDom(r.endContainer),r.endOffset)},Qd=Yd,Zd=(e,t,r,n,o)=>Oe(r,n)?x.none():Ua(r,n,t).bind((t=>{var n=t.boxes.getOr([]);return n.length>1?(o(e,n,t.start,t.finish),x.some(Id(x.some(Qd(r,0,r,Ro(r))),!0))):x.none()})),Jd=(e,t)=>({item:e,mode:t}),ec=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tc;return e.property().parent(t).map((e=>Jd(e,n)))},tc=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rc;return r.sibling(e,t).map((e=>Jd(e,n)))},rc=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,a=t.property().children(r);return n.first(a).map((e=>Jd(e,o)))},nc=[{current:ec,next:tc,fallback:x.none()},{current:tc,next:rc,fallback:x.some(ec)},{current:rc,next:rc,fallback:x.some(tc)}],oc=function e(t,r,n,o){return U(arguments.length>4&&void 0!==arguments[4]?arguments[4]:nc,(e=>e.current===n)).bind((n=>n.current(t,r,o,n.next).orThunk((()=>n.fallback.bind((n=>e(t,r,n,o)))))))},ac=()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?x.some(e[e.length-1]):x.none()}),ic=()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?x.some(e[0]):x.none()}),lc=(e,t,r,n,o,a)=>oc(e,t,n,o).bind((t=>a(t.item)?x.none():r(t.item)?x.some(t.item):lc(e,t.item,r,t.mode,o,a))),sc=e=>t=>0===e.property().children(t).length,dc=(e,t,r,n)=>lc(e,t,r,tc,ac(),n),cc=(e,t,r,n)=>lc(e,t,r,tc,ic(),n),mc=Oa(),uc=(e,t)=>((e,t,r)=>dc(e,t,sc(e),r))(mc,e,t),fc=(e,t)=>((e,t,r)=>cc(e,t,sc(e),r))(mc,e,t),gc=Nl([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),pc=e=>Nt(e,"tr"),vc=n(n({},gc),{},{verify:(e,t,r,n,o,a,i)=>Nt(n,"td,th",i).bind((r=>Nt(t,"td,th",i).map((t=>Oe(r,t)?Oe(n,r)&&Ro(r)===o?a(t):gc.none("in same cell"):Fa(pc,[r,t]).fold((()=>((e,t,r)=>{var n=e.getRect(t),o=e.getRect(r);return o.right>n.left&&o.left<n.right})(e,t,r)?gc.success():a(t)),(e=>a(t))))))).getOr(gc.none("default")),cata:(e,t,r,n,o)=>e.fold(t,r,n,o)}),hc=(e,t)=>z(e,b(Oe,t)),bc=ye("br"),yc=(e,t,r)=>t(e,r).bind((e=>ve(e)&&0===_o(e).trim().length?yc(e,t,r):x.some(e))),Cc=(e,t,r,n)=>((e,t)=>$e(e,t).filter(bc).orThunk((()=>$e(e,t-1).filter(bc))))(t,r).bind((t=>n.traverse(t).fold((()=>yc(t,n.gather,e).map(n.relative)),(e=>(e=>Ie(e).bind((t=>{var r=He(t);return hc(r,e).map((n=>((e,t,r,n)=>({parent:e,children:t,element:r,index:n}))(t,r,e,n)))})))(e).map((e=>Md.on(e.parent,e.index))))))),wc=(e,t,r,n)=>{var o=bc(t)?((e,t,r)=>r.traverse(t).orThunk((()=>yc(t,r.gather,e))).map(r.relative))(e,t,n):Cc(e,t,r,n);return o.map((e=>({start:e,finish:e})))},Sc=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),xc=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),Ec=(e,t,r)=>({left:e.left+t,top:e.top+r,right:e.right+t,bottom:e.bottom+r}),kc=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),_c=(e,t)=>x.some(e.getRect(t)),Nc=(e,t,r)=>pe(t)?_c(e,t).map(kc):ve(t)?((e,t,r)=>r>=0&&r<Ro(t)?e.getRangedRect(t,r,t,r+1):r>0?e.getRangedRect(t,r-1,t,r):x.none())(e,t,r).map(kc):x.none(),Tc=(e,t)=>pe(t)?_c(e,t).map(kc):ve(t)?e.getRangedRect(t,0,t,Ro(t)).map(kc):x.none(),Rc=Nl([{none:[]},{retry:["caret"]}]),Dc=(e,t,r)=>xt(t,ql).fold(w,(t=>Tc(e,t).exists((e=>((e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right)(r,e))))),Ac={point:e=>e.bottom,adjuster:(e,t,r,n,o)=>{var a=Sc(o,5);return Math.abs(r.bottom-n.bottom)<1||r.top>o.bottom?Rc.retry(a):r.top===o.bottom?Rc.retry(Sc(o,1)):Dc(e,t,o)?Rc.retry(Ec(a,5,0)):Rc.none()},move:Sc,gather:fc},Oc=(e,t,r,n,o)=>0===o?x.some(n):((e,t,r)=>e.elementFromPoint(t,r).filter((e=>"table"===ce(e))).isSome())(e,n.left,t.point(n))?((e,t,r,n,o)=>Oc(e,t,r,t.move(n,5),o))(e,t,r,n,o-1):e.situsFromPoint(n.left,t.point(n)).bind((a=>a.start.fold(x.none,(a=>Tc(e,a).bind((i=>t.adjuster(e,a,i,r,n).fold(x.none,(n=>Oc(e,t,r,n,o-1))))).orThunk((()=>x.some(n)))),x.none))),Bc=(e,t,r)=>{var n=e.move(r,5),o=Oc(t,e,r,n,100).getOr(n);return((e,t,r)=>e.point(t)>r.getInnerHeight()?x.some(e.point(t)-r.getInnerHeight()):e.point(t)<0?x.some(-e.point(t)):x.none())(e,o,t).fold((()=>t.situsFromPoint(o.left,e.point(o))),(r=>(t.scrollBy(0,r),t.situsFromPoint(o.left,e.point(o)-r))))},Pc={tryUp:b(Bc,{point:e=>e.top,adjuster:(e,t,r,n,o)=>{var a=xc(o,5);return Math.abs(r.top-n.top)<1||r.bottom<o.top?Rc.retry(a):r.bottom===o.top?Rc.retry(xc(o,1)):Dc(e,t,o)?Rc.retry(Ec(a,5,0)):Rc.none()},move:xc,gather:uc}),tryDown:b(Bc,Ac),getJumpSize:p(5)},Lc=(e,t,r)=>e.getSelection().bind((n=>wc(t,n.finish,n.foffset,r).fold((()=>x.some(ci(n.finish,n.foffset))),(o=>{var a=e.fromSitus(o);return(e=>vc.cata(e,(e=>x.none()),(()=>x.none()),(e=>x.some(ci(e,0))),(e=>x.some(ci(e,Ro(e))))))(vc.verify(e,n.finish,n.foffset,a.finish,a.foffset,r.failure,t))})))),Mc=(e,t,r,n,o,a)=>0===a?x.none():jc(e,t,r,n,o).bind((i=>{var l=e.fromSitus(i),s=vc.verify(e,r,n,l.finish,l.foffset,o.failure,t);return vc.cata(s,(()=>x.none()),(()=>x.some(i)),(i=>Oe(r,i)&&0===n?Ic(e,r,n,xc,o):Mc(e,t,i,0,o,a-1)),(i=>Oe(r,i)&&n===Ro(i)?Ic(e,r,n,Sc,o):Mc(e,t,i,Ro(i),o,a-1)))})),Ic=(e,t,r,n,o)=>Nc(e,t,r).bind((t=>Fc(e,o,n(t,Pc.getJumpSize())))),Fc=(e,t,r)=>{var n=Ir().browser;return n.isChromium()||n.isSafari()||n.isFirefox()?t.retry(e,r):x.none()},jc=(e,t,r,n,o)=>Nc(e,r,n).bind((t=>Fc(e,o,t))),Uc=(e,t)=>{return St(e,(e=>Ie(e).exists((e=>Oe(e,t)))),r).isSome();var r},zc=(e,t,r,n,o)=>Nt(n,"td,th",t).bind((n=>Nt(n,"table",t).bind((a=>Uc(o,a)?((e,t,r)=>Lc(e,t,r).bind((n=>Mc(e,t,n.element,n.offset,r,20).map(e.fromSitus))))(e,t,r).bind((e=>Nt(e.finish,"td,th",t).map((t=>({start:n,finish:t,range:e}))))):x.none())))),Hc=(e,t,r,n,o,a)=>a(n,t).orThunk((()=>zc(e,t,r,n,o).map((e=>{var t=e.range;return Id(x.some(Qd(t.start,t.soffset,t.finish,t.foffset)),!0)})))),$c=(e,t)=>Nt(e,"tr",t).bind((e=>Nt(e,"table",t).bind((r=>{var n=Ct(r,"tr");return Oe(e,n[0])?((e,t,r)=>dc(mc,e,t,r))(r,(e=>Bo(e).isSome()),t).map((e=>{var t=Ro(e);return Id(x.some(Qd(e,t,e,t)),!0)})):x.none()})))),Wc=(e,t)=>Nt(e,"tr",t).bind((e=>Nt(e,"table",t).bind((r=>{var n=Ct(r,"tr");return Oe(e,n[n.length-1])?((e,t,r)=>cc(mc,e,t,r))(r,(e=>Oo(e).isSome()),t).map((e=>Id(x.some(Qd(e,0,e,0)),!0))):x.none()})))),Vc=(e,t,r,n,o,a,i)=>zc(e,r,n,o,a).bind((e=>Zd(t,r,e.start,e.finish,i))),qc=e=>{var t=e;return{get:()=>t,set:e=>{t=e}}},Kc=()=>{var e=(e=>{var t=qc(x.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(x.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(x.some(e))}}})(g);return n(n({},e),{},{on:t=>e.get().each(t)})},Gc=(e,t)=>Nt(e,"td,th",t),Yc=e=>Fe(e).exists(da),Xc={traverse:ze,gather:fc,relative:Md.before,retry:Pc.tryDown,failure:vc.failedDown},Qc={traverse:Ue,gather:uc,relative:Md.before,retry:Pc.tryUp,failure:vc.failedUp},Zc=e=>t=>t===e,Jc=Zc(38),em=Zc(40),tm=e=>e>=37&&e<=40,rm={isBackward:Zc(37),isForward:Zc(39)},nm={isBackward:Zc(39),isForward:Zc(37)},om=Nl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),am={domRange:om.domRange,relative:om.relative,exact:om.exact,exactFromRange:e=>om.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{var t,r=(e=>e.match({domRange:e=>Te.fromDom(e.startContainer),relative:(e,t)=>Md.getStart(e),exact:(e,t,r,n)=>e}))(e);return t=r,Te.fromDom(Me(t).dom.defaultView)},range:Gd},im=(e,t,r)=>{var n,o;return x.from(null===(o=(n=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(n,t,r)).bind((t=>{if(null===t.offsetNode)return x.none();var r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),x.some(r)}))},lm=(e,t,r)=>{var n,o;return x.from(null===(o=(n=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(n,t,r))},sm=document.caretPositionFromPoint?im:document.caretRangeFromPoint?lm:x.none,dm=(e,t)=>{var r=ce(e);return"input"===r?Md.after(e):A(["br","img"],r)?0===t?Md.before(e):Md.after(e):Md.on(e,t)},cm=(e,t,r,n)=>{var o=((e,t,r,n)=>{var o=Le(e).dom.createRange();return o.setStart(e.dom,t),o.setEnd(r.dom,n),o})(e,t,r,n),a=Oe(e,r)&&t===n;return o.collapsed&&!a},mm=e=>x.from(e.getSelection()),um=(e,t)=>{mm(e).each((e=>{e.removeAllRanges(),e.addRange(t)}))},fm=(e,t,r,n,o)=>{var a=Hd(e,t,r,n,o);um(e,a)},gm=(e,t)=>qd(e,t).match({ltr:(t,r,n,o)=>{fm(e,t,r,n,o)},rtl:(t,r,n,o)=>{mm(e).each((a=>{if(a.setBaseAndExtent)a.setBaseAndExtent(t.dom,r,n.dom,o);else if(a.extend)try{((e,t,r,n,o,a)=>{t.collapse(r.dom,n),t.extend(o.dom,a)})(0,a,t,r,n,o)}catch(a){fm(e,n,o,t,r)}else fm(e,n,o,t,r)}))}}),pm=(e,t,r,n,o)=>{var a=((e,t,r,n)=>{var o=dm(e,t),a=dm(r,n);return am.relative(o,a)})(t,r,n,o);gm(e,a)},vm=(e,t,r)=>{var n=((e,t)=>{var r=e.fold(Md.before,dm,Md.after),n=t.fold(Md.before,dm,Md.after);return am.relative(r,n)})(t,r);gm(e,n)},hm=e=>{if(e.rangeCount>0){var t=e.getRangeAt(0),r=e.getRangeAt(e.rangeCount-1);return x.some(Gd(Te.fromDom(t.startContainer),t.startOffset,Te.fromDom(r.endContainer),r.endOffset))}return x.none()},bm=e=>{if(null===e.anchorNode||null===e.focusNode)return hm(e);var t=Te.fromDom(e.anchorNode),r=Te.fromDom(e.focusNode);return cm(t,e.anchorOffset,r,e.focusOffset)?x.some(Gd(t,e.anchorOffset,r,e.focusOffset)):hm(e)},ym=function(e,t){var r=(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?jd:Fd)(e,t);um(e,r)},Cm=e=>(e=>mm(e).filter((e=>e.rangeCount>0)).bind(bm))(e).map((e=>am.exact(e.start,e.soffset,e.finish,e.foffset))),wm=(e,t)=>(e=>{var t=e.getClientRects(),r=t.length>0?t[0]:e.getBoundingClientRect();return r.width>0||r.height>0?x.some(r).map($d):x.none()})(Kd(e,t)),Sm=(e,t,r)=>((e,t,r)=>{var n=Te.fromDom(e.document);return sm(n,t,r).map((e=>Gd(Te.fromDom(e.startContainer),e.startOffset,Te.fromDom(e.endContainer),e.endOffset)))})(e,t,r),xm=e=>({elementFromPoint:(t,r)=>Te.fromPoint(Te.fromDom(e.document),t,r),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,r,n,o)=>{var a=am.exact(t,r,n,o);return wm(e,a)},getSelection:()=>Cm(e).map((t=>Xd(e,t))),fromSitus:t=>{var r=am.relative(t.start,t.finish);return Xd(e,r)},situsFromPoint:(t,r)=>Sm(e,t,r).map((e=>Yd(e.start,e.soffset,e.finish,e.foffset))),clearSelection:()=>{(e=>{mm(e).each((e=>e.removeAllRanges()))})(e)},collapseSelection:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Cm(e).each((r=>r.fold((e=>e.collapse(t)),((r,n)=>{var o=t?r:n;vm(e,o,o)}),((r,n,o,a)=>{var i=t?r:o,l=t?n:a;pm(e,i,l,i,l)}))))},setSelection:t=>{pm(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,r)=>{vm(e,t,r)},selectNode:t=>{ym(e,t,!1)},selectContents:t=>{ym(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>{var t,r,n,o;return(t=Te.fromDom(e.document),r=void 0!==t?t.dom:document,n=r.body.scrollLeft||r.documentElement.scrollLeft,o=r.body.scrollTop||r.documentElement.scrollTop,wn(n,o)).top},scrollBy:(t,r)=>{((e,t,r)=>{var n=(void 0!==r?r.dom:document).defaultView;n&&n.scrollBy(e,t)})(t,r,Te.fromDom(e.document))}}),Em=(e,t)=>({rows:e,cols:t}),km=(e,t,r,n)=>{var o=((e,t,r,n)=>{var o=Kc(),a=o.clear,i=a=>{o.on((o=>{n.clearBeforeUpdate(t),Gc(a.target,r).each((i=>{Ua(o,i,r).each((r=>{var o=r.boxes.getOr([]);if(1===o.length){var l=o[0],s="false"===ca(l),d=Tt(sa(a.target),l,Oe);s&&d&&n.selectRange(t,o,l,l)}else o.length>1&&(n.selectRange(t,o,r.start,r.finish),e.selectContents(i))}))}))}))};return{clearstate:a,mousedown:e=>{n.clear(t),Gc(e.target,r).filter(Yc).each(o.set)},mouseover:e=>{i(e)},mouseup:e=>{i(e),a()}}})(xm(e),t,r,n);return{clearstate:o.clearstate,mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},_m=e=>xt(e,ge).exists(da),Nm=(e,t)=>_m(e)||_m(t),Tm=(e,t,r,n)=>{var o=xm(e),a=()=>(n.clear(t),x.none());return{keydown:(e,i,l,s,d,c)=>{var m=e.raw,u=m.which,f=!0===m.shiftKey,g=za(t,n.selectedSelector).fold((()=>(tm(u)&&!f&&n.clearBeforeUpdate(t),tm(u)&&f&&!Nm(i,s)?x.none:em(u)&&f?b(Vc,o,t,r,Xc,s,i,n.selectRange):Jc(u)&&f?b(Vc,o,t,r,Qc,s,i,n.selectRange):em(u)?b(Hc,o,r,Xc,s,i,Wc):Jc(u)?b(Hc,o,r,Qc,s,i,$c):x.none)),(e=>{var r=r=>()=>{var a=Y(r,(r=>((e,t,r,n,o)=>$a(n,e,t,o.firstSelectedSelector,o.lastSelectedSelector).map((e=>(o.clearBeforeUpdate(r),o.selectRange(r,e.boxes,e.start,e.finish),e.boxes))))(r.rows,r.cols,t,e,n)));return a.fold((()=>Ha(t,n.firstSelectedSelector,n.lastSelectedSelector).map((e=>{var r=em(u)||c.isForward(u)?Md.after:Md.before;return o.setRelativeSelection(Md.on(e.first,0),r(e.table)),n.clear(t),Id(x.none(),!0)}))),(e=>x.some(Id(x.none(),!0))))};return tm(u)&&f&&!Nm(i,s)?x.none:em(u)&&f?r([Em(1,0)]):Jc(u)&&f?r([Em(-1,0)]):c.isBackward(u)&&f?r([Em(0,-1),Em(-1,0)]):c.isForward(u)&&f?r([Em(0,1),Em(1,0)]):tm(u)&&!f?a:x.none}));return g()},keyup:(e,o,a,i,l)=>za(t,n.selectedSelector).fold((()=>{var s=e.raw,d=s.which;return!0===s.shiftKey&&tm(d)&&Nm(o,i)?((e,t,r,n,o,a,i)=>Oe(r,o)&&n===a?x.none():Nt(r,"td,th",t).bind((r=>Nt(o,"td,th",t).bind((n=>Zd(e,t,r,n,i))))))(t,r,o,a,i,l,n.selectRange):x.none()}),x.none)}},Rm=(e,t)=>{var r=xe(e,t);return void 0===r||""===r?[]:r.split(" ")},Dm=e=>void 0!==e.dom.classList,Am=(e,t)=>((e,t,r)=>{var n=Rm(e,t).concat([r]);return we(e,t,n.join(" ")),!0})(e,"class",t),Om=(e,t)=>{Dm(e)?e.dom.classList.add(t):Am(e,t)},Bm=(e,t)=>Dm(e)&&e.dom.classList.contains(t),Pm=(e,t,r)=>{var n=t=>{ke(t,e.selected),ke(t,e.firstSelected),ke(t,e.lastSelected)},o=t=>{we(t,e.selected,"1")},a=e=>{i(e),r()},i=t=>{var r=Ct(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);L(r,n)};return{clearBeforeUpdate:i,clear:a,selectRange:(r,n,i,l)=>{a(r),L(n,o),we(i,e.firstSelected,"1"),we(l,e.lastSelected,"1"),t(n,i,l)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Lm=()=>({tag:"none"}),Mm=e=>({tag:"multiple",elements:e}),Im=e=>({tag:"single",element:e}),Fm=(e,t,r)=>{var n=dn.fromTable(e);return Zi(n,t).map((e=>{var t=qi(n,r,!1),o=en(t).rows,a=((e,t)=>{var r=e.slice(0,t[t.length-1].row+1),n=Ki(r);return $(n,(e=>{var r=e.cells.slice(0,t[t.length-1].column+1);return P(r,(e=>e.element))}))})(o,e),i=((e,t)=>{var r=e.slice(t[0].row+t[0].rowspan-1,e.length),n=Ki(r);return $(n,(e=>{var r=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return P(r,(e=>e.element))}))})(o,e);return{upOrLeftCells:a,downOrRightCells:i}}))},jm=e=>{var t,r,n=Te.fromDom((e=>{if(ct()&&m(e.target)){var t=Te.fromDom(e.target);if(pe(t)&&gt(t)&&e.composed&&e.composedPath){var r=e.composedPath();if(r)return K(r)}}return x.from(e.target)})(e).getOr(e.target)),o=()=>e.stopPropagation(),a=()=>e.preventDefault(),i=(t=a,r=o,function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t(r.apply(null,n))});return((e,t,r,n,o,a,i)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:a,raw:i}))(n,e.clientX,e.clientY,o,a,i,e)},Um=(e,t,r,n,o)=>{var a=((e,t)=>r=>{e(r)&&t(jm(r))})(r,n);return e.dom.addEventListener(t,a,o),{unbind:b(zm,e,t,a,o)}},zm=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},Hm=S,$m=(e,t,r)=>((e,t,r,n)=>Um(e,t,r,n,!1))(e,t,Hm,r),Wm=jm,Vm=e=>!Bm(Te.fromDom(e.target),"ephox-snooker-resizer-bar"),qm=(e,t)=>{var r=((e,t,r)=>({get:()=>Wa(e(),r).fold((()=>t().fold(Lm,Im)),Mm)}))((()=>Te.fromDom(e.getBody())),(()=>li(ga(e),ua(e))),ni.selectedSelector),n=Pm(ni,((t,r,n)=>{rr(r).each((o=>{var a=P(t,(e=>e.dom)),i=Ko(e),l=Ho(g,Te.fromDom(e.getDoc()),i),s=si(e),d=Fm(o,{selection:s},l).map((e=>J(e,(e=>P(e,(e=>e.dom)))))).getOrUndefined();((e,t,r,n,o)=>{e.dispatch("TableSelectionChange",{cells:t,start:r,finish:n,otherCells:o})})(e,a,r.dom,n.dom,d)}))}),(()=>(e=>{e.dispatch("TableSelectionClear")})(e)));e.on("init",(r=>{var o=e.getWin(),a=ma(e),i=ua(e),l=km(o,a,i,n),s=Tm(o,a,i,n),d=((e,t,r,n)=>{var o=xm(e);return(e,a)=>{n.clearBeforeUpdate(t),Ua(e,a,r).each((e=>{var r=e.boxes.getOr([]);n.selectRange(t,r,e.start,e.finish),o.selectContents(a),o.collapseSelection()}))}})(o,a,i,n);e.on("TableSelectorChange",(e=>d(e.start,e.finish)));var c,m,u=(t,r)=>{(e=>!0===e.raw.shiftKey)(t)&&(r.kill&&t.kill(),r.selection.each((t=>{var r=am.relative(t.start,t.finish),n=Kd(o,r);e.selection.setRng(n)})))},f=e=>0===e.button,p=(c=qc(Te.fromDom(a)),m=qc(0),{touchEnd:e=>{var t=Te.fromDom(e.target);if(ye("td")(t)||ye("th")(t)){var r=c.get(),n=m.get();Oe(r,t)&&e.timeStamp-n<300&&(e.preventDefault(),d(t,t))}c.set(t),m.set(e.timeStamp)}});e.on("dragstart",(e=>{l.clearstate()})),e.on("mousedown",(e=>{f(e)&&Vm(e)&&l.mousedown(Wm(e))})),e.on("mouseover",(e=>{var t;void 0!==(t=e).buttons&&0==(1&t.buttons)||!Vm(e)||l.mouseover(Wm(e))})),e.on("mouseup",(e=>{f(e)&&Vm(e)&&l.mouseup(Wm(e))})),e.on("touchend",p.touchEnd),e.on("keyup",(t=>{var r=Wm(t);if(r.raw.shiftKey&&tm(r.raw.which)){var n=e.selection.getRng(),o=Te.fromDom(n.startContainer),a=Te.fromDom(n.endContainer);s.keyup(r,o,n.startOffset,a,n.endOffset).each((e=>{u(r,e)}))}})),e.on("keydown",(r=>{var n=Wm(r);t.hide();var o=e.selection.getRng(),a=Te.fromDom(o.startContainer),i=Te.fromDom(o.endContainer),l=gn(rm,nm)(Te.fromDom(e.selection.getStart()));s.keydown(n,a,o.startOffset,i,o.endOffset,l).each((e=>{u(n,e)})),t.show()})),e.on("NodeChange",(()=>{var t=e.selection,r=Te.fromDom(t.getStart()),o=Te.fromDom(t.getEnd());Fa(rr,[r,o]).fold((()=>n.clear(a)),g)}))})),e.on("PreInit",(()=>{e.serializer.addTempAttr(ni.firstSelected),e.serializer.addTempAttr(ni.lastSelected)}));return{getSelectedCells:()=>((e,t,r,n)=>{switch(e.tag){case"none":return t();case"single":return n(e.element);case"multiple":return r(e.elements)}})(r.get(),p([]),(e=>P(e,(e=>e.dom))),(e=>[e.dom])),clearSelectedCells:e=>n.clear(Te.fromDom(e))}},Km=e=>{var t=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=I(t,(t=>t!==e))},trigger:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var a={};L(e,((e,t)=>{a[e]=n[t]})),L(t,(e=>{e(a)}))}}},Gm=e=>({registry:J(e,(e=>({bind:e.bind,unbind:e.unbind}))),trigger:J(e,(e=>e.trigger))}),Ym=e=>e.slice(0).sort(),Xm=(e,t,r)=>{if(0===t.length)throw new Error("You must specify at least one required field.");var n;return((e,t)=>{if(!l(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");L(t,(t=>{if(!a(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))})("required",t),n=Ym(t),U(n,((e,t)=>t<n.length-1&&e===n[t+1])).each((e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+n.join(", ")+"].")})),n=>{var o=X(n);W(t,(e=>A(o,e)))||((e,t)=>{throw new Error("All required keys ("+Ym(e).join(", ")+") were not specified. Specified keys were: "+Ym(t).join(", ")+".")})(t,o),e(t,o);var a=I(t,(e=>!r.validate(n[e],e)));return a.length>0&&((e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+Ym(e).join(", ")+") were not.")})(a,r.label),n}},Qm=(e,t)=>{var r=I(t,(t=>!A(e,t)));r.length>0&&(e=>{throw new Error("Unsupported keys for object: "+Ym(e).join(", "))})(r)},Zm=e=>((e,t)=>Xm(e,t,{validate:u,label:"function"}))(Qm,e),Jm=Zm(["compare","extract","mutate","sink"]),eu=Zm(["element","start","stop","destroy"]),tu=Zm(["forceDrop","drop","move","delayDrop"]),ru=()=>{var e=x.none(),t=Gm({move:Km(["info"])});return{onEvent:(r,n)=>{n.extract(r).each((r=>{var o=((t,r)=>{var n=e.map((e=>t.compare(e,r)));return e=x.some(r),n})(n,r);o.each((e=>{t.trigger.move(e)}))}))},reset:()=>{e=x.none()},events:t.registry}},nu=()=>{var e,t=(e=Gm({move:Km(["info"])}),{onEvent:g,reset:g,events:e.registry}),r=ru(),n=t;return{on:()=>{n.reset(),n=r},off:()=>{n.reset(),n=t},isOn:()=>n===r,onEvent:(e,t)=>{n.onEvent(e,t)},events:r.events}},ou=(e,t,r)=>{var n,o,a,i,l=!1,d=Gm({start:Km([]),stop:Km([])}),c=nu(),m=()=>{g.stop(),c.isOn()&&(c.off(),d.trigger.stop())},u=(n=m,o=200,a=null,{cancel:i=()=>{s(a)||(clearTimeout(a),a=null)},throttle:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i(),a=setTimeout((()=>{a=null,n.apply(null,t)}),o)}});c.events.move.bind((r=>{t.mutate(e,r.info)}));var f=e=>function(){if(l){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.apply(null,r)}},g=t.sink(tu({forceDrop:m,drop:f(m),move:f((e=>{u.cancel(),c.onEvent(e,t)})),delayDrop:f(u.throttle)}),r);return{element:g.element,go:e=>{g.start(e),c.on(),d.trigger.start()},on:()=>{l=!0},off:()=>{l=!1},isActive:()=>l,destroy:()=>{g.destroy()},events:d.registry}},au=e=>{var t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},iu=au("ephox-dragster").resolve,lu=Jm({compare:(e,t)=>wn(t.left-e.left,t.top-e.top),extract:e=>x.some(wn(e.x,e.y)),sink:(e,t)=>{var r=(e=>{var t=n({layerClass:iu("blocker")},e),r=Te.fromTag("div");return we(r,"role","presentation"),Ut(r,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Om(r,iu("blocker")),Om(r,t.layerClass),{element:p(r),destroy:()=>{Ze(r)}}})(t),o=$m(r.element(),"mousedown",e.forceDrop),a=$m(r.element(),"mouseup",e.drop),i=$m(r.element(),"mousemove",e.move),l=$m(r.element(),"mouseout",e.delayDrop);return eu({element:r.element,start:e=>{Ke(e,r.element())},stop:()=>{Ze(r.element())},destroy:()=>{r.destroy(),a.unbind(),i.unbind(),l.unbind(),o.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}}),su=au("ephox-snooker").resolve,du=()=>{var e=Gm({drag:Km(["xDelta","yDelta","target"])}),t=x.none(),r=(()=>{var e=Gm({drag:Km(["xDelta","yDelta"])});return{mutate:(t,r)=>{e.trigger.drag(t,r)},events:e.registry}})();r.events.drag.bind((r=>{t.each((t=>{e.trigger.drag(r.xDelta,r.yDelta,t)}))}));return{assign:e=>{t=x.some(e)},get:()=>t,mutate:r.mutate,events:e.registry}},cu=su("resizer-bar"),mu=su("resizer-rows"),uu=su("resizer-cols"),fu=e=>{var t=Ct(e.parent(),"."+cu);L(t,Ze)},gu=(e,t,r)=>{var n=e.origin();L(t,(t=>{t.each((t=>{var o=r(n,t);Om(o,cu),Ke(e.parent(),o)}))}))},pu=(e,t,r,n)=>{gu(e,t,((e,t)=>{var o,a,i,l,s,d,c=(o=t.col,a=t.x-e.left,i=r.top-e.top,l=7,s=n,d=Te.fromTag("div"),Ut(d,{position:"absolute",left:a-l/2+"px",top:i+"px",height:s+"px",width:l+"px"}),Se(d,{"data-column":o,role:"presentation"}),d);return Om(c,uu),c}))},vu=(e,t,r,n)=>{gu(e,t,((e,t)=>{var o=((e,t,r,n,o)=>{var a=Te.fromTag("div");return Ut(a,{position:"absolute",left:t+"px",top:r-o/2+"px",height:o+"px",width:n+"px"}),Se(a,{"data-row":e,role:"presentation"}),a})(t.row,r.left-e.left,t.y-e.top,n,7);return Om(o,mu),o}))},hu=(e,t,r,n,o)=>{var a=xn(r),i=t.isResizable,l=n.length>0?Ln.positions(n,r):[],s=l.length>0?((e,t)=>$(e.all,((e,r)=>t(e.element)?[r]:[])))(e,i):[],d=I(l,((e,t)=>O(s,(e=>t===e))));vu(t,d,a,Wr(r));var c=o.length>0?jn.positions(o,r):[],m=c.length>0?((e,t)=>{var r=[];return B(e.grid.columns,(n=>{var o=dn.getColumnAt(e,n).map((e=>e.element));o.forall(t)&&r.push(n)})),I(r,(r=>{var n=dn.filterItems(e,(e=>e.column===r));return W(n,(e=>t(e.element)))}))})(e,i):[],u=I(c,((e,t)=>O(m,(e=>t===e))));pu(t,u,a,bn(r))},bu=(e,t)=>{if(fu(e),e.isResizable(t)){var r=dn.fromTable(t),n=un(r),o=cn(r);hu(r,e,t,n,o)}},yu=(e,t)=>{var r=Ct(e.parent(),"."+cu);L(r,t)},Cu=e=>{yu(e,(e=>{jt(e,"display","none")}))},wu=e=>{yu(e,(e=>{jt(e,"display","block")}))},Su=su("resizer-bar-dragging"),xu=e=>{var t=du(),r=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!==(t=r.mode)&&void 0!==t?t:lu;return ou(e,n,r)}(t,{}),n=x.none(),o=(e,t)=>x.from(xe(e,t));t.events.drag.bind((e=>{o(e.target,"data-row").each((t=>{var r=Gt(e.target,"top");jt(e.target,"top",r+e.yDelta+"px")})),o(e.target,"data-column").each((t=>{var r=Gt(e.target,"left");jt(e.target,"left",r+e.xDelta+"px")}))}));var a=(e,t)=>Gt(e,t)-Vt(e,"data-initial-"+t,0);r.events.stop.bind((()=>{t.get().each((t=>{n.each((r=>{o(t,"data-row").each((e=>{var n=a(t,"top");ke(t,"data-initial-top"),c.trigger.adjustHeight(r,n,parseInt(e,10))})),o(t,"data-column").each((e=>{var n=a(t,"left");ke(t,"data-initial-left"),c.trigger.adjustWidth(r,n,parseInt(e,10))})),bu(e,r)}))}))}));var i=(n,o)=>{c.trigger.startAdjust(),t.assign(n),we(n,"data-initial-"+o,Gt(n,o)),Om(n,Su),jt(n,"opacity","0.2"),r.go(e.parent())},l=$m(e.parent(),"mousedown",(e=>{var t;t=e.target,Bm(t,mu)&&i(e.target,"top"),(e=>Bm(e,uu))(e.target)&&i(e.target,"left")})),s=t=>Oe(t,e.view()),d=$m(e.view(),"mouseover",(t=>{var o;(o=t.target,Nt(o,"table",s).filter(da)).fold((()=>{pt(t.target)&&fu(e)}),(t=>{r.isActive()&&(n=x.some(t),bu(e,t))}))})),c=Gm({adjustHeight:Km(["table","delta","row"]),adjustWidth:Km(["table","delta","column"]),startAdjust:Km([])});return{destroy:()=>{l.unbind(),d.unbind(),r.destroy(),fu(e)},refresh:t=>{bu(e,t)},on:r.on,off:r.off,hideBars:b(Cu,e),showBars:b(wu,e),events:c.registry}},Eu=(e,t,r)=>{var n=Ln,o=jn,a=xu(e),i=Gm({beforeResize:Km(["table","type"]),afterResize:Km(["table","type"]),startDrag:Km([])});return a.events.adjustHeight.bind((e=>{var t=e.table;i.trigger.beforeResize(t,"row");var r=n.delta(e.delta,t);Pl(t,r,e.row),i.trigger.afterResize(t,"row")})),a.events.startAdjust.bind((e=>{i.trigger.startDrag()})),a.events.adjustWidth.bind((e=>{var n=e.table;i.trigger.beforeResize(n,"col");var a=o.delta(e.delta,n),l=r(n);Bl(n,a,e.column,t,l),i.trigger.afterResize(n,"col")})),{on:a.on,off:a.off,refreshBars:a.refresh,hideBars:a.hideBars,showBars:a.showBars,destroy:a.destroy,events:i.registry}},ku=(e,t)=>{var r=he(e)?(e=>Te.fromDom(Me(e).dom.documentElement))(e):e;return{parent:p(r),view:p(e),origin:p(wn(0,0)),isResizable:t}},_u=(e,t,r)=>({parent:p(t),view:p(e),origin:p(wn(0,0)),isResizable:r}),Nu=()=>{var e=Te.fromTag("div");return Ut(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ke(vt(Te.fromDom(document)),e),e},Tu=e=>m(e)&&"TABLE"===e.nodeName,Ru="bar-",Du=e=>"false"!==xe(e,"data-mce-resize"),Au=e=>{return Bt(t=e,r="corner-")?((e,t)=>e.substring(t))(t,r.length):t;var t,r},Ou=e=>{var t,r,n,o,a=Kc(),i=Kc(),l=Kc(),s=t=>Vs(e,t),d=()=>Xo(e)?xi():Si(),c=(a,i,l,c)=>{var m=Au(i),u=Pt(m,"e"),f=Bt(m,"n");if(""===r&&md(a),""===o&&fd(a),l!==t&&""!==r){jt(a,"width",r);var g=d(),p=s(a),v=Xo(e)||u?(e=>Ei(e).columns)(a)-1:0;Bl(a,l-t,v,g,p)}else if((e=>/^(\d+(\.\d+)?)%$/.test(e))(r)){var h=parseFloat(r.replace("%",""));jt(a,"width",l*h/t+"%")}if((e=>/^(\d+(\.\d+)?)px$/.test(e))(r)&&(e=>{var t=dn.fromTable(e);dn.hasColumns(t)||L(er(e),(e=>{var t=zt(e,"width");jt(e,"width",t),ke(e,"width")}))})(a),c!==n&&""!==o){jt(a,"height",o);var b=f?0:(e=>Ei(e).rows)(a)-1;Pl(a,c-n,b)}},m=()=>{i.on((e=>{e.destroy()})),l.on((t=>{((e,t)=>{e.inline&&Ze(t.parent())})(e,t)}))};e.on("init",(()=>{var t=((e,t)=>e.inline?_u(Te.fromDom(e.getBody()),Nu(),t):ku(Te.fromDom(e.getDoc()),t))(e,Du);if(l.set(t),(e=>{var t=e.options.get("object_resizing");return A(t.split(","),"table")})(e)&&ra(e)){var r=d(),n=Eu(t,r,s);n.on(),n.events.startDrag.bind((t=>{a.set(e.selection.getRng())})),n.events.beforeResize.bind((t=>{var r=t.table.dom;((e,t,r,n,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:n,origin:o})})(e,r,pa(r),va(r),Ru+t.type)})),n.events.afterResize.bind((t=>{var r=t.table,n=r.dom;fa(r),a.on((t=>{e.selection.setRng(t),e.focus()})),((e,t,r,n,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:n,origin:o})})(e,n,pa(n),va(n),Ru+t.type),e.undoManager.add()})),i.set(n)}})),e.on("ObjectResizeStart",(a=>{var i=a.target;if(Tu(i)){var l=Te.fromDom(i);L(e.dom.select(".mce-clonedresizable"),(t=>{e.dom.addClass(t,"mce-"+Yo(e)+"-columns")})),!sd(l)&&ea(e)?ud(l):!ld(l)&&Jo(e)&&md(l),dd(l)&&Bt(a.origin,Ru)&&md(l),t=a.width,r=ta(e)?"":ba(e,i).getOr(""),n=a.height,o=ya(e,i).getOr("")}})),e.on("ObjectResized",(t=>{var r=t.target;if(Tu(r)){var n=Te.fromDom(r),o=t.origin;(e=>Bt(e,"corner-"))(o)&&c(n,o,t.width,t.height),fa(n),zs(e,n.dom,Hs)}})),e.on("SwitchMode",(()=>{i.on((t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()}))})),e.on("dragstart dragend",(e=>{i.on((t=>{"dragstart"===e.type?(t.hideBars(),t.off()):(t.on(),t.showBars())}))})),e.on("remove",(()=>{m()}));return{refresh:e=>{i.on((t=>t.refreshBars(Te.fromDom(e))))},hide:()=>{i.on((e=>e.hideBars()))},show:()=>{i.on((e=>e.showBars()))}}},Bu=e=>{(e=>{var t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{var t=A(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:e=>{var t=A(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_merge_content_on_paste",{processor:"boolean",default:!0})})(e);var t=Ou(e),r=qm(e,t),n=qs(e,t,r);return Pd(e,n),((e,t)=>{var r=ua(e),n=t=>li(ga(e)).bind((n=>rr(n,r).map((r=>{var o=oi(si(e),r,n);return t(r,o)})))).getOr("");Z({mceTableRowType:()=>n(t.getTableRowType),mceTableCellType:()=>n(t.getTableCellType),mceTableColType:()=>n(t.getTableColType)},((t,r)=>e.addQueryValueHandler(r,t)))})(e,n),di(e,n),{getSelectedCells:r.getSelectedCells,clearSelectedCells:r.clearSelectedCells}},Pu=e=>({table:Bu(e)});e.add("dom",Pu)}()},41:function(e,t,r){r(42)},42:function(e,t){function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=e=>t=>{return i=typeof(r=t),(null===r?"null":"object"===i&&Array.isArray(r)?"array":"object"===i&&(l=n=r,(o=String).prototype.isPrototypeOf(l)||(null===(a=n.constructor)||void 0===a?void 0:a.name)===o.name)?"string":i)===e;var r,n,o,a,i,l},o=e=>t=>typeof t===e,a=r("string"),i=r("array"),l=o("boolean"),s=(e=void 0,t=>e===t),d=e=>!(e=>null==e)(e),c=o("function"),m=o("number"),u=()=>{},f=e=>()=>e,g=e=>e,p=(e,t)=>e===t;function v(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}var h=e=>{e()},b=f(!1),y=f(!0);class C{constructor(e,t){this.tag=e,this.value=t}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);var w=Object.keys,S=Object.hasOwnProperty,x=(e,t)=>{for(var r=w(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},E=(e,t)=>{var r,n={};return((e,t,r,n)=>{x(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))})(e,t,(r=n,(e,t)=>{r[t]=e}),u),n},k=e=>((e,t)=>{var r=[];return x(e,((e,n)=>{r.push(t(e,n))})),r})(e,g),_=e=>w(e).length,N=(e,t)=>T(e,t)?C.from(e[t]):C.none(),T=(e,t)=>S.call(e,t),R=(e,t)=>T(e,t)&&void 0!==e[t]&&null!==e[t],D=Array.prototype.indexOf,A=Array.prototype.push,O=(e,t)=>((e,t)=>D.call(e,t))(e,t)>-1,B=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return!0}return!1},P=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(t(n));return r},L=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},M=(e,t)=>{for(var r=0,n=e.length;r<n;r++){t(e[r],r)}},I=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},F=(e,t,r)=>(M(e,((e,n)=>{r=t(r,e,n)})),r),j=(e,t)=>((e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return C.some(a);if(r(a,n))break}return C.none()})(e,t,b),U=(e,t)=>(e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!i(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);A.apply(t,e[r])}return t})(L(e,t)),z=(e,t)=>{for(var r=0,n=e.length;r<n;++r){if(!0!==t(e[r],r))return!1}return!0},H=(e,t)=>t>=0&&t<e.length?C.some(e[t]):C.none(),$=(e,t)=>{for(var r=0;r<e.length;r++){var n=t(e[r],r);if(n.isSome())return n}return C.none()},W=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},V={fromHtml:(e,t)=>{var r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){var n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return W(r.childNodes[0])},fromTag:(e,t)=>{var r=(t||document).createElement(e);return W(r)},fromText:(e,t)=>{var r=(t||document).createTextNode(e);return W(r)},fromDom:W,fromPoint:(e,t,r)=>C.from(e.dom.elementFromPoint(t,r)).map(W)},q=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},K=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,G=(e,t)=>e.dom===t.dom,Y=q;"undefined"!=typeof window?window:Function("return this;")();var X,Q=e=>e.dom.nodeName.toLowerCase(),Z=e=>e.dom.nodeType,J=e=>t=>Z(t)===e,ee=e=>8===Z(e)||"#comment"===Q(e),te=J(1),re=J(3),ne=J(9),oe=J(11),ae=e=>t=>te(t)&&Q(t)===e,ie=e=>{return ne(e)?e:(t=e,V.fromDom(t.dom.ownerDocument));var t},le=e=>C.from(e.dom.parentNode).map(V.fromDom),se=(e,t)=>{for(var r=c(t)?t:b,n=e.dom,o=[];null!==n.parentNode&&void 0!==n.parentNode;){var a=n.parentNode,i=V.fromDom(a);if(o.push(i),!0===r(i))break;n=a}return o},de=e=>C.from(e.dom.previousSibling).map(V.fromDom),ce=e=>C.from(e.dom.nextSibling).map(V.fromDom),me=e=>L(e.dom.childNodes,V.fromDom),ue=e=>((e,t)=>{var r=e.dom.childNodes;return C.from(r[t]).map(V.fromDom)})(e,0),fe=c(Element.prototype.attachShadow)&&c(Node.prototype.getRootNode),ge=fe?e=>V.fromDom(e.dom.getRootNode()):ie,pe=e=>{var t,r=ge(e);return oe(t=r)&&d(t.dom.host)?C.some(r):C.none()},ve=e=>V.fromDom(e.dom.host),he=e=>{var t=re(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var r,n,o=t.ownerDocument;return pe(V.fromDom(t)).fold((()=>o.body.contains(t)),(r=he,n=ve,e=>r(n(e))))},be=(e,t,r,n,o)=>e(r,n)?C.some(r):c(o)&&o(r)?C.none():t(r,n,o),ye=(e,t,r)=>{for(var n=e.dom,o=c(r)?r:b;n.parentNode;){n=n.parentNode;var a=V.fromDom(n);if(t(a))return C.some(a);if(o(a))break}return C.none()},Ce=(e,t,r)=>ye(e,(e=>q(e,t)),r),we=(e,t)=>((e,t)=>j(e.dom.childNodes,(e=>t(V.fromDom(e)))).map(V.fromDom))(e,(e=>q(e,t))),Se=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return K(r)?C.none():C.from(r.querySelector(e)).map(V.fromDom)})(t,e),xe=(e,t,r)=>be(((e,t)=>q(e,t)),Ce,e,t,r),Ee=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return he(e)?e.dom.isContentEditable:(t=e,xe(t,"[contenteditable]")).fold(f(r),(e=>"true"===ke(e)))},ke=e=>e.dom.contentEditable,_e=e=>t=>G(t,(e=>V.fromDom(e.getBody()))(e)),Ne=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,Te=e=>V.fromDom(e.selection.getStart()),Re=e=>{return(t=e,r=ae("table"),be(((e,t)=>t(e)),ye,t,r,n)).forall(Ee);var t,r,n},De=(e,t)=>{var r=[];return M(me(e),(e=>{t(e)&&(r=r.concat([e])),r=r.concat(De(e,t))})),r},Ae=(e,t)=>((e,t)=>I(me(e),t))(e,(e=>q(e,t))),Oe=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return K(r)?[]:L(r.querySelectorAll(e),V.fromDom)})(t,e),Be=(e,t,r)=>{if(!(a(r)||l(r)||m(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},Pe=(e,t,r)=>{Be(e.dom,t,r)},Le=(e,t)=>{var r=e.dom.getAttribute(t);return null===r?void 0:r},Me=(e,t)=>C.from(Le(e,t)),Ie=(e,t)=>{e.dom.removeAttribute(t)},Fe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;return e.exists((e=>r(e,t)))},je=(e,t,r)=>e.isSome()&&t.isSome()?C.some(r(e.getOrDie(),t.getOrDie())):C.none(),Ue=(e,t)=>((e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t)(e,t,0),ze=(X=/^\s+|\s+$/g,e=>e.replace(X,"")),He=e=>e.length>0,$e=function(e){var t=parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:10);return isNaN(t)?C.none():C.some(t)},We=e=>void 0!==e.style&&c(e.style.getPropertyValue),Ve=(e,t,r)=>{((e,t,r)=>{if(!a(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);We(e)&&e.style.setProperty(t,r)})(e.dom,t,r)},qe=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||he(e)?n:Ke(r,t)},Ke=(e,t)=>We(e)?e.style.getPropertyValue(t):"",Ge=(e,t)=>{var r=e.dom,n=Ke(r,t);return C.from(n).filter((e=>e.length>0))},Ye=(e,t)=>{((e,t)=>{We(e)&&e.style.removeProperty(t)})(e.dom,t),Fe(Me(e,"style").map(ze),"")&&Ie(e,"style")},Xe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Me(e,t).map((e=>parseInt(e,10))).getOr(r)},Qe=(e,t)=>Ze(e,t,y),Ze=(e,t,r)=>U(me(e),(e=>q(e,t)?r(e)?[e]:[]:Ze(e,t,r))),Je=["tfoot","thead","tbody","colgroup"],et=(e,t,r)=>({element:e,rowspan:t,colspan:r}),tt=(e,t,r)=>({element:e,cells:t,section:r}),rt=(e,t)=>function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return r(t)?C.none():O(e,Q(t))?C.some(t):Ce(t,e.join(","),(e=>q(e,"table")||r(e)))}(["td","th"],e,t),nt=(e,t)=>xe(e,"table",t),ot=e=>Qe(e,"tr"),at=e=>nt(e).fold(f([]),(e=>Ae(e,"colgroup"))),it=(e,t)=>L(e,(e=>{if("colgroup"===Q(e)){var r=L((e=>q(e,"colgroup")?Ae(e,"col"):U(at(e),(e=>Ae(e,"col"))))(e),(e=>{var t=Xe(e,"span",1);return et(e,1,t)}));return tt(e,r,"colgroup")}var n=L((e=>Qe(e,"th,td"))(e),(e=>{var t=Xe(e,"rowspan",1),r=Xe(e,"colspan",1);return et(e,t,r)}));return tt(e,n,t(e))})),lt=e=>le(e).map((e=>{var t=Q(e);return(e=>O(Je,e))(t)?t:"tbody"})).getOr("tbody"),st=e=>Me(e,"data-snooker-locked-cols").bind((e=>C.from(e.match(/\d+/g)))).map((e=>((e,t)=>{for(var r={},n=0,o=e.length;n<o;n++){var a=e[n];r[String(a)]=t(a,n)}return r})(e,y))),dt=(e,t)=>e+","+t,ct=(e,t)=>{var r=U(e.all,(e=>e.cells));return I(r,t)},mt=e=>{var t,r={},n=[],o=(t=e,H(t,0)).map((e=>e.element)).bind(nt).bind(st).getOr({}),a=0,i=0,l=0,s=((e,t)=>{for(var r=[],n=[],o=0,a=e.length;o<a;o++){var i=e[o];(t(i,o)?r:n).push(i)}return{pass:r,fail:n}})(e,(e=>"colgroup"===e.section)),d=s.pass,c=s.fail;M(c,(e=>{var t=[];M(e.cells,(e=>{for(var n=0;void 0!==r[dt(l,n)];)n++;for(var a=R(o,n.toString()),s=((e,t,r,n,o,a)=>({element:e,rowspan:t,colspan:r,row:n,column:o,isLocked:a}))(e.element,e.rowspan,e.colspan,l,n,a),d=0;d<e.colspan;d++)for(var c=0;c<e.rowspan;c++){var m=n+d,u=dt(l+c,m);r[u]=s,i=Math.max(i,m+1)}t.push(s)})),a++,n.push(tt(e.element,t,e.section)),l++}));var m=(e=>H(e,e.length-1))(d).map((e=>{var t=(e=>{var t={},r=0;return M(e.cells,(e=>{var n=e.colspan;P(n,(o=>{var a=r+o;t[a]=((e,t,r)=>({element:e,colspan:t,column:r}))(e.element,n,a)})),r+=n})),t})(e),r=((e,t)=>({element:e,columns:t}))(e.element,k(t));return{colgroups:[r],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),u=m.columns,f=m.colgroups,g=((e,t)=>({rows:e,columns:t}))(a,i);return{grid:g,access:r,all:n,columns:u,colgroups:f}},ut=e=>{var t=(e=>{var t=ot(e),r=[...at(e),...t];return it(r,lt)})(e);return mt(t)},ft=(e,t,r)=>C.from(e.access[dt(t,r)]),gt=(e,t,r)=>{var n=ct(e,(e=>r(t,e.element)));return n.length>0?C.some(n[0]):C.none()},pt=e=>U(e.all,(e=>e.cells)),vt=(e,t)=>C.from(e.columns[t]),ht=tinymce.util.Tools.resolve("tinymce.util.Tools"),bt=(e,t,r)=>{for(var n,o=e.select("td,th",t),a=0;a<o.length;a++){var i=e.getStyle(o[a],r);if(s(n)&&(n=i),n!==i)return""}return n},yt=(e,t,r)=>{ht.each("left center right".split(" "),(n=>{n!==r&&e.formatter.remove("align"+n,{},t)})),r&&e.formatter.apply("align"+r,{},t)},Ct=(e,t,r)=>{e.dispatch("TableModified",n(n({},r),{},{table:t}))},wt=(e,t)=>{return(r=e,n=parseFloat(r),isNaN(n)?C.none():C.some(n)).getOr(t);var r,n},St=(e,t,r)=>wt(qe(e,t),r),xt=(e,t)=>{var r=e.dom,n=r.getBoundingClientRect().width||r.offsetWidth;return"border-box"===t?n:((e,t,r,n)=>t-St(e,`padding-${r}`,0)-St(e,`padding-${n}`,0)-St(e,`border-${r}-width`,0)-St(e,`border-${n}-width`,0))(e,n,"left","right")},Et=e=>xt(e,"content-box"),kt=tinymce.util.Tools.resolve("tinymce.Env"),_t=P(5,(e=>{var t=`${e+1}px`;return{title:t,value:t}})),Nt=L(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(e=>({title:e,value:e.toLowerCase()}))),Tt="100%",Rt=e=>{var t,r=e.dom,n=null!==(t=r.getParent(e.selection.getStart(),r.isBlock))&&void 0!==t?t:e.getBody();return Et(V.fromDom(n))+"px"},Dt=e=>t=>t.options.get(e),At=Dt("table_sizing_mode"),Ot=Dt("table_border_widths"),Bt=Dt("table_border_styles"),Pt=Dt("table_cell_advtab"),Lt=Dt("table_row_advtab"),Mt=Dt("table_advtab"),It=Dt("table_appearance_options"),Ft=Dt("table_grid"),jt=Dt("table_style_by_css"),Ut=Dt("table_cell_class_list"),zt=Dt("table_row_class_list"),Ht=Dt("table_class_list"),$t=Dt("table_toolbar"),Wt=Dt("table_background_color_map"),Vt=Dt("table_border_color_map"),qt=e=>"fixed"===At(e),Kt=e=>"responsive"===At(e),Gt=e=>{var t=e.options,r=t.get("table_default_styles");return t.isSet("table_default_styles")?r:((e,t)=>Kt(e)||!jt(e)?t:qt(e)?n(n({},t),{},{width:Rt(e)}):n(n({},t),{},{width:Tt}))(e,r)},Yt=e=>{var t=e.options,r=t.get("table_default_attributes");return t.isSet("table_default_attributes")?r:((e,t)=>Kt(e)||jt(e)?t:qt(e)?n(n({},t),{},{width:Rt(e)}):n(n({},t),{},{width:Tt}))(e,r)},Xt=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Qt=(e,t,r)=>{var n=gt(e,t,G),o=gt(e,r,G);return n.bind((e=>o.map((t=>{return r=e,n=t,o=Math.min(r.row,n.row),a=Math.min(r.column,n.column),i=Math.max(r.row+r.rowspan-1,n.row+n.rowspan-1),l=Math.max(r.column+r.colspan-1,n.column+n.colspan-1),{startRow:o,startCol:a,finishRow:i,finishCol:l};var r,n,o,a,i,l}))))},Zt=(e,t,r)=>Qt(e,t,r).bind((t=>((e,t)=>{for(var r=!0,n=v(Xt,t),o=t.startRow;o<=t.finishRow;o++)for(var a=t.startCol;a<=t.finishCol;a++)r=r&&ft(e,o,a).exists(n);return r?C.some(t):C.none()})(e,t))),Jt=ut,er=(e,t)=>{le(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},tr=(e,t)=>{ce(e).fold((()=>{le(e).each((e=>{nr(e,t)}))}),(e=>{er(e,t)}))},rr=(e,t)=>{ue(e).fold((()=>{nr(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))},nr=(e,t)=>{e.dom.appendChild(t.dom)},or=(e,t)=>{er(e,t),nr(t,e)},ar=(e,t)=>{M(t,((r,n)=>{var o=0===n?e:t[n-1];tr(o,r)}))},ir=(e,t)=>{M(t,(t=>{nr(e,t)}))},lr=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},sr=e=>{var t=me(e);t.length>0&&ar(e,t),lr(e)},dr=((e,t)=>{var r=t=>e(t)?C.from(t.dom.nodeValue):C.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return r(n).getOr("")},getOption:r,set:(r,n)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=n}}})(re,"text"),cr=e=>dr.get(e),mr=(e,t)=>dr.set(e,t),ur=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],fr=(e,t,r,n)=>{var o,a,i=t(e,r);return o=(r,n)=>{var o=t(e,n);return gr(e,r,o)},a=i,((e,t)=>{for(var r=e.length-1;r>=0;r--)t(e[r],r)})(n,((e,t)=>{a=o(a,e,t)})),a},gr=(e,t,r)=>t.bind((t=>r.filter(v(e.eq,t)))),pr=(e,t,r)=>r.length>0?((e,t,r,n)=>n(e,t,r[0],r.slice(1)))(e,t,r,fr):C.none(),vr={up:f({selector:Ce,closest:xe,predicate:ye,all:se}),down:f({selector:Oe,predicate:De}),styles:f({get:qe,getRaw:Ge,set:Ve,remove:Ye}),attrs:f({get:Le,set:Pe,remove:Ie,copyTo:(e,t)=>{((e,t)=>{var r=e.dom;x(t,((e,t)=>{Be(r,t,e)}))})(t,F(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}))}}),insert:f({before:er,after:tr,afterAll:ar,append:nr,appendAll:ir,prepend:rr,wrap:or}),remove:f({unwrap:sr,remove:lr}),create:f({nu:V.fromTag,clone:e=>V.fromDom(e.dom.cloneNode(!1)),text:V.fromText}),query:f({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:de,nextSibling:ce}),property:f({children:me,name:Q,parent:le,document:e=>ie(e).dom,isText:re,isComment:ee,isElement:te,isSpecial:e=>{var t=Q(e);return O(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>te(e)?Me(e,"lang"):C.none(),getText:cr,setText:mr,isBoundary:e=>!!te(e)&&("body"===Q(e)||O(ur,Q(e))),isEmptyTag:e=>!!te(e)&&O(["br","img","hr","input"],Q(e)),isNonEditable:e=>te(e)&&"false"===Le(e,"contenteditable")}),eq:G,is:Y},hr=e=>Ce(e,"table"),br=(e,t,r)=>Se(e,t).bind((t=>Se(e,r).bind((e=>{return(r=hr,n=[t,e],pr(vr,((e,t)=>r(t)),n)).map((r=>({first:t,last:e,table:r})));var r,n})))),yr=(e,t)=>((e,t)=>{var r=Oe(e,t);return r.length>0?C.some(r):C.none()})(e,t),Cr=(e,t,r)=>br(e,t,r).bind((t=>{var r=t=>G(e,t),n="thead,tfoot,tbody,table",o=Ce(t.first,n,r),a=Ce(t.last,n,r);return o.bind((e=>a.bind((r=>G(e,r)?((e,t,r)=>{var n=Jt(e);return Zt(n,t,r)})(t.table,t.first,t.last):C.none()))))})),wr=e=>L(e,V.fromDom),Sr="data-mce-selected",xr="data-mce-first-selected",Er="data-mce-last-selected",kr={selected:Sr,selectedSelector:"td["+Sr+"],th["+Sr+"]",firstSelected:xr,firstSelectedSelector:"td["+xr+"],th["+xr+"]",lastSelected:Er,lastSelectedSelector:"td["+Er+"],th["+Er+"]"},_r=e=>(t,r)=>{var n,o=Q(t),a="col"===o||"colgroup"===o?nt(n=t).bind((e=>yr(e,kr.firstSelectedSelector))).fold(f(n),(e=>e[0])):t;return xe(a,e,r)},Nr=_r("th,td,caption"),Tr=_r("th,td"),Rr=e=>wr(e.model.table.getSelectedCells()),Dr=(e,t)=>{var r=Tr(e),n=r.bind((e=>nt(e))).map((e=>ot(e)));return je(r,n,((e,r)=>I(r,(r=>B(wr(r.dom.cells),(r=>"1"===Le(r,t)||G(r,e))))))).getOr([])},Ar=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Or=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Br=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Pr=e=>{return(t=e,r="#",Ue(t,r)?((e,t)=>e.substring(t))(t,r.length):t).toUpperCase();var t,r},Lr=e=>(e=>Or.test(e)||Br.test(e))(e)?C.some({value:Pr(e)}):C.none(),Mr=e=>{var t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},Ir=e=>(e=>({value:Pr(e)}))(Mr(e.red)+Mr(e.green)+Mr(e.blue)),Fr=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,jr=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Ur=(e,t,r,n)=>({red:e,green:t,blue:r,alpha:n}),zr=(e,t,r,n)=>{var o=parseInt(e,10),a=parseInt(t,10),i=parseInt(r,10),l=parseFloat(n);return Ur(o,a,i,l)},Hr=e=>{var t=Fr.exec(e);if(null!==t)return C.some(zr(t[1],t[2],t[3],"1"));var r=jr.exec(e);return null!==r?C.some(zr(r[1],r[2],r[3],r[4])):C.none()},$r=e=>{var t=e;return{get:()=>t,set:e=>{t=e}}},Wr=()=>{return e=e=>e.unbind(),t=$r(C.none()),r=()=>t.get().each(e),{clear:()=>{r(),t.set(C.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(C.some(e))}};var e,t,r},Vr=(e,t,r)=>n=>{var o=Wr(),a=!He(r),i=()=>{var i=Rr(e),l=n=>e.formatter.match(t,{value:r},n.dom,a);a?(n.setActive(!B(i,l)),o.set(e.formatter.formatChanged(t,(e=>n.setActive(!e)),!0))):(n.setActive(z(i,l)),o.set(e.formatter.formatChanged(t,n.setActive,!1,{value:r})))};return e.initialized?i():e.on("init",i),o.clear},qr=e=>R(e,"menu"),Kr=e=>L(e,(e=>{var t=e.text||e.title||"";return qr(e)?{text:t,items:Kr(e.menu)}:{text:t,value:e.value}})),Gr=e=>e.length?C.some(Kr([{text:"Select...",value:"mce-no-match"},...e])):C.none(),Yr=(e,t,r,n)=>L(t,(t=>{var o=t.text||t.title;return qr(t)?{type:"nestedmenuitem",text:o,getSubmenuItems:()=>Yr(e,t.menu,r,n)}:{text:o,type:"togglemenuitem",onAction:()=>n(t.value),onSetup:Vr(e,r,t.value)}})),Xr=(e,t)=>r=>{e.execCommand("mceTableApplyCellStyle",!1,{[t]:r})},Qr=e=>U(e,(e=>qr(e)?[n(n({},e),{},{menu:Qr(e.menu)})]:He(e.value)?[e]:[])),Zr=(e,t,r,n)=>o=>o(Yr(e,t,r,n)),Jr=(e,t,r)=>{var n=L(t,(e=>{return{text:e.title,value:"#"+(t=e.value,Lr(t).orThunk((()=>Hr(t).map(Ir))).getOrThunk((()=>{var e=document.createElement("canvas");e.height=1,e.width=1;var r=e.getContext("2d");r.clearRect(0,0,e.width,e.height),r.fillStyle="#FFFFFF",r.fillStyle=t,r.fillRect(0,0,1,1);var n=r.getImageData(0,0,1,1).data,o=n[0],a=n[1],i=n[2],l=n[3];return Ir(Ur(o,a,i,l))}))).value,type:"choiceitem"};var t}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:n.length>0?n:void 0,allowCustomColors:!1},onAction:t=>{var n="remove"===t.value?"":t.value;e.execCommand("mceTableApplyCellStyle",!1,{[r]:n})}}]},en=e=>()=>{var t="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})},tn=e=>()=>{var t="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:t})},rn=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Ar}],nn=e=>rn.concat((e=>Gr(Ut(e)).map((e=>({name:"class",type:"listbox",label:"Class",items:e}))))(e).toArray()),on=(e,t)=>{var r=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Kr(Bt(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(r):r}},an=(e,t)=>{var r=e.dom;return{setAttrib:(e,n)=>{r.setAttrib(t,e,n)},setStyle:(e,n)=>{r.setStyle(t,e,n)},setFormat:(r,n)=>{""===n?e.formatter.remove(r,{value:null},t,!0):e.formatter.apply(r,{value:n},t)}}},ln=ae("th"),sn=(e,t)=>e&&t?"sectionCells":e?"section":"cells",dn=e=>{var t=I(e,(e=>ln(e.element)));return 0===t.length?C.some("td"):t.length===e.length?C.some("th"):C.none()},cn=e=>{var t=L(e,(e=>(e=>{var t="thead"===e.section,r=Fe(dn(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||r?{type:"header",subType:sn(t,r)}:{type:"body"}})(e).type)),r=O(t,"header"),n=O(t,"footer");if(r||n){var o=O(t,"body");return!r||o||n?r||o||!n?C.none():C.some("footer"):C.some("header")}return C.some("body")},mn=(e,t)=>$(e.all,(e=>j(e.cells,(e=>G(t,e.element))))),un=(e,t,r)=>{var n,o,a=(e=>{for(var t=[],r=e=>{t.push(e)},n=0;n<e.length;n++)e[n].each(r);return t})(L(t.selection,(t=>rt(t).bind((t=>mn(e,t))).filter(r))));return n=a.length>0,o=a,n?C.some(o):C.none()},fn=(e,t)=>un(e,t,y),gn=(e,t)=>z(t,(t=>((e,t)=>mn(e,t).exists((e=>!e.isLocked)))(e,t))),pn=(e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>gn(e,t.cells))),vn=(e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>gn(e,t))),hn=e=>{if(!i(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],r={};return M(e,((n,o)=>{var a=w(n);if(1!==a.length)throw new Error("one and only one name per case");var l=a[0],s=n[l];if(void 0!==r[l])throw new Error("duplicate key detected:"+l);if("cata"===l)throw new Error("cannot have a case named cata (sorry)");if(!i(s))throw new Error("case arguments must be an array");t.push(l),r[l]=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.length;if(i!==s.length)throw new Error("Wrong number of arguments to case "+l+". Expected "+s.length+" ("+s+"), got "+i);return{fold:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+r.length);return r[o].apply(null,n)},match:e=>{var r=w(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!z(t,(e=>O(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[l].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:l,params:n})}}}})),r};n({},hn([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]));var bn=(e,t)=>{var r=ut(e);return fn(r,t).bind((e=>{var t=e[e.length-1],n=e[0].row,o=t.row+t.rowspan,a=r.all.slice(n,o);return cn(a)})).getOr("")},yn=e=>{return Ue(e,"rgb")?Hr(t=e).map(Ir).map((e=>"#"+e.value)).getOr(t):e;var t},Cn=e=>{var t=V.fromDom(e);return{borderwidth:Ge(t,"border-width").getOr(""),borderstyle:Ge(t,"border-style").getOr(""),bordercolor:Ge(t,"border-color").map(yn).getOr(""),backgroundcolor:Ge(t,"background-color").map(yn).getOr("")}},wn=e=>{var t=e[0],r=e.slice(1);return M(r,(e=>{M(w(t),(r=>{x(e,((e,n)=>{var o=t[r];""!==o&&r===n&&o!==e&&(t[r]="class"===r?"mce-no-match":"")}))}))})),t},Sn=(e,t,r,n)=>j(e,(e=>!s(r.formatter.matchNode(n,t+e)))).getOr(""),xn=v(Sn,["left","center","right"],"align"),En=v(Sn,["top","middle","bottom"],"valign"),kn=e=>nt(V.fromDom(e)).map((t=>{var r={selection:wr(e.cells)};return bn(t,r)})).getOr(""),_n=(e,t)=>{var r=ut(e),n=pt(r),o=I(n,(e=>B(t,(t=>G(e.element,t)))));return L(o,(e=>({element:e.element.dom,column:vt(r,e.column).map((e=>e.element.dom))})))},Nn=(e,t,r,n)=>{var o=1===t.length;M(t,(t=>{var a=t.element,i=o?y:n,l=an(e,a);((e,t,r,n)=>{n("scope")&&e.setAttrib("scope",r.scope),n("class")&&"mce-no-match"!==r.class&&e.setAttrib("class",r.class),n("width")&&t.setStyle("width",Ne(r.width))})(l,t.column.map((t=>an(e,t))).getOr(l),r,i),Pt(e)&&((e,t,r)=>{r("backgroundcolor")&&e.setFormat("tablecellbackgroundcolor",t.backgroundcolor),r("bordercolor")&&e.setFormat("tablecellbordercolor",t.bordercolor),r("borderstyle")&&e.setFormat("tablecellborderstyle",t.borderstyle),r("borderwidth")&&e.setFormat("tablecellborderwidth",Ne(t.borderwidth))})(l,r,i),n("halign")&&yt(e,a,r.halign),n("valign")&&((e,t,r)=>{ht.each("top middle bottom".split(" "),(n=>{n!==r&&e.formatter.remove("valign"+n,{},t)})),r&&e.formatter.apply("valign"+r,{},t)})(e,a,r.valign)}))},Tn=(e,t,r,n)=>{var o=n.getData();n.close(),e.undoManager.transact((()=>{((e,t,r,n)=>{var o=E(n,((e,t)=>r[t]!==e));_(o)>0&&t.length>=1&&nt(t[0]).each((r=>{var a=_n(r,t),i=_(E(o,((e,t)=>"scope"!==t&&"celltype"!==t)))>0,l=T(o,"celltype");(i||T(o,"scope"))&&Nn(e,a,n,v(T,o)),l&&((e,t)=>{e.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})})(e,n),Ct(e,r.dom,{structure:l,style:i})}))})(e,t,r,o),e.focus()}))},Rn=(e,t)=>{var r=nt(t[0]).map((r=>L(_n(r,t),(t=>((e,t,r,o)=>{var a,i,l,s=e.dom,d=o.getOr(t);return n({width:(i=d,l="width",s.getStyle(i,l)||s.getAttrib(i,l)),scope:s.getAttrib(t,"scope"),celltype:(a=t,a.nodeName.toLowerCase()),class:s.getAttrib(t,"class",""),halign:xn(e,t),valign:En(e,t)},r?Cn(t):{})})(e,t.element,Pt(e),t.column)))));return wn(r.getOrDie())},Dn=e=>{var t=Rr(e);if(0!==t.length){var r=Rn(e,t),n={type:"tabpanel",tabs:[{title:"General",name:"general",items:nn(e)},on(e,"cell")]},o={type:"panel",items:[{type:"grid",columns:2,items:nn(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:Pt(e)?n:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:v(Tn,e,t,r)})}},An=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],On=e=>An.concat((e=>Gr(zt(e)).map((e=>({name:"class",type:"listbox",label:"Class",items:e}))))(e).toArray()),Bn=(e,t,r,n)=>{var o=1===t.length?y:n;M(t,(t=>{var a=Ae(V.fromDom(t),"td,th"),i=an(e,t);((e,t,r)=>{r("class")&&"mce-no-match"!==t.class&&e.setAttrib("class",t.class),r("height")&&e.setStyle("height",Ne(t.height))})(i,r,o),Lt(e)&&((e,t,r)=>{r("backgroundcolor")&&e.setStyle("background-color",t.backgroundcolor),r("bordercolor")&&e.setStyle("border-color",t.bordercolor),r("borderstyle")&&e.setStyle("border-style",t.borderstyle)})(i,r,o),n("height")&&M(a,(t=>{e.dom.setStyle(t.dom,"height",null)})),n("align")&&yt(e,t,r.align)}))},Pn=(e,t,r,n)=>{var o=n.getData();n.close(),e.undoManager.transact((()=>{((e,t,r,n)=>{var o=E(n,((e,t)=>r[t]!==e));if(_(o)>0){var a=T(o,"type"),i=!a||_(o)>1;i&&Bn(e,t,n,v(T,o)),a&&((e,t)=>{e.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})})(e,n),nt(V.fromDom(t[0])).each((t=>Ct(e,t.dom,{structure:a,style:i})))}})(e,t,r,o),e.focus()}))},Ln=e=>{var t=Dr(Te(e),kr.selected);if(0!==t.length){var r=L(t,(t=>((e,t,r)=>{var o=e.dom;return n({height:o.getStyle(t,"height")||o.getAttrib(t,"height"),class:o.getAttrib(t,"class",""),type:kn(t),align:xn(e,t)},r?Cn(t):{})})(e,t.dom,Lt(e)))),o=wn(r),a={type:"tabpanel",tabs:[{title:"General",name:"general",items:On(e)},on(e,"row")]},i={type:"panel",items:[{type:"grid",columns:2,items:On(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:Lt(e)?a:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:v(Pn,e,L(t,(e=>e.dom)),o)})}},Mn=(e,t,r)=>{var n=r?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=It(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],a=t.length>0?[{name:"class",type:"listbox",label:"Class",items:t}]:[];return n.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(o).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(a)},In=(e,t,r,n)=>{if("TD"===t.tagName||"TH"===t.tagName)a(r)&&d(n)?e.setStyle(t,r,n):e.setStyles(t,r);else if(t.children)for(var o=0;o<t.children.length;o++)In(e,t.children[o],r,n)},Fn=(e,t,r,o)=>{var a=e.dom,i={},l={},d=jt(e),c=Mt(e),m=0===parseFloat(r.border);if(s(r.class)||"mce-no-match"===r.class||(i.class=r.class),l.height=Ne(r.height),d?l.width=Ne(r.width):a.getAttrib(t,"width")&&(i.width=(e=>e?e.replace(/px$/,""):"")(r.width)),d?(m?(i.border=0,l["border-width"]=""):(l["border-width"]=Ne(r.border),i.border=1),l["border-spacing"]=Ne(r.cellspacing)):(i.border=m?0:r.border,i.cellpadding=r.cellpadding,i.cellspacing=r.cellspacing),d&&t.children){var u={};if(m?u["border-width"]="":o.border&&(u["border-width"]=Ne(r.border)),o.cellpadding&&(u.padding=Ne(r.cellpadding)),c&&o.bordercolor&&(u["border-color"]=r.bordercolor),!(e=>{for(var t in e)if(S.call(e,t))return!1;return!0})(u))for(var f=0;f<t.children.length;f++)In(a,t.children[f],u)}if(c){var g=r;l["background-color"]=g.backgroundcolor,l["border-color"]=g.bordercolor,l["border-style"]=g.borderstyle}a.setStyles(t,n(n({},Gt(e)),l)),a.setAttribs(t,n(n({},Yt(e)),i))},jn=(e,t,r,n)=>{var o=e.dom,a=n.getData(),i=E(a,((e,t)=>r[t]!==e));n.close(),e.undoManager.transact((()=>{if(!t){var r=$e(a.cols).getOr(1),n=$e(a.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:n,columns:r}),t=Tr(Te(e),_e(e)).bind((t=>nt(t,_e(e)))).map((e=>e.dom)).getOrDie()}if(_(i)>0){var l={border:T(i,"border"),bordercolor:T(i,"bordercolor"),cellpadding:T(i,"cellpadding")};Fn(e,t,a,l);var s=o.select("caption",t)[0];(s&&!a.caption||!s&&a.caption)&&e.execCommand("mceTableToggleCaption"),yt(e,t,a.align)}if(e.focus(),e.addVisual(),_(i)>0){var d=T(i,"caption"),c=!d||_(i)>1;Ct(e,t,{structure:d,style:c})}}))},Un=(e,t)=>{var r,o=e.dom,a=((e,t)=>{var r,o,a,i=Gt(e),l=Yt(e),s=t?{borderstyle:N(i,"border-style").getOr(""),bordercolor:yn(N(i,"border-color").getOr("")),backgroundcolor:yn(N(i,"background-color").getOr(""))}:{};return n(n(n(n(n(n({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),i),l),s),(a=i["border-width"],jt(e)&&a?{border:a}:N(l,"border").fold((()=>({})),(e=>({border:e}))))),(r=N(i,"border-spacing").or(N(l,"cellspacing")).fold((()=>({})),(e=>({cellspacing:e}))),o=N(i,"border-padding").or(N(l,"cellpadding")).fold((()=>({})),(e=>({cellpadding:e}))),n(n({},r),o)))})(e,Mt(e));t?(a.cols="1",a.rows="1",Mt(e)&&(a.borderstyle="",a.bordercolor="",a.backgroundcolor="")):(r=o.getParent(e.selection.getStart(),"table",e.getBody()))?a=((e,t,r)=>{var o=e.dom,a=jt(e)?o.getStyle(t,"border-spacing")||o.getAttrib(t,"cellspacing"):o.getAttrib(t,"cellspacing")||o.getStyle(t,"border-spacing"),i=jt(e)?bt(o,t,"padding")||o.getAttrib(t,"cellpadding"):o.getAttrib(t,"cellpadding")||bt(o,t,"padding");return n({width:o.getStyle(t,"width")||o.getAttrib(t,"width"),height:o.getStyle(t,"height")||o.getAttrib(t,"height"),cellspacing:null!=a?a:"",cellpadding:null!=i?i:"",border:((t,r)=>{var n=Ge(V.fromDom(r),"border-width");return jt(e)&&n.isSome()?n.getOr(""):t.getAttrib(r,"border")||bt(e.dom,r,"border-width")||bt(e.dom,r,"border")||""})(o,t),caption:!!o.select("caption",t)[0],class:o.getAttrib(t,"class",""),align:xn(e,t)},r?Cn(t):{})})(e,r,Mt(e)):Mt(e)&&(a.borderstyle="",a.bordercolor="",a.backgroundcolor="");var i=Gr(Ht(e));i.isSome()&&a.class&&(a.class=a.class.replace(/\s*mce\-item\-table\s*/g,""));var l={type:"grid",columns:2,items:Mn(e,i.getOr([]),t)},s=Mt(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[l]},on(e,"table")]}:{type:"panel",items:[l]};e.windowManager.open({title:"Table Properties",size:"normal",body:s,onSubmit:v(jn,e,r,a),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a})},zn=e=>{x({mceTableProps:v(Un,e,!1),mceTableRowProps:v(Ln,e),mceTableCellProps:v(Dn,e),mceInsertTableDialog:v(Un,e,!0)},((t,r)=>e.addCommand(r,(()=>{return r=t,void(Re(Te(e))&&r());var r}))))},Hn=g,$n=e=>{var t=(e,t)=>Me(e,t).exists((e=>parseInt(e,10)>1));return e.length>0&&z(e,(e=>t(e,"rowspan")||t(e,"colspan")))?C.some(e):C.none()},Wn=(e,t,r)=>t.length<=1?C.none():Cr(e,r.firstSelectedSelector,r.lastSelectedSelector).map((e=>({bounds:e,cells:t}))),Vn=e=>{var t=$r(C.none()),r=$r([]),n=C.none(),o=ae("caption"),a=e=>n.forall((t=>!t[e])),i=()=>Nr((e=>V.fromDom(e.selection.getEnd()))(e),_e(e)),l=()=>Nr(Te(e),_e(e)).bind((t=>{return r=je(nt(t),i().bind(nt),((r,n)=>G(r,n)?o(t)?C.some((e=>({element:e,mergable:C.none(),unmergable:C.none(),selection:[e]}))(t)):C.some(((e,t,r)=>({element:r,mergable:Wn(t,e,kr),unmergable:$n(e),selection:Hn(e)}))(Rr(e),r,t)):C.none())),r.bind(g);var r})),s=e=>nt(e.element).map((t=>{var r=ut(t),n=fn(r,e).getOr([]),o=F(n,((e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=r.grid.columns&&(e.onLast=!0)),e)),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:pn(r,e).isSome(),unmergeable:vn(r,e).isSome(),locked:o}})),d=()=>{t.set((e=>{var t,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=e.apply(null,o)}return t}})(l)()),n=t.get().bind(s),M(r.get(),h)},c=e=>(e(),r.set(r.get().concat([e])),()=>{r.set(I(r.get(),(t=>t!==e)))}),m=(r,n)=>c((()=>t.get().fold((()=>{r.setEnabled(!1)}),(t=>{r.setEnabled(!n(t)&&e.selection.isEditable())})))),u=(r,n,o)=>c((()=>t.get().fold((()=>{r.setEnabled(!1),r.setActive(!1)}),(t=>{r.setEnabled(!n(t)&&e.selection.isEditable()),r.setActive(o(t))})))),f=e=>n.exists((t=>t.locked[e])),p=(t,r)=>n=>u(n,(e=>o(e.element)),(()=>e.queryCommandValue(t)===r)),v=p("mceTableRowType","header"),y=p("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",d),{onSetupTable:e=>m(e,(e=>!1)),onSetupCellOrRow:e=>m(e,(e=>o(e.element))),onSetupColumn:e=>t=>m(t,(t=>o(t.element)||f(e))),onSetupPasteable:e=>t=>m(t,(t=>o(t.element)||e().isNone())),onSetupPasteableColumn:(e,t)=>r=>m(r,(r=>o(r.element)||e().isNone()||f(t))),onSetupMergeable:e=>m(e,(e=>a("mergeable"))),onSetupUnmergeable:e=>m(e,(e=>a("unmergeable"))),resetTargets:d,onSetupTableWithCaption:t=>u(t,b,(t=>nt(t.element,_e(e)).exists((e=>we(e,"caption").isSome())))),onSetupTableRowHeaders:v,onSetupTableColumnHeaders:y,targets:t.get}},qn=tinymce.util.Tools.resolve("tinymce.FakeClipboard"),Kn="x-tinymce/dom-table-",Gn=Kn+"rows",Yn=Kn+"columns",Xn=e=>{var t,r=null!==(t=qn.read())&&void 0!==t?t:[];return $(r,(t=>C.from(t.getType(e))))},Qn=()=>Xn(Gn),Zn=()=>Xn(Yn),Jn=e=>t=>{var r=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",r),r(),()=>{e.off("NodeChange",r)}},eo=e=>t=>{var r=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",r),r(),()=>{e.off("NodeChange",r)}},to=e=>{var t=Vn(e);(e=>{var t=e.options.register;t("table_border_widths",{processor:"object[]",default:_t}),t("table_border_styles",{processor:"object[]",default:Nt}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!kt.deviceType.isTouch()}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})})(e),zn(e),((e,t)=>{var r=t=>()=>e.execCommand(t),o=(t,o)=>!!e.queryCommandSupported(o.command)&&(e.ui.registry.addMenuItem(t,n(n({},o),{},{onAction:c(o.onAction)?o.onAction:r(o.command)})),!0),a=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addToggleMenuItem(t,n(n({},o),{},{onAction:c(o.onAction)?o.onAction:r(o.command)}))},i=t=>{e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},l=[o("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),o("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),o("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),o("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),o("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),o("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),o("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(Qn)}),o("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(Qn)})],s=[o("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),o("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),o("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),o("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),o("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),o("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(Zn,"onFirst")}),o("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(Zn,"onLast")})],d=[o("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),o("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),o("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];Ft(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:i}],onSetup:eo(e)}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:r("mceInsertTableDialog"),onSetup:eo(e)}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:r("mceInsertTableDialog"),onSetup:eo(e)}),o("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),o("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),O(l,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:f("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),O(s,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:f("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),O(d,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:f("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(f(""),(e=>"caption"===Q(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable")))});var m=Qr(Ht(e));0!==m.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Yr(e,m,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});var u=Qr(Ut(e));0!==u.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Yr(e,u,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Yr(e,Ar,"tablecellverticalalign",Xr(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Yr(e,Ot(e),"tablecellborderwidth",Xr(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Yr(e,Bt(e),"tablecellborderstyle",Xr(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Jr(e,Wt(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Jr(e,Vt(e),"border-color"),onSetup:t.onSetupCellOrRow})),a("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),a("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:en(e),onSetup:t.onSetupTableRowHeaders}),a("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:tn(e),onSetup:t.onSetupTableRowHeaders})})(e,t),((e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Jn(e),fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});var r=t=>()=>e.execCommand(t),o=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addButton(t,n(n({},o),{},{onAction:c(o.onAction)?o.onAction:r(o.command)}))},a=(t,o)=>{e.queryCommandSupported(o.command)&&e.ui.registry.addToggleButton(t,n(n({},o),{},{onAction:c(o.onAction)?o.onAction:r(o.command)}))};o("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),o("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),o("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),o("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),o("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),o("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),o("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),o("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),o("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),o("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),o("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),o("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),o("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),o("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),o("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(Qn)}),o("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(Qn)}),o("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),o("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),o("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(Zn,"onFirst")}),o("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(Zn,"onLast")}),o("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Jn(e)});var i=Qr(Ht(e));0!==i.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Zr(e,i,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});var l=Qr(Ut(e));0!==l.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Zr(e,l,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Zr(e,Ar,"tablecellverticalalign",Xr(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Zr(e,Ot(e),"tablecellborderwidth",Xr(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Zr(e,Bt(e),"tablecellborderstyle",Xr(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t(Jr(e,Wt(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t(Jr(e,Vt(e),"border-color")),onSetup:t.onSetupCellOrRow})),a("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),a("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:en(e),onSetup:t.onSetupTableRowHeaders}),a("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:tn(e),onSetup:t.onSetupTableColumnHeaders})})(e,t),(e=>{var t=$t(e);t.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t=>e.dom.is(t,"table")&&e.getBody().contains(t)&&e.dom.isEditable(t.parentNode),items:t,scope:"node",position:"node"})})(e)};t.add("table",to)}()},43:function(e,t,r){r(44)},44:function(e,t){function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=e=>t=>{return i=typeof(r=t),(null===r?"null":"object"===i&&Array.isArray(r)?"array":"object"===i&&(l=n=r,(o=String).prototype.isPrototypeOf(l)||(null===(a=n.constructor)||void 0===a?void 0:a.name)===o.name)?"string":i)===e;var r,n,o,a,i,l},r=e=>t=>typeof t===e,o=t("string"),a=t("object"),i=t("array"),l=r("boolean"),s=e=>!(e=>null==e)(e),d=r("function"),c=r("number"),m=()=>{},u=e=>()=>e,f=(e,t)=>e===t;var g=e=>t=>!e(t),p=u(!1);class v{constructor(e,t){this.tag=e,this.value=t}static some(e){return new v(!0,e)}static none(){return v.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?v.some(e(this.value)):v.none()}bind(e){return this.tag?e(this.value):v.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:v.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return s(e)?v.some(e):v.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}v.singletonNone=new v(!1);var h,b=Array.prototype.slice,y=Array.prototype.indexOf,C=Array.prototype.push,w=(e,t)=>{return r=e,n=t,y.call(r,n)>-1;var r,n},S=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return!0}return!1},x=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},E=(e,t)=>{for(var r=0,n=e.length;r<n;r++){t(e[r],r)}},k=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},_=(e,t,r)=>(E(e,((e,n)=>{r=t(r,e,n)})),r),N=(e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return v.some(a);if(r(a,n))break}return v.none()},T=(e,t)=>N(e,t,p),R=(e,t)=>(e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!i(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);C.apply(t,e[r])}return t})(x(e,t)),D=e=>{var t=b.call(e,0);return t.reverse(),t},A=(e,t)=>t>=0&&t<e.length?v.some(e[t]):v.none(),O=e=>A(e,0),B=e=>A(e,e.length-1),P=(e,t)=>{for(var r=[],n=d(t)?e=>S(r,(r=>t(r,e))):e=>w(r,e),o=0,a=e.length;o<a;o++){var i=e[o];n(i)||r.push(i)}return r},L=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return e.exists((e=>r(e,t)))},M=(e,t,r)=>e.isSome()&&t.isSome()?v.some(r(e.getOrDie(),t.getOrDie())):v.none(),I=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},F={fromHtml:(e,t)=>{var r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){var n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return I(r.childNodes[0])},fromTag:(e,t)=>{var r=(t||document).createElement(e);return I(r)},fromText:(e,t)=>{var r=(t||document).createTextNode(e);return I(r)},fromDom:I,fromPoint:(e,t,r)=>v.from(e.dom.elementFromPoint(t,r)).map(I)},j=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},U=(e,t)=>e.dom===t.dom,z=j,H="undefined"!=typeof window?window:Function("return this;")(),$=(e,t)=>((e,t)=>{for(var r=null!=t?t:H,n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r})(e.split("."),t),W=(e,t)=>{var r=((e,t)=>$(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r},V=Object.getPrototypeOf,q=e=>{var t=$("ownerDocument.defaultView",e);return a(e)&&((e=>W("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(V(e).constructor.name))},K=e=>e.dom.nodeName.toLowerCase(),G=e=>e.dom.nodeType,Y=e=>t=>G(t)===e,X=e=>Q(e)&&q(e.dom),Q=Y(1),Z=Y(3),J=Y(9),ee=Y(11),te=e=>t=>Q(t)&&K(t)===e,re=e=>v.from(e.dom.parentNode).map(F.fromDom),ne=e=>x(e.dom.childNodes,F.fromDom),oe=(e,t)=>{var r=e.dom.childNodes;return v.from(r[t]).map(F.fromDom)},ae=e=>oe(e,0),ie=e=>oe(e,e.dom.childNodes.length-1),le=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode),se=le?e=>F.fromDom(e.dom.getRootNode()):e=>{return J(e)?e:(t=e,F.fromDom(t.dom.ownerDocument));var t},de=e=>{var t,r=se(e);return ee(t=r)&&s(t.dom.host)?v.some(r):v.none()},ce=e=>F.fromDom(e.dom.host),me=e=>{var t=Z(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var r,n,o=t.ownerDocument;return de(F.fromDom(t)).fold((()=>o.body.contains(t)),(r=me,n=ce,e=>r(n(e))))},ue=(e,t,r,n,o)=>e(r,n)?v.some(r):d(o)&&o(r)?v.none():t(r,n,o),fe=(e,t,r)=>{for(var n=e.dom,o=d(r)?r:p;n.parentNode;){n=n.parentNode;var a=F.fromDom(n);if(t(a))return v.some(a);if(o(a))break}return v.none()},ge=(e,t,r)=>ue(((e,t)=>t(e)),fe,e,t,r),pe=(e,t,r)=>fe(e,(e=>j(e,t)),r),ve=e=>{return ue(((e,t)=>j(e,t)),pe,e,"[contenteditable]",t);var t},he=e=>e.dom.contentEditable,be=(e,t)=>{re(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},ye=(e,t)=>{var r=(e=>v.from(e.dom.nextSibling).map(F.fromDom))(e);r.fold((()=>{re(e).each((e=>{Ce(e,t)}))}),(e=>{be(e,t)}))},Ce=(e,t)=>{e.dom.appendChild(t.dom)},we=(e,t)=>{E(t,(t=>{Ce(e,t)}))},Se=e=>{e.dom.textContent="",E(ne(e),(e=>{xe(e)}))},xe=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Ee=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ke=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),_e=tinymce.util.Tools.resolve("tinymce.util.VK"),Ne=e=>x(e,F.fromDom),Te=Object.keys,Re=(e,t)=>{for(var r=Te(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},De=(e,t)=>{var r,n={};return((e,t,r,n)=>{Re(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))})(e,t,(r=n,(e,t)=>{r[t]=e}),m),n},Ae=(e,t)=>{var r=e.dom;Re(t,((e,t)=>{((e,t,r)=>{if(!(o(r)||l(r)||c(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")})(r,t,e)}))},Oe=e=>_(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),Be=e=>((e,t)=>F.fromDom(e.dom.cloneNode(t)))(e,!0),Pe=(e,t)=>{var r=((e,t)=>{var r=F.fromTag(t),n=Oe(e);return Ae(r,n),r})(e,t);ye(e,r);var n=ne(e);return we(r,n),xe(e),r},Le=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Me=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ie=e=>t=>s(t)&&t.nodeName.toLowerCase()===e,Fe=e=>t=>s(t)&&e.test(t.nodeName),je=e=>s(e)&&3===e.nodeType,Ue=e=>s(e)&&1===e.nodeType,ze=Fe(/^(OL|UL|DL)$/),He=Fe(/^(OL|UL)$/),$e=Ie("ol"),We=Fe(/^(LI|DT|DD)$/),Ve=Fe(/^(DT|DD)$/),qe=Fe(/^(TH|TD)$/),Ke=Ie("br"),Ge=(e,t)=>s(t)&&t.nodeName in e.schema.getTextBlockElements(),Ye=(e,t)=>s(e)&&e.nodeName in t,Xe=(e,t)=>s(t)&&t.nodeName in e.schema.getVoidElements(),Qe=(e,t,r)=>{var n=e.isEmpty(t);return!(r&&e.select("span[data-mce-type=bookmark]",t).length>0)&&n},Ze=(e,t)=>e.isChildOf(t,e.getRoot()),Je=e=>t=>t.options.get(e),et=Je("lists_indent_on_tab"),tt=Je("forced_root_block"),rt=Je("forced_root_block_attrs"),nt=function(e,t){var r,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.dom,l=e.schema.getBlockElements(),s=i.createFragment(),d=tt(e),c=rt(e),m=!1;for(o=i.create(d,n(n({},c),a.style?{style:a.style}:{})),Ye(t.firstChild,l)||s.appendChild(o);r=t.firstChild;){var u=r.nodeName;m||"SPAN"===u&&"bookmark"===r.getAttribute("data-mce-type")||(m=!0),Ye(r,l)?(s.appendChild(r),o=null):(o||(o=i.create(d,c),s.appendChild(o)),o.appendChild(r))}return!m&&o&&o.appendChild(i.create("br",{"data-mce-bogus":"1"})),s},ot=Le.DOM,at=te("dd"),it=te("dt"),lt=(e,t)=>{var r;at(t)?Pe(t,"dt"):it(t)&&(r=t,v.from(r.dom.parentElement).map(F.fromDom)).each((r=>((e,t,r)=>{var n=ot.select('span[data-mce-type="bookmark"]',t),o=nt(e,r),a=ot.createRng();a.setStartAfter(r),a.setEndAfter(t);for(var i=a.extractContents(),l=i.firstChild;l;l=l.firstChild)if("LI"===l.nodeName&&e.dom.isEmpty(l)){ot.remove(l);break}e.dom.isEmpty(i)||ot.insertAfter(i,t),ot.insertAfter(o,t);var s=r.parentElement;s&&Qe(e.dom,s)&&(e=>{var t=e.parentNode;t&&Me.each(n,(e=>{t.insertBefore(e,r.parentNode)})),ot.remove(e)})(s),ot.remove(r),Qe(e.dom,t)&&ot.remove(t)})(e,r.dom,t.dom)))},st=e=>{it(e)&&Pe(e,"dd")},dt=(e,t)=>{if(je(e))return{container:e,offset:t};var r=Ee.getNode(e,t);return je(r)?{container:r,offset:t>=e.childNodes.length?r.data.length:0}:r.previousSibling&&je(r.previousSibling)?{container:r.previousSibling,offset:r.previousSibling.data.length}:r.nextSibling&&je(r.nextSibling)?{container:r.nextSibling,offset:0}:{container:e,offset:t}},ct=e=>{var t=e.cloneRange(),r=dt(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);var n=dt(e.endContainer,e.endOffset);return t.setEnd(n.container,n.offset),t},mt=["OL","UL","DL"],ut=mt.join(","),ft=(e,t)=>{var r=t||e.selection.getStart(!0);return e.dom.getParent(r,ut,ht(e,r))},gt=e=>{var t=ft(e),r=e.selection.getSelectedBlocks();return((e,t)=>s(e)&&1===t.length&&t[0]===e)(t,r)?(e=>k(e.querySelectorAll(ut),ze))(t):k(r,(e=>ze(e)&&t!==e))},pt=e=>{var t=e.selection.getSelectedBlocks();return k(((e,t)=>{var r=Me.map(t,(t=>e.dom.getParent(t,"li,dd,dt",ht(e,t))||t));return P(r)})(e,t),We)},vt=(e,t)=>{var r=e.dom.getParents(t,"TD,TH");return r.length>0?r[0]:e.getBody()},ht=(e,t)=>{var r=e.dom.getParents(t,e.dom.isBlock),n=T(r,(t=>{return(t=>t.nodeName.toLowerCase()!==tt(e))(t)&&(r=e.schema,!ze(n=t)&&!We(n)&&S(mt,(e=>r.isValidChild(n.nodeName,e))));var r,n}));return n.getOr(e.getBody())},bt=(e,t)=>{var r=e.dom.getParents(t,"ol,ul",ht(e,t));return B(r)},yt=e=>{var t=(e=>{var t=bt(e,e.selection.getStart()),r=k(e.selection.getSelectedBlocks(),He);return t.toArray().concat(r)})(e),r=(e=>{var t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",ht(e,t))})(e);return T(r,(e=>{return t=F.fromDom(e),re(t).exists((e=>We(e.dom)&&ae(e).exists((e=>!ze(e.dom)))&&ie(e).exists((e=>!ze(e.dom)))));var t})).fold((()=>Ct(e,t)),(e=>[e]))},Ct=(e,t)=>{var r=x(t,(t=>bt(e,t).getOr(t)));return P(r)},wt=e=>/\btox\-/.test(e.className),St=(e,t)=>N(e,ze,qe).exists((e=>e.nodeName===t&&!wt(e))),xt=(e,t)=>null!==t&&!e.dom.isEditable(t),Et=(e,t)=>{var r=e.dom.getParent(t,"ol,ul,dl");return xt(e,r)},kt=(e,t)=>{var r=e.selection.getNode();return t({parents:e.dom.getParents(r),element:r}),e.on("NodeChange",t),()=>e.off("NodeChange",t)},_t=(e,t)=>{var r=(t||document).createDocumentFragment();return E(e,(e=>{r.appendChild(e.dom)})),F.fromDom(r)},Nt=(e,t,r)=>e.dispatch("ListMutation",{action:t,element:r}),Tt=(h=/^\s+|\s+$/g,e=>e.replace(h,"")),Rt=(e,t,r)=>{if(!o(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);(e=>void 0!==e.style&&d(e.style.getPropertyValue))(e)&&e.style.setProperty(t,r)},Dt=e=>z(e,"OL,UL"),At=e=>ae(e).exists(Dt),Ot=e=>"listAttributes"in e,Bt=e=>"isComment"in e,Pt=e=>e.depth>0,Lt=e=>e.isSelected,Mt=e=>{var t=ne(e),r=ie(e).exists(Dt)?t.slice(0,-1):t;return x(r,Be)},It=(e,t)=>{Ce(e.item,t.list)},Ft=(e,t)=>{var r={list:F.fromTag(t,e),item:F.fromTag("li",e)};return Ce(r.list,r.item),r},jt=(e,t,r)=>{var n=t.slice(0,r.depth);return B(n).each((t=>{if(Ot(r)){var n=((e,t,r)=>{var n=F.fromTag("li",e);return Ae(n,t),we(n,r),n})(e,r.itemAttributes,r.content);((e,t)=>{Ce(e.list,t),e.item=t})(t,n),((e,t)=>{K(e.list)!==t.listType&&(e.list=Pe(e.list,t.listType)),Ae(e.list,t.listAttributes)})(t,r)}else if((e=>"isFragment"in e)(r))we(t.item,r.content);else{var o=F.fromHtml(`\x3c!--${r.content}--\x3e`);Ce(t.list,o)}})),n},Ut=(e,t,r)=>{var n,o=((e,t,r)=>{for(var n=[],o=0;o<r;o++)n.push(Ft(e,Ot(t)?t.listType:t.parentListType));return n})(e,r,r.depth-t.length);return(e=>{for(var t=1;t<e.length;t++)It(e[t-1],e[t])})(o),((e,t)=>{for(var r=0;r<e.length-1;r++)n=e[r].item,o="list-style-type",a="none",i=void 0,i=n.dom,Rt(i,o,a);var n,o,a,i;B(e).each((e=>{Ot(t)&&(Ae(e.list,t.listAttributes),Ae(e.item,t.itemAttributes)),we(e.item,t.content)}))})(o,r),n=o,M(B(t),O(n),It),t.concat(o)},zt=(e,t)=>{var r=v.none(),n=_(t,((t,n,o)=>Bt(n)?0===o?(r=v.some(n),t):jt(e,t,n):n.depth>t.length?Ut(e,t,n):jt(e,t,n)),[]);return r.each((e=>{var t=F.fromHtml(`\x3c!--${e.content}--\x3e`);O(n).each((e=>{((e,t)=>{ae(e).fold((()=>{Ce(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))})(e.list,t)}))})),O(n).map((e=>e.list))},Ht=e=>(E(e,((t,r)=>{((e,t)=>{var r=e[t].depth,n=e=>e.depth===r&&!e.dirty,o=e=>e.depth<r;return N(D(e.slice(0,t)),n,o).orThunk((()=>N(e.slice(t+1),n,o)))})(e,r).fold((()=>{t.dirty&&Ot(t)&&(e=>{e.listAttributes=De(e.listAttributes,((e,t)=>"start"!==t))})(t)}),(e=>{return o=e,void(Ot(r=t)&&Ot(o)&&(r.listType=o.listType,r.listAttributes=n({},o.listAttributes)));var r,o}))})),e),$t=(e,t,r,n)=>{var o,a;if(8===G(a=n)||"#comment"===K(a))return[{depth:e+1,content:null!==(o=n.dom.nodeValue)&&void 0!==o?o:"",dirty:!1,isSelected:!1,isComment:!0}];t.each((e=>{U(e.start,n)&&r.set(!0)}));var i=((e,t,r)=>re(e).filter(Q).map((n=>({depth:t,dirty:!1,isSelected:r,content:Mt(e),itemAttributes:Oe(e),listAttributes:Oe(n),listType:K(n),isInPreviousLi:!1}))))(n,e,r.get());t.each((e=>{U(e.end,n)&&r.set(!1)}));var l=ie(n).filter(Dt).map((n=>Vt(e,t,r,n))).getOr([]);return i.toArray().concat(l)},Wt=(e,t,r,n)=>ae(n).filter(Dt).fold((()=>$t(e,t,r,n)),(o=>{var a=_(ne(n),((n,a,i)=>{if(0===i)return n;if(z(a,"LI"))return n.concat($t(e,t,r,a));var l={isFragment:!0,depth:e,content:[a],isSelected:!1,dirty:!1,parentListType:K(o)};return n.concat(l)}),[]);return Vt(e,t,r,o).concat(a)})),Vt=(e,t,r,n)=>R(ne(n),(n=>(Dt(n)?Vt:Wt)(e+1,t,r,n))),qt=(e,t)=>R(((e,t)=>{if(0===e.length)return[];for(var r=t(e[0]),n=[],o=[],a=0,i=e.length;a<i;a++){var l=e[a],s=t(l);s!==r&&(n.push(o),o=[]),r=s,o.push(l)}return 0!==o.length&&n.push(o),n})(t,Pt),(t=>O(t).exists(Pt)?((e,t)=>{var r=Ht(t);return zt(e.contentDocument,r).toArray()})(e,t):((e,t)=>{var r=Ht(t);return x(r,(t=>{var r=Bt(t)?_t([F.fromHtml(`\x3c!--${t.content}--\x3e`)]):_t(t.content),n=Ot(t)?t.itemAttributes:{};return F.fromDom(nt(e,r.dom,n))}))})(e,t))),Kt=(e,t,r)=>{var n=((e,t)=>{var r,n=(r=!1,{get:()=>r,set:e=>{r=e}});return x(e,(e=>({sourceList:e,entries:Vt(0,t,n,e)})))})(t,(e=>{var t=x(pt(e),F.fromDom);return M(T(t,g(At)),T(D(t),g(At)),((e,t)=>({start:e,end:t})))})(e));E(n,(t=>{((e,t)=>{E(k(e,Lt),(e=>((e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})(t,e)))})(t.entries,r);var n,o=qt(e,t.entries);E(o,(t=>{Nt(e,"Indent"===r?"IndentList":"OutdentList",t.dom)})),n=t.sourceList,E(o,(e=>{be(n,e)})),xe(t.sourceList)}))},Gt=(e,t)=>{var r=Ne(yt(e)),n=Ne((e=>k(pt(e),Ve))(e)),o=!1;if(r.length||n.length){var a=e.selection.getBookmark();Kt(e,r,t),((e,t,r)=>{E(r,"Indent"===t?st:t=>lt(e,t))})(e,t,n),e.selection.moveToBookmark(a),e.selection.setRng(ct(e.selection.getRng())),e.nodeChanged(),o=!0}return o},Yt=(e,t)=>!(e=>{var t=ft(e);return xt(e,t)})(e)&&Gt(e,t),Xt=e=>Yt(e,"Indent"),Qt=e=>Yt(e,"Outdent"),Zt=e=>Yt(e,"Flatten"),Jt=e=>"\ufeff"===e,er=(e,t)=>{return r=e,n=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}(U,t),fe(r,n,o).isSome();var r,n,o},tr=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),rr=Le.DOM,nr=e=>{var t={},r=r=>{var n=e[r?"startContainer":"endContainer"],o=e[r?"startOffset":"endOffset"];if(Ue(n)){var a=rr.create("span",{"data-mce-type":"bookmark"});n.hasChildNodes()?(o=Math.min(o,n.childNodes.length-1),r?n.insertBefore(a,n.childNodes[o]):rr.insertAfter(a,n.childNodes[o])):n.appendChild(a),n=a,o=0}t[r?"startContainer":"endContainer"]=n,t[r?"startOffset":"endOffset"]=o};return r(!0),e.collapsed||r(),t},or=e=>{var t=t=>{var r=e[t?"startContainer":"endContainer"],n=e[t?"startOffset":"endOffset"];if(r){if(Ue(r)&&r.parentNode){var o=r;n=(e=>{for(var t,r=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,n=0;r;){if(r===e)return n;Ue(r)&&"bookmark"===r.getAttribute("data-mce-type")||n++,r=r.nextSibling}return-1})(r),r=r.parentNode,rr.remove(o),!r.hasChildNodes()&&rr.isBlock(r)&&r.appendChild(rr.create("br"))}e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=n}};t(!0),t();var r=rr.createRng();return r.setStart(e.startContainer,e.startOffset),e.endContainer&&r.setEnd(e.endContainer,e.endOffset),ct(r)},ar=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},ir=(e,t)=>{Me.each(t,((t,r)=>{e.setAttribute(r,t)}))},lr=(e,t,r)=>{((e,t,r)=>{var n=r["list-style-type"]?r["list-style-type"]:null;e.setStyle(t,"list-style-type",n)})(e,t,r),((e,t,r)=>{ir(t,r["list-attributes"]),Me.each(e.select("li",t),(e=>{ir(e,r["list-item-attributes"])}))})(e,t,r)},sr=(e,t)=>s(t)&&!Ye(t,e.schema.getBlockElements()),dr=(e,t,r,n)=>{var o=t[r?"startContainer":"endContainer"],a=t[r?"startOffset":"endOffset"];Ue(o)&&(o=o.childNodes[Math.min(a,o.childNodes.length-1)]||o),!r&&Ke(o.nextSibling)&&(o=o.nextSibling);var i=(t,r)=>{for(var o,a,i=new ke(t,(t=>{for(;!e.dom.isBlock(t)&&t.parentNode&&n!==t;)t=t.parentNode;return t})(t)),l=r?"next":"prev";a=i[l]();)if(!Xe(e,a)&&!Jt(a.textContent)&&0!==(null===(o=a.textContent)||void 0===o?void 0:o.length))return v.some(a);return v.none()};if(r&&je(o))if(Jt(o.textContent))o=i(o,!1).getOr(o);else for(null!==o.parentNode&&sr(e,o.parentNode)&&(o=o.parentNode);null!==o.previousSibling&&(sr(e,o.previousSibling)||je(o.previousSibling));)o=o.previousSibling;if(!r&&je(o))if(Jt(o.textContent))o=i(o,!0).getOr(o);else for(null!==o.parentNode&&sr(e,o.parentNode)&&(o=o.parentNode);null!==o.nextSibling&&(sr(e,o.nextSibling)||je(o.nextSibling));)o=o.nextSibling;for(;o.parentNode!==n;){var l=o.parentNode;if(Ge(e,o))return o;if(/^(TD|TH)$/.test(l.nodeName))return o;o=l}return o},cr=(e,t,r)=>{var n=e.selection.getRng(),o="LI",a=ht(e,((e,t)=>{var r=e.selection.getStart(!0),n=dr(e,t,!0,e.getBody());return er(F.fromDom(n),F.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:r})(e,n)),i=e.dom;if("false"!==i.getContentEditable(e.selection.getNode())){"DL"===(t=t.toUpperCase())&&(o="DT");var l=nr(n),s=k(((e,t,r)=>{for(var n,o=[],a=e.dom,i=dr(e,t,!0,r),l=dr(e,t,!1,r),s=[],d=i;d&&(s.push(d),d!==l);d=d.nextSibling);return Me.each(s,(t=>{var i;if(Ge(e,t))return o.push(t),void(n=null);if(a.isBlock(t)||Ke(t))return Ke(t)&&a.remove(t),void(n=null);var l=t.nextSibling;tr.isBookmarkNode(t)&&(ze(l)||Ge(e,l)||!l&&t.parentNode===r)?n=null:(n||(n=a.create("p"),null===(i=t.parentNode)||void 0===i||i.insertBefore(n,t),o.push(n)),n.appendChild(t))})),o})(e,n,a),e.dom.isEditable);Me.each(s,(n=>{var a,l=n.previousSibling,s=n.parentNode;We(s)||(l&&ze(l)&&l.nodeName===t&&((e,t,r)=>{var n=e.getStyle(t,"list-style-type"),o=r?r["list-style-type"]:"";return n===(null===o?"":o)})(i,l,r)?(a=l,n=i.rename(n,o),l.appendChild(n)):(a=i.create(t),s.insertBefore(a,n),a.appendChild(n),n=i.rename(n,o)),((e,t,r)=>{Me.each(r,(r=>e.setStyle(t,r,"")))})(i,n,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),lr(i,a,r),ur(e.dom,a))})),e.selection.setRng(or(l))}},mr=(e,t,r)=>{return((e,t)=>ze(e)&&e.nodeName===(null==t?void 0:t.nodeName))(t,r)&&((e,t,r)=>e.getStyle(t,"list-style-type",!0)===e.getStyle(r,"list-style-type",!0))(e,t,r)&&(n=r,t.className===n.className);var n},ur=(e,t)=>{var r,n=t.nextSibling;if(mr(e,t,n)){for(var o=n;r=o.firstChild;)t.appendChild(r);e.remove(o)}if(n=t.previousSibling,mr(e,t,n)){for(var a=n;r=a.lastChild;)t.insertBefore(r,t.firstChild);e.remove(a)}},fr=(e,t,r,n)=>{if(t.nodeName!==r){var o=e.dom.rename(t,r);lr(e.dom,o,n),Nt(e,ar(r),o)}else lr(e.dom,t,n),Nt(e,ar(r),t)},gr=(e,t,r,n)=>{if(t.classList.forEach(((e,r,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))})),t.nodeName!==r){var o=e.dom.rename(t,r);lr(e.dom,o,n),Nt(e,ar(r),o)}else lr(e.dom,t,n),Nt(e,ar(r),t)},pr=e=>"list-style-type"in e,vr=(e,t,r)=>{var n=ft(e);if(!Et(e,n)){var o=gt(e),i=a(r)?r:{};o.length>0?((e,t,r,n,o)=>{var a=ze(t);if(!a||t.nodeName!==n||pr(o)||wt(t)){cr(e,n,o);var i=nr(e.selection.getRng()),l=a?[t,...r]:r,s=a&&wt(t)?gr:fr;Me.each(l,(t=>{s(e,t,n,o)})),e.selection.setRng(or(i))}else Zt(e)})(e,n,o,t,i):((e,t,r,n)=>{if(t!==e.getBody())if(t)if(t.nodeName!==r||pr(n)||wt(t)){var o=nr(e.selection.getRng());wt(t)&&t.classList.forEach(((e,r,n)=>{e.startsWith("tox-")&&(n.remove(e),0===n.length&&t.removeAttribute("class"))})),lr(e.dom,t,n);var a=e.dom.rename(t,r);ur(e.dom,a),e.selection.setRng(or(o)),cr(e,r,n),Nt(e,ar(r),a)}else Zt(e);else cr(e,r,n),Nt(e,ar(r),t)})(e,n,t,i)}},hr=Le.DOM,br=(e,t)=>{var r=Me.grep(e.select("ol,ul",t));Me.each(r,(t=>{((e,t)=>{var r=t.parentElement;if(r&&"LI"===r.nodeName&&r.firstChild===t){var n=r.previousSibling;n&&"LI"===n.nodeName?(n.appendChild(t),Qe(e,r)&&hr.remove(r)):hr.setStyle(r,"listStyleType","none")}if(ze(r)){var o=r.previousSibling;o&&"LI"===o.nodeName&&o.appendChild(t)}})(e,t)}))},yr=(e,t,r,n)=>{var o=t.startContainer,a=t.startOffset;if(je(o)&&(r?a<o.data.length:a>0))return o;var i=e.schema.getNonEmptyElements();Ue(o)&&(o=Ee.getNode(o,a));var l=new ke(o,n);r&&((e,t)=>!!Ke(t)&&e.isBlock(t.nextSibling)&&!Ke(t.previousSibling))(e.dom,o)&&l.next();for(var s=r?l.next.bind(l):l.prev2.bind(l);o=s();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(i[o.nodeName])return o;if(je(o)&&o.data.length>0)return o}return null},Cr=(e,t)=>{var r=t.childNodes;return 1===r.length&&!ze(r[0])&&e.isBlock(r[0])},wr=e=>v.from(e).map(F.fromDom).filter(X).exists((e=>function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return me(e)?e.dom.isContentEditable:ve(e).fold(u(t),(e=>"true"===he(e)))}(e)&&!w(["details"],K(e)))),Sr=(e,t,r)=>{var n,o=Cr(e,r)?r.firstChild:r;if(((e,t)=>{Cr(e,t)&&wr(t.firstChild)&&e.remove(t.firstChild,!0)})(e,t),!Qe(e,t,!0))for(;n=t.firstChild;)o.appendChild(n)},xr=(e,t,r)=>{var n,o=t.parentNode;if(Ze(e,t)&&Ze(e,r)){ze(r.lastChild)&&(n=r.lastChild),o===r.lastChild&&Ke(o.previousSibling)&&e.remove(o.previousSibling);var a=r.lastChild;a&&Ke(a)&&t.hasChildNodes()&&e.remove(a),Qe(e,r,!0)&&Se(F.fromDom(r)),Sr(e,t,r),n&&r.appendChild(n);var i,l,s,d,c=(i=F.fromDom(r),l=F.fromDom(t),s=i.dom,d=l.dom,s!==d&&s.contains(d))?e.getParents(t,ze,r):[];e.remove(t),E(c,(t=>{Qe(e,t)&&t!==e.getRoot()&&e.remove(t)}))}},Er=(e,t,r,n)=>{var o=e.dom;if(o.isEmpty(n))((e,t,r)=>{Se(F.fromDom(r)),xr(e.dom,t,r),e.selection.setCursorLocation(r,0)})(e,r,n);else{var a=nr(t);xr(o,r,n),e.selection.setRng(or(a))}},kr=(e,t)=>{var r=e.dom,n=e.selection,o=n.getStart(),a=vt(e,o),i=r.getParent(n.getStart(),"LI",a);if(i){var l=i.parentElement;if(l===e.getBody()&&Qe(r,l))return!0;var s=ct(n.getRng()),d=r.getParent(yr(e,s,t,a),"LI",a),c=d&&(t?r.isChildOf(i,d):r.isChildOf(d,i));if(d&&d!==i&&!c)return e.undoManager.transact((()=>{var r,n;t?Er(e,s,d,i):(null===(n=(r=i).parentNode)||void 0===n?void 0:n.firstChild)===r?Qt(e):((e,t,r,n)=>{var o=nr(t);xr(e.dom,r,n);var a=or(o);e.selection.setRng(a)})(e,s,i,d)})),!0;if(c&&!t&&d!==i)return e.undoManager.transact((()=>{if(s.commonAncestorContainer.parentElement){var t=nr(s),n=s.commonAncestorContainer.parentElement;Sr(r,s.commonAncestorContainer.parentElement,d),n.remove();var o=or(t);e.selection.setRng(o)}})),!0;if(!d&&!t&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact((()=>{Zt(e)})),!0}return!1},_r=(e,t)=>{var r=e.dom,n=e.selection.getStart(),o=vt(e,n),a=r.getParent(n,r.isBlock,o);if(a&&r.isEmpty(a,void 0,{checkRootAsContent:!0})){var i=ct(e.selection.getRng()),l=r.getParent(yr(e,i,t,o),"LI",o);if(l){var s=e=>w(["td","th","caption"],K(e)),d=e=>e.dom===o;return!!function(e,t){return M(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:f).getOr(e.isNone()&&t.isNone())}(ge(F.fromDom(l),s,d),ge(F.fromDom(i.startContainer),s,d),U)&&(e.undoManager.transact((()=>{var n=l.parentNode;((e,t,r)=>{var n=e.getParent(t.parentNode,e.isBlock,r);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)})(r,a,o),ur(r,n),e.selection.select(l,!0),e.selection.collapse(t)})),!0)}}return!1},Nr=e=>{var t=e.selection.getStart(),r=vt(e,t);return e.dom.getParent(t,"LI,DT,DD",r)||pt(e).length>0},Tr=(e,t)=>{var r=e.selection;return!Et(e,r.getNode())&&(r.isCollapsed()?((e,t)=>kr(e,t)||_r(e,t))(e,t):(e=>!!Nr(e)&&(e.undoManager.transact((()=>{e.execCommand("Delete"),br(e.dom,e.getBody())})),!0))(e))},Rr=e=>{var t=D(Tt(e).split("")),r=x(t,((e,t)=>{var r=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*r}));return _(r,((e,t)=>e+t),0)},Dr=e=>{if(--e<0)return"";var t=e%26,r=Math.floor(e/26);return Dr(r)+String.fromCharCode("A".charCodeAt(0)+t)},Ar=e=>{var t,r,n=ft(e);$e(n)&&!Et(e,n)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(t={start:e.dom.getAttrib(n,"start","1"),listStyleType:v.from(e.dom.getStyle(n,"list-style-type"))},r=parseInt(t.start,10),L(t.listStyleType,"upper-alpha")?Dr(r):L(t.listStyleType,"lower-alpha")?Dr(r).toLowerCase():t.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{(e=>{switch((e=>/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:(e=>/^[a-z]+$/.test(e))(e)?1:e.length>0?4:3)(e)){case 2:return v.some({listStyleType:v.none(),start:e});case 0:return v.some({listStyleType:v.some("upper-alpha"),start:Rr(e).toString()});case 1:return v.some({listStyleType:v.some("lower-alpha"),start:Rr(e).toString()});case 3:return v.some({listStyleType:v.none(),start:""});case 4:return v.none()}})(t.getData().start).each((t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})})),t.close()}})},Or=(e,t)=>()=>{var r=ft(e);return s(r)&&r.nodeName===t},Br=e=>{e.addCommand("mceListProps",(()=>{Ar(e)}))},Pr=e=>{e.on("BeforeExecCommand",(t=>{var r=t.command.toLowerCase();"indent"===r?Xt(e):"outdent"===r&&Qt(e)})),e.addCommand("InsertUnorderedList",((t,r)=>{vr(e,"UL",r)})),e.addCommand("InsertOrderedList",((t,r)=>{vr(e,"OL",r)})),e.addCommand("InsertDefinitionList",((t,r)=>{vr(e,"DL",r)})),e.addCommand("RemoveList",(()=>{Zt(e)})),Br(e),e.addCommand("mceListUpdate",((t,r)=>{a(r)&&((e,t)=>{var r=ft(e);null===r||Et(e,r)||e.undoManager.transact((()=>{a(t.styles)&&e.dom.setStyles(r,t.styles),a(t.attrs)&&Re(t.attrs,((t,n)=>e.dom.setAttrib(r,n,t)))}))})(e,r)})),e.addQueryStateHandler("InsertUnorderedList",Or(e,"UL")),e.addQueryStateHandler("InsertOrderedList",Or(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",Or(e,"DL"))},Lr=tinymce.util.Tools.resolve("tinymce.html.Node"),Mr=e=>3===e.type,Ir=e=>0===e.length,Fr=e=>{var t=(t,r)=>{var n=Lr.create("li");E(t,(e=>n.append(e))),r?e.insert(n,r,!0):e.append(n)},r=_(e.children(),((e,r)=>Mr(r)?[...e,r]:Ir(e)||Mr(r)?e:(t(e,r),[])),[]);Ir(r)||t(r)},jr=e=>{et(e)&&(e=>{e.on("keydown",(t=>{t.keyCode!==_e.TAB||_e.metaKeyPressed(t)||e.undoManager.transact((()=>{(t.shiftKey?Qt(e):Xt(e))&&t.preventDefault()}))}))})(e),(e=>{e.on("ExecCommand",(t=>{var r=t.command.toLowerCase();"delete"!==r&&"forwarddelete"!==r||!Nr(e)||br(e.dom,e.getBody())})),e.on("keydown",(t=>{t.keyCode===_e.BACKSPACE?Tr(e,!1)&&t.preventDefault():t.keyCode===_e.DELETE&&Tr(e,!0)&&t.preventDefault()}))})(e)},Ur=(e,t)=>r=>(r.setEnabled(e.selection.isEditable()),kt(e,(n=>{r.setActive(St(n.parents,t)),r.setEnabled(!Et(e,n.element)&&e.selection.isEditable())}))),zr=(e,t)=>r=>kt(e,(n=>r.setEnabled(St(n.parents,t)&&!Et(e,n.element))));e.add("lists",(e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),(e=>{e.on("PreInit",(()=>{e.parser.addNodeFilter("ul,ol",(e=>E(e,Fr)))}))})(e),e.hasPlugin("rtc",!0)?Br(e):(jr(e),Pr(e)),(e=>{var t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:Ur(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:Ur(e,"UL")}))})(e),(e=>{var t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:zr(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{var r=ft(e,t);return $e(r)?["listprops"]:[]}})})(e),(e=>({backspaceDelete:t=>{Tr(e,t)}}))(e))))}()},51:function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,a){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var l=/\+/g;e=e.split(t);var s=1e3;a&&"number"==typeof a.maxKeys&&(s=a.maxKeys);var d=e.length;s>0&&d>s&&(d=s);for(var c=0;c<d;++c){var m,u,f,g,p=e[c].replace(l,"%20"),v=p.indexOf(r);v>=0?(m=p.substr(0,v),u=p.substr(v+1)):(m=p,u=""),f=decodeURIComponent(m),g=decodeURIComponent(u),n(i,f)?o(i[f])?i[f].push(g):i[f]=[i[f],g]:i[f]=g}return i};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},52:function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,l){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?a(i(e),(function(i){var l=encodeURIComponent(n(i))+r;return o(e[i])?a(e[i],(function(e){return l+encodeURIComponent(n(e))})).join(t):l+encodeURIComponent(n(e[i]))})).join(t):l?encodeURIComponent(n(l))+r+encodeURIComponent(n(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},7:function(e,t,r){var n=["uid"];function o(){"use strict";o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function c(e,t,r,o){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),l=new _(o||[]);return n(i,"_invoke",{value:S(e,r,l)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function f(){}function g(){}function p(){}var v={};d(v,i,(function(){return this}));var h=Object.getPrototypeOf,b=h&&h(h(N([])));b&&b!==t&&r.call(b,i)&&(v=b);var y=p.prototype=f.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,a,i,l){var s=m(e[n],e,a);if("throw"!==s.type){var d=s.arg,c=d.value;return c&&"object"==typeof c&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){o("next",e,i,l)}),(function(e){o("throw",e,i,l)})):t.resolve(c).then((function(e){d.value=e,i(d)}),(function(e){return o("throw",e,i,l)}))}l(s.arg)}var a;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return T()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var l=x(i,r);if(l){if(l===u)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=m(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),u;var o=m(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,u;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return g.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:g,configurable:!0}),g.displayName=d(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,d(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},C(w.prototype),d(w.prototype,l,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new w(c(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(y),d(y,s,"Generator"),d(y,i,(function(){return this})),d(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=N,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function a(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return c(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||d()}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function s(e,t){return c(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],s=!0,d=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(d)throw o}}return l}}(e,t)||p(e,t)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){if(Array.isArray(e))return e}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}function p(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(){"use strict";var t=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},r=function(e){return{eq:e}},d=r((function(e,t){return e===t})),c=function(e){return r((function(t,r){if(t.length!==r.length)return!1;for(var n=t.length,o=0;o<n;o++)if(!e.eq(t[o],r[o]))return!1;return!0}))},m=function(e,t){return function(e,t){return r((function(r,n){return e.eq(t(r),t(n))}))}(c(e),(function(e){return function(e,t){return Array.prototype.slice.call(e).sort(t)}(e,t)}))},f=function(e){return r((function(t,r){var n=Object.keys(t),o=Object.keys(r);if(!m(d).eq(n,o))return!1;for(var a=n.length,i=0;i<a;i++){var l=n[i];if(!e.eq(t[l],r[l]))return!1}return!0}))},p=r((function(e,r){if(e===r)return!0;var n=t(e);return n===t(r)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(n)?e===r:"array"===n?c(p).eq(e,r):"object"===n&&f(p).eq(e,r))})),v=Object.getPrototypeOf,h=(e,t,r)=>{var n;return!!r(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},b=e=>t=>{return n=typeof(r=t),(null===r?"null":"object"===n&&Array.isArray(r)?"array":"object"===n&&h(r,String,((e,t)=>t.isPrototypeOf(e)))?"string":n)===e;var r,n},y=e=>t=>typeof t===e,C=e=>t=>e===t,w=(e,t)=>x(e)&&h(e,t,((e,t)=>v(e)===t)),S=b("string"),x=b("object"),E=e=>w(e,Object),k=b("array"),_=C(null),N=y("boolean"),T=C(void 0),R=e=>null==e,D=e=>!R(e),A=y("function"),O=y("number"),B=(e,t)=>{if(k(e)){for(var r=0,n=e.length;r<n;++r)if(!t(e[r]))return!1;return!0}return!1},P=()=>{},L=(e,t)=>function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e(t.apply(null,n))},M=(e,t)=>r=>e(t(r)),I=e=>()=>e,F=e=>e,j=(e,t)=>e===t;function U(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=r.concat(n);return e.apply(null,a)}}var z=e=>t=>!e(t),H=e=>()=>{throw new Error(e)},$=e=>e(),W=e=>{e()},V=I(!1),q=I(!0);class K{constructor(e,t){this.tag=e,this.value=t}static some(e){return new K(!0,e)}static none(){return K.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?K.some(e(this.value)):K.none()}bind(e){return this.tag?e(this.value):K.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:K.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return D(e)?K.some(e):K.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}K.singletonNone=new K(!1);var G=Array.prototype.slice,Y=Array.prototype.indexOf,X=Array.prototype.push,Q=(e,t)=>Y.call(e,t),Z=(e,t)=>Q(e,t)>-1,J=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return!0}return!1},ee=(e,t)=>{for(var r=e.length,n=new Array(r),o=0;o<r;o++){var a=e[o];n[o]=t(a,o)}return n},te=(e,t)=>{for(var r=0,n=e.length;r<n;r++){t(e[r],r)}},re=(e,t)=>{for(var r=e.length-1;r>=0;r--){t(e[r],r)}},ne=(e,t)=>{for(var r=[],n=[],o=0,a=e.length;o<a;o++){var i=e[o];(t(i,o)?r:n).push(i)}return{pass:r,fail:n}},oe=(e,t)=>{for(var r=[],n=0,o=e.length;n<o;n++){var a=e[n];t(a,n)&&r.push(a)}return r},ae=(e,t,r)=>(re(e,((e,n)=>{r=t(r,e,n)})),r),ie=(e,t,r)=>(te(e,((e,n)=>{r=t(r,e,n)})),r),le=(e,t,r)=>{for(var n=0,o=e.length;n<o;n++){var a=e[n];if(t(a,n))return K.some(a);if(r(a,n))break}return K.none()},se=(e,t)=>le(e,t,V),de=(e,t)=>{for(var r=0,n=e.length;r<n;r++){if(t(e[r],r))return K.some(r)}return K.none()},ce=e=>{for(var t=[],r=0,n=e.length;r<n;++r){if(!k(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);X.apply(t,e[r])}return t},me=(e,t)=>ce(ee(e,t)),ue=(e,t)=>{for(var r=0,n=e.length;r<n;++r){if(!0!==t(e[r],r))return!1}return!0},fe=e=>{var t=G.call(e,0);return t.reverse(),t},ge=(e,t)=>oe(e,(e=>!Z(t,e))),pe=(e,t)=>{for(var r={},n=0,o=e.length;n<o;n++){var a=e[n];r[String(a)]=t(a,n)}return r},ve=(e,t)=>{var r=G.call(e,0);return r.sort(t),r},he=(e,t)=>t>=0&&t<e.length?K.some(e[t]):K.none(),be=e=>he(e,0),ye=e=>he(e,e.length-1),Ce=A(Array.from)?Array.from:e=>G.call(e),we=(e,t)=>{for(var r=0;r<e.length;r++){var n=t(e[r],r);if(n.isSome())return n}return K.none()},Se=(e,t)=>{for(var r=[],n=A(t)?e=>J(r,(r=>t(r,e))):e=>Z(r,e),o=0,a=e.length;o<a;o++){var i=e[o];n(i)||r.push(i)}return r},xe=Object.keys,Ee=Object.hasOwnProperty,ke=(e,t)=>{for(var r=xe(e),n=0,o=r.length;n<o;n++){var a=r[n];t(e[a],a)}},_e=(e,t)=>Ne(e,((e,r)=>({k:r,v:t(e,r)}))),Ne=(e,t)=>{var r={};return ke(e,((e,n)=>{var o=t(e,n);r[o.k]=o.v})),r},Te=e=>(t,r)=>{e[r]=t},Re=(e,t,r,n)=>{ke(e,((e,o)=>{(t(e,o)?r:n)(e,o)}))},De=(e,t)=>{var r={};return Re(e,t,Te(r),P),r},Ae=(e,t)=>{var r=[];return ke(e,((e,n)=>{r.push(t(e,n))})),r},Oe=e=>Ae(e,F),Be=(e,t)=>Pe(e,t)?K.from(e[t]):K.none(),Pe=(e,t)=>Ee.call(e,t),Le=(e,t)=>Pe(e,t)&&void 0!==e[t]&&null!==e[t],Me=e=>{var t={};return te(e,(e=>{t[e]={}})),xe(t)},Ie=e=>void 0!==e.length,Fe=Array.isArray,je=(e,t,r)=>{if(!e)return!1;if(r=r||e,Ie(e)){for(var n=0,o=e.length;n<o;n++)if(!1===t.call(r,e[n],n,e))return!1}else for(var a in e)if(Pe(e,a)&&!1===t.call(r,e[a],a,e))return!1;return!0},Ue=(e,t)=>{var r=[];return je(e,((n,o)=>{r.push(t(n,o,e))})),r},ze=(e,t)=>{var r=[];return je(e,((n,o)=>{t&&!t(n,o,e)||r.push(n)})),r},He=(e,t,r,n)=>{for(var o=T(r)?e[0]:r,a=0;a<e.length;a++)o=t.call(n,o,e[a],a);return o},$e=(e,t,r)=>{for(var n=0,o=e.length;n<o;n++)if(t.call(r,e[n],n,e))return n;return-1},We=e=>e[e.length-1],Ve=e=>{var t,r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=e.apply(null,o)}return t}},qe=()=>Ke(0,0),Ke=(e,t)=>({major:e,minor:t}),Ge={nu:Ke,detect:(e,t)=>{var r=String(t).toLowerCase();return 0===e.length?qe():((e,t)=>{var r=((e,t)=>{for(var r=0;r<e.length;r++){var n=e[r];if(n.test(t))return n}})(e,t);if(!r)return{major:0,minor:0};var n=e=>Number(t.replace(r,"$"+e));return Ke(n(1),n(2))})(e,r)},unknown:qe},Ye=(e,t)=>{var r=String(t).toLowerCase();return se(e,(e=>e.search(r)))},Xe=(e,t,r)=>""===t||e.length>=t.length&&e.substr(r,r+t.length)===t,Qe=(e,t)=>Je(e,t)?((e,t)=>e.substring(t))(e,t.length):e,Ze=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=e.indexOf(t,r);return-1!==o&&(!!T(n)||o+t.length<=n)},Je=(e,t)=>Xe(e,t,0),et=(e,t)=>Xe(e,t,e.length-t.length),tt=e=>t=>t.replace(e,""),rt=tt(/^\s+|\s+$/g),nt=tt(/^\s+/g),ot=tt(/\s+$/g),at=e=>e.length>0,it=e=>!at(e),lt=function(e){var t=parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:10);return isNaN(t)?K.none():K.some(t)},st=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,dt=e=>t=>Ze(t,e),ct=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ze(e,"edge/")&&Ze(e,"chrome")&&Ze(e,"safari")&&Ze(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,st],search:e=>Ze(e,"chrome")&&!Ze(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ze(e,"msie")||Ze(e,"trident")},{name:"Opera",versionRegexes:[st,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:dt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:dt("firefox")},{name:"Safari",versionRegexes:[st,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ze(e,"safari")||Ze(e,"mobile/"))&&Ze(e,"applewebkit")}],mt=[{name:"Windows",search:dt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ze(e,"iphone")||Ze(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:dt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:dt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:dt("linux"),versionRegexes:[]},{name:"Solaris",search:dt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:dt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:dt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ut={browsers:I(ct),oses:I(mt)},ft="Edge",gt="Chromium",pt="Opera",vt="Firefox",ht="Safari",bt=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isEdge:n(ft),isChromium:n(gt),isIE:n("IE"),isOpera:n(pt),isFirefox:n(vt),isSafari:n(ht)}},yt={unknown:()=>bt({current:void 0,version:Ge.unknown()}),nu:bt,edge:I(ft),chromium:I(gt),ie:I("IE"),opera:I(pt),firefox:I(vt),safari:I(ht)},Ct="Windows",wt="Android",St="Linux",xt="macOS",Et="Solaris",kt="FreeBSD",_t="ChromeOS",Nt=e=>{var t=e.current,r=e.version,n=e=>()=>t===e;return{current:t,version:r,isWindows:n(Ct),isiOS:n("iOS"),isAndroid:n(wt),isMacOS:n(xt),isLinux:n(St),isSolaris:n(Et),isFreeBSD:n(kt),isChromeOS:n(_t)}},Tt={unknown:()=>Nt({current:void 0,version:Ge.unknown()}),nu:Nt,windows:I(Ct),ios:I("iOS"),android:I(wt),linux:I(St),macos:I(xt),solaris:I(Et),freebsd:I(kt),chromeos:I(_t)},Rt=(e,t,r)=>{var n=ut.browsers(),o=ut.oses(),a=t.bind((e=>((e,t)=>we(t.brands,(t=>{var r=t.brand.toLowerCase();return se(e,(e=>{var t;return r===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:Ge.nu(parseInt(t.version,10),0)})))})))(n,e))).orThunk((()=>((e,t)=>Ye(e,t).map((e=>{var r=Ge.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(n,e))).fold(yt.unknown,yt.nu),i=((e,t)=>Ye(e,t).map((e=>{var r=Ge.detect(e.versionRegexes,t);return{current:e.name,version:r}})))(o,e).fold(Tt.unknown,Tt.nu),l=((e,t,r,n)=>{var o=e.isiOS()&&!0===/ipad/i.test(r),a=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),l=i||n("(pointer:coarse)"),s=o||!a&&i&&n("(min-device-width:768px)"),d=a||i&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(r),m=!d&&!s&&!c;return{isiPad:I(o),isiPhone:I(a),isTablet:I(s),isPhone:I(d),isTouch:I(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:I(c),isDesktop:I(m)}})(i,a,e,r);return{browser:a,os:i,deviceType:l}},Dt=e=>window.matchMedia(e).matches,At=Ve((()=>Rt(navigator.userAgent,K.from(navigator.userAgentData),Dt))),Ot=()=>At(),Bt=navigator.userAgent,Pt=Ot(),Lt=Pt.browser,Mt=Pt.os,It=Pt.deviceType,Ft=-1!==Bt.indexOf("Windows Phone"),jt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Lt.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Lt.isIE(),windowsPhone:Ft,browser:{current:Lt.current,version:Lt.version,isChromium:Lt.isChromium,isEdge:Lt.isEdge,isFirefox:Lt.isFirefox,isIE:Lt.isIE,isOpera:Lt.isOpera,isSafari:Lt.isSafari},os:{current:Mt.current,version:Mt.version,isAndroid:Mt.isAndroid,isChromeOS:Mt.isChromeOS,isFreeBSD:Mt.isFreeBSD,isiOS:Mt.isiOS,isLinux:Mt.isLinux,isMacOS:Mt.isMacOS,isSolaris:Mt.isSolaris,isWindows:Mt.isWindows},deviceType:{isDesktop:It.isDesktop,isiPad:It.isiPad,isiPhone:It.isiPhone,isPhone:It.isPhone,isTablet:It.isTablet,isTouch:It.isTouch,isWebView:It.isWebView}},Ut=/^\s*|\s*$/g,zt=e=>R(e)?"":(""+e).replace(Ut,""),Ht={trim:zt,isArray:Fe,is:(e,t)=>t?!("array"!==t||!Fe(e))||typeof e===t:void 0!==e,toArray:e=>{if(Fe(e))return e;for(var t=[],r=0,n=e.length;r<n;r++)t[r]=e[r];return t},makeMap:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S(e)?e.split(t||","):e||[],o=n.length;o--;)r[n[o]]={};return r},each:je,map:Ue,grep:ze,inArray:(e,t)=>{if(e)for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},hasOwn:Pe,extend:function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++){var r=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];for(var n in r)if(Pe(r,n)){var o=r[n];void 0!==o&&(e[n]=o)}}return e},walk:function e(t,r,n,o){o=o||this,t&&(n&&(t=t[n]),je(t,((t,a)=>!1!==r.call(o,t,a,n)&&(e(t,r,n,o),!0))))},resolve:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=e.split("."),n=0,o=r.length;n<o&&(t=t[r[n]]);n++);return t},explode:(e,t)=>k(e)?e:""===e?[]:Ue(e.split(t||","),zt),_addCacheSuffix:e=>{var t=jt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},$t=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j;return e.exists((e=>r(e,t)))},Wt=function(e,t){return Vt(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:j).getOr(e.isNone()&&t.isNone())},Vt=(e,t,r)=>e.isSome()&&t.isSome()?K.some(r(e.getOrDie(),t.getOrDie())):K.none(),qt=(e,t)=>e?K.some(t):K.none(),Kt="undefined"!=typeof window?window:Function("return this;")(),Gt=(e,t)=>((e,t)=>{for(var r=null!=t?t:Kt,n=0;n<e.length&&null!=r;++n)r=r[e[n]];return r})(e.split("."),t),Yt=(e,t)=>{var r=((e,t)=>Gt(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r},Xt=Object.getPrototypeOf,Qt=e=>{var t=Gt("ownerDocument.defaultView",e);return x(e)&&((e=>Yt("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Xt(e).constructor.name))},Zt=e=>e.dom.nodeName.toLowerCase(),Jt=e=>e.dom.nodeType,er=e=>t=>Jt(t)===e,tr=e=>rr(e)&&Qt(e.dom),rr=er(1),nr=er(3),or=er(9),ar=er(11),ir=e=>t=>rr(t)&&Zt(t)===e,lr=(e,t,r)=>{if(!(S(r)||N(r)||O(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},sr=(e,t,r)=>{lr(e.dom,t,r)},dr=(e,t)=>{var r=e.dom;ke(t,((e,t)=>{lr(r,t,e)}))},cr=(e,t)=>{var r=e.dom.getAttribute(t);return null===r?void 0:r},mr=(e,t)=>K.from(cr(e,t)),ur=(e,t)=>{var r=e.dom;return!(!r||!r.hasAttribute)&&r.hasAttribute(t)},fr=(e,t)=>{e.dom.removeAttribute(t)},gr=e=>ie(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),pr=(e,t)=>{var r=cr(e,t);return void 0===r||""===r?[]:r.split(" ")},vr=e=>void 0!==e.dom.classList,hr=e=>pr(e,"class"),br=(e,t)=>((e,t,r)=>{var n=pr(e,t).concat([r]);return sr(e,t,n.join(" ")),!0})(e,"class",t),yr=(e,t)=>((e,t,r)=>{var n=oe(pr(e,t),(e=>e!==r));return n.length>0?sr(e,t,n.join(" ")):fr(e,t),!1})(e,"class",t),Cr=(e,t)=>{vr(e)?e.dom.classList.add(t):br(e,t)},wr=e=>{0===(vr(e)?e.dom.classList:hr(e)).length&&fr(e,"class")},Sr=(e,t)=>{vr(e)?e.dom.classList.remove(t):yr(e,t);wr(e)},xr=(e,t)=>{var r=vr(e)?e.dom.classList.toggle(t):((e,t)=>Z(hr(e),t)?yr(e,t):br(e,t))(e,t);return wr(e),r},Er=(e,t)=>vr(e)&&e.dom.classList.contains(t),kr=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},_r={fromHtml:(e,t)=>{var r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){var n="HTML does not have a single root node";throw console.error(n,e),new Error(n)}return kr(r.childNodes[0])},fromTag:(e,t)=>{var r=(t||document).createElement(e);return kr(r)},fromText:(e,t)=>{var r=(t||document).createTextNode(e);return kr(r)},fromDom:kr,fromPoint:(e,t,r)=>K.from(e.dom.elementFromPoint(t,r)).map(kr)},Nr=(e,t)=>{var r=[],n=e=>(r.push(e),t(e)),o=t(e);do{o=o.bind(n)}while(o.isSome());return r},Tr=(e,t)=>{var r=e.dom;if(1!==r.nodeType)return!1;var n=r;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Rr=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,Dr=(e,t)=>e.dom===t.dom,Ar=(e,t)=>{var r=e.dom,n=t.dom;return r!==n&&r.contains(n)},Or=e=>_r.fromDom(e.dom.ownerDocument),Br=e=>or(e)?e:Or(e),Pr=e=>_r.fromDom(Br(e).dom.defaultView),Lr=e=>K.from(e.dom.parentNode).map(_r.fromDom),Mr=e=>K.from(e.dom.parentElement).map(_r.fromDom),Ir=(e,t)=>{for(var r=A(t)?t:V,n=e.dom,o=[];null!==n.parentNode&&void 0!==n.parentNode;){var a=n.parentNode,i=_r.fromDom(a);if(o.push(i),!0===r(i))break;n=a}return o},Fr=e=>K.from(e.dom.previousSibling).map(_r.fromDom),jr=e=>K.from(e.dom.nextSibling).map(_r.fromDom),Ur=e=>fe(Nr(e,Fr)),zr=e=>Nr(e,jr),Hr=e=>ee(e.dom.childNodes,_r.fromDom),$r=(e,t)=>{var r=e.dom.childNodes;return K.from(r[t]).map(_r.fromDom)},Wr=e=>$r(e,0),Vr=e=>$r(e,e.dom.childNodes.length-1),qr=e=>e.dom.childNodes.length,Kr=e=>ar(e)&&D(e.dom.host),Gr=A(Element.prototype.attachShadow)&&A(Node.prototype.getRootNode),Yr=I(Gr),Xr=Gr?e=>_r.fromDom(e.dom.getRootNode()):Br,Qr=e=>Kr(e)?e:(e=>{var t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return _r.fromDom(t)})(Br(e)),Zr=e=>_r.fromDom(e.dom.host),Jr=e=>{if(Yr()&&D(e.target)){var t=_r.fromDom(e.target);if(rr(t)&&en(t)&&e.composed&&e.composedPath){var r=e.composedPath();if(r)return be(r)}}return K.from(e.target)},en=e=>D(e.dom.shadowRoot),tn=e=>{var t=nr(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var r=t.ownerDocument;return(e=>{var t=Xr(e);return Kr(t)?K.some(t):K.none()})(_r.fromDom(t)).fold((()=>r.body.contains(t)),M(tn,Zr))},rn=(e,t,r,n,o)=>e(r,n)?K.some(r):A(o)&&o(r)?K.none():t(r,n,o),nn=(e,t,r)=>{for(var n=e.dom,o=A(r)?r:V;n.parentNode;){n=n.parentNode;var a=_r.fromDom(n);if(t(a))return K.some(a);if(o(a))break}return K.none()},on=(e,t,r)=>rn(((e,t)=>t(e)),nn,e,t,r),an=(e,t)=>se(e.dom.childNodes,(e=>t(_r.fromDom(e)))).map(_r.fromDom),ln=(e,t)=>{var r=e=>{for(var n=0;n<e.childNodes.length;n++){var o=_r.fromDom(e.childNodes[n]);if(t(o))return K.some(o);var a=r(e.childNodes[n]);if(a.isSome())return a}return K.none()};return r(e.dom)},sn=(e,t,r)=>nn(e,(e=>Tr(e,t)),r),dn=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return Rr(r)?K.none():K.from(r.querySelector(e)).map(_r.fromDom)})(t,e),cn=(e,t,r)=>rn(((e,t)=>Tr(e,t)),sn,e,t,r),mn=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return tn(e)?e.dom.isContentEditable:(t=e,cn(t,"[contenteditable]")).fold(I(r),(e=>"true"===un(e)))},un=e=>e.dom.contentEditable,fn=e=>void 0!==e.style&&A(e.style.getPropertyValue),gn=(e,t,r)=>{if(!S(r))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);fn(e)&&e.style.setProperty(t,r)},pn=(e,t,r)=>{var n=e.dom;gn(n,t,r)},vn=(e,t)=>{var r=e.dom;ke(t,((e,t)=>{gn(r,t,e)}))},hn=(e,t)=>{var r=e.dom,n=window.getComputedStyle(r).getPropertyValue(t);return""!==n||tn(e)?n:bn(r,t)},bn=(e,t)=>fn(e)?e.style.getPropertyValue(t):"",yn=(e,t)=>{var r=e.dom,n=bn(r,t);return K.from(n).filter((e=>e.length>0))},Cn=e=>{var t={},r=e.dom;if(fn(r))for(var n=0;n<r.style.length;n++){var o=r.style.item(n);t[o]=r.style[o]}return t},wn=(e,t)=>{((e,t)=>{fn(e)&&e.style.removeProperty(t)})(e.dom,t),$t(mr(e,"style").map(rt),"")&&fr(e,"style")},Sn=(e,t)=>{Lr(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},xn=(e,t)=>{jr(e).fold((()=>{Lr(e).each((e=>{kn(e,t)}))}),(e=>{Sn(e,t)}))},En=(e,t)=>{Wr(e).fold((()=>{kn(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))},kn=(e,t)=>{e.dom.appendChild(t.dom)},_n=(e,t)=>{Sn(e,t),kn(t,e)},Nn=(e,t)=>{te(t,(t=>{kn(e,t)}))},Tn=e=>{e.dom.textContent="",te(Hr(e),(e=>{Rn(e)}))},Rn=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Dn=e=>{var t,r,n=Hr(e);n.length>0&&(t=e,te(r=n,((e,n)=>{var o=0===n?t:r[n-1];xn(o,e)}))),Rn(e)},An=e=>ee(e,_r.fromDom),On=e=>e.dom.innerHTML,Bn=(e,t)=>{var r=Or(e).dom,n=_r.fromDom(r.createDocumentFragment()),o=((e,t)=>{var r=(t||document).createElement("div");return r.innerHTML=e,Hr(_r.fromDom(r))})(t,r);Nn(n,o),Tn(e),kn(e,n)},Pn=(e,t)=>r=>{e(r)&&t((e=>{var t=_r.fromDom(Jr(e).getOr(e.target)),r=()=>e.stopPropagation(),n=()=>e.preventDefault(),o=L(n,r);return((e,t,r,n,o,a,i)=>({target:e,x:t,y:r,stop:n,prevent:o,kill:a,raw:i}))(t,e.clientX,e.clientY,r,n,o,e)})(r))},Ln=(e,t,r,n)=>((e,t,r,n,o)=>{var a=Pn(r,n);return e.dom.addEventListener(t,a,o),{unbind:U(Mn,e,t,a,o)}})(e,t,r,n,!1),Mn=(e,t,r,n)=>{e.dom.removeEventListener(t,r,n)},In=(e,t)=>({left:e,top:t,translate:(r,n)=>In(e+r,t+n)}),Fn=In,jn=(e,t)=>void 0!==e?e:void 0!==t?t:0,Un=e=>{var t=e.dom,r=t.ownerDocument.body;return r===t?Fn(r.offsetLeft,r.offsetTop):tn(e)?(e=>{var t=e.getBoundingClientRect();return Fn(t.left,t.top)})(t):Fn(0,0)},zn=e=>{var t=void 0!==e?e.dom:document,r=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return Fn(r,n)},Hn=(e,t,r)=>{var n=(void 0!==r?r.dom:document).defaultView;n&&n.scrollTo(e,t)},$n=(e,t)=>{Ot().browser.isSafari()&&A(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Wn=(e,t,r,n)=>({x:e,y:t,width:r,height:n,right:e+r,bottom:t+n}),Vn=e=>{var t=void 0===e?window:e,r=t.document,n=zn(_r.fromDom(r));return(e=>{var t=void 0===e?window:e;return Ot().browser.isFirefox()?K.none():K.from(t.visualViewport)})(t).fold((()=>{var e=t.document.documentElement,r=e.clientWidth,o=e.clientHeight;return Wn(n.left,n.top,r,o)}),(e=>Wn(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height)))},qn=(e,t)=>{var r=[];return te(Hr(e),(e=>{t(e)&&(r=r.concat([e])),r=r.concat(qn(e,t))})),r},Kn=(e,t)=>((e,t)=>{var r=void 0===t?document:t.dom;return Rr(r)?[]:ee(r.querySelectorAll(e),_r.fromDom)})(t,e),Gn=(e,t,r)=>nn(e,t,r).isSome(),Yn=(e,t)=>((e,t)=>{var r=e.dom;return r.parentNode?an(_r.fromDom(r.parentNode),(r=>!Dr(e,r)&&t(r))):K.none()})(e,t).isSome(),Xn=(e,t)=>ln(e,t).isSome();class Qn{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,r,n){if(e){if(!n&&e[t])return e[t];if(e!==this.rootNode){var o=e[r];if(o)return o;for(var a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(o=a[r])return o}}}findPreviousNode(e,t){if(e){var r=e.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!t)for(var n=r.lastChild;n;n=n.lastChild)if(!n.lastChild)return n;return r}var o=e.parentNode;if(o&&o!==this.rootNode)return o}}}var Zn,Jn="\ufeff",eo="Â ",to=e=>e===Jn,ro=/^[ \t\r\n]*$/,no=e=>ro.test(e),oo=e=>"\n"===e||"\r"===e,ao=function(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=((e,t)=>t<=0?"":new Array(t+1).join(e))(" ",arguments.length>1&&void 0!==arguments[1]?arguments[1]:4),o=e.replace(/\t/g,n),a=ie(o,((e,n)=>(e=>-1!==" \f\t\v".indexOf(e))(n)||n===eo?e.pcIsSpace||""===e.str&&t||e.str.length===o.length-1&&r||((e,t)=>t<e.length&&t>=0&&oo(e[t]))(o,e.str.length+1)?{pcIsSpace:!1,str:e.str+eo}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:oo(n),str:e.str+n}),{pcIsSpace:!1,str:""});return a.str},io=e=>t=>!!t&&t.nodeType===e,lo=e=>!!e&&!Object.getPrototypeOf(e),so=io(1),co=e=>so(e)&&tr(_r.fromDom(e)),mo=e=>{var t=e.toLowerCase();return e=>D(e)&&e.nodeName.toLowerCase()===t},uo=e=>{var t=e.map((e=>e.toLowerCase()));return e=>{if(e&&e.nodeName){var r=e.nodeName.toLowerCase();return Z(t,r)}return!1}},fo=(e,t)=>{var r=t.toLowerCase().split(" ");return t=>{if(so(t)){var n=t.ownerDocument.defaultView;if(n)for(var o=0;o<r.length;o++){var a=n.getComputedStyle(t,null);if((a?a.getPropertyValue(e):null)===r[o])return!0}}return!1}},go=e=>so(e)&&e.hasAttribute("data-mce-bogus"),po=e=>so(e)&&"TABLE"===e.tagName,vo=e=>t=>{if(co(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},ho=uo(["textarea","input"]),bo=io(3),yo=io(4),Co=io(7),wo=io(8),So=io(9),xo=io(11),Eo=mo("br"),ko=mo("img"),_o=vo("true"),No=vo("false"),To=uo(["td","th"]),Ro=uo(["td","th","caption"]),Do=uo(["video","audio","object","embed"]),Ao=mo("li"),Oo=mo("details"),Bo=mo("summary"),Po={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Lo=(Zn="data-mce-bookmark",e=>so(e)&&e.hasAttribute(Zn)),Mo=(e,t,r)=>no(e.data)&&!((e,t,r)=>{var n=_r.fromDom(t),o=_r.fromDom(e),a=r.getWhitespaceElements();return Gn(o,(e=>Pe(a,Zt(e))),U(Dr,n))})(e,t,r),Io=(e,t,r,n)=>bo(e)&&!Mo(e,t,r)&&(!n.includeZwsp||!(e=>{var t,r=g(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(!to(n))return!1}}catch(e){r.e(e)}finally{r.f()}return!0})(e.data)),Fo=(e,t,r,n)=>A(n.isContent)&&n.isContent(t)||((e,t)=>so(e)&&Pe(t.getNonEmptyElements(),e.nodeName))(t,e)||Lo(t)||(e=>so(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")))(t)||Io(t,r,e,n)||No(t)||_o(t)&&(e=>Mr(_r.fromDom(e)).exists((e=>!mn(e))))(t),jo=(e,t,r)=>{var n=u(u({},Po),r);if(n.checkRootAsContent&&Fo(e,t,t,n))return!1;var o=t.firstChild,a=0;if(!o)return!0;var i=new Qn(o,t);do{if(n.skipBogus&&so(o)){var l=o.getAttribute("data-mce-bogus");if(l){o=i.next("all"===l);continue}}if(wo(o))o=i.next(!0);else if(Eo(o))a++,o=i.next();else{if(Fo(e,o,t,n))return!1;o=i.next()}}while(o);return a<=1},Uo=(e,t,r)=>jo(e,t.dom,u({checkRootAsContent:!0},r)),zo=(e,t,r)=>Fo(e,t,t,u({includeZwsp:Po.includeZwsp},r)),Ho=e=>{var t=e;return{get:()=>t,set:e=>{t=e}}},$o=()=>{var e=(e=>{var t=Ho(K.none()),r=()=>t.get().each(e);return{clear:()=>{r(),t.set(K.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{r(),t.set(K.some(e))}}})(P);return u(u({},e),{},{on:t=>e.get().each(t)})},Wo=e=>{var t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":"html"},Vo=e=>"html"!==Wo(e),qo=e=>Vo(e.nodeName),Ko=e=>Wo(e.nodeName),Go=["svg","math"],Yo="data-mce-block",Xo=e=>ee((e=>oe(xe(e),(e=>!/[A-Z]/.test(e))))(e),(e=>{var t=CSS.escape(e);return`${t}:`+ee(Go,(e=>`not(${e} ${t})`)).join(":")})).join(","),Qo=(e,t)=>D(t.querySelector(e))?(t.setAttribute(Yo,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Yo),!1),Zo=(e,t)=>{var r=Xo(e.getTransparentElements()),n=Xo(e.getBlockElements());return oe(t.querySelectorAll(r),(e=>Qo(n,e)))},Jo=(e,t,r)=>{for(var n,o=r?"lastChild":"firstChild",a=t[o];a;a=a[o])if(jo(e,a,{checkRootAsContent:!0}))return void(null===(n=a.parentNode)||void 0===n||n.removeChild(a))},ea=(e,t,r)=>{var n=e.getBlockElements(),o=_r.fromDom(t),a=e=>Zt(e)in n,i=e=>Dr(e,o);te(An(r),(t=>{nn(t,a,i).each((r=>{var n=((e,t)=>oe(Hr(e),t))(t,(t=>a(t)&&!e.isValidChild(Zt(r),Zt(t))));if(n.length>0){var o=Mr(r);te(n,(t=>{nn(t,a,i).each((r=>{((e,t,r)=>{var n=document.createRange(),o=t.parentNode;if(o){n.setStartBefore(t),n.setEndBefore(r);var a=n.extractContents();Jo(e,a,!0),n.setStartAfter(r),n.setEndAfter(t);var i=n.extractContents();Jo(e,i,!1),jo(e,a,{checkRootAsContent:!0})||o.insertBefore(a,t),jo(e,r,{checkRootAsContent:!0})||o.insertBefore(r,t),jo(e,i,{checkRootAsContent:!0})||o.insertBefore(i,t),o.removeChild(t)}})(e,r.dom,t.dom)}))})),o.each((t=>Zo(e,t.dom)))}}))}))},ta=(e,t)=>{var r=Zo(e,t);ea(e,t,r),((e,t,r)=>{te([...r,...ia(e,t)?[t]:[]],(t=>te(Kn(_r.fromDom(t),t.nodeName.toLowerCase()),(t=>{la(e,t.dom)&&Dn(t)}))))})(e,t,r)},ra=(e,t)=>{if(aa(e,t)){var r=Xo(e.getBlockElements());Qo(r,t)}},na=e=>e.hasAttribute(Yo),oa=(e,t)=>Pe(e.getTransparentElements(),t),aa=(e,t)=>so(t)&&oa(e,t.nodeName),ia=(e,t)=>aa(e,t)&&na(t),la=(e,t)=>aa(e,t)&&!na(t),sa=(e,t)=>1===t.type&&oa(e,t.name)&&S(t.attr(Yo)),da=Ot().browser,ca=e=>se(e,rr),ma=(e,t)=>e.children&&Z(e.children,t),ua=(e,t,r)=>{var n=0,o=0,a=e.ownerDocument;if(r=r||e,t){if(r===e&&t.getBoundingClientRect&&"static"===hn(_r.fromDom(e),"position")){var i=t.getBoundingClientRect();return{x:n=i.left+(a.documentElement.scrollLeft||e.scrollLeft)-a.documentElement.clientLeft,y:o=i.top+(a.documentElement.scrollTop||e.scrollTop)-a.documentElement.clientTop}}for(var l=t;l&&l!==r&&l.nodeType&&!ma(l,r);){var s=l;n+=s.offsetLeft||0,o+=s.offsetTop||0,l=s.offsetParent}for(l=t.parentNode;l&&l!==r&&l.nodeType&&!ma(l,r);)n-=l.scrollLeft||0,o-=l.scrollTop||0,l=l.parentNode;o+=(e=>da.isFirefox()&&"table"===Zt(e)?ca(Hr(e)).filter((e=>"caption"===Zt(e))).bind((e=>ca(zr(e)).map((t=>{var r=t.dom.offsetTop,n=e.dom.offsetTop,o=e.dom.offsetHeight;return r<=n?-o:0})))).getOr(0):0)(_r.fromDom(t))}return{x:n,y:o}},fa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0,n={},o=_r.fromDom(e),a=Br(o),i=e=>{kn(Qr(o),e)},l=e=>{var t=Qr(o);dn(t,"#"+e).each(Rn)},s=e=>Be(n,e).getOrThunk((()=>({id:"mce-u"+r++,passed:[],failed:[],count:0}))),d=e=>new Promise(((r,o)=>{var l,d=Ht._addCacheSuffix(e),c=s(d);n[d]=c,c.count++;var m=(e,t)=>{te(e,W),c.status=t,c.passed=[],c.failed=[],l&&(l.onload=null,l.onerror=null,l=null)},u=()=>m(c.passed,2),f=()=>m(c.failed,3);if(r&&c.passed.push(r),o&&c.failed.push(o),1!==c.status)if(2!==c.status)if(3!==c.status){c.status=1;var g=_r.fromTag("link",a.dom);dr(g,{rel:"stylesheet",type:"text/css",id:c.id}),t.contentCssCors&&sr(g,"crossOrigin","anonymous"),t.referrerPolicy&&sr(g,"referrerpolicy",t.referrerPolicy),(l=g.dom).onload=u,l.onerror=f,i(g),sr(g,"href",d)}else f();else u()})),c=e=>{var t=Ht._addCacheSuffix(e);Be(n,t).each((e=>{0===--e.count&&(delete n[t],l(e.id))}))};return{load:d,loadRawCss:(e,t)=>{var r=s(e);n[e]=r,r.count++;var o=_r.fromTag("style",a.dom);dr(o,{rel:"stylesheet",type:"text/css",id:r.id}),o.dom.innerHTML=t,i(o)},loadAll:e=>Promise.allSettled(ee(e,(e=>d(e).then(I(e))))).then((e=>{var t=ne(e,(e=>"fulfilled"===e.status));return t.fail.length>0?Promise.reject(ee(t.fail,(e=>e.reason))):ee(t.pass,(e=>e.value))})),unload:c,unloadRawCss:e=>{Be(n,e).each((t=>{0===--t.count&&(delete n[e],l(t.id))}))},unloadAll:e=>{te(e,(e=>{c(e)}))},_setReferrerPolicy:e=>{t.referrerPolicy=e},_setContentCssCors:e=>{t.contentCssCors=e}}},ga=(()=>{var e=new WeakMap;return{forElement:(t,r)=>{var n=Xr(t).dom;return K.from(e.get(n)).getOrThunk((()=>{var t=fa(n,r);return e.set(n,t),t}))}}})(),pa=(e,t)=>D(e)&&(zo(t,e)||t.isInline(e.nodeName.toLowerCase())),va=e=>(e=>"span"===e.nodeName.toLowerCase())(e)&&"bookmark"===e.getAttribute("data-mce-type"),ha=(e,t,r)=>bo(e)&&e.data.length>0&&((e,t,r)=>{var n=new Qn(e,t).prev(!1),o=new Qn(e,t).next(!1),a=T(n)||pa(n,r),i=T(o)||pa(o,r);return a&&i})(e,t,r),ba=(e,t,r,n)=>{var o,a=n||t;if(so(t)&&va(t))return t;for(var i=t.childNodes,l=i.length-1;l>=0;l--)ba(e,i[l],r,a);if(so(t)){var s=t.childNodes;1===s.length&&va(s[0])&&(null===(o=t.parentNode)||void 0===o||o.insertBefore(s[0],t))}return(e=>xo(e)||So(e))(t)||zo(r,t)||(e=>!!so(e)&&e.childNodes.length>0)(t)||ha(t,a,r)||e.remove(t),t},ya=Ht.makeMap,Ca=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wa=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sa=/[<>&\"\']/g,xa=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ea={128:"â¬",130:"â",131:"Æ",132:"â",133:"â¦",134:"â ",135:"â¡",136:"Ë",137:"â°",138:"Å ",139:"â¹",140:"Å",142:"Å½",145:"â",146:"â",147:"â",148:"â",149:"â¢",150:"â",151:"â",152:"Ë",153:"â¢",154:"Å¡",155:"âº",156:"Å",158:"Å¾",159:"Å¸"},ka={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},_a={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Na=(e,t)=>{var r={};if(e){var n=e.split(",");t=t||10;for(var o=0;o<n.length;o+=2){var a=String.fromCharCode(parseInt(n[o],t));if(!ka[a]){var i="&"+n[o+1]+";";r[a]=i,r[i]=a}}return r}},Ta=Na("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Ra=(e,t)=>e.replace(t?Ca:wa,(e=>ka[e]||e)),Da=(e,t)=>e.replace(t?Ca:wa,(e=>e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":ka[e]||"&#"+e.charCodeAt(0)+";")),Aa=(e,t,r)=>{var n=r||Ta;return e.replace(t?Ca:wa,(e=>ka[e]||n[e]||e))},Oa={encodeRaw:Ra,encodeAllRaw:e=>(""+e).replace(Sa,(e=>ka[e]||e)),encodeNumeric:Da,encodeNamed:Aa,getEncodeFunc:(e,t)=>{var r=Na(t)||Ta,n=ya(e.replace(/\+/g,","));return n.named&&n.numeric?(e,t)=>e.replace(t?Ca:wa,(e=>void 0!==ka[e]?ka[e]:void 0!==r[e]?r[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";")):n.named?t?(e,t)=>Aa(e,t,r):Aa:n.numeric?Da:Ra},decode:e=>e.replace(xa,((e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Ea[t]||String.fromCharCode(t):_a[e]||Ta[e]||(e=>{var t=_r.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(e)))},Ba=(e,t)=>(e=Ht.trim(e))?e.split(t||" "):[],Pa=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),La=e=>{var t=e=>k(e)?ee(e,t):(e=>x(e)&&e.source&&"[object RegExp]"===Object.prototype.toString.call(e))(e)?new RegExp(e.source,e.flags):x(e)?_e(e,t):e;return t(e)},Ma=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==e?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],..."html5-strict"!==e?["xml:lang"]:[]]),Ia=e=>{var t,r;if(t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e){t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",r+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"}if("html5-strict"!==e){r=[r,"acronym applet basefont big font strike tt"].join(" ");t=[t,"center dir isindex noframes"].join(" ")}var n=[t,r].join(" ");return{blockContent:t,phrasingContent:r,flowContent:n}},Fa=e=>{var t=Ia(e),r=t.blockContent,n=t.phrasingContent,o=t.flowContent,a=e=>Object.freeze(e.split(" "));return Object.freeze({blockContent:a(r),phrasingContent:a(n),flowContent:a(o)})},ja={html4:Ve((()=>Fa("html4"))),html5:Ve((()=>Fa("html5"))),"html5-strict":Ve((()=>Fa("html5-strict")))},Ua=(e,t)=>{var r=ja[e](),n=r.blockContent,o=r.phrasingContent,a=r.flowContent;return"blocks"===t?K.some(n):"phrasing"===t?K.some(o):"flow"===t?K.some(a):K.none()},za=e=>K.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map((e=>({preset:"@"===e[1],name:e[2]}))),Ha=(e,t)=>{var r=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return me(Ba(t,","),(t=>{var n=r.exec(t);if(n){var o=n[1],a=n[2],i=n[3],l=n[4],s=n[5],d={attributes:{},attributesOrder:[]};if(e.each((e=>((e,t)=>{ke(e.attributes,((e,r)=>{t.attributes[r]=e})),t.attributesOrder.push(...e.attributesOrder)})(e,d))),"#"===o?d.paddEmpty=!0:"-"===o&&(d.removeEmpty=!0),"!"===l&&(d.removeEmptyAttrs=!0),s&&((e,t)=>{var r=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,n=/[*?+]/,o=t.attributes,a=t.attributesOrder;te(Ba(e,"|"),(e=>{var i=r.exec(e);if(i){var l={},s=i[1],d=i[2].replace(/[\\:]:/g,":"),c=i[3],m=i[4];if("!"===s&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(d),l.required=!0),"-"===s)return delete o[d],void a.splice(Ht.inArray(a,d),1);if(c&&("="===c?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:d,value:m}),l.defaultValue=m):"~"===c?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:d,value:m}),l.forcedValue=m):"<"===c&&(l.validValues=Ht.makeMap(m,"?"))),n.test(d)){var u=l;t.attributePatterns=t.attributePatterns||[],u.pattern=Pa(d),t.attributePatterns.push(u)}else o[d]||a.push(d),o[d]=l}}))})(s,d),i&&(d.outputName=a),"@"===a){if(!e.isNone())return[];e=K.some(d)}return[i?{name:a,element:d,aliasName:i}:{name:a,element:d}]}return[]}))},$a={},Wa=Ht.makeMap,Va=Ht.each,qa=Ht.extend,Ka=Ht.explode,Ga=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Wa(e," ",Wa(e.toUpperCase()," "));return qa(r,t)},Ya=e=>Ga("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Xa=(e,t)=>{if(e){var r={};return S(e)&&(e={"*":e}),Va(e,((e,n)=>{r[n]=r[n.toUpperCase()]="map"===t?Wa(e,/[, ]/):Ka(e,/[, ]/)})),r}},Qa=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},n={},o=[],a={},i={},l=(e,r,n)=>{var o=t[e];if(o)return Wa(o,/[, ]/,Wa(o.toUpperCase(),/[, ]/));var a=$a[e];return a||(a=Ga(r,n),$a[e]=a),a},s=null!==(e=t.schema)&&void 0!==e?e:"html5",d=(e=>{var t=Ma(e),r=Ia(e),n=r.phrasingContent,o=r.flowContent,a={},i=(e,t,r)=>{a[e]={attributes:pe(t,I({})),attributesOrder:t,children:pe(r,I({}))}},l=function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Ba(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""),o=Ba(e),a=o.length,l=[...t,...Ba(r)];a--;)i(o[a],l.slice(),n)},s=(e,t)=>{for(var r=Ba(e),n=Ba(t),o=r.length;o--;)for(var i=a[r[o]],l=0,s=n.length;l<s;l++)i.attributes[n[l]]={},i.attributesOrder.push(n[l])};"html5-strict"!==e&&(te(Ba("acronym applet basefont big font strike tt"),(e=>{l(e,"",n)})),te(Ba("center dir isindex noframes"),(e=>{l(e,"",o)})));return l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),l("dd div","",o),l("address dt caption","","html4"===e?n:o),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),l("blockquote","cite",o),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",o),l("dl","","dt dd"),l("a","href target rel media hreflang type","html4"===e?n:o),l("q","cite",n),l("ins del","cite datetime",o),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",o),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),l("param","name value"),l("map","name",[o,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",o),l("th","colspan rowspan headers scope abbr",o),l("form","accept-charset action autocomplete enctype method name novalidate target",o),l("fieldset","disabled form name",[o,"legend"].join(" ")),l("label","form for",n),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:n),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[o,"li"].join(" ")),l("noscript","",o),"html4"!==e&&(l("wbr"),l("ruby","",[n,"rt rp"].join(" ")),l("figcaption","",o),l("mark rt rp bdi","",n),l("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),l("canvas","width height",o),l("data","value",n),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[n,"option"].join(" ")),l("article section nav aside main header footer","",o),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[o,"figcaption"].join(" ")),l("time","datetime",n),l("dialog","open",o),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",n),l("progress","value max",n),l("meter","value min max low high optimum",n),l("details","open",[o,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name"),i("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==e&&(s("script","language xml:space"),s("style","xml:space"),s("object","declare classid code codebase codetype archive standby align border hspace vspace"),s("embed","align name hspace vspace"),s("param","valuetype type"),s("a","charset name rev shape coords"),s("br","clear"),s("applet","codebase archive code object alt name width height align hspace vspace"),s("img","name longdesc align border hspace vspace"),s("iframe","longdesc frameborder marginwidth marginheight scrolling align"),s("font basefont","size color face"),s("input","usemap align"),s("select"),s("textarea"),s("h1 h2 h3 h4 h5 h6 div p legend caption","align"),s("ul","type compact"),s("li","type"),s("ol dl menu dir","compact"),s("pre","width xml:space"),s("hr","align noshade size width"),s("isindex","prompt"),s("table","summary width frame rules cellspacing cellpadding align bgcolor"),s("col","width align char charoff valign"),s("colgroup","width align char charoff valign"),s("thead","align char charoff valign"),s("tr","align char charoff valign bgcolor"),s("th","axis align char charoff valign nowrap bgcolor width height"),s("form","accept"),s("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),s("tfoot","align char charoff valign"),s("tbody","align char charoff valign"),s("area","nohref"),s("body","background bgcolor text link vlink alink")),"html4"!==e&&(s("input button select textarea","autofocus"),s("input textarea","placeholder"),s("a","download"),s("link script img","crossorigin"),s("img","loading"),s("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),"html4"!==e&&te([a.video,a.audio],(e=>{delete e.children.audio,delete e.children.video})),te(Ba("a form meter progress dfn"),(e=>{a[e]&&delete a[e].children[e]})),delete a.caption.children.table,delete a.script,a})(s);!1===t.verify_html&&(t.valid_elements="*[*]");var c=Xa(t.valid_styles),m=Xa(t.invalid_styles,"map"),u=Xa(t.valid_classes,"map"),f=l("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=l("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),p=l("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),v=l("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),h="td th iframe video audio object script code",b=l("non_empty_elements",h+" pre svg textarea summary",p),y=l("move_caret_before_on_enter_elements",h+" table",p),C="h1 h2 h3 h4 h5 h6",w=l("text_block_elements",C+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),E=l("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",w),_=l("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),T=l("transparent_elements","a ins del canvas map"),R=l("wrap_block_elements","pre "+C);Va("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),(e=>{i[e]=new RegExp("</"+e+"[^>]*>","gi")}));var D=e=>{var t=K.from(r["@"]),n=/[*?+]/;te(Ha(t,null!=e?e:""),(e=>{var t=e.name,a=e.element,i=e.aliasName;if(i&&(r[i]=a),n.test(t)){var l=a;l.pattern=Pa(t),o.push(l)}else r[t]=a}))},A=e=>{o=[],te(xe(r),(e=>{delete r[e]})),D(e)},O=(e,t)=>{var o,i;delete $a.text_block_elements,delete $a.block_elements;var l=!!t.extends&&!re(t.extends),d=t.extends;if(n[e]=d?n[d]:{},a[e]=null!=d?d:e,b[e.toUpperCase()]={},b[e]={},l||(E[e.toUpperCase()]={},E[e]={}),d&&!r[e]&&r[d]){var c=La(r[d]);delete c.removeEmptyAttrs,delete c.removeEmpty,r[e]=c}else r[e]={attributesOrder:[],attributes:{}};if(k(t.attributes)){var m=e=>{u.attributesOrder.push(e),u.attributes[e]={}},u=null!==(o=r[e])&&void 0!==o?o:{};delete u.attributesDefault,delete u.attributesForced,delete u.attributePatterns,delete u.attributesRequired,u.attributesOrder=[],u.attributes={},te(t.attributes,(e=>{var t=Ma(s);za(e).each((e=>{var r=e.preset,n=e.name;r?"global"===n&&te(t,m):m(n)}))})),r[e]=u}if(N(t.padEmpty)){var f=null!==(i=r[e])&&void 0!==i?i:{};f.paddEmpty=t.padEmpty,r[e]=f}if(k(t.children)){var g={},p=e=>{g[e]={}};te(t.children,(e=>{za(e).each((e=>{var t=e.preset,r=e.name;t?(e=>{Ua(s,e).each((e=>{te(e,p)}))})(r):p(r)}))})),n[e]=g}d&&ke(n,((t,r)=>{t[d]&&(n[r]=t=qa({},n[r]),t[e]=t[d])}))},B=e=>{te((e=>{var t=/^(~)?(.+)$/;return me(Ba(e,","),(e=>{var r=t.exec(e);return r?[{cloneName:"~"===r[1]?"span":"div",name:r[2]}]:[]}))})(null!=e?e:""),(e=>{var t=e.name,r=e.cloneName;O(t,{extends:r})}))},P=e=>{x(e)?ke(e,((e,t)=>O(t,e))):S(e)&&B(e)},L=e=>{te((e=>{var t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return me(Ba(e,","),(e=>{var r=t.exec(e);if(r){var n=r[1],o=n?(e=>"-"===e?"remove":"add")(n):"replace";return[{operation:o,name:r[2],validChildren:me(Ba(r[3],"|"),(e=>za(e).toArray()))}]}return[]}))})(null!=e?e:""),(e=>{var t=e.operation,r=e.name,o=e.validChildren,a="replace"===t?{"#comment":{}}:n[r],i=e=>{"remove"===t?delete a[e]:a[e]={}};te(o,(e=>{var t=e.preset,r=e.name;t?(e=>{Ua(s,e).each((e=>{te(e,i)}))})(r):i(r)})),n[r]=a}))},M=e=>{var t=r[e];if(t)return t;for(var n=o.length;n--;){var a=o[n];if(a.pattern.test(e))return a}},F=I(c),j=I(m),U=I(u),z=I(v),H=I(E),$=I(w),W=I(_),V=I(Object.seal(p)),q=I(g),G=I(b),Y=I(y),X=I(f),Q=I(T),Z=I(R),J=I(Object.seal(i)),ee=(e,t)=>{var r=M(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;var n=r.attributePatterns;if(n)for(var o=n.length;o--;)if(n[o].pattern.test(t))return!0}return!1},re=e=>Pe(H(),e),ne=e=>!Je(e,"#")&&ee(e)&&!re(e),oe=I(a);return t.valid_elements?(A(t.valid_elements),Va(d,((e,t)=>{n[t]=e.children}))):(Va(d,((e,t)=>{r[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},n[t]=e.children})),Va(Ba("strong/b em/i"),(e=>{var t=Ba(e,"/");r[t[1]].outputName=t[0]})),Va(_,((e,n)=>{r[n]&&(t.padd_empty_block_inline_children&&(r[n].paddInEmptyBlock=!0),r[n].removeEmpty=!0)})),Va(Ba("ol ul blockquote a table tbody"),(e=>{r[e]&&(r[e].removeEmpty=!0)})),Va(Ba("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),(e=>{r[e]&&(r[e].paddEmpty=!0)})),Va(Ba("span"),(e=>{r[e].removeEmptyAttrs=!0}))),delete r.svg,P(t.custom_elements),L(t.valid_children),D(t.extended_valid_elements),L("+ol[ul|ol],+ul[ul|ol]"),Va({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},((e,t)=>{r[t]&&(r[t].parentsRequired=Ba(e))})),t.invalid_elements&&Va(Ka(t.invalid_elements),(e=>{r[e]&&delete r[e]})),M("span")||D("span[!data-mce-type|*]"),{type:s,children:n,elements:r,getValidStyles:F,getValidClasses:U,getBlockElements:H,getInvalidStyles:j,getVoidElements:V,getTextBlockElements:$,getTextInlineElements:W,getBoolAttrs:z,getElementRule:M,getSelfClosingElements:q,getNonEmptyElements:G,getMoveCaretBeforeOnEnterElements:Y,getWhitespaceElements:X,getTransparentElements:Q,getSpecialElements:J,isValidChild:(e,t)=>{var r=n[e.toLowerCase()];return!(!r||!r[t.toLowerCase()])},isValid:ee,isBlock:re,isInline:ne,isWrapper:e=>Pe(Z(),e)||ne(e),getCustomElements:oe,addValidElements:D,setValidElements:A,addCustomElements:P,addValidChildren:L}},Za=e=>Qe(e,"#").toUpperCase(),Ja=e=>{var t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},ei=e=>(e=>({value:Za(e)}))(Ja(e.red)+Ja(e.green)+Ja(e.blue)),ti=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,ri=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,ni=(e,t,r,n)=>((e,t,r,n)=>({red:e,green:t,blue:r,alpha:n}))(parseInt(e,10),parseInt(t,10),parseInt(r,10),parseFloat(n)),oi=e=>{var t=ti.exec(e);if(null!==t)return K.some(ni(t[1],t[2],t[3],"1"));var r=ri.exec(e);return null!==r?K.some(ni(r[1],r[2],r[3],r[4])):K.none()},ai=e=>oi(e).map(ei).map((e=>"#"+e.value)).getOr(e),ii=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,l={},s=Jn;n&&(e=n.getValidStyles(),t=n.getInvalidStyles());for(var d="\\\" \\' \\; \\: ; : \ufeff".split(" "),c=0;c<d.length;c++)l[d[c]]=s+c,l[s+c]=d[c];var m={parse:e=>{var t,n,d,c,u={},f=!1,g=r.url_converter,p=r.url_converter_scope||m,v=(e,t,r)=>{var n=u[e+"-top"+t];if(n){var o=u[e+"-right"+t];if(o){var a=u[e+"-bottom"+t];if(a){var i=u[e+"-left"+t];if(i){for(var l=[n,o,a,i],s=l.length-1;s--&&l[s]===l[s+1];);s>-1&&r||(u[e+t]=-1===s?l[0]:l.join(" "),delete u[e+"-top"+t],delete u[e+"-right"+t],delete u[e+"-bottom"+t],delete u[e+"-left"+t])}}}}},h=e=>{var t=u[e];if(t){for(var r=t.indexOf(",")>-1?[t]:t.split(" "),n=r.length;n--;)if(r[n]!==r[0])return!1;return u[e]=r[0],!0}},b=e=>(f=!0,l[e]),y=(e,t)=>(f&&(e=e.replace(/\uFEFF[0-9]/g,(e=>l[e]))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e),C=e=>String.fromCharCode(parseInt(e.slice(1),16)),w=e=>e.replace(/\\[0-9a-f]+/gi,C),S=(e,t,n,o,a,i)=>{if(a=a||i)return"'"+(a=y(a)).replace(/\'/g,"\\'")+"'";if(t=y(t||n||o||""),!r.allow_script_urls){var l=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(l))return"";if(!r.allow_svg_data_urls&&/^data:image\/svg/i.test(l))return""}return g&&(t=g.call(p,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')"};if(e){var x;e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,b).replace(/\"[^\"]+\"|\'[^\']+\'/g,(e=>e.replace(/[;:]/g,b)));for(var E=function(){a.lastIndex=x.index+x[0].length;var e,t=x[1].replace(i,"").toLowerCase(),n=x[2].replace(i,"");if(t&&n){if(t=w(t),n=w(n),-1!==t.indexOf(s)||-1!==t.indexOf('"'))return"continue";if(!r.allow_script_urls&&("behavior"===t||/expression\s*\(|\/\*|\*\//.test(n)))return"continue";"font-weight"===t&&"700"===n?n="bold":"color"!==t&&"background-color"!==t||(n=n.toLowerCase()),"rgb"==(e=n,ti.test(e)?"rgb":ri.test(e)?"rgba":"other")&&oi(n).each((e=>{n=ai((e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`)(e)).toLowerCase()})),n=n.replace(o,S),u[t]=f?y(n,!0):n}};x=a.exec(e);)E();v("border","",!0),v("border","-width"),v("border","-color"),v("border","-style"),v("padding",""),v("margin",""),t="border",d="border-style",c="border-color",h(n="border-width")&&h(d)&&h(c)&&(u[t]=u[n]+" "+u[d]+" "+u[c],delete u[n],delete u[d],delete u[c]),"medium none"===u.border&&delete u.border,"none"===u["border-image"]&&delete u["border-image"]}return u},serialize:(r,n)=>{var o="",a=(e,t)=>{var n=t[e];if(n)for(var a=0,i=n.length;a<i;a++){var l=n[a],s=r[l];s&&(o+=(o.length>0?" ":"")+l+": "+s+";")}};return n&&e?(a("*",e),a(n,e)):ke(r,((e,r)=>{e&&((e,r)=>{if(!t||!r)return!0;var n=t["*"];return!(n&&n[e]||(n=t[r])&&n[e])})(r,n)&&(o+=(o.length>0?" ":"")+r+": "+e+";")})),o}};return m},li={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},si=e=>R(e.preventDefault)||(e=>e instanceof Event||A(e.initEvent))(e),di=(e,t)=>{var r=null!=t?t:{};for(var n in e)Pe(li,n)||(r[n]=e[n]);return D(e.composedPath)&&(r.composedPath=()=>e.composedPath()),D(e.getModifierState)&&(r.getModifierState=t=>e.getModifierState(t)),D(e.getTargetRanges)&&(r.getTargetRanges=()=>e.getTargetRanges()),r},ci=(e,t,r,n)=>{var o,a=di(t,n);return a.type=e,R(a.target)&&(a.target=null!==(o=a.srcElement)&&void 0!==o?o:r),si(t)&&(a.preventDefault=()=>{a.defaultPrevented=!0,a.isDefaultPrevented=q,A(t.preventDefault)&&t.preventDefault()},a.stopPropagation=()=>{a.cancelBubble=!0,a.isPropagationStopped=q,A(t.stopPropagation)&&t.stopPropagation()},a.stopImmediatePropagation=()=>{a.isImmediatePropagationStopped=q,a.stopPropagation()},(e=>e.isDefaultPrevented===q||e.isDefaultPrevented===V)(a)||(a.isDefaultPrevented=!0===a.defaultPrevented?q:V,a.isPropagationStopped=!0===a.cancelBubble?q:V,a.isImmediatePropagationStopped=V)),a},mi=/^(?:mouse|contextmenu)|click/,ui=(e,t,r,n)=>{e.addEventListener(t,r,n||!1)},fi=(e,t,r,n)=>{e.removeEventListener(t,r,n||!1)},gi=(e,t)=>{var r=ci(e.type,e,document,t);if((e=>D(e)&&mi.test(e.type))(e)&&T(e.pageX)&&!T(e.clientX)){var n=r.target.ownerDocument||document,o=n.documentElement,a=n.body,i=r;i.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return r},pi=(e,t,r)=>{var n=e.document,o={type:"ready"};if(r.domLoaded)t(o);else{var a=()=>{fi(e,"DOMContentLoaded",a),fi(e,"load",a),r.domLoaded||(r.domLoaded=!0,t(o)),e=null};"complete"===n.readyState||"interactive"===n.readyState&&n.body?a():ui(e,"DOMContentLoaded",a),r.domLoaded||ui(e,"load",a)}};class vi{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,r,n){var o,a,i=this,l=window,s=e=>{i.executeHandlers(gi(e||l.event),a)};if(!e||bo(e)||wo(e))return r;e[i.expando]?a=e[i.expando]:(a=i.count++,e[i.expando]=a,i.events[a]={}),n=n||e;for(var d=t.split(" "),c=d.length;c--;){var m=d[c],u=s,f=!1,g=!1;"DOMContentLoaded"===m&&(m="ready"),i.domLoaded&&"ready"===m&&"complete"===e.readyState?r.call(n,gi({type:m})):(i.hasFocusIn||"focusin"!==m&&"focusout"!==m||(f=!0,g="focusin"===m?"focus":"blur",u=e=>{var t=gi(e||l.event);t.type="focus"===t.type?"focusin":"focusout",i.executeHandlers(t,a)}),(o=i.events[a][m])?"ready"===m&&i.domLoaded?r(gi({type:m})):o.push({func:r,scope:n}):(i.events[a][m]=o=[{func:r,scope:n}],o.fakeName=g,o.capture=f,o.nativeHandler=u,"ready"===m?pi(e,u,i):ui(e,g||m,u,f)))}return e=o=null,r}unbind(e,t,r){if(!e||bo(e)||wo(e))return this;var n=e[this.expando];if(n){var o=this.events[n];if(t)for(var a=t.split(" "),i=a.length;i--;){var l=a[i],s=o[l];if(s){if(r)for(var d=s.length;d--;)if(s[d].func===r){var c=s.nativeHandler,m=s.fakeName,u=s.capture,f=s.slice(0,d).concat(s.slice(d+1));f.nativeHandler=c,f.fakeName=m,f.capture=u,o[l]=f}r&&0!==s.length||(delete o[l],fi(e,s.fakeName||l,s.nativeHandler,s.capture))}}else ke(o,((t,r)=>{fi(e,t.fakeName||r,t.nativeHandler,t.capture)})),o={};for(var g in o)if(Pe(o,g))return this;delete this.events[n];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this}fire(e,t,r){return this.dispatch(e,t,r)}dispatch(e,t,r){if(!e||bo(e)||wo(e))return this;var n=gi({type:t,target:e},r);do{var o=e[this.expando];o&&this.executeHandlers(n,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped());return this}clean(e){if(!e||bo(e)||wo(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);for(var t=e.getElementsByTagName("*"),r=t.length;r--;)(e=t[r])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){var r=this.events[t],n=r&&r[e.type];if(n)for(var o=0,a=n.length;o<a;o++){var i=n[o];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}vi.Event=new vi;var hi=Ht.each,bi=Ht.grep,yi="data-mce-style",Ci=Ht.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),wi=(e,t,r)=>{R(r)||""===r?fr(e,t):sr(e,t,r)},Si=e=>e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),xi=(e,t)=>{var r=0;if(e)for(var n=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){var a=o.nodeType;(!t||!bo(o)||a!==n&&o.data.length)&&(r++,n=a)}return r},Ei=(e,t)=>{var r=cr(t,"style"),n=e.serialize(e.parse(r),Zt(t));wi(t,yi,n)},ki=(e,t,r)=>{var n=Si(t);R(r)||""===r?wn(e,n):pn(e,n,((e,t)=>O(e)?Pe(Ci,t)?e+"":e+"px":e)(r,n))},_i=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},o=window,a={},i=0,l=ga.forElement(_r.fromDom(t),{contentCssCors:r.contentCssCors,referrerPolicy:r.referrerPolicy}),d=[],c=r.schema?r.schema:Qa({}),m=ii({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),f=r.ownEvents?new vi:vi.Event,g=c.getBlockElements(),p=e=>e&&t&&S(e)?t.getElementById(e):e,v=e=>{var t=p(e);return D(t)?_r.fromDom(t):null},h=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=v(e);if(D(o)&&rr(o)){var a=Y[t];r=a&&a.get?a.get(o.dom,t):cr(o,t)}return D(r)?r:n},b=e=>{var t=p(e);return R(t)?[]:t.attributes},y=(e,t,n)=>{B(e,(e=>{if(so(e)){var o=_r.fromDom(e),a=""===n?null:n,i=cr(o,t),l=Y[t];l&&l.set?l.set(o.dom,a,t):wi(o,t,a),i!==a&&r.onSetAttrib&&r.onSetAttrib({attrElm:o.dom,attrName:t,attrValue:a})}}))},C=()=>r.root_element||t.body,w=(e,r)=>ua(t.body,p(e),r),x=(e,t,r)=>{var n,o=p(e);if(!R(o)&&(co(o)||so(n=o)&&"http://www.w3.org/2000/svg"===n.namespaceURI))return r?hn(_r.fromDom(o),Si(t)):("float"===(t=t.replace(/-(\D)/g,((e,t)=>t.toUpperCase())))&&(t="cssFloat"),o.style?o.style[t]:void 0)},_=e=>{var t=p(e);if(!t)return{w:0,h:0};var r=x(t,"width"),n=x(t,"height");return r&&-1!==r.indexOf("px")||(r="0"),n&&-1!==n.indexOf("px")||(n="0"),{w:parseInt(r,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},N=(e,t)=>{if(!e)return!1;var r=k(e)?e:[e];return J(r,(e=>Tr(_r.fromDom(e),t)))},T=(e,t,r,n)=>{var o=[],a=p(e);n=void 0===n;var i=r||("BODY"!==C().nodeName?C().parentNode:null);if(S(t))if("*"===t)t=so;else{var l=t;t=e=>N(e,l)}for(;a&&!(a===i||R(a.nodeType)||So(a)||xo(a));){if(!t||t(a)){if(!n)return[a];o.push(a)}a=a.parentNode}return n?o:null},O=(e,t,r)=>{var n=t;if(e){S(t)&&(n=e=>N(e,t));for(var o=e[r];o;o=o[r])if(A(n)&&n(o))return o}return null},B=function(e,t,r){var n=null!=r?r:this;if(k(e)){var o=[];return hi(e,((e,r)=>{var a=p(e);a&&o.push(t.call(n,a,r))})),o}var a=p(e);return!!a&&t.call(n,a)},L=(e,t)=>{B(e,(e=>{ke(t,((t,r)=>{y(e,r,t)}))}))},M=(e,t)=>{B(e,(e=>{var r=_r.fromDom(e);Bn(r,t)}))},F=(e,r,n,o,a)=>B(e,(e=>{var i=S(r)?t.createElement(r):r;return D(n)&&L(i,n),o&&(!S(o)&&o.nodeType?i.appendChild(o):S(o)&&M(i,o)),a?i:e.appendChild(i)})),j=(e,r,n)=>F(t.createElement(e),e,r,n,!0),U=Oa.encodeAllRaw,z=(e,t)=>B(e,(e=>{var r=_r.fromDom(e);return t&&te(Hr(r),(e=>{nr(e)&&0===e.dom.length?Rn(e):Sn(r,e)})),Rn(r),r.dom})),H=(e,t,r)=>{B(e,(e=>{if(so(e)){var n=_r.fromDom(e),o=t.split(" ");te(o,(e=>{D(r)?(r?Cr:Sr)(n,e):xr(n,e)}))}}))},$=(e,t,r)=>B(t,(n=>{var o,a=k(t)?e.cloneNode(!0):e;return r&&hi(bi(n.childNodes),(e=>{a.appendChild(e)})),null===(o=n.parentNode)||void 0===o||o.replaceChild(a,n),n})),W=()=>t.createRange(),V=(e,n,a,i)=>{if(k(e)){for(var l=e.length,s=[];l--;)s[l]=V(e[l],n,a,i);return s}return!r.collect||e!==t&&e!==o||d.push([e,n,a,i]),f.bind(e,n,a,i||G)},q=(e,r,n)=>{if(k(e)){for(var a=e.length,i=[];a--;)i[a]=q(e[a],r,n);return i}if(d.length>0&&(e===t||e===o))for(var l=d.length;l--;){var c=s(d[l],3),m=c[0],u=c[1],g=c[2];e!==m||r&&r!==u||n&&n!==g||f.unbind(m,u,g)}return f.unbind(e,r,n)},K=e=>{if(e&&co(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},G={doc:t,settings:r,win:o,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:l,boundEvents:d,styles:m,schema:c,events:f,isBlock:e=>S(e)?Pe(g,e):so(e)&&(Pe(g,e.nodeName)||ia(c,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:C,getViewPort:e=>{var t=Vn(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:e=>{var t=p(e),r=w(t),n=_(t);return{x:r.x,y:r.y,w:n.w,h:n.h}},getSize:_,getParent:(e,t,r)=>{var n=T(e,t,r,!1);return n&&n.length>0?n[0]:null},getParents:T,get:p,getNext:(e,t)=>O(e,t,"nextSibling"),getPrev:(e,t)=>O(e,t,"previousSibling"),select:(e,n)=>{var o,a,i=null!==(a=null!==(o=p(n))&&void 0!==o?o:r.root_element)&&void 0!==a?a:t;return A(i.querySelectorAll)?Ce(i.querySelectorAll(e)):[]},is:N,add:F,create:j,createHTML:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="<"+e;for(var o in t)Le(t,o)&&(n+=" "+o+'="'+U(t[o])+'"');return it(r)&&Pe(c.getVoidElements(),e)?n+" />":n+">"+r+"</"+e+">"},createFragment:e=>{var r,n=t.createElement("div"),o=t.createDocumentFragment();for(o.appendChild(n),e&&(n.innerHTML=e);r=n.firstChild;)o.appendChild(r);return o.removeChild(n),o},remove:z,setStyle:(e,t,n)=>{B(e,(e=>{var o=_r.fromDom(e);ki(o,t,n),r.update_styles&&Ei(m,o)}))},getStyle:x,setStyles:(e,t)=>{B(e,(e=>{var n=_r.fromDom(e);ke(t,((e,t)=>{ki(n,t,e)})),r.update_styles&&Ei(m,n)}))},removeAllAttribs:e=>B(e,(e=>{for(var t=e.attributes,r=t.length-1;r>=0;r--)e.removeAttributeNode(t.item(r))})),setAttrib:y,setAttribs:L,getAttrib:h,getPos:w,parseStyle:e=>m.parse(e),serializeStyle:(e,t)=>m.serialize(e,t),addStyle:r=>{if(G!==e.DOM&&t===document){if(n[r])return;n[r]=!0}var o=t.getElementById("mceDefaultStyles");if(!o){(o=t.createElement("style")).id="mceDefaultStyles",o.type="text/css";var a=t.head;a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o)}o.styleSheet?o.styleSheet.cssText+=r:o.appendChild(t.createTextNode(r))},loadCSS:e=>{e||(e=""),te(e.split(","),(e=>{a[e]=!0,l.load(e).catch(P)}))},addClass:(e,t)=>{H(e,t,!0)},removeClass:(e,t)=>{H(e,t,!1)},hasClass:(e,t)=>{var r=v(e),n=t.split(" ");return D(r)&&ue(n,(e=>Er(r,e)))},toggleClass:H,show:e=>{B(e,(e=>wn(_r.fromDom(e),"display")))},hide:e=>{B(e,(e=>pn(_r.fromDom(e),"display","none")))},isHidden:e=>{var t=v(e);return D(t)&&$t(yn(t,"display"),"none")},uniqueId:e=>(e||"mce_")+i++,setHTML:M,getOuterHTML:e=>{var t=v(e);return D(t)?so(t.dom)?t.dom.outerHTML:(e=>{var t=_r.fromTag("div"),r=_r.fromDom(e.dom.cloneNode(!0));return kn(t,r),On(t)})(t):""},setOuterHTML:(e,t)=>{B(e,(e=>{so(e)&&(e.outerHTML=t)}))},decode:Oa.decode,encode:U,insertAfter:(e,t)=>{var r=p(t);return B(e,(e=>{var t=null==r?void 0:r.parentNode,n=null==r?void 0:r.nextSibling;return t&&(n?t.insertBefore(e,n):t.appendChild(e)),e}))},replace:$,rename:(e,t)=>{if(e.nodeName!==t.toUpperCase()){var r=j(t);return hi(b(e),(t=>{y(r,t.nodeName,h(e,t.nodeName))})),$(r,e,!0),r}return e},findCommonAncestor:(e,t)=>{for(var r=e;r;){for(var n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},run:B,getAttribs:b,isEmpty:(e,t,r)=>{if(E(t)){return jo(c,e,u(u({},r),{},{isContent:e=>{var r=e.nodeName.toLowerCase();return Boolean(t[r])}}))}return jo(c,e,r)},createRng:W,nodeIndex:xi,split:(e,t,r)=>{var n,o,a=W();if(e&&t&&e.parentNode&&t.parentNode){var i=e.parentNode;return a.setStart(i,xi(e)),a.setEnd(t.parentNode,xi(t)),n=a.extractContents(),(a=W()).setStart(t.parentNode,xi(t)+1),a.setEnd(i,xi(e)+1),o=a.extractContents(),i.insertBefore(ba(G,n,c),e),r?i.insertBefore(r,e):i.insertBefore(t,e),i.insertBefore(ba(G,o,c),e),z(e),r||t}},bind:V,unbind:q,fire:(e,t,r)=>f.dispatch(e,t,r),dispatch:(e,t,r)=>f.dispatch(e,t,r),getContentEditable:K,getContentEditableParent:e=>{for(var t=C(),r=null,n=e;n&&n!==t&&null===(r=K(n));n=n.parentNode);return r},isEditable:e=>{if(D(e)){var t=so(e)?e:e.parentElement;return D(t)&&co(t)&&mn(_r.fromDom(t))}return!1},destroy:()=>{if(d.length>0)for(var e=d.length;e--;){var t=s(d[e],3),r=t[0],n=t[1],o=t[2];f.unbind(r,n,o)}ke(a,((e,t)=>{l.unload(t),delete a[t]}))},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},Y=((e,t,r)=>{var n=t.keep_values,o={set:(e,n,o)=>{var a=_r.fromDom(e);A(t.url_converter)&&D(n)&&(n=t.url_converter.call(t.url_converter_scope||r(),String(n),o,e)),wi(a,"data-mce-"+o,n),wi(a,o,n)},get:(e,t)=>{var r=_r.fromDom(e);return cr(r,"data-mce-"+t)||cr(r,t)}},a={style:{set:(t,r)=>{var o=_r.fromDom(t);n&&wi(o,yi,r),fr(o,"style"),S(r)&&vn(o,e.parse(r))},get:t=>{var r=_r.fromDom(t),n=cr(r,yi)||cr(r,"style");return e.serialize(e.parse(n),Zt(r))}}};return n&&(a.href=a.src=o),a})(m,r,I(G));return G};_i.DOM=_i(document),_i.nodeIndex=xi;var Ni=_i.DOM;class Ti{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise(((t,r)=>{var n,o=Ni,a=()=>{o.remove(i),n&&(n.onerror=n.onload=n=null)},i=o.uniqueId();(n=document.createElement("script")).id=i,n.type="text/javascript",n.src=Ht._addCacheSuffix(e),this.settings.referrerPolicy&&o.setAttrib(n,"referrerpolicy",this.settings.referrerPolicy),n.onload=()=>{a(),t()},n.onerror=()=>{a(),r("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(n)}))}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){var t=this;return t.queue.push(e),void 0===t.states[e]&&(t.states[e]=0),new Promise(((r,n)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:r,reject:n})}))}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){var e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){var t=this,r=(e,r)=>{Be(t.scriptLoadedCallbacks,r).each((t=>{te(t,(t=>t[e](r)))})),delete t.scriptLoadedCallbacks[r]},n=e=>{var t=oe(e,(e=>"rejected"===e.status));return t.length>0?Promise.reject(me(t,(e=>{var t=e.reason;return k(t)?t:[t]}))):Promise.resolve()},o=e=>Promise.allSettled(ee(e,(e=>2===t.states[e]?(r("resolve",e),Promise.resolve()):3===t.states[e]?(r("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then((()=>{t.states[e]=2,r("resolve",e);var a=t.queue;return a.length>0?(t.queue=[],o(a).then(n)):Promise.resolve()}),(()=>(t.states[e]=3,r("reject",e),Promise.reject(e)))))))),a=e=>(t.loading=!0,o(e).then((e=>{t.loading=!1;var r=t.queueLoadedCallbacks.shift();return K.from(r).each(W),n(e)}))),i=Me(e);return t.loading?new Promise(((e,r)=>{t.queueLoadedCallbacks.push((()=>{a(i).then(e,r)}))})):a(i)}}Ti.ScriptLoader=new Ti;var Ri={},Di=Ho("en"),Ai=()=>Be(Ri,Di.get()),Oi={getData:()=>_e(Ri,(e=>u({},e))),setCode:e=>{e&&Di.set(e)},getCode:()=>Di.get(),add:(e,t)=>{var r=Ri[e];r||(Ri[e]=r={});var n=ee(xe(t),(e=>e.toLowerCase()));ke(t,((e,o)=>{var a=o.toLowerCase();a!==o&&((e,t)=>{var r=e.indexOf(t);return-1!==r&&e.indexOf(t,r+1)>r})(n,a)?(Pe(t,a)||(r[a]=e),r[o]=e):r[a]=e}))},translate:e=>{var t,r=Ai().getOr({}),n=e=>A(e)?Object.prototype.toString.call(e):o(e)?"":""+e,o=e=>""===e||null==e,a=e=>{var t=n(e);return Pe(r,t)?n(r[t]):Be(r,t.toLowerCase()).map(n).getOr(t)},i=e=>e.replace(/{context:\w+}$/,"");if(o(e))return"";if(x(t=e)&&Pe(t,"raw"))return n(e.raw);if((e=>k(e)&&e.length>1)(e)){var l=e.slice(1);return i(a(e[0]).replace(/\{([0-9]+)\}/g,((e,t)=>Pe(l,t)?n(l[t]):e)))}return i(a(e))},isRtl:()=>Ai().bind((e=>Be(e,"_dir"))).exists((e=>"rtl"===e)),hasCode:e=>Pe(Ri,e)},Bi=()=>{var e=[],t={},r={},n=[],o=(e,t)=>{var r=oe(n,(r=>r.name===e&&r.state===t));te(r,(e=>e.resolve()))},a=e=>Pe(t,e),i=(e,r)=>{var n=Oi.getCode();!n||r&&-1===(","+(r||"")+",").indexOf(","+n+",")||Ti.ScriptLoader.add(t[e]+"/langs/"+n+".js")},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"added";return"added"===t&&(e=>Pe(r,e))(e)||"loaded"===t&&a(e)?Promise.resolve():new Promise((r=>{n.push({name:e,state:t,resolve:r})}))};return{items:e,urls:t,lookup:r,get:e=>{if(r[e])return r[e].instance},requireLangPack:(e,t)=>{!1!==Bi.languageLoad&&(a(e)?i(e,t):l(e,"loaded").then((()=>i(e,t))))},add:(t,n)=>(e.push(n),r[t]={instance:n},o(t,"added"),n),remove:e=>{delete t[e],delete r[e]},createUrl:(e,t)=>S(t)?S(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,n)=>{if(t[e])return Promise.resolve();var a=S(n)?n:n.prefix+n.resource+n.suffix;0!==a.indexOf("/")&&-1===a.indexOf("://")&&(a=Bi.baseURL+"/"+a),t[e]=a.substring(0,a.lastIndexOf("/"));var i=()=>(o(e,"loaded"),Promise.resolve());return r[e]?i():Ti.ScriptLoader.add(a).then(i)},waitFor:l}};Bi.languageLoad=!0,Bi.baseURL="",Bi.PluginManager=Bi(),Bi.ThemeManager=Bi(),Bi.ModelManager=Bi();var Pi=(e,t)=>{var r=null;return{cancel:()=>{_(r)||(clearTimeout(r),r=null)},throttle:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];_(r)&&(r=setTimeout((()=>{r=null,e.apply(null,o)}),t))}}},Li=(e,t)=>{var r=null,n=()=>{_(r)||(clearTimeout(r),r=null)};return{cancel:n,throttle:function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];n(),r=setTimeout((()=>{r=null,e.apply(null,a)}),t)}}},Mi=I("mce-annotation"),Ii=I("data-mce-annotation"),Fi=I("data-mce-annotation-uid"),ji=I("data-mce-annotation-active"),Ui=I("data-mce-annotation-classes"),zi=I("data-mce-annotation-attrs"),Hi=e=>t=>Dr(t,e),$i=(e,t)=>{var r=e.selection.getRng(),n=_r.fromDom(r.startContainer),o=_r.fromDom(e.getBody()),a=t.fold((()=>"."+Mi()),(e=>`[${Ii()}="${e}"]`)),i=$r(n,r.startOffset).getOr(n);return cn(i,a,Hi(o)).bind((t=>mr(t,`${Fi()}`).bind((r=>mr(t,`${Ii()}`).map((t=>{var n=Vi(e,r);return{uid:r,name:t,elements:n}}))))))},Wi=(e,t)=>ur(e,"data-mce-bogus")||((e,t,r)=>sn(e,t,r).isSome())(e,'[data-mce-bogus="all"]',Hi(t)),Vi=(e,t)=>{var r=_r.fromDom(e.getBody()),n=Kn(r,`[${Fi()}="${t}"]`);return oe(n,(e=>!Wi(e,r)))},qi=(e,t)=>{var r=_r.fromDom(e.getBody()),n=Kn(r,`[${Ii()}="${t}"]`),o={};return te(n,(e=>{if(!Wi(e,r)){var t=cr(e,Fi()),n=Be(o,t).getOr([]);o[t]=n.concat([e])}})),o},Ki=(e,t)=>{var r=Ho({}),n=()=>({listeners:[],previous:$o()}),o=(e,t)=>{a(e,(e=>(t(e),e)))},a=(e,t)=>{var o=r.get(),a=t(Be(o,e).getOrThunk(n));o[e]=a,r.set(o)},i=(t,r)=>{te(Vi(e,t),(e=>{r?sr(e,ji(),"true"):fr(e,ji())}))},l=Li((()=>{var r=ve(t.getNames());te(r,(t=>{a(t,(r=>{var n=r.previous.get();return $i(e,K.some(t)).fold((()=>{n.each((e=>{(e=>{o(e,(t=>{te(t.listeners,(t=>t(!1,e)))}))})(t),r.previous.clear(),i(e,!1)}))}),(e=>{var t=e.uid,a=e.name,l=e.elements;$t(n,t)||(n.each((e=>i(e,!1))),((e,t,r)=>{o(e,(n=>{te(n.listeners,(n=>n(!0,e,{uid:t,nodes:ee(r,(e=>e.dom))})))}))})(a,t,l),r.previous.set(t),i(t,!0))})),{previous:r.previous,listeners:r.listeners}}))}))}),30);e.on("remove",(()=>{l.cancel()})),e.on("NodeChange",(()=>{l.throttle()}));return{addListener:(e,t)=>{a(e,(e=>({previous:e.previous,listeners:e.listeners.concat([t])})))}}},Gi=(e,t)=>{var r=Ii();e.serializer.addTempAttr(ji()),e.serializer.addAttributeFilter(r,(e=>{var n,o=g(e);try{var a=function(){var e=n.value;(e=>K.from(e.attr(r)).bind(t.lookup))(e).each((t=>{!1===t.persistent&&("span"===e.name?e.unwrap():(e=>{var t,r;e.attr(Fi(),null),e.attr(Ii(),null),e.attr(ji(),null);var n=K.from(e.attr(zi())).map((e=>e.split(","))).getOr([]),o=K.from(e.attr(Ui())).map((e=>e.split(","))).getOr([]);te(n,(t=>e.attr(t,null)));var a=null!==(r=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==r?r:[],i=ge(a,[Mi()].concat(o));e.attr("class",i.length>0?i.join(" "):null),e.attr(Ui(),null),e.attr(zi(),null)})(e))}))};for(o.s();!(n=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}}))},Yi=0,Xi=e=>{var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Yi+String(t)},Qi=(e,t)=>_r.fromDom(e.dom.cloneNode(t)),Zi=e=>Qi(e,!1),Ji=e=>Qi(e,!0),el=(e,t)=>{var r=((e,t)=>{var r=_r.fromTag(t),n=gr(e);return dr(r,n),r})(e,t);xn(e,r);var n=Hr(e);return Nn(r,n),Rn(e),r},tl=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V,n=new Qn(e,t),o=e=>{var t;do{t=n[e]()}while(t&&!bo(t)&&!r(t));return K.from(t).filter(bo)};return{current:()=>K.from(n.current()).filter(bo),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},rl=(e,t)=>{var r=t||(t=>e.isBlock(t)||Eo(t)||No(t)),n=(e,t,r,o)=>{if(bo(e)){var a=o(e,t,e.data);if(-1!==a)return K.some({container:e,offset:a})}return r().bind((e=>n(e.container,e.offset,r,o)))};return{backwards:(t,o,a,i)=>{var l=tl(t,null!=i?i:e.getRoot(),r);return n(t,o,(()=>l.prev().map((e=>({container:e,offset:e.length})))),a).getOrNull()},forwards:(t,o,a,i)=>{var l=tl(t,null!=i?i:e.getRoot(),r);return n(t,o,(()=>l.next().map((e=>({container:e,offset:0})))),a).getOrNull()}}},nl=((e,t)=>{var r=t=>e(t)?K.from(t.dom.nodeValue):K.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return r(n).getOr("")},getOption:r,set:(r,n)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=n}}})(nr,"text"),ol=e=>nl.get(e),al=e=>{var t;return r=>(t=t||pe(e,q),Pe(t,Zt(r)))},il=e=>rr(e)&&"br"===Zt(e),ll=al(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),sl=al(["ul","ol","dl"]),dl=al(["li","dd","dt"]),cl=al(["thead","tbody","tfoot"]),ml=al(["td","th"]),ul=al(["pre","script","textarea","style"]),fl=e=>{var t=Kn(e,"br"),r=oe((e=>{for(var t=[],r=e.dom;r;)t.push(_r.fromDom(r)),r=r.lastChild;return t})(e).slice(-1),il);t.length===r.length&&te(r,Rn)},gl=()=>{var e=_r.fromTag("br");return sr(e,"data-mce-bogus","1"),e},pl=e=>{Tn(e),kn(e,gl())},vl=Jn,hl=to,bl=e=>e.replace(/\uFEFF/g,""),yl=so,Cl=bo,wl=e=>(Cl(e)&&(e=e.parentNode),yl(e)&&e.hasAttribute("data-mce-caret")),Sl=e=>Cl(e)&&hl(e.data),xl=e=>wl(e)||Sl(e),El=e=>e.firstChild!==e.lastChild||!Eo(e.firstChild),kl=e=>{var t=e.container();return!!bo(t)&&(t.data.charAt(e.offset())===vl||e.isAtStart()&&Sl(t.previousSibling))},_l=e=>{var t=e.container();return!!bo(t)&&(t.data.charAt(e.offset()-1)===vl||e.isAtEnd()&&Sl(t.nextSibling))},Nl=e=>Cl(e)&&e.data[0]===vl,Tl=e=>Cl(e)&&e.data[e.data.length-1]===vl,Rl=e=>{return e&&e.hasAttribute("data-mce-caret")?(r=e.getElementsByTagName("br"),n=r[r.length-1],go(n)&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n)),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null;var t,r,n},Dl=e=>wl(e.startContainer),Al=Math.round,Ol=e=>e?{left:Al(e.left),top:Al(e.top),bottom:Al(e.bottom),right:Al(e.right),width:Al(e.width),height:Al(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Bl=(e,t)=>(e=Ol(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Pl=(e,t,r)=>e>=0&&e<=Math.min(t.height,r.height)/2,Ll=(e,t)=>{var r=Math.min(t.height/2,e.height/2);return e.bottom-r<t.top||!(e.top>t.bottom)&&Pl(t.top-e.bottom,e,t)},Ml=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Pl(t.bottom-e.top,e,t),Il=(e,t,r)=>{var n=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(r,e.top+e.height),e.top);return Math.sqrt((t-n)*(t-n)+(r-o)*(r-o))},Fl=e=>{var t=e.startContainer,r=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===r+1?t.childNodes[r]:null},jl=(e,t)=>{if(so(e)&&e.hasChildNodes()){var r=e.childNodes,n=((e,t,r)=>Math.min(Math.max(e,t),r))(t,0,r.length-1);return r[n]}return e},Ul=new RegExp("[Ì-Í¯Ò-ÒÒ-ÒÖ-Ö½Ö¿×-××-××Ø-ØÙ-ÙÙ°Û-ÛÛ-Û¤Û§-Û¨Ûª-Û­ÜÜ°-ÝÞ¦-Þ°ß«-ß³à -à à -à £à ¥-à §à ©-à ­à¡-à¡à££-à¤à¤ºà¤¼à¥-à¥à¥à¥-à¥à¥¢-à¥£à¦à¦¼à¦¾à§-à§à§à§à§¢-à§£à¨-à¨à¨¼à©-à©à©-à©à©-à©à©à©°-à©±à©µàª-àªàª¼à«-à«à«-à«à«à«¢-à«£à¬à¬¼à¬¾à¬¿à­-à­à­à­à­à­¢-à­£à®à®¾à¯à¯à¯à°à°¾-à±à±-à±à±-à±à±-à±à±¢-à±£à²à²¼à²¿à³à³à³-à³à³-à³à³¢-à³£à´à´¾àµ-àµàµàµàµ¢-àµ£à·à·à·-à·à·à·à¸±à¸´-à¸ºà¹-à¹àº±àº´-àº¹àº»-àº¼à»-à»à¼-à¼à¼µà¼·à¼¹à½±-à½¾à¾-à¾à¾-à¾à¾-à¾à¾-à¾¼à¿á­-á°á²-á·á¹-áºá½-á¾á-áá-á á±-á´áá-áááá-áá-áá²-á´á-áá²-á³á´-áµá·-á½áá-ááá -á á¢©á¤ -á¤¢á¤§-á¤¨á¤²á¤¹-á¤»á¨-á¨á¨á©á©-á©á© á©¢á©¥-á©¬á©³-á©¼á©¿áª°-áª½áª¾á¬-á¬á¬´á¬¶-á¬ºá¬¼á­á­«-á­³á®-á®á®¢-á®¥á®¨-á®©á®«-á®­á¯¦á¯¨-á¯©á¯­á¯¯-á¯±á°¬-á°³á°¶-á°·á³-á³á³-á³ á³¢-á³¨á³­á³´á³¸-á³¹á·-á·µá·¼-á·¿â-ââ-ââ-â â¡â¢-â¤â¥-â°â³¯-â³±âµ¿â· -â·¿ãª-ã­ã®-ã¯ã-ãê¯ê°-ê²ê´-ê½ê-êê°-ê±ê ê ê ê ¥-ê ¦ê£ê£ -ê£±ê¤¦-ê¤­ê¥-ê¥ê¦-ê¦ê¦³ê¦¶-ê¦¹ê¦¼ê§¥ê¨©-ê¨®ê¨±-ê¨²ê¨µ-ê¨¶ê©ê©ê©¼êª°êª²-êª´êª·-êª¸êª¾-êª¿ê«ê«¬-ê«­ê«¶ê¯¥ê¯¨ê¯­ï¬ï¸-ï¸ï¸ -ï¸¯ï¾-ï¾]"),zl=e=>S(e)&&e.charCodeAt(0)>=768&&Ul.test(e),Hl=_o,$l=No,Wl=Eo,Vl=bo,ql=uo(["script","style","textarea"]),Kl=uo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Gl=uo(["table"]),Yl=xl,Xl=e=>!Yl(e)&&(Vl(e)?!ql(e.parentNode):Kl(e)||Wl(e)||Gl(e)||Ql(e)),Ql=e=>!(e=>so(e)&&"true"===e.getAttribute("unselectable"))(e)&&$l(e),Zl=(e,t)=>Xl(e)&&((e,t)=>{for(var r=e.parentNode;r&&r!==t;r=r.parentNode){if(Ql(r))return!1;if(Hl(r))return!0}return!0})(e,t),Jl=so,es=Xl,ts=fo("display","block table"),rs=fo("float","left right"),ns=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(var r=0;r<t.length;r++)if(!t[r](e))return!1;return!0}}(Jl,es,z(rs)),os=z(fo("white-space","pre pre-line pre-wrap")),as=bo,is=Eo,ls=_i.nodeIndex,ss=(e,t)=>t<0&&so(e)&&e.hasChildNodes()?void 0:jl(e,t),ds=e=>e?e.createRange():_i.DOM.createRng(),cs=e=>S(e)&&/[\r\n\t ]/.test(e),ms=e=>!!e.setStart&&!!e.setEnd,us=e=>{var t=e.startContainer,r=e.startOffset;if(cs(e.toString())&&os(t.parentNode)&&bo(t)){var n=t.data;if(cs(n[r-1])||cs(n[r+1]))return!0}return!1},fs=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,gs=e=>{var t,r,n=e.getClientRects();return r=n.length>0?Ol(n[0]):Ol(e.getBoundingClientRect()),!ms(e)&&is(e)&&fs(r)?(e=>{var t=e.ownerDocument,r=ds(t),n=t.createTextNode(eo),o=e.parentNode;o.insertBefore(n,e),r.setStart(n,0),r.setEnd(n,1);var a=Ol(r.getBoundingClientRect());return o.removeChild(n),a})(e):fs(r)&&ms(e)&&null!==(t=(e=>{var t=e.startContainer,r=e.endContainer,n=e.startOffset,o=e.endOffset;if(t===r&&bo(r)&&0===n&&1===o){var a=e.cloneRange();return a.setEndAfter(r),gs(a)}return null})(e))&&void 0!==t?t:r},ps=(e,t)=>{var r=Bl(e,t);return r.width=1,r.right=r.left+1,r},vs=e=>{var t=[],r=e=>{var r,n;0!==e.height&&(t.length>0&&(r=e,n=t[t.length-1],r.left===n.left&&r.top===n.top&&r.bottom===n.bottom&&r.right===n.right)||t.push(e))},n=(e,t)=>{var n=ds(e.ownerDocument);if(t<e.data.length){if(zl(e.data[t]))return;if(zl(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!us(n)))return void r(ps(gs(n),!1))}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),us(n)||r(ps(gs(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),us(n)||r(ps(gs(n),!0)))},o=e.container(),a=e.offset();if(as(o))return n(o,a),t;if(Jl(o))if(e.isAtEnd()){var i=ss(o,a);as(i)&&n(i,i.data.length),ns(i)&&!is(i)&&r(ps(gs(i),!1))}else{var l=ss(o,a);if(as(l)&&n(l,0),ns(l)&&e.isAtEnd())return r(ps(gs(l),!1)),t;var s=ss(e.container(),e.offset()-1);ns(s)&&!is(s)&&(ts(s)||ts(l)||!ns(l))&&r(ps(gs(s),!1)),ns(l)&&r(ps(gs(l),!0))}return t},hs=(e,t,r)=>{var n=()=>(r||(r=vs(hs(e,t))),r);return{container:I(e),offset:I(t),toRange:()=>{var r=ds(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:n,isVisible:()=>n().length>0,isAtStart:()=>(as(e),0===t),isAtEnd:()=>as(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>ss(e,r?t-1:t)}};hs.fromRangeStart=e=>hs(e.startContainer,e.startOffset),hs.fromRangeEnd=e=>hs(e.endContainer,e.endOffset),hs.after=e=>hs(e.parentNode,ls(e)+1),hs.before=e=>hs(e.parentNode,ls(e)),hs.isAbove=(e,t)=>Vt(be(t.getClientRects()),ye(e.getClientRects()),Ll).getOr(!1),hs.isBelow=(e,t)=>Vt(ye(t.getClientRects()),be(e.getClientRects()),Ml).getOr(!1),hs.isAtStart=e=>!!e&&e.isAtStart(),hs.isAtEnd=e=>!!e&&e.isAtEnd(),hs.isTextPosition=e=>!!e&&bo(e.container()),hs.isElementPosition=e=>!hs.isTextPosition(e);var bs=(e,t)=>{bo(t)&&0===t.data.length&&e.remove(t)},ys=(e,t,r)=>{xo(r)?((e,t,r)=>{var n=K.from(r.firstChild),o=K.from(r.lastChild);t.insertNode(r),n.each((t=>bs(e,t.previousSibling))),o.each((t=>bs(e,t.nextSibling)))})(e,t,r):((e,t,r)=>{t.insertNode(r),bs(e,r.previousSibling),bs(e,r.nextSibling)})(e,t,r)},Cs=bo,ws=go,Ss=_i.nodeIndex,xs=e=>{var t=e.parentNode;return ws(t)?xs(t):t},Es=e=>e?He(e.childNodes,((e,t)=>(ws(t)&&"BR"!==t.nodeName?e=e.concat(Es(t)):e.push(t),e)),[]):[],ks=e=>t=>e===t,_s=e=>(Cs(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{var t,r;t=Es(xs(e)),r=$e(t,ks(e),e),t=t.slice(0,r+1);var n=He(t,((e,r,n)=>(Cs(r)&&Cs(t[n-1])&&e++,e)),0);return t=ze(t,uo([e.nodeName])),(r=$e(t,ks(e),e))-n})(e)+"]",Ns=(e,t)=>{var r,n=[],o=t.container(),a=t.offset();if(Cs(o))r=((e,t)=>{for(var r=e;(r=r.previousSibling)&&Cs(r);)t+=r.data.length;return t})(o,a);else{var i=o.childNodes;a>=i.length?(r="after",a=i.length-1):r="before",o=i[a]}n.push(_s(o));var l=((e,t,r)=>{for(var n=[],o=t.parentNode;o&&o!==e&&(!r||!r(o));o=o.parentNode)n.push(o);return n})(e,o);return l=ze(l,z(go)),(n=n.concat(Ue(l,(e=>_s(e))))).reverse().join("/")+","+r},Ts=(e,t)=>{if(!t)return null;var r,n=t.split(","),o=n[0].split("/"),a=n.length>1?n[1]:"before",i=He(o,((e,t)=>{var r=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return r?("text()"===r[1]&&(r[1]="#text"),((e,t,r)=>{var n=Es(e);return n=ze(n,((e,t)=>!Cs(e)||!Cs(n[t-1]))),(n=ze(n,uo([t])))[r]})(e,r[1],parseInt(r[2],10))):null}),e);return i?!Cs(i)&&i.parentNode?(r="after"===a?Ss(i)+1:Ss(i),hs(i.parentNode,r)):((e,t)=>{for(var r=e,n=0;Cs(r);){var o=r.data.length;if(t>=n&&t<=n+o){e=r,t-=n;break}if(!Cs(r.nextSibling)){e=r,t=o;break}n+=o,r=r.nextSibling}return Cs(e)&&t>e.data.length&&(t=e.data.length),hs(e,t)})(i,parseInt(a,10)):null},Rs=No,Ds=(e,t,r,n,o)=>{var a=o?n.startContainer:n.endContainer,i=o?n.startOffset:n.endOffset,l=[],s=e.getRoot();if(bo(a))l.push(r?((e,t,r)=>{for(var n=e(t.data.slice(0,r)).length,o=t.previousSibling;o&&bo(o);o=o.previousSibling)n+=e(o.data).length;return n})(t,a,i):i);else{var d=0,c=a.childNodes;i>=c.length&&c.length&&(d=1,i=Math.max(0,c.length-1)),l.push(e.nodeIndex(c[i],r)+d)}for(var m=a;m&&m!==s;m=m.parentNode)l.push(e.nodeIndex(m,r));return l},As=(e,t,r)=>{var n=0;return Ht.each(e.select(t),(e=>"all"===e.getAttribute("data-mce-bogus")?void 0:e!==r&&void n++)),n},Os=(e,t)=>{var r=t?e.startContainer:e.endContainer,n=t?e.startOffset:e.endOffset;if(so(r)&&"TR"===r.nodeName){var o=r.childNodes;(r=o[Math.min(t?n:n-1,o.length-1)])&&(n=t?0:r.childNodes.length,t?e.setStart(r,n):e.setEnd(r,n))}},Bs=e=>(Os(e,!0),Os(e,!1),e),Ps=(e,t)=>{if(so(e)&&(e=jl(e,t),Rs(e)))return e;if(xl(e)){bo(e)&&wl(e)&&(e=e.parentNode);var r=e.previousSibling;if(Rs(r))return r;if(r=e.nextSibling,Rs(r))return r}},Ls=(e,t,r)=>{var n=r.getNode(),o=r.getRng();if("IMG"===n.nodeName||Rs(n)){var a=n.nodeName;return{name:a,index:As(r.dom,a,n)}}var i=(e=>Ps(e.startContainer,e.startOffset)||Ps(e.endContainer,e.endOffset))(o);if(i){var l=i.tagName;return{name:l,index:As(r.dom,l,i)}}return((e,t,r,n)=>{var o=t.dom,a=Ds(o,e,r,n,!0),i=t.isForward(),l=Dl(n)?{isFakeCaret:!0}:{};return t.isCollapsed()?u({start:a,forward:i},l):u({start:a,end:Ds(o,e,r,n,!1),forward:i},l)})(e,r,t,o)},Ms=(e,t,r)=>{var n={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return r?e.create("span",n,"&#xFEFF;"):e.create("span",n)},Is=(e,t)=>{var r=e.dom,n=e.getRng(),o=r.uniqueId(),a=e.isCollapsed(),i=e.getNode(),l=i.nodeName,s=e.isForward();if("IMG"===l)return{name:l,index:As(r,l,i)};var d=Bs(n.cloneRange());if(!a){d.collapse(!1);var c=Ms(r,o+"_end",t);ys(r,d,c)}(n=Bs(n)).collapse(!0);var m=Ms(r,o+"_start",t);return ys(r,n,m),e.moveToBookmark({id:o,keep:!0,forward:s}),{id:o,forward:s}},Fs=function(e,t){return 2===t?Ls(bl,arguments.length>2&&void 0!==arguments[2]&&arguments[2],e):3===t?(e=>{var t=e.getRng();return{start:Ns(e.dom.getRoot(),hs.fromRangeStart(t)),end:Ns(e.dom.getRoot(),hs.fromRangeEnd(t)),forward:e.isForward()}})(e):t?(e=>({rng:e.getRng(),forward:e.isForward()}))(e):Is(e,!1)},js=U(Ls,F,!0),Us=e=>{var t=t=>t(e),r=I(e),n=()=>o,o={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:q,isError:V,map:t=>Hs.value(t(e)),mapError:n,bind:t,exists:t,forall:t,getOr:r,or:n,getOrThunk:r,orThunk:n,getOrDie:r,each:t=>{t(e)},toOptional:()=>K.some(e)};return o},zs=e=>{var t=()=>r,r={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:V,isError:q,map:t,mapError:t=>Hs.error(t(e)),bind:t,exists:V,forall:q,getOr:F,or:F,getOrThunk:$,orThunk:$,getOrDie:H(String(e)),each:P,toOptional:K.none};return r},Hs={value:Us,error:zs,fromOption:(e,t)=>e.fold((()=>zs(t)),Us)},$s=e=>{if(!k(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],r={};return te(e,((n,o)=>{var a=xe(n);if(1!==a.length)throw new Error("one and only one name per case");var i=a[0],l=n[i];if(void 0!==r[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!k(l))throw new Error("case arguments must be an array");t.push(i),r[i]=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.length;if(s!==l.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+l.length+" ("+l+"), got "+s);return{fold:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(r.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+r.length);return r[o].apply(null,n)},match:e=>{var r=xe(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!ue(t,(e=>Z(r,e))))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:i,params:n})}}}})),r};$s([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Ws,Vs=e=>"inline-command"===e.type||"inline-format"===e.type,qs=e=>"block-command"===e.type||"block-format"===e.type,Ks=e=>{var t,r=t=>Hs.error({message:t,pattern:e}),n=(t,n,o)=>{if(void 0!==e.format){var a;if(k(e.format)){if(!ue(e.format,S))return r(t+" pattern has non-string items in the `format` array");a=e.format}else{if(!S(e.format))return r(t+" pattern has non-string `format` parameter");a=[e.format]}return Hs.value(n(a))}return void 0!==e.cmd?S(e.cmd)?Hs.value(o(e.cmd,e.value)):r(t+" pattern has non-string `cmd` parameter"):r(t+" pattern is missing both `format` and `cmd` parameters")};if(!x(e))return r("Raw pattern is not an object");if(!S(e.start))return r("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!S(e.end))return r("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return r("Inline pattern has empty `start` and `end` parameters");var o=e.start,a=e.end;return 0===a.length&&(a=o,o=""),n("Inline",(e=>({type:"inline-format",start:o,end:a,format:e})),((e,t)=>({type:"inline-command",start:o,end:a,cmd:e,value:t})))}if(void 0!==e.replacement)return S(e.replacement)?0===e.start.length?r("Replacement pattern has empty `start` parameter"):Hs.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):r("Replacement pattern has non-string `replacement` parameter");var i=null!==(t=e.trigger)&&void 0!==t?t:"space";return 0===e.start.length?r("Block pattern has empty `start` parameter"):n("Block",(t=>({type:"block-format",start:e.start,format:t[0],trigger:i})),((t,r)=>({type:"block-command",start:e.start,cmd:t,value:r,trigger:i})))},Gs=e=>oe(e,qs),Ys=e=>oe(e,Vs),Xs=(e,t)=>u(u({},e),{},{blockPatterns:oe(e.blockPatterns,(e=>((e,t)=>("block-command"===e.type||"block-format"===e.type)&&e.trigger===t)(e,t)))}),Qs=e=>{var t=(e=>{var t=[],r=[];return te(e,(e=>{e.fold((e=>{t.push(e)}),(e=>{r.push(e)}))})),{errors:t,values:r}})(ee(e,Ks));return te(t.errors,(e=>console.error(e.message,e.pattern))),t.values},Zs=Ot().deviceType,Js=Zs.isTouch(),ed=_i.DOM,td=e=>w(e,RegExp),rd=e=>t=>t.options.get(e),nd=e=>S(e)||x(e),od=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r=>{var n=S(r);if(n){if(-1!==r.indexOf("=")){var o=(e=>{var t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return ie(t,((e,t)=>{var r=t.split("="),n=r[0],o=r.length>1?r[1]:n;return e[rt(n)]=rt(o),e}),{})})(r);return{value:Be(o,e.id).getOr(t),valid:n}}return{value:r,valid:n}}return{valid:!1,message:"Must be a string."}}},ad=rd("iframe_attrs"),id=rd("doctype"),ld=rd("document_base_url"),sd=rd("body_id"),dd=rd("body_class"),cd=rd("content_security_policy"),md=rd("br_in_pre"),ud=rd("forced_root_block"),fd=rd("forced_root_block_attrs"),gd=rd("newline_behavior"),pd=rd("br_newline_selector"),vd=rd("no_newline_selector"),hd=rd("keep_styles"),bd=rd("end_container_on_empty_block"),yd=rd("automatic_uploads"),Cd=rd("images_reuse_filename"),wd=rd("images_replace_blob_uris"),Sd=rd("icons"),xd=rd("icons_url"),Ed=rd("images_upload_url"),kd=rd("images_upload_base_path"),_d=rd("images_upload_credentials"),Nd=rd("images_upload_handler"),Td=rd("content_css_cors"),Rd=rd("referrer_policy"),Dd=rd("language"),Ad=rd("language_url"),Od=rd("indent_use_margin"),Bd=rd("indentation"),Pd=rd("content_css"),Ld=rd("content_style"),Md=rd("font_css"),Id=rd("directionality"),Fd=rd("inline_boundaries_selector"),jd=rd("object_resizing"),Ud=rd("resize_img_proportional"),zd=rd("placeholder"),Hd=rd("event_root"),$d=rd("service_message"),Wd=rd("theme"),Vd=rd("theme_url"),qd=rd("model"),Kd=rd("model_url"),Gd=rd("inline_boundaries"),Yd=rd("formats"),Xd=rd("preview_styles"),Qd=rd("format_empty_lines"),Zd=rd("format_noneditable_selector"),Jd=rd("custom_ui_selector"),ec=rd("inline"),tc=rd("hidden_input"),rc=rd("submit_patch"),nc=rd("add_form_submit_trigger"),oc=rd("add_unload_trigger"),ac=rd("custom_undo_redo_levels"),ic=rd("disable_nodechange"),lc=rd("readonly"),sc=rd("editable_root"),dc=rd("content_css_cors"),cc=rd("plugins"),mc=rd("external_plugins"),uc=rd("block_unsupported_drop"),fc=rd("visual"),gc=rd("visual_table_class"),pc=rd("visual_anchor_class"),vc=rd("iframe_aria_text"),hc=rd("setup"),bc=rd("init_instance_callback"),yc=rd("urlconverter_callback"),Cc=rd("auto_focus"),wc=rd("browser_spellcheck"),Sc=rd("protect"),xc=rd("paste_block_drop"),Ec=rd("paste_data_images"),kc=rd("paste_preprocess"),_c=rd("paste_postprocess"),Nc=rd("newdocument_content"),Tc=rd("paste_webkit_styles"),Rc=rd("paste_remove_styles_if_webkit"),Dc=rd("paste_merge_formats"),Ac=rd("smart_paste"),Oc=rd("paste_as_text"),Bc=rd("paste_tab_spaces"),Pc=rd("allow_html_data_urls"),Lc=rd("text_patterns"),Mc=rd("text_patterns_lookup"),Ic=rd("noneditable_class"),Fc=rd("editable_class"),jc=rd("noneditable_regexp"),Uc=rd("preserve_cdata"),zc=rd("highlight_on_focus"),Hc=rd("xss_sanitization"),$c=rd("init_content_sync"),Wc=e=>Ht.explode(e.options.get("images_file_types")),Vc=rd("table_tab_navigation"),qc=rd("details_initial_state"),Kc=rd("details_serialized_state"),Gc=rd("sandbox_iframes"),Yc=e=>e.options.get("sandbox_iframes_exclusions"),Xc=rd("convert_unsafe_embeds"),Qc=rd("license_key"),Zc=rd("api_key"),Jc=so,em=bo,tm=e=>{var t=e.parentNode;t&&t.removeChild(e)},rm=e=>{var t=bl(e);return{count:e.length-t.length,text:t}},nm=e=>{for(var t;-1!==(t=e.data.lastIndexOf(vl));)e.deleteData(t,1)},om=(e,t)=>(sm(e),t),am=(e,t)=>{var r=t.container(),n=((e,t)=>{var r=Q(e,t);return-1===r?K.none():K.some(r)})(Ce(r.childNodes),e).map((e=>e<t.offset()?hs(r,t.offset()-1):t)).getOr(t);return sm(e),n},im=(e,t)=>em(e)&&t.container()===e?((e,t)=>{var r=rm(e.data.substr(0,t.offset())),n=rm(e.data.substr(t.offset()));return(r.text+n.text).length>0?(nm(e),hs(e,t.offset()-r.count)):t})(e,t):om(e,t),lm=(e,t)=>hs.isTextPosition(t)?im(e,t):((e,t)=>t.container()===e.parentNode?am(e,t):om(e,t))(e,t),sm=e=>{Jc(e)&&xl(e)&&(El(e)?e.removeAttribute("data-mce-caret"):tm(e)),em(e)&&(nm(e),0===e.data.length&&tm(e))},dm=No,cm=Do,mm=To,um=(e,t,r)=>{var n,o,a=Bl(t.getBoundingClientRect(),r);if("BODY"===e.tagName){var i=e.ownerDocument.documentElement;n=e.scrollLeft||i.scrollLeft,o=e.scrollTop||i.scrollTop}else{var l=e.getBoundingClientRect();n=e.scrollLeft-l.left,o=e.scrollTop-l.top}a.left+=n,a.right+=n,a.top+=o,a.bottom+=o,a.width=1;var s=t.offsetWidth-t.clientWidth;return s>0&&(r&&(s*=-1),a.left+=s,a.right+=s),a},fm=(e,t,r,n)=>{var o,a,i=$o(),l=ud(e),s=e.dom,d=()=>{(e=>{for(var t,r,n=Kn(_r.fromDom(e),"*[contentEditable=false],video,audio,embed,object"),o=0;o<n.length;o++){var a=n[o].dom,i=a.previousSibling;if(Tl(i)){var l=i.data;1===l.length?null===(t=i.parentNode)||void 0===t||t.removeChild(i):i.deleteData(l.length-1,1)}i=a.nextSibling,Nl(i)&&(1===i.data.length?null===(r=i.parentNode)||void 0===r||r.removeChild(i):i.deleteData(0,1))}})(t),a&&(sm(a),a=null),i.on((e=>{s.remove(e.caret),i.clear()})),o&&(clearInterval(o),o=void 0)},c=()=>{o=setInterval((()=>{i.on((e=>{n()?s.toggleClass(e.caret,"mce-visual-caret-hidden"):s.addClass(e.caret,"mce-visual-caret-hidden")}))}),500)};return{show:(e,n)=>{var o;if(d(),mm(n))return null;if(!r(n))return a=((e,t)=>{var r,n=(null!==(r=e.ownerDocument)&&void 0!==r?r:document).createTextNode(vl),o=e.parentNode;if(t){var a=e.previousSibling;if(Cl(a)){if(xl(a))return a;if(Tl(a))return a.splitText(a.data.length-1)}null==o||o.insertBefore(n,e)}else{var i=e.nextSibling;if(Cl(i)){if(xl(i))return i;if(Nl(i))return i.splitText(1),i}e.nextSibling?null==o||o.insertBefore(n,e.nextSibling):null==o||o.appendChild(n)}return n})(n,e),o=n.ownerDocument.createRange(),pm(a.nextSibling)?(o.setStart(a,0),o.setEnd(a,0)):(o.setStart(a,1),o.setEnd(a,1)),o;var m=((e,t,r)=>{var n,o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createElement(e);o.setAttribute("data-mce-caret",r?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(gl().dom);var a=t.parentNode;return r?null==a||a.insertBefore(o,t):t.nextSibling?null==a||a.insertBefore(o,t.nextSibling):null==a||a.appendChild(o),o})(l,n,e),f=um(t,n,e);s.setStyle(m,"top",f.top),s.setStyle(m,"caret-color","transparent"),a=m;var g=s.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});return s.setStyles(g,u({},f)),s.add(t,g),i.set({caret:g,element:n,before:e}),e&&s.addClass(g,"mce-visual-caret-before"),c(),(o=n.ownerDocument.createRange()).setStart(m,0),o.setEnd(m,0),o},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on((e=>{var r=um(t,e.element,e.before);s.setStyles(e.caret,u({},r))}))},destroy:()=>clearInterval(o)}},gm=()=>jt.browser.isFirefox(),pm=e=>dm(e)||cm(e),vm=e=>(pm(e)||po(e)&&gm())&&Mr(_r.fromDom(e)).exists(mn),hm=_o,bm=No,ym=Do,Cm=fo("display","block table table-cell table-caption list-item"),wm=xl,Sm=wl,xm=so,Em=bo,km=Xl,_m=e=>e>0,Nm=e=>e<0,Tm=(e,t)=>{for(var r;r=e(t);)if(!Sm(r))return r;return null},Rm=(e,t,r,n,o)=>{var a,i=new Qn(e,n),l=bm(e)||Sm(e);if(Nm(t)){if(l&&r(a=Tm(i.prev.bind(i),!0)))return a;for(;a=Tm(i.prev.bind(i),o);)if(r(a))return a}if(_m(t)){if(l&&r(a=Tm(i.next.bind(i),!0)))return a;for(;a=Tm(i.next.bind(i),o);)if(r(a))return a}return null},Dm=(e,t)=>{for(;e&&e!==t;){if(Cm(e))return e;e=e.parentNode}return null},Am=(e,t,r)=>Dm(e.container(),r)===Dm(t.container(),r),Om=(e,t)=>{if(!t)return K.none();var r=t.container(),n=t.offset();return xm(r)?K.from(r.childNodes[n+e]):K.none()},Bm=(e,t)=>{var r,n=(null!==(r=t.ownerDocument)&&void 0!==r?r:document).createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Pm=(e,t,r)=>Dm(t,e)===Dm(r,e),Lm=(e,t,r)=>{for(var n=e?"previousSibling":"nextSibling",o=r;o&&o!==t;){var a=o[n];if(a&&wm(a)&&(a=a[n]),bm(a)||ym(a)){if(Pm(t,a,o))return a;break}if(km(a))break;o=o.parentNode}return null},Mm=U(Bm,!0),Im=U(Bm,!1),Fm=(e,t,r)=>{var n,o=U(Lm,!0,t),a=U(Lm,!1,t),i=r.startContainer,l=r.startOffset;if(wl(i)){var s=Em(i)?i.parentNode:i,d=s.getAttribute("data-mce-caret");if("before"===d&&(n=s.nextSibling,vm(n)))return Mm(n);if("after"===d&&(n=s.previousSibling,vm(n)))return Im(n)}if(!r.collapsed)return r;if(bo(i)){if(wm(i)){if(1===e){if(n=a(i))return Mm(n);if(n=o(i))return Im(n)}if(-1===e){if(n=o(i))return Im(n);if(n=a(i))return Mm(n)}return r}if(Tl(i)&&l>=i.data.length-1)return 1===e&&(n=a(i))?Mm(n):r;if(Nl(i)&&l<=1)return-1===e&&(n=o(i))?Im(n):r;if(l===i.data.length)return(n=a(i))?Mm(n):r;if(0===l)return(n=o(i))?Im(n):r}return r},jm=(e,t)=>Om(e?0:-1,t).filter(bm),Um=(e,t,r)=>{var n=Fm(e,t,r);return-1===e?hs.fromRangeStart(n):hs.fromRangeEnd(n)},zm=e=>K.from(e.getNode()).map(_r.fromDom),Hm=(e,t)=>{for(var r=t;r=e(r);)if(r.isVisible())return r;return r},$m=(e,t)=>{var r=Am(e,t);return!(r||!Eo(e.getNode()))||r};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(Ws||(Ws={}));var Wm,Vm=No,qm=bo,Km=so,Gm=Eo,Ym=Xl,Xm=e=>Kl(e)||(e=>!!Ql(e)&&!ie(Ce(e.getElementsByTagName("*")),((e,t)=>e||Hl(t)),!1))(e),Qm=Zl,Zm=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Jm=(e,t)=>{if(_m(e)){if(Ym(t.previousSibling)&&!qm(t.previousSibling))return hs.before(t);if(qm(t))return hs(t,0)}if(Nm(e)){if(Ym(t.nextSibling)&&!qm(t.nextSibling))return hs.after(t);if(qm(t))return hs(t,t.data.length)}return Nm(e)?Gm(t)?hs.before(t):hs.after(t):hs.before(t)},eu=(e,t,r)=>{var n,o,a,i;if(!Km(r)||!t)return null;if(t.isEqual(hs.after(r))&&r.lastChild){if(i=hs.after(r.lastChild),Nm(e)&&Ym(r.lastChild)&&Km(r.lastChild))return Gm(r.lastChild)?hs.before(r.lastChild):i}else i=t;var l=i.container(),s=i.offset();if(qm(l)){if(Nm(e)&&s>0)return hs(l,--s);if(_m(e)&&s<l.length)return hs(l,++s);n=l}else{if(Nm(e)&&s>0&&(o=Zm(l,s-1),Ym(o)))return!Xm(o)&&(a=Rm(o,e,Qm,o))?qm(a)?hs(a,a.data.length):hs.after(a):qm(o)?hs(o,o.data.length):hs.before(o);if(_m(e)&&s<l.childNodes.length&&(o=Zm(l,s),Ym(o)))return Gm(o)?((e,t)=>{var r=t.nextSibling;return r&&Ym(r)?qm(r)?hs(r,0):hs.before(r):eu(Ws.Forwards,hs.after(t),e)})(r,o):!Xm(o)&&(a=Rm(o,e,Qm,o))?qm(a)?hs(a,0):hs.before(a):qm(o)?hs(o,0):hs.after(o);n=o||i.getNode()}if(n&&(_m(e)&&i.isAtEnd()||Nm(e)&&i.isAtStart())&&(n=Rm(n,e,q,r,!0),Qm(n,r)))return Jm(e,n);o=n?Rm(n,e,Qm,r):n;var d=We(oe(((e,t)=>{for(var r=[],n=e;n&&n!==t;)r.push(n),n=n.parentNode;return r})(l,r),Vm));return!d||o&&d.contains(o)?o?Jm(e,o):null:i=_m(e)?hs.after(d):hs.before(d)},tu=e=>({next:t=>eu(Ws.Forwards,t,e),prev:t=>eu(Ws.Backwards,t,e)}),ru=e=>hs.isTextPosition(e)?0===e.offset():Xl(e.getNode()),nu=e=>{if(hs.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Xl(e.getNode(!0))},ou=(e,t)=>!hs.isTextPosition(e)&&!hs.isTextPosition(t)&&e.getNode()===t.getNode(!0),au=(e,t,r)=>{return e?!ou(t,r)&&(n=t,!(!hs.isTextPosition(n)&&Eo(n.getNode())))&&nu(t)&&ru(r):!ou(r,t)&&ru(t)&&nu(r);var n},iu=(e,t,r)=>{var n=tu(t);return K.from(e?n.next(r):n.prev(r))},lu=(e,t,r)=>iu(e,t,r).bind((n=>Am(r,n,t)&&au(e,r,n)?iu(e,t,n):K.some(n))),su=(e,t,r,n)=>lu(e,t,r).bind((r=>n(r)?su(e,t,r,n):K.some(r))),du=(e,t)=>{var r,n=e?t.firstChild:t.lastChild;return bo(n)?K.some(hs(n,e?0:n.data.length)):n?Xl(n)?K.some(e?hs.before(n):Eo(r=n)?hs.before(r):hs.after(r)):((e,t,r)=>{var n=e?hs.before(r):hs.after(r);return iu(e,t,n)})(e,t,n):K.none()},cu=U(iu,!0),mu=U(iu,!1),uu=U(du,!0),fu=U(du,!1),gu="_mce_caret",pu=e=>so(e)&&e.id===gu,vu=(e,t)=>{for(var r=t;r&&r!==e;){if(pu(r))return r;r=r.parentNode}return null},hu=e=>Pe(e,"name"),bu=e=>Ht.isArray(e.start),yu=e=>!(!hu(e)&&N(e.forward))||e.forward,Cu=(e,t)=>(so(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),wu=(e,t)=>fu(e).fold(V,(e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0))),Su=(e,t,r)=>!(!(e=>!e.hasChildNodes())(t)||!vu(e,t))&&(((e,t)=>{var r,n=(null!==(r=e.ownerDocument)&&void 0!==r?r:document).createTextNode(vl);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)})(t,r),!0),xu=(e,t,r,n)=>{var o=r[t?"start":"end"],a=e.getRoot();if(o){for(var i=a,l=o[0],s=o.length-1;i&&s>=1;s--){var d=i.childNodes;if(Su(a,i,n))return!0;if(o[s]>d.length-1)return!!Su(a,i,n)||wu(i,n);i=d[o[s]]}bo(i)&&(l=Math.min(o[0],i.data.length)),so(i)&&(l=Math.min(o[0],i.childNodes.length)),t?n.setStart(i,l):n.setEnd(i,l)}return!0},Eu=e=>bo(e)&&e.data.length>0,ku=(e,t,r)=>{var n=e.get(r.id+"_"+t),o=null==n?void 0:n.parentNode,a=r.keep;if(n&&o){var i,l;if("start"===t?a?n.hasChildNodes()?(i=n.firstChild,l=1):Eu(n.nextSibling)?(i=n.nextSibling,l=0):Eu(n.previousSibling)?(i=n.previousSibling,l=n.previousSibling.data.length):(i=o,l=e.nodeIndex(n)+1):(i=o,l=e.nodeIndex(n)):a?n.hasChildNodes()?(i=n.firstChild,l=1):Eu(n.previousSibling)?(i=n.previousSibling,l=n.previousSibling.data.length):(i=o,l=e.nodeIndex(n)):(i=o,l=e.nodeIndex(n)),!a){var s,d=n.previousSibling,c=n.nextSibling;for(Ht.each(Ht.grep(n.childNodes),(e=>{bo(e)&&(e.data=e.data.replace(/\uFEFF/g,""))}));s=e.get(r.id+"_"+t);)e.remove(s,!0);if(bo(c)&&bo(d)&&!jt.browser.isOpera()){var m=d.data.length;d.appendData(c.data),e.remove(c),i=d,l=m}}return K.some(hs(i,l))}return K.none()},_u=(e,t)=>{var r=e.dom;if(t){if(bu(t))return((e,t)=>{var r=e.createRng();return xu(e,!0,t,r)&&xu(e,!1,t,r)?K.some({range:r,forward:yu(t)}):K.none()})(r,t);if((e=>S(e.start))(t))return((e,t)=>{var r=K.from(Ts(e.getRoot(),t.start)),n=K.from(Ts(e.getRoot(),t.end));return Vt(r,n,((r,n)=>{var o=e.createRng();return o.setStart(r.container(),r.offset()),o.setEnd(n.container(),n.offset()),{range:o,forward:yu(t)}}))})(r,t);if((e=>Pe(e,"id"))(t))return((e,t)=>{var r=ku(e,"start",t),n=ku(e,"end",t);return Vt(r,n.or(r),((r,n)=>{var o=e.createRng();return o.setStart(Cu(e,r.container()),r.offset()),o.setEnd(Cu(e,n.container()),n.offset()),{range:o,forward:yu(t)}}))})(r,t);if(hu(t))return((e,t)=>K.from(e.select(t.name)[t.index]).map((t=>{var r=e.createRng();return r.selectNode(t),{range:r,forward:!0}})))(r,t);if((e=>Pe(e,"rng"))(t))return K.some({range:t.rng,forward:yu(t)})}return K.none()},Nu=(e,t,r)=>Fs(e,t,r),Tu=(e,t)=>{_u(e,t).each((t=>{var r=t.range,n=t.forward;e.setRng(r,n)}))},Ru=e=>so(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),Du=(Wm=eo,e=>Wm===e),Au=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),Ou=e=>!Au(e)&&!Du(e)&&!to(e),Bu=e=>{var t=[];if(e)for(var r=0;r<e.rangeCount;r++)t.push(e.getRangeAt(r));return t},Pu=e=>oe((e=>me(e,(e=>{var t=Fl(e);return t?[_r.fromDom(t)]:[]})))(e),ml),Lu=(e,t)=>{var r=Kn(t,"td[data-mce-selected],th[data-mce-selected]");return r.length>0?r:Pu(e)},Mu=e=>Lu(Bu(e.selection.getSel()),_r.fromDom(e.getBody())),Iu=(e,t)=>sn(e,"table",t),Fu=e=>Wr(e).fold(I([e]),(t=>[e].concat(Fu(t)))),ju=e=>Vr(e).fold(I([e]),(t=>"br"===Zt(t)?Fr(t).map((t=>[e].concat(ju(t)))).getOr([]):[e].concat(ju(t)))),Uu=(e,t)=>Vt((e=>{var t=e.startContainer,r=e.startOffset;return bo(t)?0===r?K.some(_r.fromDom(t)):K.none():K.from(t.childNodes[r]).map(_r.fromDom)})(t),(e=>{var t=e.endContainer,r=e.endOffset;return bo(t)?r===t.data.length?K.some(_r.fromDom(t)):K.none():K.from(t.childNodes[r-1]).map(_r.fromDom)})(t),((t,r)=>{var n=se(Fu(e),U(Dr,t)),o=se(ju(e),U(Dr,r));return n.isSome()&&o.isSome()})).getOr(!1),zu=(e,t,r,n)=>{var o=r,a=new Qn(r,o),i=De(e.schema.getMoveCaretBeforeOnEnterElements(),((e,t)=>!Z(["td","th","table"],t.toLowerCase()))),l=r;do{if(bo(l)&&0!==Ht.trim(l.data).length)return void(n?t.setStart(l,0):t.setEnd(l,l.data.length));if(i[l.nodeName])return void(n?t.setStartBefore(l):"BR"===l.nodeName?t.setEndBefore(l):t.setEndAfter(l))}while(l=n?a.next():a.prev());"BODY"===o.nodeName&&(n?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Hu=e=>{var t=e.selection.getSel();return D(t)&&t.rangeCount>0},$u=(e,t)=>{var r=Mu(e);r.length>0?te(r,(r=>{var n=r.dom,o=e.dom.createRng();o.setStartBefore(n),o.setEndAfter(n),t(o,!0)})):t(e.selection.getRng(),!1)},Wu=(e,t,r)=>{var n=Is(e,t);r(n),e.moveToBookmark(n)},Vu=e=>O(null==e?void 0:e.nodeType),qu=e=>so(e)&&!Ru(e)&&!pu(e)&&!go(e),Ku=(e,t,r)=>{var n=e.selection,o=e.dom,a=n.getNode(),i=No(a);Wu(n,!0,(()=>{t()})),i&&No(a)&&o.isChildOf(a,e.getBody())?e.selection.select(a):r(n.getStart())&&Gu(o,n)},Gu=(e,t)=>{var r,n,o=t.getRng(),a=o.startContainer,i=o.startOffset;if(!((e,t)=>{if(qu(t)&&!/^(TD|TH)$/.test(t.nodeName)){var r=e.getAttrib(t,"data-mce-selected"),n=parseInt(r,10);return!isNaN(n)&&n>0}return!1})(e,t.getNode())&&so(a)){var l,s=a.childNodes,d=e.getRoot();if(i<s.length){var c=s[i];l=new Qn(c,null!==(r=e.getParent(c,e.isBlock))&&void 0!==r?r:d)}else{var m=s[s.length-1];(l=new Qn(m,null!==(n=e.getParent(m,e.isBlock))&&void 0!==n?n:d)).next(!0)}for(var u=l.current();u;u=l.next()){if("false"===e.getContentEditable(u))return;if(bo(u)&&!Zu(u))return o.setStart(u,0),void t.setRng(o)}}},Yu=(e,t,r)=>{if(e){var n=t?"nextSibling":"previousSibling";for(e=r?e:e[n];e;e=e[n])if(so(e)||!Zu(e))return e}},Xu=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||ia(e,t),Qu=(e,t,r)=>e.schema.isValidChild(t,r),Zu=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(D(e)&&bo(e)){var r=t?e.data.replace(/ /g,"Â "):e.data;return no(r)}return!1},Ju=(e,t)=>{var r=e.dom;return qu(t)&&"false"===r.getContentEditable(t)&&((e,t)=>{var r="[data-mce-cef-wrappable]",n=Zd(e),o=it(n)?r:`${r},${n}`;return Tr(_r.fromDom(t),o)})(e,t)&&0===r.select('[contenteditable="true"]',t).length},ef=(e,t)=>A(e)?e(t):(D(t)&&(e=e.replace(/%(\w+)/g,((e,r)=>t[r]||e))),e),tf=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),rf=(e,t)=>{if(R(e))return null;var r=String(e);return"color"!==t&&"backgroundColor"!==t||(r=ai(r)),"fontWeight"===t&&700===e&&(r="bold"),"fontFamily"===t&&(r=r.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),r},nf=(e,t,r)=>{var n=e.getStyle(t,r);return rf(n,r)},of=(e,t)=>{var r;return e.getParent(t,(t=>!!so(t)&&(!!(r=e.getStyle(t,"text-decoration"))&&"none"!==r))),r},af=(e,t,r)=>e.getParents(t,r,e.getRoot()),lf=(e,t,r)=>{var n=e.formatter.get(t);return D(n)&&J(n,r)},sf=(e,t,r)=>{var n=["inline","block","selector","attributes","styles","classes"],o=e=>De(e,((e,t)=>J(n,(e=>e===t))));return lf(e,t,(t=>{var n=o(t);return lf(e,r,(e=>{var t=o(e);return function(e,t){return f(arguments.length>2&&void 0!==arguments[2]?arguments[2]:p).eq(e,t)}(n,t)}))}))},df=e=>Le(e,"block"),cf=e=>Le(e,"selector"),mf=e=>Le(e,"inline"),uf=e=>cf(e)&&!1!==e.expand&&!mf(e),ff=e=>(e=>{for(var t=[],r=e;r;){if(bo(r)&&r.data!==vl||r.childNodes.length>1)return[];so(r)&&t.push(r),r=r.firstChild}return t})(e).length>0,gf=e=>pu(e.dom)&&ff(e.dom),pf=Ru,vf=af,hf=Zu,bf=Xu,yf=(e,t)=>{for(var r=t;r;){if(so(r)&&e.getContentEditable(r))return"false"===e.getContentEditable(r)?r:t;r=r.parentNode}return t},Cf=(e,t,r,n)=>{var o=t.data;if(e){for(var a=r;a>0;a--)if(n(o.charAt(a-1)))return a}else for(var i=r;i<o.length;i++)if(n(o.charAt(i)))return i;return-1},wf=(e,t,r)=>Cf(e,t,r,(e=>Du(e)||Au(e))),Sf=(e,t,r)=>Cf(e,t,r,Ou),xf=(e,t,r,n,o,a)=>{var i,l=e.getParent(r,e.isBlock)||t,s=(t,r,n)=>{var a=rl(e),s=o?a.backwards:a.forwards;return K.from(s(t,r,((e,t)=>pf(e.parentNode)?-1:(i=e,n(o,e,t))),l))};return s(r,n,wf).bind((e=>a?s(e.container,e.offset+(o?-1:0),Sf):K.some(e))).orThunk((()=>i?K.some({container:i,offset:o?0:i.length}):K.none()))},Ef=(e,t,r,n,o)=>{var a=n[o];bo(n)&&it(n.data)&&a&&(n=a);for(var i=vf(e,n),l=0;l<i.length;l++)for(var s=0;s<t.length;s++){var d=t[s];if((!D(d.collapsed)||d.collapsed===r.collapsed)&&(cf(d)&&e.is(i[l],d.selector)))return i[l]}return n},kf=(e,t,r,n)=>{var o,a=r,i=e.getRoot(),l=t[0];if(df(l)&&(a=l.wrapper?null:e.getParent(r,l.block,i)),!a){var s=null!==(o=e.getParent(r,"LI,TD,TH,SUMMARY"))&&void 0!==o?o:i;a=e.getParent(bo(r)?r.parentNode:r,(t=>t!==i&&bf(e.schema,t)),s)}if(a&&df(l)&&l.wrapper&&(a=vf(e,a,"ul,ol").reverse()[0]||a),!a)for(a=r;a&&a[n]&&!e.isBlock(a[n])&&(a=a[n],!tf(a,"br")););return a||r},_f=(e,t,r,n)=>{var o=r.parentNode;return!D(r[n])&&(!(o!==t&&!R(o)&&!e.isBlock(o))||_f(e,t,o,n))},Nf=(e,t,r,n,o)=>{var a,i=r,l=o?"previousSibling":"nextSibling",s=e.getRoot();if(bo(r)&&!hf(r)&&(o?n>0:n<r.data.length))return r;for(;i;){if(!t[0].block_expand&&e.isBlock(i))return i;for(var d=i[l];d;d=d[l]){var c=bo(d)&&!_f(e,s,d,l);if(!pf(d)&&(!Eo(a=d)||!a.getAttribute("data-mce-bogus")||a.nextSibling)&&!hf(d,c))return i}if(i===s||i.parentNode===s){r=i;break}i=i.parentNode}return r},Tf=e=>pf(e.parentNode)||pf(e),Rf=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.startContainer,a=t.startOffset,i=t.endContainer,l=t.endOffset,s=r[0];(so(o)&&o.hasChildNodes()&&(o=jl(o,a),bo(o)&&(a=0)),so(i)&&i.hasChildNodes()&&(i=jl(i,t.collapsed?l:l-1),bo(i)&&(l=i.data.length)),o=yf(e,o),i=yf(e,i),Tf(o)&&(o=pf(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,bo(o)&&(a=t.collapsed?o.length:0)),Tf(i)&&(i=pf(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,bo(i)&&(l=t.collapsed?0:i.length)),t.collapsed)&&(xf(e,e.getRoot(),o,a,!0,n).each((e=>{var t=e.container,r=e.offset;o=t,a=r})),xf(e,e.getRoot(),i,l,!1,n).each((e=>{var t=e.container,r=e.offset;i=t,l=r})));return(mf(s)||s.block_expand)&&(mf(s)&&bo(o)&&0!==a||(o=Nf(e,r,o,a,!0)),mf(s)&&bo(i)&&l!==i.data.length||(i=Nf(e,r,i,l,!1))),uf(s)&&(o=Ef(e,r,t,o,"previousSibling"),i=Ef(e,r,t,i,"nextSibling")),(df(s)||cf(s))&&(o=kf(e,r,o,"previousSibling"),i=kf(e,r,i,"nextSibling"),df(s)&&(e.isBlock(o)||(o=Nf(e,r,o,a,!0),bo(o)&&(a=0)),e.isBlock(i)||(i=Nf(e,r,i,l,!1),bo(i)&&(l=i.data.length)))),so(o)&&o.parentNode&&(a=e.nodeIndex(o),o=o.parentNode),so(i)&&i.parentNode&&(l=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:a,endContainer:i,endOffset:l}},Df=(e,t,r)=>{var n,o=t.startOffset,a=jl(t.startContainer,o),i=t.endOffset,l=jl(t.endContainer,i-1),s=e=>{var t=e[0];bo(t)&&t===a&&o>=t.data.length&&e.splice(0,1);var r=e[e.length-1];return 0===i&&e.length>0&&r===l&&bo(r)&&e.splice(e.length-1,1),e},d=(e,t,r)=>{for(var n=[];e&&e!==r;e=e[t])n.push(e);return n},c=(t,r)=>e.getParent(t,(e=>e.parentNode===r),r),m=(e,t,n)=>{for(var o=n?"nextSibling":"previousSibling",a=e,i=a.parentNode;a&&a!==t;a=i){i=a.parentNode;var l=d(a===e?a:a[o],o);l.length&&(n||l.reverse(),r(s(l)))}};if(a===l)return r(s([a]));var u=null!==(n=e.findCommonAncestor(a,l))&&void 0!==n?n:e.getRoot();if(e.isChildOf(a,l))return m(a,u,!0);if(e.isChildOf(l,a))return m(l,u);var f=c(a,u)||a,g=c(l,u)||l;m(a,f,!0);var p=d(f===a?f:f.nextSibling,"nextSibling",g===l?g.nextSibling:g);p.length&&r(s(p)),m(l,g)},Af=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Of=(e,t,r,n)=>Lr(t).fold((()=>"skipping"),(o=>"br"===n||(e=>nr(e)&&ol(e)===vl)(t)?"valid":(e=>rr(e)&&Er(e,Mi()))(t)?"existing":pu(t.dom)?"caret":J(Af,(e=>Tr(t,e)))?"valid-block":Qu(e,r,n)&&Qu(e,Zt(o),r)?"valid":"invalid-child")),Bf=(e,t,r,o,a,i)=>{var s=r.uid,d=void 0===s?t:s,c=l(r,n);Cr(e,Mi()),sr(e,`${Fi()}`,d),sr(e,`${Ii()}`,o);var m=a(d,c),u=m.attributes,f=void 0===u?{}:u,g=m.classes,p=void 0===g?[]:g;if(dr(e,f),((e,t)=>{te(t,(t=>{Cr(e,t)}))})(e,p),i){p.length>0&&sr(e,`${Ui()}`,p.join(","));var v=xe(f);v.length>0&&sr(e,`${zi()}`,v.join(","))}},Pf=e=>{Sr(e,Mi()),fr(e,`${Fi()}`),fr(e,`${Ii()}`),fr(e,`${ji()}`);var t,r=mr(e,`${zi()}`).map((e=>e.split(","))).getOr([]),n=mr(e,`${Ui()}`).map((e=>e.split(","))).getOr([]);te(r,(t=>fr(e,t))),t=e,te(n,(e=>{Sr(t,e)})),fr(e,`${Ui()}`),fr(e,`${zi()}`)},Lf=(e,t,r,n,o)=>{var a=_r.fromTag("span",e);return Bf(a,t,r,n,o,!1),a},Mf=(e,t,r,n,o,a)=>{var i=[],l=Lf(e.getDoc(),r,a,n,o),s=$o(),d=()=>{s.clear()},c=e=>{te(e,m)},m=t=>{switch(Of(e,t,"span",Zt(t))){case"invalid-child":d();var m=Hr(t);c(m),d();break;case"valid-block":d(),Bf(t,r,a,n,o,!0);break;case"valid":var u=s.get().getOrThunk((()=>{var e=Zi(l);return i.push(e),s.set(e),e}));_n(t,u)}};return Df(e.dom,t,(e=>{d(),(e=>{var t=ee(e,_r.fromDom);c(t)})(e)})),i},If=(e,t,r,n)=>{e.undoManager.transact((()=>{var o=e.selection,a=o.getRng(),i=Mu(e).length>0,l=Xi("mce-annotation");if(a.collapsed&&!i&&((e,t)=>{var r=Rf(e.dom,t,[{inline:"span"}]);t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset),e.selection.setRng(t)})(e,a),o.getRng().collapsed&&!i){var s=Lf(e.getDoc(),l,n,t,r.decorate);Bn(s,eo),o.getRng().insertNode(s.dom),o.select(s.dom)}else Wu(o,!1,(()=>{$u(e,(o=>{Mf(e,o,l,t,r.decorate,n)}))}))}))},Ff=e=>{var t,r=(t={},{register:(e,r)=>{t[e]={name:e,settings:r}},lookup:e=>Be(t,e).map((e=>e.settings)),getNames:()=>xe(t)});Gi(e,r);var n=Ki(e,r),o=ir("span"),a=e=>{te(e,(e=>{o(e)?Dn(e):Pf(e)}))};return{register:(e,t)=>{r.register(e,t)},annotate:(t,n)=>{r.lookup(t).each((r=>{If(e,t,r,n)}))},annotationChanged:(e,t)=>{n.addListener(e,t)},remove:t=>{$i(e,K.some(t)).each((t=>{var r=t.elements,n=e.selection.getBookmark();a(r),e.selection.moveToBookmark(n)}))},removeAll:t=>{var r=e.selection.getBookmark();ke(qi(e,t),((e,t)=>{a(e)})),e.selection.moveToBookmark(r)},getAll:t=>{var r=qi(e,t);return _e(r,(e=>ee(e,(e=>e.dom))))}}},jf=e=>({getBookmark:U(Nu,e),moveToBookmark:U(Tu,e)});jf.isBookmarkNode=Ru;var Uf=(e,t,r)=>!r.collapsed&&J(r.getClientRects(),(r=>((e,t,r)=>t>=e.left&&t<=e.right&&r>=e.top&&r<=e.bottom)(r,e,t))),zf=(e,t,r)=>{e.dispatch(t,r)},Hf=(e,t,r,n)=>{e.dispatch("FormatApply",{format:t,node:r,vars:n})},$f=(e,t,r,n)=>{e.dispatch("FormatRemove",{format:t,node:r,vars:n})},Wf=(e,t)=>e.dispatch("SetContent",t),Vf=(e,t)=>e.dispatch("GetContent",t),qf=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},Kf=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Gf={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Gf.metaKeyPressed(e),metaKeyPressed:e=>jt.os.isMacOS()||jt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Yf="data-mce-selected",Xf=Math.abs,Qf=Math.round,Zf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Jf=(e,t)=>{var r,n,o,a,i,l,s,d,c,m,u,f,g,p,v,h=t.dom,b=t.getDoc(),y=document,C=t.getBody(),w=e=>D(e)&&(ko(e)||h.is(e,"figure.image")),S=e=>Do(e)||h.hasClass(e,"mce-preview-object"),x=e=>{var r=e.target;((e,t)=>{if((e=>"longpress"===e.type||0===e.type.indexOf("touch"))(e)){var r=e.touches[0];return w(e.target)&&!Uf(r.clientX,r.clientY,t)}return w(e.target)&&!Uf(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(r)},E=e=>h.hasClass(e,"mce-preview-object")&&D(e.firstElementChild)?[e,e.firstElementChild]:h.is(e,"figure.image")?[e.querySelector("img")]:[e],k=e=>{var r=jd(t);return!!r&&("false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&(h.hasClass(e,"mce-preview-object")&&D(e.firstElementChild)?Tr(_r.fromDom(e.firstElementChild),r):Tr(_r.fromDom(e),r))))},_=(e,r,n)=>{if(D(n)){var o=E(e);te(o,(e=>{e.style[r]||!t.schema.isValid(e.nodeName.toLowerCase(),r)?h.setStyle(e,r,n):h.setAttrib(e,r,""+n)}))}},N=(e,t,r)=>{_(e,"width",t),_(e,"height",r)},T=e=>{var i,b,y,x;i=e.screenX-l,b=e.screenY-s,f=i*a[2]+d,g=b*a[3]+c,f=f<5?5:f,g=g<5?5:g,((w(r)||S(r))&&!1!==Ud(t)?!Gf.modifierPressed(e):Gf.modifierPressed(e))&&(Xf(i)>Xf(b)?(g=Qf(f*m),f=Qf(g/m)):(f=Qf(g/m),g=Qf(f*m))),N(n,f,g),y=(y=a.startPos.x+i)>0?y:0,x=(x=a.startPos.y+b)>0?x:0,h.setStyles(o,{left:y,top:x,display:"block"}),o.innerHTML=f+" &times; "+g,a[2]<0&&n.clientWidth<=f&&h.setStyle(n,"left",undefined+(d-f)),a[3]<0&&n.clientHeight<=g&&h.setStyle(n,"top",undefined+(c-g)),(i=C.scrollWidth-p)+(b=C.scrollHeight-v)!==0&&h.setStyles(o,{left:y-i,top:x-b}),u||(((e,t,r,n,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:r,height:n,origin:o})})(t,r,d,c,"corner-"+a.name),u=!0)},R=()=>{var e=u;u=!1,e&&(_(r,"width",f),_(r,"height",g)),h.unbind(b,"mousemove",T),h.unbind(b,"mouseup",R),y!==b&&(h.unbind(y,"mousemove",T),h.unbind(y,"mouseup",R)),h.remove(n),h.remove(o),h.remove(i),A(r),e&&(((e,t,r,n,o)=>{e.dispatch("ObjectResized",{target:t,width:r,height:n,origin:o})})(t,r,f,g,"corner-"+a.name),h.setAttrib(r,"style",h.getAttrib(r,"style"))),t.nodeChanged()},A=e=>{M();var u=h.getPos(e,C),w=u.x,x=u.y,_=e.getBoundingClientRect(),D=_.width||_.right-_.left,A=_.height||_.bottom-_.top;r!==e&&(B(),r=e,f=g=0);var O=t.dispatch("ObjectSelected",{target:e});k(e)&&!O.isDefaultPrevented()?ke(Zf,((e,t)=>{var u=u=>{var f=E(r)[0];l=u.screenX,s=u.screenY,d=f.clientWidth,c=f.clientHeight,m=c/d,(a=e).name=t,a.startPos={x:D*e[0]+w,y:A*e[1]+x},p=C.scrollWidth,v=C.scrollHeight,i=h.add(C,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),h.setStyles(i,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),n=((e,t)=>{if(S(t))return e.create("img",{src:jt.transparentSrc});if(po(t)){var r=Je(a.name,"n")?be:ye,n=t.cloneNode(!0);return r(e.select("tr",n)).each((t=>{var r=e.select("td,th",t);e.setStyle(t,"height",null),te(r,(t=>e.setStyle(t,"height",null)))})),n}return t.cloneNode(!0)})(h,r),h.addClass(n,"mce-clonedresizable"),h.setAttrib(n,"data-mce-bogus","all"),n.contentEditable="false",h.setStyles(n,{left:w,top:x,margin:0}),N(n,D,A),n.removeAttribute(Yf),C.appendChild(n),h.bind(b,"mousemove",T),h.bind(b,"mouseup",R),y!==b&&(h.bind(y,"mousemove",T),h.bind(y,"mouseup",R)),o=h.add(C,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},d+" &times; "+c)},f=h.get("mceResizeHandle"+t);f&&h.remove(f),f=h.add(C,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),h.bind(f,"mousedown",(e=>{e.stopImmediatePropagation(),e.preventDefault(),u(e)})),e.elm=f,h.setStyles(f,{left:D*e[0]+w-f.offsetWidth/2,top:A*e[1]+x-f.offsetHeight/2})})):B(!1)},O=Pi(A,0),B=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];O.cancel(),M(),r&&e&&r.removeAttribute(Yf),ke(Zf,((e,t)=>{var r=h.get("mceResizeHandle"+t);r&&(h.unbind(r),h.remove(r))}))},P=(e,t)=>h.isChildOf(e,t),L=r=>{if(!(u||t.removed||t.composing)){var n="mousedown"===r.type?r.target:e.getNode(),o=cn(_r.fromDom(n),"table,img,figure.image,hr,video,span.mce-preview-object,details").map((e=>e.dom)).filter((e=>h.isEditable(e.parentElement)||"IMG"===e.nodeName&&h.isEditable(e))).getOrUndefined(),a=D(o)?h.getAttrib(o,Yf,"1"):"1";if(te(h.select(`img[${Yf}],hr[${Yf}]`),(e=>{e.removeAttribute(Yf)})),D(o)&&P(o,C)&&t.hasFocus()){I();var i=e.getStart(!0);if(P(i,o)&&P(e.getEnd(!0),o))return h.setAttrib(o,Yf,a),void O.throttle(o)}B()}},M=()=>{ke(Zf,(e=>{e.elm&&(h.unbind(e.elm),delete e.elm)}))},I=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};t.on("init",(()=>{I(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",L),t.on("keyup compositionend",(e=>{r&&"TABLE"===r.nodeName&&L(e)})),t.on("hide blur",B),t.on("contextmenu longpress",x,!0)})),t.on("remove",M);return{isResizable:k,showResizeRect:A,hideResizeRect:B,updateResizeRect:L,destroy:()=>{O.cancel(),r=n=i=null}}},eg=(e,t,r)=>{var n,o=e.document.createRange();return n=o,t.fold((e=>{n.setStartBefore(e.dom)}),((e,t)=>{n.setStart(e.dom,t)}),(e=>{n.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,r)=>{e.setEnd(t.dom,r)}),(t=>{e.setEndAfter(t.dom)}))})(o,r),o},tg=(e,t,r,n,o)=>{var a=e.document.createRange();return a.setStart(t.dom,r),a.setEnd(n.dom,o),a},rg=$s([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ng=(e,t,r)=>t(_r.fromDom(r.startContainer),r.startOffset,_r.fromDom(r.endContainer),r.endOffset),og=(e,t)=>{var r=((e,t)=>t.match({domRange:e=>({ltr:I(e),rtl:K.none}),relative:(t,r)=>({ltr:Ve((()=>eg(e,t,r))),rtl:Ve((()=>K.some(eg(e,r,t))))}),exact:(t,r,n,o)=>({ltr:Ve((()=>tg(e,t,r,n,o))),rtl:Ve((()=>K.some(tg(e,n,o,t,r))))})}))(e,t);return((e,t)=>{var r=t.ltr();return r.collapsed?t.rtl().filter((e=>!1===e.collapsed)).map((e=>rg.rtl(_r.fromDom(e.endContainer),e.endOffset,_r.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>ng(0,rg.ltr,r))):ng(0,rg.ltr,r)})(0,r)};rg.ltr,rg.rtl;var ag=(e,t,r,n)=>({start:e,soffset:t,finish:r,foffset:n}),ig=(e,t,r)=>{var n,o;return K.from(null===(o=(n=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(n,t,r)).bind((t=>{if(null===t.offsetNode)return K.none();var r=e.dom.createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),K.some(r)}))},lg=(e,t,r)=>{var n,o;return K.from(null===(o=(n=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(n,t,r))},sg=document.caretPositionFromPoint?ig:document.caretRangeFromPoint?lg:K.none,dg=$s([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cg={before:dg.before,on:dg.on,after:dg.after,cata:(e,t,r,n)=>e.fold(t,r,n),getStart:e=>e.fold(F,F,F)},mg=$s([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ug={domRange:mg.domRange,relative:mg.relative,exact:mg.exact,exactFromRange:e=>mg.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{var t=(e=>e.match({domRange:e=>_r.fromDom(e.startContainer),relative:(e,t)=>cg.getStart(e),exact:(e,t,r,n)=>e}))(e);return Pr(t)},range:ag},fg=(e,t)=>{var r=Zt(e);return"input"===r?cg.after(e):Z(["br","img"],r)?0===t?cg.before(e):cg.after(e):cg.on(e,t)},gg=(e,t)=>{var r=e.fold(cg.before,fg,cg.after),n=t.fold(cg.before,fg,cg.after);return ug.relative(r,n)},pg=(e,t,r,n)=>{var o=fg(e,t),a=fg(r,n);return ug.relative(o,a)},vg=(e,t)=>{var r=(t||document).createDocumentFragment();return te(e,(e=>{r.appendChild(e.dom)})),_r.fromDom(r)},hg=e=>{var t=ug.getWin(e).dom,r=(e,r,n,o)=>tg(t,e,r,n,o),n=(e=>e.match({domRange:e=>{var t=_r.fromDom(e.startContainer),r=_r.fromDom(e.endContainer);return pg(t,e.startOffset,r,e.endOffset)},relative:gg,exact:pg}))(e);return og(t,n).match({ltr:r,rtl:r})},bg=(e,t,r)=>((e,t,r)=>{var n=_r.fromDom(e.document);return sg(n,t,r).map((e=>ag(_r.fromDom(e.startContainer),e.startOffset,_r.fromDom(e.endContainer),e.endOffset)))})(e,t,r),yg=(e,t,r)=>{var n=Pr(_r.fromDom(r));return bg(n.dom,e,t).map((e=>{var t=r.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t})).getOrUndefined()},Cg=(e,t)=>D(e)&&D(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,wg=(e,t,r)=>null!==((e,t,r)=>{for(var n=e;n&&n!==t;){if(r(n))return n;n=n.parentNode}return null})(e,t,r),Sg=(e,t,r)=>wg(e,t,(e=>e.nodeName===r)),xg=(e,t)=>xl(e)&&!wg(e,t,pu),Eg=(e,t,r)=>{var n=t.parentNode;if(n)for(var o,a=new Qn(t,e.getParent(n,e.isBlock)||e.getRoot());o=a[r?"prev":"next"]();)if(Eo(o))return!0;return!1},kg=(e,t,r,n,o)=>{var a,i,l=e.getRoot(),s=e.schema.getNonEmptyElements(),d=o.parentNode;if(!d)return K.none();var c=e.getParent(d,e.isBlock)||l;if(n&&Eo(o)&&t&&e.isEmpty(c))return K.some(hs(d,e.nodeIndex(o)));for(var m=new Qn(o,c);i=m[n?"prev":"next"]();){if("false"===e.getContentEditableParent(i)||xg(i,l))return K.none();if(bo(i)&&i.data.length>0)return Sg(i,l,"A")?K.none():K.some(hs(i,n?i.data.length:0));if(e.isBlock(i)||s[i.nodeName.toLowerCase()])return K.none();a=i}return wo(a)?K.none():r&&a?K.some(hs(a,0)):K.none()},_g=(e,t,r,n)=>{var o,a=e.getRoot(),i=!1,l=r?n.startContainer:n.endContainer,s=r?n.startOffset:n.endOffset,d=so(l)&&s===l.childNodes.length,c=e.schema.getNonEmptyElements(),m=r;if(xl(l))return K.none();if(so(l)&&s>l.childNodes.length-1&&(m=!1),So(l)&&(l=a,s=0),l===a){if(m&&(o=l.childNodes[s>0?s-1:0])){if(xl(o))return K.none();if(c[o.nodeName]||po(o))return K.none()}if(l.hasChildNodes()){if(s=Math.min(!m&&s>0?s-1:s,l.childNodes.length-1),l=l.childNodes[s],s=bo(l)&&d?l.data.length:0,!t&&l===a.lastChild&&po(l))return K.none();if(((e,t)=>{for(var r=t;r&&r!==e;){if(No(r))return!0;r=r.parentNode}return!1})(a,l)||xl(l))return K.none();if(Oo(l))return K.none();if(l.hasChildNodes()&&!po(l)){o=l;var u=new Qn(l,a);do{if(No(o)||xl(o)){i=!1;break}if(bo(o)&&o.data.length>0){s=m?0:o.data.length,l=o,i=!0;break}if(c[o.nodeName.toLowerCase()]&&!Ro(o)){s=e.nodeIndex(o),l=o.parentNode,m||s++,i=!0;break}}while(o=m?u.next():u.prev())}}}return t&&(bo(l)&&0===s&&kg(e,d,t,!0,l).each((e=>{l=e.container(),s=e.offset(),i=!0})),so(l)&&((o=l.childNodes[s])||(o=l.childNodes[s-1]),!o||!Eo(o)||((e,t)=>{var r;return(null===(r=e.previousSibling)||void 0===r?void 0:r.nodeName)===t})(o,"A")||Eg(e,o,!1)||Eg(e,o,!0)||kg(e,d,t,!0,o).each((e=>{l=e.container(),s=e.offset(),i=!0})))),m&&!t&&bo(l)&&s===l.data.length&&kg(e,d,t,!1,l).each((e=>{l=e.container(),s=e.offset(),i=!0})),i&&l?K.some(hs(l,s)):K.none()},Ng=(e,t)=>{var r=t.collapsed,n=t.cloneRange(),o=hs.fromRangeStart(t);return _g(e,r,!0,n).each((e=>{r&&hs.isAbove(o,e)||n.setStart(e.container(),e.offset())})),r||_g(e,r,!1,n).each((e=>{n.setEnd(e.container(),e.offset())})),r&&n.collapse(!0),Cg(t,n)?K.none():K.some(n)},Tg=(e,t)=>e.splitText(t),Rg=e=>{var t=e.startContainer,r=e.startOffset,n=e.endContainer,o=e.endOffset;if(t===n&&bo(t)){if(r>0&&r<t.data.length)if(t=(n=Tg(t,r)).previousSibling,o>r){var a=Tg(n,o-=r).previousSibling;t=n=a,o=a.data.length,r=0}else o=0}else if(bo(t)&&r>0&&r<t.data.length&&(t=Tg(t,r),r=0),bo(n)&&o>0&&o<n.data.length){var i=Tg(n,o).previousSibling;n=i,o=i.data.length}return{startContainer:t,startOffset:r,endContainer:n,endOffset:o}},Dg=e=>({walk:(t,r)=>Df(e,t,r),split:Rg,expand:function(t){if("word"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"word"}).type){var r=Rf(e,t,[{inline:"span"}]),n=e.createRng();return n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset),n}return t},normalize:t=>Ng(e,t).fold(V,(e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0)))});Dg.compareRanges=Cg,Dg.getCaretRangeFromPoint=yg,Dg.getSelectedNode=Fl,Dg.getNode=jl;var Ag,Og=((e,t)=>{var r=r=>{var n=t(r);if(n<=0||null===n){var o=hn(r,e);return parseFloat(o)||0}return n},n=(e,t)=>ie(t,((t,r)=>{var n=hn(e,r),o=void 0===n?0:parseInt(n,10);return isNaN(o)?t:t+o}),0);return{set:(t,r)=>{if(!O(r)&&!r.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+r);var n=t.dom;fn(n)&&(n.style[e]=r+"px")},get:r,getOuter:r,aggregate:n,max:(e,t,r)=>{var o=n(e,r);return t>o?t-o:0}}})("height",(e=>{var t=e.dom;return tn(e)?t.getBoundingClientRect().height:t.offsetHeight})),Bg=()=>_r.fromDom(document),Pg=(e,t)=>e.view(t).fold(I([]),(t=>{var r=e.owner(t),n=Pg(e,r);return[t].concat(n)})),Lg=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?K.none():K.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(_r.fromDom)},owner:e=>Br(e)}),Mg=e=>{var t=Bg(),r=zn(t),n=((e,t)=>{var r=t.owner(e);return Pg(t,r)})(e,Lg),o=Un(e),a=ae(n,((e,t)=>{var r=Un(t);return{left:e.left+r.left,top:e.top+r.top}}),{left:0,top:0});return Fn(a.left+o.left+r.left,a.top+o.top+r.top)},Ig=e=>"textarea"===Zt(e),Fg=(e,t)=>{var r=(e=>{var t=e.dom.ownerDocument,r=t.body,n=t.defaultView,o=t.documentElement;if(r===e.dom)return Fn(r.offsetLeft,r.offsetTop);var a=jn(null==n?void 0:n.pageYOffset,o.scrollTop),i=jn(null==n?void 0:n.pageXOffset,o.scrollLeft),l=jn(o.clientTop,r.clientTop),s=jn(o.clientLeft,r.clientLeft);return Un(e).translate(i-s,a-l)})(e),n=(e=>Og.get(e))(e);return{element:e,bottom:r.top+n,height:n,pos:r,cleanup:t}},jg=(e,t)=>{var r=((e,t)=>{var r=Hr(e);if(0===r.length||Ig(e))return{element:e,offset:t};if(t<r.length&&!Ig(r[t]))return{element:r[t],offset:0};var n=r[r.length-1];return Ig(n)?{element:e,offset:t}:"img"===Zt(n)?{element:n,offset:1}:nr(n)?{element:n,offset:ol(n).length}:{element:n,offset:Hr(n).length}})(e,t),n=_r.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Sn(r.element,n),Fg(n,(()=>Rn(n)))},Ug=(e,t,r,n)=>{Wg(e,((o,a)=>Hg(e,t,r,n)),r)},zg=(e,t,r,n,o)=>{var a={elm:n.element.dom,alignToTop:o};((e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented())(e,a)||(r(e,t,zn(t).top,n,o),((e,t)=>{e.dispatch("AfterScrollIntoView",t)})(e,a))},Hg=(e,t,r,n)=>{var o=_r.fromDom(e.getBody()),a=_r.fromDom(e.getDoc());o.dom.offsetWidth;var i=jg(_r.fromDom(r.startContainer),r.startOffset);zg(e,a,t,i,n),i.cleanup()},$g=(e,t,r,n)=>{var o=_r.fromDom(e.getDoc());zg(e,o,r,(e=>Fg(_r.fromDom(e),P))(t),n)},Wg=(e,t,r)=>{var n=r.startContainer,o=r.startOffset,a=r.endContainer,i=r.endOffset;t(_r.fromDom(n),_r.fromDom(a));var l=e.dom.createRng();l.setStart(n,o),l.setEnd(a,i),e.selection.setRng(r)},Vg=(e,t,r,n,o)=>{var a=t.pos;if(n)Hn(a.left,a.top,o);else{var i=a.top-r+t.height;Hn(-e.getBody().getBoundingClientRect().left,i,o)}},qg=(e,t,r,n,o,a)=>{var i=n+r,l=o.pos.top,s=o.bottom,d=s-l>=n;if(l<r)Vg(e,o,n,!1!==a,t);else if(l>i){Vg(e,o,n,d?!1!==a:!0===a,t)}else s>i&&!d&&Vg(e,o,n,!0===a,t)},Kg=(e,t,r,n,o)=>{var a=Pr(t).dom.innerHeight;qg(e,t,r,a,n,o)},Gg=(e,t,r,n,o)=>{var a=Pr(t).dom.innerHeight;qg(e,t,r,a,n,o);var i=Mg(n.element),l=Vn(window);i.top<l.y?$n(n.element,!1!==o):i.top>l.bottom&&$n(n.element,!0===o)},Yg=(e,t,r)=>Ug(e,Kg,t,r),Xg=(e,t,r)=>$g(e,t,Kg,r),Qg=(e,t,r)=>Ug(e,Gg,t,r),Zg=(e,t,r)=>$g(e,t,Gg,r),Jg=(e,t,r)=>{(e.inline?Yg:Qg)(e,t,r)},ep=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.dom.focus({preventScroll:t})},tp=e=>{var t=Xr(e).dom;return e.dom===t.activeElement},rp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bg();return K.from(e.dom.activeElement).map(_r.fromDom)},np=(e,t)=>{var r=nr(t)?ol(t).length:Hr(t).length+1;return e>r?r:e<0?0:e},op=e=>ug.range(e.start,np(e.soffset,e.start),e.finish,np(e.foffset,e.finish)),ap=(e,t)=>!lo(t.dom)&&(Ar(e,t)||Dr(e,t)),ip=e=>t=>ap(e,t.start)&&ap(e,t.finish),lp=e=>ug.range(_r.fromDom(e.startContainer),e.startOffset,_r.fromDom(e.endContainer),e.endOffset),sp=e=>(e=>{var t=e.getSelection();return(t&&0!==t.rangeCount?K.from(t.getRangeAt(0)):K.none()).map(lp)})(Pr(e).dom).filter(ip(e)),dp=e=>{var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),K.some(t)}catch(e){return K.none()}},cp=e=>{var t=(e=>e.inline||jt.browser.isFirefox())(e)?sp(_r.fromDom(e.getBody())):K.none();e.bookmark=t.isSome()?t:e.bookmark},mp=e=>(e.bookmark?e.bookmark:K.none()).bind((t=>((e,t)=>K.from(t).filter(ip(e)).map(op))(_r.fromDom(e.getBody()),t))).bind(dp),up={isEditorUIElement:e=>{var t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},fp={setEditorTimeout:(e,t,r)=>((e,t)=>(O(t)||(t=0),setTimeout(e,t)))((()=>{e.removed||t()}),r),setEditorInterval:(e,t,r)=>{var n=((e,t)=>(O(t)||(t=0),setInterval(e,t)))((()=>{e.removed?clearInterval(n):t()}),r);return n}},gp=e=>{var t=Pi((()=>{cp(e)}),0);e.on("init",(()=>{e.inline&&((e,t)=>{var r=()=>{t.throttle()};_i.DOM.bind(document,"mouseup",r),e.on("remove",(()=>{_i.DOM.unbind(document,"mouseup",r)}))})(e,t),((e,t)=>{((e,t)=>{e.on("mouseup touchend",(e=>{t.throttle()}))})(e,t),e.on("keyup NodeChange AfterSetSelectionRange",(t=>{(e=>"nodechange"===e.type&&e.selectionChange)(t)||cp(e)}))})(e,t)})),e.on("remove",(()=>{t.cancel()}))},pp=_i.DOM,vp=e=>{var t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},hp=(e,t)=>{var r=Jd(e),n=pp.getParent(t,(t=>(e=>so(e)&&up.isEditorUIElement(e))(t)||!!r&&e.dom.is(t,r)));return null!==n},bp=e=>{try{var t=Xr(_r.fromDom(e.getElement()));return rp(t).fold((()=>document.body),(e=>e.dom))}catch(e){return document.body}},yp=(e,t)=>{var r=t.editor;gp(r);var n=(e,t)=>{zc(e)&&!0!==e.inline&&t(_r.fromDom(e.getContainer()),"tox-edit-focus")};r.on("focusin",(()=>{var t=e.focusedEditor;vp(bp(r))&&n(r,Cr),t!==r&&(t&&t.dispatch("blur",{focusedEditor:r}),e.setActive(r),e.focusedEditor=r,r.dispatch("focus",{blurredEditor:t}),r.focus(!0))})),r.on("focusout",(()=>{fp.setEditorTimeout(r,(()=>{var t=e.focusedEditor;vp(bp(r))&&t===r||n(r,Sr),hp(r,bp(r))||t!==r||(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),Ag||(Ag=t=>{var r=e.activeEditor;r&&Jr(t).each((t=>{var n=t;n.ownerDocument===document&&(n===document.body||hp(r,n)||e.focusedEditor!==r||(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))}))},pp.bind(document,"focusin",Ag))},Cp=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Ag&&(pp.unbind(document,"focusin",Ag),Ag=null)},wp=(e,t)=>(e=>e.collapsed?K.from(jl(e.startContainer,e.startOffset)).map(_r.fromDom):K.none())(t).bind((t=>cl(t)?K.some(t):Ar(e,t)?K.none():K.some(e))),Sp=(e,t)=>{wp(_r.fromDom(e.getBody()),t).bind((e=>uu(e.dom))).fold((()=>{e.selection.normalize()}),(t=>e.selection.setRng(t.toRange())))},xp=e=>{if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Ep=e=>{return tp(e)||(t=e,rp(Xr(t)).filter((e=>t.dom.contains(e.dom)))).isSome();var t},kp=e=>e.inline?(e=>{var t=e.getBody();return t&&Ep(_r.fromDom(t))})(e):(e=>D(e.iframeElement)&&tp(_r.fromDom(e.iframeElement)))(e),_p=e=>kp(e)||(e=>{var t=Xr(_r.fromDom(e.getElement()));return rp(t).filter((t=>!vp(t.dom)&&hp(e,t.dom))).isSome()})(e),Np=e=>e.editorManager.setActive(e),Tp=(e,t)=>{e.removed||(t?Np(e):(e=>{var t=e.selection,r=e.getBody(),n=t.getRng();e.quirks.refreshContentEditable();var o=e=>{mp(e).each((t=>{e.selection.setRng(t),n=t}))};!kp(e)&&e.hasEditableRoot()&&o(e);var a=((e,t)=>e.dom.getParent(t,(t=>"true"===e.dom.getContentEditable(t))))(e,t.getNode());if(a&&e.dom.isChildOf(a,r))return xp(a),e.hasEditableRoot()||o(e),Sp(e,n),void Np(e);e.inline||(jt.browser.isOpera()||xp(r),e.getWin().focus()),(jt.browser.isFirefox()||e.inline)&&(xp(r),Sp(e,n)),Np(e)})(e))},Rp=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),Dp=(e,t,r,n,o)=>{var a=r?t.startContainer:t.endContainer,i=r?t.startOffset:t.endOffset;return K.from(a).map(_r.fromDom).map((e=>n&&t.collapsed?e:$r(e,o(e,i)).getOr(e))).bind((e=>rr(e)?K.some(e):Lr(e).filter(rr))).map((e=>e.dom)).getOr(e)},Ap=function(e,t){return Dp(e,t,!0,arguments.length>2&&void 0!==arguments[2]&&arguments[2],((e,t)=>Math.min(qr(e),t)))},Op=function(e,t){return Dp(e,t,!1,arguments.length>2&&void 0!==arguments[2]&&arguments[2],((e,t)=>t>0?t-1:t))},Bp=(e,t)=>{for(var r=e;e&&bo(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||r},Pp=(e,t)=>ee(t,(t=>{var r=e.dispatch("GetSelectionRange",{range:t});return r.range!==t?r.range:t})),Lp={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Mp=(e,t,r)=>{var n=r?"lastChild":"firstChild",o=r?"prev":"next";if(e[n])return e[n];if(e!==t){var a=e[o];if(a)return a;for(var i=e.parent;i&&i!==t;i=i.parent)if(a=i[o])return a}},Ip=e=>{var t,r=null!==(t=e.value)&&void 0!==t?t:"";if(!no(r))return!1;var n=e.parent;return!n||"span"===n.name&&!n.attr("style")||!/^[ ]+$/.test(r)},Fp=e=>{var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class jp{static create(e,t){var r=new jp(e,Lp[e]||1);return t&&ke(t,((e,t)=>{r.attr(t,e)})),r}constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}replace(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}attr(e,t){var r=this;if(!S(e))return D(e)&&ke(e,((e,t)=>{r.attr(t,e)})),r;var n=r.attributes;if(n){if(void 0!==t){if(null===t){if(e in n.map){delete n.map[e];for(var o=n.length;o--;)if(n[o].name===e)return n.splice(o,1),r}return r}if(e in n.map){for(var a=n.length;a--;)if(n[a].name===e){n[a].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}}clone(){var e=this,t=new jp(e.name,e.type),r=e.attributes;if(r){var n=[];n.map={};for(var o=0,a=r.length;o<a;o++){var i=r[o];"id"!==i.name&&(n[n.length]={name:i.name,value:i.value},n.map[i.name]=i.value)}t.attributes=n}return t.value=e.value,t}wrap(e){var t=this;return t.parent&&(t.parent.insert(e,t),e.append(t)),t}unwrap(){for(var e=this,t=e.firstChild;t;){var r=t.next;e.insert(t,e,!0),t=r}e.remove()}remove(){var e=this,t=e.parent,r=e.next,n=e.prev;return t&&(t.firstChild===e?(t.firstChild=r,r&&(r.prev=null)):n&&(n.next=r),t.lastChild===e?(t.lastChild=n,n&&(n.next=null)):r&&(r.prev=n),e.parent=e.next=e.prev=null),e}append(e){var t=this;e.parent&&e.remove();var r=t.lastChild;return r?(r.next=e,e.prev=r,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,r){e.parent&&e.remove();var n=t.parent||this;return r?(t===n.firstChild?n.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===n.lastChild?n.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=n,e}getAll(e){for(var t=[],r=this.firstChild;r;r=Mp(r,this))r.name===e&&t.push(r);return t}children(){for(var e=[],t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){var e=this;if(e.firstChild){for(var t=[],r=e.firstChild;r;r=Mp(r,e))t.push(r);for(var n=t.length;n--;){var o=t[n];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=this,a=o.firstChild;if(Fp(o))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name])return!1;if(Fp(a))return!1}if(8===a.type)return!1;if(3===a.type&&!Ip(a))return!1;if(3===a.type&&a.parent&&r[a.parent.name]&&no(null!==(t=a.value)&&void 0!==t?t:""))return!1;if(n&&n(a))return!1}while(a=Mp(a,o));return!0}walk(e){return Mp(this,null,e)}}var Up=Ht.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),zp=e=>S(e.nodeValue)&&e.nodeValue.includes(vl),Hp=e=>(0===e.length?"":`${ee(e,(e=>`[${e}]`)).join(",")},`)+'[data-mce-bogus="all"]',$p=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,(e=>zp(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP)),Wp=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,(e=>{if(zp(e)){var t=e.parentNode;return t&&Pe(Up,t.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP})),Vp=e=>null!==$p(e).nextNode(),qp=e=>null!==Wp(e).nextNode(),Kp=(e,t)=>null!==t.querySelector(Hp(e)),Gp=(e,t)=>{te(((e,t)=>t.querySelectorAll(Hp(e)))(e,t),(t=>{var r=_r.fromDom(t);"all"===cr(r,"data-mce-bogus")?Rn(r):te(e,(e=>{ur(r,e)&&fr(r,e)}))}))},Yp=e=>{for(var t=e.nextNode();null!==t;)t.nodeValue=null,t=e.nextNode()},Xp=L(Yp,$p),Qp=L(Yp,Wp),Zp=(e,t)=>{var r=[{condition:U(Kp,t),action:U(Gp,t)},{condition:Vp,action:Xp},{condition:qp,action:Qp}],n=e,o=!1;return te(r,(t=>{var r=t.condition,a=t.action;r(n)&&(o||(n=e.cloneNode(!0),o=!0),a(n))})),n},Jp=e=>{var t=Kn(e,"[data-mce-bogus]");te(t,(e=>{"all"===cr(e,"data-mce-bogus")?Rn(e):il(e)?(Sn(e,_r.fromText(Jn)),Rn(e)):Dn(e)}))},ev=e=>{var t=Kn(e,"input");te(t,(e=>{fr(e,"name")}))},tv=(e,t)=>{var r=e.getDoc(),n=Xr(_r.fromDom(e.getBody())),o=_r.fromTag("div",r);sr(o,"data-mce-bogus","all"),vn(o,{position:"fixed",left:"-9999999px",top:"0"}),Bn(o,t.innerHTML),Jp(o),ev(o);var a=(e=>Kr(e)?e:_r.fromDom(Br(e).dom.body))(n);kn(a,o);var i=bl(o.dom.innerText);return Rn(o),i},rv=(e,t,r)=>{var n;return n="raw"===t.format?Ht.trim(bl(Zp(r,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?tv(e,r):"tree"===t.format?e.serializer.serialize(r,t):((e,t)=>{var r=ud(e),n=new RegExp(`^(<${r}[^>]*>(&nbsp;|&#160;|\\s|Â |<br \\/>|)<\\/${r}>[\r\n]*|<br \\/>[\r\n]*)$`);return t.replace(n,"")})(e,e.serializer.serialize(r,t)),"text"!==t.format&&!ul(_r.fromDom(r))&&S(n)?Ht.trim(n):n},nv=Ht.makeMap,ov=e=>{var t=[],r=(e=e||{}).indent,n=nv(e.indent_before||""),o=nv(e.indent_after||""),a=Oa.getEncodeFunc(e.entity_encoding||"raw",e.entities),i="xhtml"!==e.element_format;return{start:(e,l,s)=>{if(r&&n[e]&&t.length>0){var d=t[t.length-1];d.length>0&&"\n"!==d&&t.push("\n")}if(t.push("<",e),l)for(var c=0,m=l.length;c<m;c++){var u=l[c];t.push(" ",u.name,'="',a(u.value,!0),'"')}if(t[t.length]=!s||i?">":" />",s&&r&&o[e]&&t.length>0){var f=t[t.length-1];f.length>0&&"\n"!==f&&t.push("\n")}},end:e=>{var n;t.push("</",e,">"),r&&o[e]&&t.length>0&&(n=t[t.length-1]).length>0&&"\n"!==n&&t.push("\n")},text:(e,r)=>{e.length>0&&(t[t.length]=r?e:a(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("\x3c!--",e,"--\x3e")},pi:(e,n)=>{n?t.push("<?",e," ",a(n),"?>"):t.push("<?",e,"?>"),r&&t.push("\n")},doctype:e=>{t.push("<!DOCTYPE",e,">",r?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},av=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qa(),r=ov(e);e.validate=!("validate"in e)||e.validate;return{serialize:n=>{var o=e.validate,a={3:e=>{var t;r.text(null!==(t=e.value)&&void 0!==t?t:"",e.raw)},8:e=>{var t;r.comment(null!==(t=e.value)&&void 0!==t?t:"")},7:e=>{r.pi(e.name,e.value)},10:e=>{var t;r.doctype(null!==(t=e.value)&&void 0!==t?t:"")},4:e=>{var t;r.cdata(null!==(t=e.value)&&void 0!==t?t:"")},11:e=>{var t=e;if(t=t.firstChild)do{i(t)}while(t=t.next)}};r.reset();var i=e=>{var n,l=a[e.type];if(l)l(e);else{var s=e.name,d=s in t.getVoidElements(),c=e.attributes;if(o&&c&&c.length>1){var m=[];m.map={};var u=t.getElementRule(e.name);if(u){for(var f=0,g=u.attributesOrder.length;f<g;f++){var p=u.attributesOrder[f];if(p in c.map){var v=c.map[p];m.map[p]=v,m.push({name:p,value:v})}}for(var h=0,b=c.length;h<b;h++){var y=c[h].name;if(!(y in m.map)){var C=c.map[y];m.map[y]=C,m.push({name:y,value:C})}}c=m}}if(r.start(s,c,d),Vo(s))S(e.value)&&r.text(e.value,!0),r.end(s);else if(!d){var w=e.firstChild;if(w){"pre"!==s&&"textarea"!==s||3!==w.type||"\n"!==(null===(n=w.value)||void 0===n?void 0:n[0])||r.text("\n",!0);do{i(w)}while(w=w.next)}r.end(s)}}};return 1!==n.type||e.inner?3===n.type?a[3](n):a[11](n):i(n),r.getContent()}}},iv=new Set;te(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(e=>{iv.add(e)}));var lv=new Set;te(["background-color"],(e=>{lv.add(e)}));var sv=["font","text-decoration","text-emphasis"],dv=(e,t)=>xe(((e,t)=>e.parseStyle(e.getAttrib(t,"style")))(e,t)),cv=(e,t)=>J(dv(e,t),(e=>(e=>iv.has(e))(e))),mv=(e,t)=>cv(e,t)&&J(dv(e,t),(e=>(e=>lv.has(e))(e))),uv=(e,t,r)=>{var n=dv(e,t),o=dv(e,r),a=n=>{var o,a,i=null!==(o=e.getStyle(t,n))&&void 0!==o?o:"",l=null!==(a=e.getStyle(r,n))&&void 0!==a?a:"";return at(i)&&at(l)&&i!==l};return J(n,(e=>{var t=t=>J(t,(t=>t===e));if(!t(o)&&t(sv)){var r=oe(o,(e=>J(sv,(t=>Je(e,t)))));return J(r,a)}return a(e)}))},fv=(e,t,r)=>K.from(r.container()).filter(bo).exists((n=>{var o=e?0:-1;return t(n.data.charAt(r.offset()+o))})),gv=U(fv,!0,Au),pv=U(fv,!1,Au),vv=e=>{var t=e.container();return bo(t)&&(0===t.data.length||hl(t.data)&&jf.isBookmarkNode(t.parentNode))},hv=(e,t)=>r=>Om(e?0:-1,r).filter(t).isSome(),bv=e=>ko(e)&&"block"===hn(_r.fromDom(e),"display"),yv=e=>No(e)&&!(e=>so(e)&&"all"===e.getAttribute("data-mce-bogus"))(e),Cv=hv(!0,bv),wv=hv(!1,bv),Sv=hv(!0,Do),xv=hv(!1,Do),Ev=hv(!0,po),kv=hv(!1,po),_v=hv(!0,yv),Nv=hv(!1,yv),Tv=(e,t)=>((e,t,r)=>Ar(t,e)?Ir(e,(e=>r(e)||Dr(e,t))).slice(0,-1):[])(e,t,V),Rv=(e,t)=>[e].concat(Tv(e,t)),Dv=(e,t,r)=>su(e,t,r,vv),Av=(e,t,r)=>se(Rv(_r.fromDom(t.container()),e),(e=>t=>e.isBlock(Zt(t)))(r)),Ov=(e,t,r,n)=>Dv(e,t.dom,r).forall((e=>Av(t,r,n).fold((()=>!Am(e,r,t.dom)),(n=>!Am(e,r,t.dom)&&Ar(n,_r.fromDom(e.container())))))),Bv=(e,t,r,n)=>Av(t,r,n).fold((()=>Dv(e,t.dom,r).forall((e=>!Am(e,r,t.dom)))),(t=>Dv(e,t.dom,r).isNone())),Pv=U(Bv,!1),Lv=U(Bv,!0),Mv=U(Ov,!1),Iv=U(Ov,!0),Fv=e=>zm(e).exists(il),jv=(e,t,r,n)=>{var o=oe(Rv(_r.fromDom(r.container()),t),(e=>n.isBlock(Zt(e)))),a=be(o).getOr(t);return iu(e,a.dom,r).filter(Fv)},Uv=(e,t,r)=>zm(t).exists(il)||jv(!0,e,t,r).isSome(),zv=(e,t,r)=>(e=>K.from(e.getNode(!0)).map(_r.fromDom))(t).exists(il)||jv(!1,e,t,r).isSome(),Hv=U(jv,!1),$v=U(jv,!0),Wv=e=>hs.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Vv=(e,t,r)=>{var n=oe(Rv(_r.fromDom(t.container()),e),(e=>r.isBlock(Zt(e))));return be(n).getOr(e)},qv=(e,t,r)=>Wv(t)?pv(t):pv(t)||mu(Vv(e,t,r).dom,t).exists(pv),Kv=(e,t,r)=>Wv(t)?gv(t):gv(t)||cu(Vv(e,t,r).dom,t).exists(gv),Gv=e=>zm(e).bind((e=>on(e,rr))).exists((e=>(e=>Z(["pre","pre-wrap"],e))(hn(e,"white-space")))),Yv=(e,t,r)=>((e,t)=>mu(e.dom,t).isNone())(e,t)||((e,t)=>cu(e.dom,t).isNone())(e,t)||Pv(e,t,r)||Lv(e,t,r)||zv(e,t,r)||Uv(e,t,r),Xv=(e,t)=>r=>{return n=new Qn(r,e)[t](),D(n)&&No(n)&&Cm(n);var n},Qv=(e,t,r)=>!Gv(t)&&(Yv(e,t,r)||qv(e,t,r)||Kv(e,t,r)),Zv=(e,t,r)=>!Gv(t)&&(Pv(e,t,r)||Mv(e,t,r)||zv(e,t,r)||qv(e,t,r)||((e,t)=>{var r=mu(e.dom,t).getOr(t),n=Xv(e.dom,"prev");return t.isAtStart()&&(n(t.container())||n(r.container()))})(e,t)),Jv=(e,t,r)=>!Gv(t)&&(Lv(e,t,r)||Iv(e,t,r)||Uv(e,t,r)||Kv(e,t,r)||((e,t)=>{var r=cu(e.dom,t).getOr(t),n=Xv(e.dom,"next");return t.isAtEnd()&&(n(t.container())||n(r.container()))})(e,t)),eh=(e,t,r)=>Zv(e,t,r)||Jv(e,(e=>{var t=e.container(),r=e.offset();return bo(t)&&r<t.data.length?hs(t,r+1):e})(t),r),th=(e,t)=>Du(e.charAt(t)),rh=(e,t)=>Au(e.charAt(t)),nh=(e,t,r,n)=>{var o=t.data,a=hs(t,0);return r||!th(o,0)||eh(e,a,n)?!!(r&&rh(o,0)&&Zv(e,a,n))&&(t.data=eo+o.slice(1),!0):(t.data=" "+o.slice(1),!0)},oh=e=>{var t=e.data,r=(e=>{var t=e.split("");return ee(t,((e,r)=>Du(e)&&r>0&&r<t.length-1&&Ou(t[r-1])&&Ou(t[r+1])?" ":e)).join("")})(t);return r!==t&&(e.data=r,!0)},ah=(e,t,r,n)=>{var o=t.data,a=hs(t,o.length-1);return r||!th(o,o.length-1)||eh(e,a,n)?!!(r&&rh(o,o.length-1)&&Jv(e,a,n))&&(t.data=o.slice(0,-1)+eo,!0):(t.data=o.slice(0,-1)+" ",!0)},ih=(e,t,r)=>{var n=t.container();if(!bo(n))return K.none();if((e=>{var t=e.container();return bo(t)&&Ze(t.data,eo)})(t)){var o=nh(e,n,!1,r)||oh(n)||ah(e,n,!1,r);return qt(o,t)}if(eh(e,t,r)){var a=nh(e,n,!0,r)||ah(e,n,!0,r);return qt(a,t)}return K.none()},lh=(e,t,r,n)=>{if(0!==r){var o=_r.fromDom(e),a=nn(o,(e=>n.isBlock(Zt(e)))).getOr(o),i=e.data.slice(t,t+r),l=t+r>=e.data.length&&Jv(a,hs(e,e.data.length),n),s=0===t&&Zv(a,hs(e,0),n);e.replaceData(t,r,ao(i,4,s,l))}},sh=(e,t,r)=>{var n=e.data.slice(t),o=n.length-nt(n).length;lh(e,t,o,r)},dh=(e,t,r)=>{var n=e.data.slice(0,t),o=n.length-ot(n).length;lh(e,t-o,o,r)},ch=function(e,t,r,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=ot(e.data).length,i=o?e:t,l=o?t:e;return o?i.appendData(l.data):i.insertData(0,l.data),Rn(_r.fromDom(l)),n&&sh(i,a,r),i},mh=(e,t)=>((e,t)=>{var r=e.container(),n=e.offset();return!hs.isTextPosition(e)&&r===t.parentNode&&n>hs.before(t).offset()})(t,e)?hs(t.container(),t.offset()-1):t,uh=e=>{return Xl(e.previousSibling)?K.some((t=e.previousSibling,bo(t)?hs(t,t.data.length):hs.after(t))):e.previousSibling?fu(e.previousSibling):K.none();var t},fh=e=>{return Xl(e.nextSibling)?K.some((t=e.nextSibling,bo(t)?hs(t,0):hs.before(t))):e.nextSibling?uu(e.nextSibling):K.none();var t},gh=(e,t)=>uh(t).orThunk((()=>fh(t))).orThunk((()=>((e,t)=>K.from(t.previousSibling?t.previousSibling:t.parentNode).bind((t=>mu(e,hs.before(t)))).orThunk((()=>cu(e,hs.after(t)))))(e,t))),ph=(e,t)=>fh(t).orThunk((()=>uh(t))).orThunk((()=>((e,t)=>cu(e,hs.after(t)).orThunk((()=>mu(e,hs.before(t)))))(e,t))),vh=(e,t,r)=>((e,t,r)=>e?ph(t,r):gh(t,r))(e,t,r).map(U(mh,r)),hh=(e,t,r)=>{r.fold((()=>{e.focus()}),(r=>{e.selection.setRng(r.toRange(),t)}))},bh=(e,t)=>t&&Pe(e.schema.getBlockElements(),Zt(t)),yh=(e,t,r,n)=>{var o,a,i,l,s=Fr(e).filter(nr),d=jr(e).filter(nr);return Rn(e),(o=s,a=d,i=t,l=(e,t,o)=>{var a=e.dom,i=t.dom,l=a.data.length;return ch(a,i,r,n),o.container()===i?hs(a,l):o},o.isSome()&&a.isSome()&&i.isSome()?K.some(l(o.getOrDie(),a.getOrDie(),i.getOrDie())):K.none()).orThunk((()=>(n&&(s.each((e=>dh(e.dom,e.dom.length,r))),d.each((e=>sh(e.dom,0,r)))),t)))},Ch=function(e,t,r){var n,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=vh(t,e.getBody(),r.dom),l=nn(r,U(bh,e),(n=e.getBody(),e=>e.dom===n)),s=yh(r,i,e.schema,((e,t)=>Pe(e.schema.getTextInlineElements(),Zt(t)))(e,r));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):l.bind((t=>((e,t,r)=>{if(Uo(e,t)){var n=_r.fromHtml('<br data-mce-bogus="1">');return r?te(Hr(t),(e=>{gf(e)||Rn(e)})):Tn(t),kn(t,n),K.some(hs.before(n.dom))}return K.none()})(e.schema,t,a))).fold((()=>{o&&hh(e,t,s)}),(r=>{o&&hh(e,t,K.some(r))}))},wh=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Sh=(e,t)=>Tr(_r.fromDom(t),Fd(e))&&!ia(e.schema,t)&&e.dom.isEditable(t),xh=e=>{var t;return"rtl"===_i.DOM.getStyle(e,"direction",!0)||(e=>wh.test(e))(null!==(t=e.textContent)&&void 0!==t?t:"")},Eh=(e,t,r)=>{var n=((e,t,r)=>oe(_i.DOM.getParents(r.container(),"*",t),e))(e,t,r);return K.from(n[n.length-1])},kh=(e,t)=>{var r=t.container(),n=t.offset();return e?Sl(r)?bo(r.nextSibling)?hs(r.nextSibling,0):hs.after(r):kl(t)?hs(r,n+1):t:Sl(r)?bo(r.previousSibling)?hs(r.previousSibling,r.previousSibling.data.length):hs.before(r):_l(t)?hs(r,n-1):t},_h=U(kh,!0),Nh=U(kh,!1),Th=(e,t)=>{var r=e=>e.stopImmediatePropagation();e.on("beforeinput input",r,!0),e.getDoc().execCommand(t),e.off("beforeinput input",r)},Rh=e=>Th(e,"Delete"),Dh=e=>Th(e,"ForwardDelete"),Ah=e=>ll(e)||dl(e),Oh=(e,t)=>Ar(e,t)?on(t,Ah,(e=>t=>$t(Lr(t),e,Dr))(e)):K.none(),Bh=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},Ph=(e,t,r)=>Vt(uu(r),fu(r),((n,o)=>{var a=kh(!0,n),i=kh(!1,o),l=kh(!1,t);return e?cu(r,l).exists((e=>e.isEqual(i)&&t.isEqual(a))):mu(r,l).exists((e=>e.isEqual(a)&&t.isEqual(i)))})).getOr(!0),Lh=e=>{var t;return(8===Jt(t=e)||"#comment"===Zt(t)?Fr(e):Vr(e)).bind(Lh).orThunk((()=>K.some(e)))},Mh=function(e,t,r){var n,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.deleteContents();var a,i=Lh(r).getOr(r),l=_r.fromDom(null!==(n=e.dom.getParent(i.dom,e.dom.isBlock))&&void 0!==n?n:r.dom);if(l.dom===e.getBody()?Bh(e,o):Uo(e.schema,l,{checkRootAsContent:!1})&&(pl(l),o&&e.selection.setCursorLocation(l.dom,0)),!Dr(r,l)){var s=$t(Lr(l),r)?[]:Lr(a=l).map(Hr).map((e=>oe(e,(e=>!Dr(a,e))))).getOr([]);te(s.concat(Hr(r)),(t=>{Dr(t,l)||Ar(t,l)||!Uo(e.schema,t)||Rn(t)}))}},Ih=e=>Kn(e,"td,th"),Fh=(e,t)=>Iu(_r.fromDom(e),t),jh=e=>(e=>Vt(e.startTable,e.endTable,((t,r)=>{var n=Xn(t,(e=>Dr(e,r))),o=Xn(r,(e=>Dr(e,t)));return n||o?u(u({},e),{},{startTable:n?K.none():e.startTable,endTable:o?K.none():e.endTable,isSameTable:!1,isMultiTable:!1}):e})).getOr(e))(e),Uh=(e,t)=>({start:e,end:t}),zh=$s([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Hh=(e,t)=>cn(_r.fromDom(e),"td,th",t),$h=e=>!Dr(e.start,e.end),Wh=(e,t)=>Iu(e.start,t).bind((r=>Iu(e.end,t).bind((e=>qt(Dr(r,e),r))))),Vh=e=>t=>Wh(t,e).map((e=>((e,t,r)=>({rng:e,table:t,cells:r}))(t,e,Ih(e)))),qh=(e,t,r,n)=>{if(r.collapsed||!e.forall($h))return K.none();if(t.isSameTable){var o=e.bind(Vh(n));return K.some({start:o,end:o})}var a=Hh(r.startContainer,n),i=Hh(r.endContainer,n),l=a.bind((e=>t=>Iu(t,e).bind((e=>ye(Ih(e)).map((e=>Uh(t,e))))))(n)).bind(Vh(n)),s=i.bind((e=>t=>Iu(t,e).bind((e=>be(Ih(e)).map((e=>Uh(e,t))))))(n)).bind(Vh(n));return K.some({start:l,end:s})},Kh=(e,t)=>de(e,(e=>Dr(e,t))),Gh=e=>Vt(Kh(e.cells,e.rng.start),Kh(e.cells,e.rng.end),((t,r)=>e.cells.slice(t,r+1))),Yh=(e,t,r)=>e.exists((e=>((e,t)=>!$h(e)&&Wh(e,t).exists((e=>{var t=e.dom.rows;return 1===t.length&&1===t[0].cells.length})))(e,r)&&Uu(e.start,t))),Xh=(e,t)=>{var r=t.startTable,n=t.endTable,o=e.cloneRange();return r.each((e=>o.setStartAfter(e.dom))),n.each((e=>o.setEndBefore(e.dom))),o},Qh=(e,t)=>{var r=(e=>t=>Dr(e,t))(e),n=((e,t)=>{var r=Hh(e.startContainer,t),n=Hh(e.endContainer,t);return Vt(r,n,Uh)})(t,r),o=((e,t)=>{var r=Fh(e.startContainer,t),n=Fh(e.endContainer,t),o=r.isSome(),a=n.isSome(),i=Vt(r,n,Dr).getOr(!1);return jh({startTable:r,endTable:n,isStartInTable:o,isEndInTable:a,isSameTable:i,isMultiTable:!i&&o&&a})})(t,r);return Yh(n,t,r)?n.map((e=>zh.singleCellTable(t,e.start))):o.isMultiTable?((e,t,r,n)=>qh(e,t,r,n).bind((e=>{var n=e.start,o=e.end,a=n.bind(Gh).getOr([]),i=o.bind(Gh).getOr([]);if(a.length>0&&i.length>0){var l=Xh(r,t);return K.some(zh.multiTable(a,i,l))}return K.none()})))(n,o,t,r):((e,t,r,n)=>qh(e,t,r,n).bind((e=>{var t=e.start,r=e.end;return t.or(r)})).bind((e=>{var n=t.isSameTable,o=Gh(e).getOr([]);if(n&&e.cells.length===o.length)return K.some(zh.fullTable(e.table));if(o.length>0){if(n)return K.some(zh.partialTable(o,K.none()));var a=Xh(r,t);return K.some(zh.partialTable(o,K.some(u(u({},t),{},{rng:a}))))}return K.none()})))(n,o,t,r)},Zh=e=>te(e,(e=>{fr(e,"contenteditable"),pl(e)})),Jh=(e,t,r,n)=>{var o=r.cloneRange();n?(o.setStart(r.startContainer,r.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(r.endContainer,r.endOffset)),nb(e,o,t,!1).each((e=>e()))},eb=e=>{var t=Mu(e),r=_r.fromDom(e.selection.getNode());To(r.dom)&&Uo(e.schema,r)?e.selection.setCursorLocation(r.dom,0):e.selection.collapse(!0),t.length>1&&J(t,(e=>Dr(e,r)))&&sr(r,"data-mce-selected","1")},tb=(e,t,r)=>K.some((()=>{var n=e.selection.getRng(),o=r.bind((r=>{var o=r.rng,a=r.isStartInTable,i=((e,t)=>K.from(e.dom.getParent(t,e.dom.isBlock)).map(_r.fromDom))(e,a?o.endContainer:o.startContainer);o.deleteContents(),((e,t,r)=>{r.each((r=>{t?Rn(r):(pl(r),e.selection.setCursorLocation(r.dom,0))}))})(e,a,i.filter(U(Uo,e.schema)));var l=a?t[0]:t[t.length-1];return Jh(e,l,n,a),Uo(e.schema,l)?K.none():K.some(a?t.slice(1):t.slice(0,-1))})).getOr(t);Zh(o),eb(e)})),rb=(e,t,r,n)=>K.some((()=>{var o=e.selection.getRng(),a=t[0],i=r[r.length-1];Jh(e,a,o,!0),Jh(e,i,o,!1);var l=Uo(e.schema,a)?t:t.slice(1),s=Uo(e.schema,i)?r:r.slice(0,-1);Zh(l.concat(s)),n.deleteContents(),eb(e)})),nb=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return K.some((()=>{Mh(e,t,r,n)}))},ob=(e,t)=>K.some((()=>Ch(e,!1,t))),ab=(e,t,r,n)=>lb(t,n).fold((()=>((e,t,r)=>Qh(t,r).bind((t=>t.fold(U(nb,e),U(ob,e),U(tb,e),U(rb,e)))))(e,t,r)),(t=>((e,t)=>sb(e,t))(e,t))),ib=(e,t)=>se(Rv(t,e),ml),lb=(e,t)=>se(Rv(t,e),ir("caption")),sb=(e,t)=>K.some((()=>{pl(t),e.selection.setCursorLocation(t.dom,0)})),db=(e,t,r,n,o)=>lu(r,e.getBody(),o).fold((()=>K.some(P)),(a=>((e,t,r,n)=>uu(e.dom).bind((o=>fu(e.dom).map((e=>t?r.isEqual(o)&&n.isEqual(e):r.isEqual(e)&&n.isEqual(o))))).getOr(!0))(n,r,o,a)?((e,t)=>sb(e,t))(e,n):((e,t,r)=>lb(e,_r.fromDom(r.getNode())).fold((()=>K.some(P)),(e=>qt(!Dr(e,t),P))))(t,n,a))),cb=(e,t,r,n)=>{var o=hs.fromRangeStart(e.selection.getRng());return ib(r,n).bind((n=>Uo(e.schema,n,{checkRootAsContent:!1})?sb(e,n):((e,t,r,n,o)=>lu(r,e.getBody(),o).bind((e=>ib(t,_r.fromDom(e.getNode())).bind((e=>Dr(e,n)?K.none():K.some(P))))))(e,r,t,n,o)))},mb=(e,t)=>e?Ev(t):kv(t),ub=(e,t,r)=>{var n=_r.fromDom(e.getBody());return lb(n,r).fold((()=>cb(e,t,n,r).orThunk((()=>qt(((e,t)=>{var r=hs.fromRangeStart(e.selection.getRng());return mb(t,r)||iu(t,e.getBody(),r).exists((e=>mb(t,e)))})(e,t),P)))),(r=>((e,t,r,n)=>{var o=hs.fromRangeStart(e.selection.getRng());return Uo(e.schema,n)?sb(e,n):db(e,r,t,n,o)})(e,t,n,r)))},fb=(e,t)=>{var r=_r.fromDom(e.selection.getStart(!0)),n=Mu(e);return e.selection.isCollapsed()&&0===n.length?ub(e,t,r):((e,t,r)=>{var n=_r.fromDom(e.getBody()),o=e.selection.getRng();return 0!==r.length?tb(e,r,K.none()):ab(e,n,o,t)})(e,r,n)},gb=(e,t)=>{for(var r=t;r&&r!==e;){if(_o(r)||No(r))return r;r=r.parentNode}return null},pb=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],vb=Ht.each,hb=e=>{var t=e.dom,r=new Set(e.serializer.getTempAttrs()),n=e=>J(pb,(t=>Je(e,t)))||r.has(e);return{compare:(e,r)=>{if(e.nodeName!==r.nodeName||e.nodeType!==r.nodeType)return!1;var o=e=>{var r={};return vb(t.getAttribs(e),(o=>{var a=o.nodeName.toLowerCase();"style"===a||n(a)||(r[a]=t.getAttrib(e,a))})),r},a=(e,t)=>{for(var r in e)if(Pe(e,r)){var n=t[r];if(T(n))return!1;if(e[r]!==n)return!1;delete t[r]}for(var o in t)if(Pe(t,o))return!1;return!0};if(so(e)&&so(r)){if(!a(o(e),o(r)))return!1;if(!a(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(r,"style"))))return!1}return!Ru(e)&&!Ru(r)},isAttributeInternal:n}},bb=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),yb=(e,t,r,n)=>{for(var o=r.name,a=0,i=e.length;a<i;a++){var l=e[a];if(l.name===o){var s=n.nodes[o];s?s.nodes.push(r):n.nodes[o]={filter:l,nodes:[r]}}}if(r.attributes)for(var d=0,c=t.length;d<c;d++){var m=t[d],u=m.name;if(u in r.attributes.map){var f=n.attributes[u];f?f.nodes.push(r):n.attributes[u]={filter:m,nodes:[r]}}}},Cb=(e,t)=>{var r=(e,r)=>{ke(e,(e=>{var n=Ce(e.nodes);te(e.filter.callbacks,(o=>{for(var a=n.length-1;a>=0;a--){var i=n[a];(r?void 0!==i.attr(e.filter.name):i.name===e.filter.name)&&!R(i.parent)||n.splice(a,1)}n.length>0&&o(n,e.filter.name,t)}))}))};r(e.nodes,!1),r(e.attributes,!0)},wb=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=((e,t,r)=>{var n={nodes:{},attributes:{}};return r.firstChild&&((e,t)=>{for(var r=e;r=r.walk();)t(r)})(r,(r=>{yb(e,t,r,n)})),n})(e,t,r);Cb(o,n)},Sb=(e,t,r,n)=>{if((e.pad_empty_with_br||t.insert)&&r(n)){var o=new jp("br",1);t.insert&&o.attr("data-mce-bogus","1"),n.empty().append(o)}else n.empty().append(new jp("#text",3)).value=eo},xb=(e,t)=>{var r=null==e?void 0:e.firstChild;return D(r)&&r===e.lastChild&&r.name===t},Eb=(e,t,r,n)=>n.isEmpty(t,r,(t=>((e,t)=>{var r=e.getElementRule(t.name);return!0===(null==r?void 0:r.paddEmpty)})(e,t))),kb=e=>{for(var t,r=e;r;r=r.parent){var n=r.attr("contenteditable");if("false"===n)break;"true"===n&&(t=r)}return K.from(t)},_b=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.parent;if(r.getSpecialElements()[t.name])t.empty().remove();else{var o,a=g(t.children());try{for(a.s();!(o=a.n()).done;){var i=o.value;n&&!r.isValidChild(n.name,i.name)&&e(i,r,n)}}catch(e){a.e(e)}finally{a.f()}t.unwrap()}},Nb=function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P,o=t.getTextBlockElements(),a=t.getNonEmptyElements(),i=t.getWhitespaceElements(),l=Ht.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),s=new Set,d=e=>e!==r&&!l[e.name],c=0;c<e.length;c++){var m=e[c],u=void 0,f=void 0,g=void 0;if(m.parent&&!s.has(m))if(o[m.name]&&"li"===m.parent.name){for(var p=m.next;p&&o[p.name];)p.name="li",s.add(p),m.parent.insert(p,m.parent),p=p.next;m.unwrap()}else{var v=[m];for(u=m.parent;u&&!t.isValidChild(u.name,m.name)&&d(u);u=u.parent)v.push(u);if(u&&v.length>1)if(Tb(t,m,u))_b(m,t);else{v.reverse(),n(f=v[0].clone());for(var h=f,b=0;b<v.length-1;b++){t.isValidChild(h.name,v[b].name)&&b>0?(n(g=v[b].clone()),h.append(g)):g=h;for(var y=v[b].firstChild;y&&y!==v[b+1];){var C=y.next;g.append(y),y=C}h=g}Eb(t,a,i,f)?u.insert(m,v[0],!0):(u.insert(f,v[0],!0),u.insert(m,f)),u=v[0],(Eb(t,a,i,u)||xb(u,"br"))&&u.empty().remove()}else if(m.parent){if("li"===m.name){var w=m.prev;if(w&&("ul"===w.name||"ol"===w.name)){w.append(m);continue}if((w=m.next)&&("ul"===w.name||"ol"===w.name)&&w.firstChild){w.insert(m,w.firstChild,!0);continue}var S=new jp("ul",1);n(S),m.wrap(S);continue}if(t.isValidChild(m.parent.name,"div")&&t.isValidChild("div",m.name)){var x=new jp("div",1);n(x),m.wrap(x)}else _b(m,t)}}}},Tb=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.parent;return!!r&&(!(!e.children[t.name]||e.isValidChild(r.name,t.name))||(!("a"!==t.name||!((e,t)=>{for(var r=e;r;){if(r.name===t)return!0;r=r.parent}return!1})(r,"a"))||!(!(e=>"summary"===e.name)(r)||!bb(t))&&!((null==r?void 0:r.firstChild)===t&&(null==r?void 0:r.lastChild)===t)))},Rb=e=>{var t=hs.fromRangeStart(e),r=hs.fromRangeEnd(e),n=e.commonAncestorContainer;return iu(!1,n,r).map((o=>!Am(t,r,n)&&Am(t,o,n)?((e,t,r,n)=>{var o=document.createRange();return o.setStart(e,t),o.setEnd(r,n),o})(t.container(),t.offset(),o.container(),o.offset()):e)).getOr(e)},Db=e=>e.collapsed?e:Rb(e),Ab=(e,t)=>e.getBlockElements()[t.name]&&(e=>D(e.firstChild)&&e.firstChild===e.lastChild)(t)&&(e=>"br"===e.name||e.value===eo)(t.firstChild),Ob=(e,t)=>{var r=t.firstChild,n=t.lastChild;return r&&"meta"===r.name&&(r=r.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),((e,t)=>{var r=e.getNonEmptyElements();return D(t)&&(t.isEmpty(r)||Ab(e,t))})(e,n)&&(n=null==n?void 0:n.prev),!(!r||r!==n)&&("ul"===r.name||"ol"===r.name)},Bb=e=>D(null==e?void 0:e.firstChild)&&e.firstChild===e.lastChild&&(e=>e.data===eo||Eo(e))(e.firstChild),Pb=e=>{return e.length>0&&(!(t=e[e.length-1]).firstChild||Bb(t))?e.slice(0,-1):e;var t},Lb=(e,t)=>{var r=e.getParent(t,e.isBlock);return r&&"LI"===r.nodeName?r:null},Mb=(e,t)=>{var r=hs.after(e),n=tu(t).prev(r);return n?n.toRange():null},Ib=(e,t,r)=>{var n=e.parentNode;return n&&Ht.each(t,(t=>{n.insertBefore(t,e)})),((e,t)=>{var r=hs.before(e),n=tu(t).next(r);return n?n.toRange():null})(e,r)},Fb=(e,t,r,n)=>{var o,a,i=((e,t,r)=>{var n=t.serialize(r);return(e=>{var t,r,n=e.firstChild,o=e.lastChild;return n&&"META"===n.nodeName&&(null===(t=n.parentNode)||void 0===t||t.removeChild(n)),o&&"mce_marker"===o.id&&(null===(r=o.parentNode)||void 0===r||r.removeChild(o)),e})(e.createFragment(n))})(t,e,n),l=Lb(t,r.startContainer),s=Pb((o=i.firstChild,oe(null!==(a=null==o?void 0:o.childNodes)&&void 0!==a?a:[],(e=>"LI"===e.nodeName)))),d=t.getRoot(),c=e=>{var n=hs.fromRangeStart(r),o=tu(t.getRoot()),a=1===e?o.prev(n):o.next(n),i=null==a?void 0:a.getNode();return!i||Lb(t,i)!==l};return l?c(1)?Ib(l,s,d):c(2)?((e,t,r,n)=>(n.insertAfter(t.reverse(),e),Mb(t[0],r)))(l,s,d,t):((e,t,r,n)=>{var o=((e,t)=>{var r=t.cloneRange(),n=t.cloneRange();return r.setStartBefore(e),n.setEndAfter(e),[r.cloneContents(),n.cloneContents()]})(e,n),a=e.parentNode;return a&&(a.insertBefore(o[0],e),Ht.each(t,(t=>{a.insertBefore(t,e)})),a.insertBefore(o[1],e),a.removeChild(e)),Mb(t[t.length-1],r)})(l,s,d,r):null},jb=["pre"],Ub=To,zb=(e,t,r)=>{K.from(e.getParent(t,"td,th")).map(_r.fromDom).each((e=>((e,t)=>{Vr(e).each((r=>{Fr(r).each((n=>{t.isBlock(Zt(e))&&il(r)&&t.isBlock(Zt(n))&&Rn(r)}))}))})(e,r)))},Hb=(e,t)=>{var r=e.schema.getTextInlineElements(),n=e.dom;if(t){var o=e.getBody(),a=hb(e),i="*[data-mce-fragment]",l=n.select(i);Ht.each(l,(e=>{var t,l=e=>D(r[e.nodeName.toLowerCase()]),s=e=>1===e.childNodes.length;if(!cv(n,t=e)&&!mv(n,t)&&l(e)&&s(e)){var d=dv(n,e),c=t=>{return s(e)&&n.is(t,i)&&l(t)&&(t.nodeName===e.nodeName&&(r=d,o=dv(n,t),ue(r,(e=>Z(o,e))))||c(t.children[0]));var r,o},m=t=>D(t)&&t!==o&&(a.compare(e,t)||m(t.parentElement)),u=t=>D(t)&&t!==o&&n.is(t,i)&&(uv(n,e,t)||u(t.parentElement));(c(e.children[0])||m(e.parentElement)&&!u(e.parentElement))&&n.remove(e,!0)}}))}},$b=e=>{var t=e.dom,r=Db(e.selection.getRng());e.selection.setRng(r);var n=t.getParent(r.startContainer,Ub);((e,t,r)=>!!D(r)&&r===e.getParent(t.endContainer,Ub)&&Uu(_r.fromDom(r),t))(t,r,n)?nb(e,r,_r.fromDom(n)):r.startContainer===r.endContainer&&r.endOffset-r.startOffset==1&&bo(r.startContainer.childNodes[r.startOffset])?r.deleteContents():e.getDoc().execCommand("Delete",!1)},Wb=(e,t,r)=>{var n,o,a=e.selection,i=e.dom,l=e.parser,s=r.merge,d=av({validate:!0},e.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';r.preserve_zwsp||(t=bl(t)),-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,c);var m=a.getRng(),u=m.startContainer,f=e.getBody();u===f&&a.isCollapsed()&&i.isBlock(f.firstChild)&&((e,t)=>D(t)&&!e.schema.getVoidElements()[t.nodeName])(e,f.firstChild)&&i.isEmpty(f.firstChild)&&((m=i.createRng()).setStart(f.firstChild,0),m.setEnd(f.firstChild,0),a.setRng(m)),a.isCollapsed()||$b(e);var g=a.getNode(),p={context:g.nodeName.toLowerCase(),data:r.data,insert:!0},v=l.parse(t,p);if(!0===r.paste&&Ob(e.schema,v)&&((e,t)=>!!Lb(e,t))(i,g))return(m=Fb(d,i,a.getRng(),v))&&a.setRng(m),t;!0===r.paste&&((e,t,r,n)=>{var o,a=t.firstChild,i=t.lastChild,l=a===("bookmark"===i.attr("data-mce-type")?i.prev:i),s=Z(jb,a.name);if(l&&s){var d="false"!==a.attr("contenteditable"),c=(null===(o=e.getParent(r,e.isBlock))||void 0===o?void 0:o.nodeName.toLowerCase())===a.name,m=K.from(gb(n,r)).forall(_o);return d&&c&&m}return!1})(i,v,g,e.getBody())&&(null===(n=v.firstChild)||void 0===n||n.unwrap()),(e=>{for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")})(v);var h,b=v.lastChild;if(b&&"mce_marker"===b.attr("id")){var y=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!i.isBlock(b.name)){b.parent&&e.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,"br"===b.name);break}}if(e._selectionOverrides.showBlockCaretContainer(g),p.invalid||((e,t,r)=>{var n;return J(r.children(),bb)&&"SUMMARY"===(null===(n=e.getParent(t,e.isBlock))||void 0===n?void 0:n.nodeName)})(i,g,v)){e.selection.setContent(c);var C,w=a.getNode(),S=e.getBody();for(So(w)?w=C=S:C=w;C&&C!==S;)w=C,C=C.parentNode;t=w===S?S.innerHTML:i.getOuterHTML(w);var x=l.parse(t),E=(e=>{for(var t=e;t;t=t.walk())if("mce_marker"===t.attr("id"))return K.some(t);return K.none()})(x),k=E.bind(kb).getOr(x);E.each((e=>e.replace(v)));var _=v.children(),N=null!==(o=v.parent)&&void 0!==o?o:x;v.unwrap();var T=oe(_,(t=>Tb(e.schema,t,N)));Nb(T,e.schema,k),wb(l.getNodeFilters(),l.getAttributeFilters(),x),t=d.serialize(x),w===S?i.setHTML(S,t):i.setOuterHTML(w,t)}else t=d.serialize(v),((e,t,r)=>{var n;if("all"===r.getAttribute("data-mce-bogus"))null===(n=r.parentNode)||void 0===n||n.insertBefore(e.dom.createFragment(t),r);else{var o=r.firstChild,a=r.lastChild;!o||o===a&&"BR"===o.nodeName?e.dom.setHTML(r,t):e.selection.setContent(t,{no_events:!0})}})(e,t,g);return Hb(e,s),((e,t)=>{var r,n,o,a,i=e.dom,l=e.selection;if(t){l.scrollIntoView(t);var s=gb(e.getBody(),t);if(s&&"false"===i.getContentEditable(s))return i.remove(t),void l.select(s);var d=i.createRng(),c=t.previousSibling;if(bo(c)){d.setStart(c,null!==(n=null===(r=c.nodeValue)||void 0===r?void 0:r.length)&&void 0!==n?n:0);var m=t.nextSibling;bo(m)&&(c.appendData(m.data),null===(o=m.parentNode)||void 0===o||o.removeChild(m))}else d.setStartBefore(t),d.setEndBefore(t);var u=i.getParent(t,i.isBlock);if(i.remove(t),u&&i.isEmpty(u)){var f=Ub(u);Tn(_r.fromDom(u)),d.setStart(u,0),d.setEnd(u,0),f||(e=>!!e.getAttribute("data-mce-fragment"))(u)||!(a=(t=>{var r=hs.fromRangeStart(t);return null==(r=tu(e.getBody()).next(r))?void 0:r.toRange()})(d))?i.add(u,i.create("br",f?{}:{"data-mce-bogus":"1"})):(d=a,i.remove(u))}l.setRng(d)}})(e,i.get("mce_marker")),h=e.getBody(),Ht.each(h.getElementsByTagName("*"),(e=>{e.removeAttribute("data-mce-fragment")})),zb(i,a.getStart(),e.schema),((e,t,r)=>{var n=Ir(_r.fromDom(r),(e=>Dr(e,_r.fromDom(t))));he(n,n.length-2).filter(rr).fold((()=>ta(e,t)),(t=>ta(e,t.dom)))})(e.schema,e.getBody(),a.getStart()),t},Vb=e=>e instanceof jp,qb=(e,t,r)=>{e.dom.setHTML(e.getBody(),t),!0!==r&&(e=>{kp(e)&&uu(e.getBody()).each((t=>{var r=t.getNode(),n=po(r)?uu(r).getOr(t):t;e.selection.setRng(n.toRange())}))})(e)},Kb=(e,t,r)=>K.from(e.getBody()).map((n=>Vb(t)?((e,t,r,n)=>{wb(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),r);var o=av({validate:!1},e.schema).serialize(r),a=bl(ul(_r.fromDom(t))?o:Ht.trim(o));return qb(e,a,n.no_selection),{content:r,html:a}})(e,n,t,r):((e,t,r,n)=>{if(0===(r=bl(r)).length||/^\s+$/.test(r)){var o='<br data-mce-bogus="1">';"TABLE"===t.nodeName?r="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(r="<li>"+o+"</li>");var a=ud(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),a.toLowerCase())?(r=o,r=e.dom.createHTML(a,fd(e),r)):r||(r=o),qb(e,r,n.no_selection),{content:r,html:r}}"raw"!==n.format&&(r=av({validate:!1},e.schema).serialize(e.parser.parse(r,{isRootContent:!0,insert:!0})));var i=ul(_r.fromDom(t))?r:Ht.trim(r);return qb(e,i,n.no_selection),{content:i,html:i}})(e,n,t,r))).getOr({content:t,html:Vb(r.content)?"":r.content}),Gb=e=>A(e)?e:V,Yb=(e,t,r)=>{var n=t(e),o=Gb(r);return n.orThunk((()=>o(e)?K.none():((e,t,r)=>{for(var n=e.dom,o=Gb(r);n.parentNode;){n=n.parentNode;var a=_r.fromDom(n),i=t(a);if(i.isSome())return i;if(o(a))break}return K.none()})(e,t,o)))},Xb=tf,Qb=(e,t,r)=>{var n=e.formatter.get(r);if(n)for(var o=0;o<n.length;o++){var a=n[o];if(cf(a)&&!1===a.inherit&&e.dom.is(t,a.selector))return!0}return!1},Zb=(e,t,r,n,o)=>{var a=e.dom.getRoot();if(t===a)return!1;var i=e.dom.getParent(t,(t=>!!Qb(e,t,r)||(t.parentNode===a||!!ty(e,t,r,n,!0))));return!!ty(e,i,r,n,o)},Jb=(e,t,r)=>!(!mf(r)||!Xb(t,r.inline))||(!(!df(r)||!Xb(t,r.block))||!!cf(r)&&(so(t)&&e.is(t,r.selector))),ey=(e,t,r,n,o,a)=>{var i=r[n],l="attributes"===n;if(A(r.onmatch))return r.onmatch(t,r,n);if(i)if(Ie(i)){for(var s=0;s<i.length;s++)if(l?e.getAttrib(t,i[s]):nf(e,t,i[s]))return!0}else for(var d in i)if(Pe(i,d)){var c=l?e.getAttrib(t,d):nf(e,t,d),m=ef(i[d],a),u=R(c)||it(c);if(u&&R(m))continue;if(o&&u&&!r.exact)return!1;if((!o||r.exact)&&!Xb(c,rf(m,d)))return!1}return!0},ty=(e,t,r,n,o)=>{var a=e.formatter.get(r),i=e.dom;if(a&&so(t))for(var l=0;l<a.length;l++){var s=a[l];if(Jb(e.dom,t,s)&&ey(i,t,s,"attributes",o,n)&&ey(i,t,s,"styles",o,n)){var d=s.classes;if(d)for(var c=0;c<d.length;c++)if(!e.dom.hasClass(t,ef(d[c],n)))return;return s}}},ry=(e,t,r,n,o)=>{if(n)return Zb(e,n,t,r,o);if(n=e.selection.getNode(),Zb(e,n,t,r,o))return!0;var a=e.selection.getStart();return!(a===n||!Zb(e,a,t,r,o))},ny=(e,t)=>{var r=t=>Dr(t,_r.fromDom(e.getBody()));return K.from(e.selection.getStart(!0)).bind((n=>Yb(_r.fromDom(n),(r=>we(t,(t=>((t,r)=>ty(e,t.dom,r)?K.some(r):K.none())(r,t)))),r))).getOrNull()},oy=(e,t,r)=>ie(r,((r,n)=>{var o=((e,t)=>lf(e,t,(e=>{var t=e=>A(e)||e.length>1&&"%"===e.charAt(0);return J(["styles","attributes"],(r=>Be(e,r).exists((e=>{var r=k(e)?e:Oe(e);return J(r,t)}))))})))(e,n);return e.formatter.matchNode(t,n,{},o)?r.concat([n]):r}),[]),ay=vl,iy=e=>{if(e)for(var t=new Qn(e,e),r=t.current();r;r=t.next())if(bo(r))return r;return null},ly=e=>{var t=_r.fromTag("span");return dr(t,{id:gu,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&kn(t,_r.fromText(ay)),t},sy=(e,t,r)=>{var n=e.dom,o=e.selection;if(ff(t))Ch(e,!1,_r.fromDom(t),r,!0);else{var a=o.getRng(),i=n.getParent(t,n.isBlock),l=a.startContainer,s=a.startOffset,d=a.endContainer,c=a.endOffset,m=(e=>{var t=iy(e);return t&&t.data.charAt(0)===ay&&t.deleteData(0,1),t})(t);n.remove(t,!0),l===m&&s>0&&a.setStart(m,s-1),d===m&&c>0&&a.setEnd(m,c-1),i&&n.isEmpty(i)&&pl(_r.fromDom(i)),o.setRng(a)}},dy=(e,t,r)=>{var n=e.dom,o=e.selection;if(t)sy(e,t,r);else if(!(t=vu(e.getBody(),o.getStart())))for(;t=n.get(gu);)sy(e,t,r)},cy=(e,t)=>(e.appendChild(t),t),my=(e,t)=>{var r,n=ae(e,((e,t)=>cy(e,t.cloneNode(!1))),t),o=null!==(r=n.ownerDocument)&&void 0!==r?r:document;return cy(n,o.createTextNode(ay))},uy=(e,t,r,n)=>{var o=e.dom,a=e.selection,i=!1,l=e.formatter.get(t);if(l){var s=a.getRng(),d=s.startContainer,c=s.startOffset,m=d;bo(d)&&(c!==d.data.length&&(i=!0),m=m.parentNode);for(var u,f=[];m;){if(ty(e,m,t,r,n)){u=m;break}m.nextSibling&&(i=!0),f.push(m),m=m.parentNode}if(u)if(i){var g=a.getBookmark();s.collapse(!0);var p=Rf(o,s,l,!0);p=Rg(p),e.formatter.remove(t,r,p,n),a.moveToBookmark(g)}else{var v=vu(e.getBody(),u),h=D(v)?o.getParents(u.parentNode,q,v):[],b=ly(!1).dom;((e,t,r)=>{var n,o,a=e.dom,i=a.getParent(r,U(Xu,e.schema));i&&a.isEmpty(i)?null===(n=r.parentNode)||void 0===n||n.replaceChild(t,r):(fl(_r.fromDom(r)),a.isEmpty(r)?null===(o=r.parentNode)||void 0===o||o.replaceChild(t,r):a.insertAfter(t,r))})(e,b,null!=v?v:u);var y=((e,t,r,n,o,a)=>{var i=e.formatter,l=e.dom,s=oe(xe(i.get()),(e=>e!==n&&!Ze(e,"removeformat"))),d=oy(e,r,s);if(oe(d,(t=>!sf(e,t,n))).length>0){var c=r.cloneNode(!1);return l.add(t,c),i.remove(n,o,c,a),l.remove(c),K.some(c)}return K.none()})(e,b,u,t,r,n),C=my([...f,...y.toArray(),...h],b);v&&sy(e,v,D(v)),a.setCursorLocation(C,1),o.isEmpty(u)&&o.remove(u)}}},fy=e=>{e.on("mouseup keydown",(t=>{var r;((e,t,r)=>{var n=e.selection,o=e.getBody();dy(e,null,r),8!==t&&46!==t||!n.isCollapsed()||n.getStart().innerHTML!==ay||dy(e,vu(o,n.getStart()),!0),37!==t&&39!==t||dy(e,vu(o,n.getStart()),!0)})(e,t.keyCode,(r=e.selection.getRng().endContainer,bo(r)&&et(r.data,eo)))}))},gy=e=>{var t=ly(!1),r=my(e,t.dom);return{caretContainer:t,caretPosition:hs(r,0)}},py=(e,t)=>{var r=gy(t),n=r.caretContainer,o=r.caretPosition;return Sn(_r.fromDom(e),n),Rn(_r.fromDom(e)),o},vy=(e,t)=>{if(pu(t.dom))return!1;var r=e.schema.getTextInlineElements();return Pe(r,Zt(t))&&!pu(t.dom)&&!go(t.dom)},hy={},by=uo(["pre"]);((e,t)=>{hy[e]||(hy[e]=[]),hy[e].push(t)})("pre",(e=>{var t=e.selection.getRng();if(!t.collapsed){var r=e.selection.getSelectedBlocks(),n=oe(oe(r,by),(e=>t=>{var r=t.previousSibling;return by(r)&&Z(e,r)})(r));te(n,(e=>{var t,r,n,o;t=e.previousSibling,r=e,n=_r.fromDom(r),o=Br(n).dom,Rn(n),Nn(_r.fromDom(t),[_r.fromTag("br",o),_r.fromTag("br",o),...Hr(n)])}))}}));var yy=["fontWeight","fontStyle","color","fontSize","fontFamily"],Cy=e=>se(e,(e=>mf(e)&&"span"===e.inline&&(e=>x(e.styles)&&J(xe(e.styles),(e=>Z(yy,e))))(e))),wy=(e,t)=>{var r=e.get(t);return k(r)?Cy(r):K.none()},Sy=(e,t)=>mu(t,hs.fromRangeStart(e)).isNone(),xy=(e,t)=>!1===cu(t,hs.fromRangeEnd(e)).exists((e=>!Eo(e.getNode())||cu(t,e).isSome())),Ey=e=>t=>Ao(t)&&e.isEditable(t),ky=e=>oe((e=>{var t=e.getSelectedBlocks(),r=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return Sy(r,t[0])&&xy(r,t[0])?t:[];var n=be(t).filter((e=>Sy(r,e))).toArray(),o=ye(t).filter((e=>xy(r,e))).toArray(),a=t.slice(1,-1);return n.concat(a).concat(o)})(e),Ey(e.dom)),_y=e=>oe(e.getSelectedBlocks(),Ey(e.dom)),Ny=Ht.each,Ty=e=>so(e)&&!Ru(e)&&!pu(e)&&!go(e),Ry=(e,t)=>{for(var r=e;r;r=r[t]){if(bo(r)&&at(r.data))return e;if(so(r)&&!Ru(r))return r}return e},Dy=(e,t,r)=>{var n=hb(e),o=co(t)&&e.dom.isEditable(t),a=co(r)&&e.dom.isEditable(r);if(o&&a){var i=Ry(t,"previousSibling"),l=Ry(r,"nextSibling");if(n.compare(i,l)){for(var s=i.nextSibling;s&&s!==l;){var d=s;s=s.nextSibling,i.appendChild(d)}return e.dom.remove(l),Ht.each(Ht.grep(l.childNodes),(e=>{i.appendChild(e)})),i}}return r},Ay=(e,t,r,n)=>{var o;if(n&&!1!==t.merge_siblings){var a=null!==(o=Dy(e,Yu(n),n))&&void 0!==o?o:n;Dy(e,a,Yu(a,!0))}},Oy=(e,t,r)=>{Ny(e.childNodes,(e=>{Ty(e)&&(t(e)&&r(e),e.hasChildNodes()&&Oy(e,t,r))}))},By=(e,t)=>r=>!(!r||!nf(e,r,t)),Py=(e,t,r)=>n=>{e.setStyle(n,t,r),""===n.getAttribute("style")&&n.removeAttribute("style"),((e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)})(e,n)},Ly=$s([{keep:[]},{rename:["name"]},{removed:[]}]),My=/^(src|href|style)$/,Iy=Ht.each,Fy=tf,jy=(e,t,r)=>e.isChildOf(t,r)&&t!==r&&!e.isBlock(r),Uy=(e,t,r)=>{var n=t[r?"startContainer":"endContainer"],o=t[r?"startOffset":"endOffset"];if(so(n)){var a=n.childNodes.length-1;!r&&o&&o--,n=n.childNodes[o>a?a:o]}return bo(n)&&r&&o>=n.data.length&&(n=new Qn(n,e.getBody()).next()||n),bo(n)&&!r&&0===o&&(n=new Qn(n,e.getBody()).prev()||n),n},zy=(e,t)=>{var r=t?"firstChild":"lastChild",n=e[r];return(e=>/^(TR|TH|TD)$/.test(e.nodeName))(e)&&n?"TR"===e.nodeName&&n[r]||n:e},Hy=(e,t,r,n)=>{var o,a=e.create(r,n);return null===(o=t.parentNode)||void 0===o||o.insertBefore(a,t),a.appendChild(t),a},$y=(e,t,r,n,o)=>{var a=_r.fromDom(t),i=_r.fromDom(e.create(n,o)),l=r?zr(a):Ur(a);return Nn(i,l),r?(Sn(a,i),En(i,a)):(xn(a,i),kn(i,a)),i.dom},Wy=(e,t,r)=>{var n,o=t.parentNode,a=e.dom,i=ud(e);df(r)&&o===a.getRoot()&&(r.list_block&&Fy(t,r.list_block)||te(Ce(t.childNodes),(t=>{Qu(e,i,t.nodeName.toLowerCase())?n?n.appendChild(t):(n=Hy(a,t,i),a.setAttribs(n,fd(e))):n=null}))),(e=>cf(e)&&mf(e)&&$t(Be(e,"mixed"),!0))(r)&&!Fy(r.inline,t)||a.remove(t,!0)},Vy=(e,t,r)=>O(e)?{name:t,value:null}:{name:e,value:ef(t,r)},qy=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},Ky=(e,t,r,n,o)=>{var a=!1;Iy(r.styles,((i,l)=>{var s=Vy(l,i,n),d=s.name,c=s.value,m=rf(c,d);(r.remove_similar||_(c)||!so(o)||Fy(nf(e,o,d),m))&&e.setStyle(t,d,""),a=!0})),a&&qy(e,t)},Gy=(e,t,r,n,o)=>{var a=e.dom,i=hb(e),l=e.schema;if(mf(t)&&oa(l,t.inline)&&ia(l,n)&&n.parentElement===e.getBody())return Wy(e,n,t),Ly.removed();if(!t.ceFalseOverride&&n&&"false"===a.getContentEditableParent(n))return Ly.keep();if(n&&!Jb(a,n,t)&&!((e,t)=>t.links&&"A"===e.nodeName)(n,t))return Ly.keep();var s=n,d=t.preserve_attributes;if(mf(t)&&"all"===t.remove&&k(d)){var c=oe(a.getAttribs(s),(e=>Z(d,e.name.toLowerCase())));if(a.removeAllAttribs(s),te(c,(e=>a.setAttrib(s,e.name,e.value))),c.length>0)return Ly.rename("span")}if("all"!==t.remove){Ky(a,s,t,r,o),Iy(t.attributes,((e,n)=>{var i=Vy(n,e,r),l=i.name,d=i.value;if(t.remove_similar||_(d)||!so(o)||Fy(a.getAttrib(o,l),d)){if("class"===l){var c=a.getAttrib(s,l);if(c){var m="";if(te(c.split(/\s+/),(e=>{/mce\-\w+/.test(e)&&(m+=(m?" ":"")+e)})),m)return void a.setAttrib(s,l,m)}}if(My.test(l)&&s.removeAttribute("data-mce-"+l),"style"===l&&uo(["li"])(s)&&"none"===a.getStyle(s,"list-style-type"))return s.removeAttribute(l),void a.setStyle(s,"list-style-type","none");"class"===l&&s.removeAttribute("className"),s.removeAttribute(l)}})),Iy(t.classes,(e=>{e=ef(e,r),so(o)&&!a.hasClass(o,e)||a.removeClass(s,e)}));for(var m=a.getAttribs(s),u=0;u<m.length;u++){var f=m[u].nodeName;if(!i.isAttributeInternal(f))return Ly.keep()}}return"none"!==t.remove?(Wy(e,s,t),Ly.removed()):Ly.keep()},Yy=(e,t,r,n)=>Gy(e,t,r,n,n).fold(I(n),(t=>(e.dom.createFragment().appendChild(n),e.dom.rename(n,t))),I(null)),Xy=(e,t,r,n,o)=>{var a=e.formatter.get(t),i=a[0],l=e.dom,s=e.selection,d=n=>{var l=((e,t,r,n,o)=>{var a;return t.parentNode&&te(af(e.dom,t.parentNode).reverse(),(t=>{if(!a&&so(t)&&"_start"!==t.id&&"_end"!==t.id){var i=ty(e,t,r,n,o);i&&!1!==i.split&&(a=t)}})),a})(e,n,t,r,o);return((e,t,r,n,o,a,i,l)=>{var s,d,c,m,u=e.dom;if(r){for(var f=r.parentNode,g=n.parentNode;g&&g!==f;g=g.parentNode){for(var p=u.clone(g,!1),v=0;v<t.length&&null!==(p=Yy(e,t[v],l,p));v++);p&&(c&&p.appendChild(c),m||(m=p),c=p)}!a||i.mixed&&u.isBlock(r)||(n=null!==(s=u.split(r,n))&&void 0!==s?s:n),c&&m&&(null===(d=o.parentNode)||void 0===d||d.insertBefore(c,o),m.appendChild(o),mf(i)&&Ay(e,i,0,c))}return n})(e,a,l,n,n,!0,i,r)},c=t=>J(a,(n=>Zy(e,n,r,t,t))),m=t=>{var r=Ce(t.childNodes),n=c(t)||J(a,(e=>Jb(l,t,e))),o=t.parentNode;if(!n&&D(o)&&uf(i)&&c(o),i.deep&&r.length)for(var s=0;s<r.length;s++)m(r[s]);te(["underline","line-through","overline"],(r=>{so(t)&&e.dom.getStyle(t,"text-decoration")===r&&t.parentNode&&of(l,t.parentNode)===r&&Zy(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:r}},void 0,t)}))},u=e=>{var t=l.get(e?"_start":"_end");if(t){var r=t[e?"firstChild":"lastChild"];return(e=>Ru(e)&&so(e)&&("_start"===e.id||"_end"===e.id))(r)&&(r=r[e?"firstChild":"lastChild"]),bo(r)&&0===r.data.length&&(r=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),l.remove(t,!0),r}return null},f=t=>{var r,n,o=Rf(l,t,a,t.collapsed);if(i.split){if(o=Rg(o),(r=Uy(e,o,!0))!==(n=Uy(e,o))){if(r=zy(r,!0),n=zy(n,!1),jy(l,r,n)){var s=K.from(r.firstChild).getOr(r);return d($y(l,s,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void u(!0)}if(jy(l,n,r)){var c=K.from(n.lastChild).getOr(n);return d($y(l,c,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void u(!1)}r=Hy(l,r,"span",{id:"_start","data-mce-type":"bookmark"}),n=Hy(l,n,"span",{id:"_end","data-mce-type":"bookmark"});var f=l.createRng();f.setStartAfter(r),f.setEndBefore(n),Df(l,f,(e=>{te(e,(e=>{Ru(e)||Ru(e.parentNode)||d(e)}))})),d(r),d(n),r=u(!0),n=u()}else r=n=d(r);o.startContainer=r.parentNode?r.parentNode:r,o.startOffset=l.nodeIndex(r),o.endContainer=n.parentNode?n.parentNode:n,o.endOffset=l.nodeIndex(n)+1}Df(l,o,(e=>{te(e,m)}))};if(n){if(Vu(n)){var g=l.createRng();g.setStartBefore(n),g.setEndAfter(n),f(g)}else f(n);$f(e,t,n,r)}else s.isCollapsed()&&mf(i)&&!Mu(e).length?uy(e,t,r,o):(Ku(e,(()=>$u(e,f)),(n=>mf(i)&&ry(e,t,r,n))),e.nodeChanged()),((e,t,r)=>{"removeformat"===t?te(_y(e.selection),(t=>{te(yy,(r=>e.dom.setStyle(t,r,""))),qy(e.dom,t)})):wy(e.formatter,t).each((t=>{te(_y(e.selection),(n=>Ky(e.dom,n,t,r,null)))}))})(e,t,r),$f(e,t,n,r)},Qy=(e,t,r,n,o)=>{(n||e.selection.isEditable())&&Xy(e,t,r,n,o)},Zy=(e,t,r,n,o)=>Gy(e,t,r,n,o).fold(V,(t=>(e.dom.rename(n,t),!0)),q),Jy=Ht.each,eC=(e,t,r,n)=>{Jy(t,(t=>{mf(t)&&Jy(e.dom.select(t.inline,n),(n=>{Ty(n)&&Zy(e,t,r,n,t.exact?n:null)})),((e,t,r)=>{if(t.clear_child_styles){var n=t.links?"*:not(a)":"*";Ny(e.select(n,r),(r=>{Ty(r)&&e.isEditable(r)&&Ny(t.styles,((t,n)=>{e.setStyle(r,n,"")}))}))}})(e.dom,t,n)}))},tC=Ht.each,rC=(e,t,r,n)=>{if(tC(r.styles,((r,o)=>{e.setStyle(t,o,ef(r,n))})),r.styles){var o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},nC=(e,t,r,n)=>{var o=e.formatter.get(t),a=o[0],i=!n&&e.selection.isCollapsed(),l=e.dom,s=e.selection,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;A(t.onformat)&&t.onformat(e,t,r,n),rC(l,e,t,r),tC(t.attributes,((t,n)=>{l.setAttrib(e,n,ef(t,r))})),tC(t.classes,(t=>{var n=ef(t,r);l.hasClass(e,n)||l.addClass(e,n)}))},c=(e,t)=>{var r=!1;return tC(e,(e=>!!cf(e)&&("false"===l.getContentEditable(t)&&!e.ceFalseOverride||(!(!D(e.collapsed)||e.collapsed===i)||(!(l.is(t,e.selector)&&!pu(t))||(d(t,e),r=!0,!1)))))),r},m=e=>{if(S(e)){var t=l.create(e);return d(t),t}return null},u=(n,i,l)=>{var s=[],u=!0,f=a.inline||a.block,g=m(f),p=n=>(e=>df(e)&&!0===e.wrapper)(a)&&ty(e,n,t,r),v=(t,r,n)=>{var o=(e=>df(e)&&!0!==e.wrapper)(a)&&Xu(e.schema,t)&&Qu(e,r,f);return n&&o};Df(n,i,(t=>{var r,i=t=>{var m=!1,h=u,b=!1,y=t.parentNode,C=y.nodeName.toLowerCase(),w=n.getContentEditable(t);D(w)&&(h=u,u="true"===w,m=!0,b=Ju(e,t));var S=u&&!m;if(Eo(t)&&!((e,t,r,n)=>{if(Qd(e)&&mf(t)&&r.parentNode){var o=Ya(e.schema),a=Yn(_r.fromDom(r),(e=>pu(e.dom)));return Le(o,n)&&jo(e.schema,r.parentNode,{skipBogus:!1,includeZwsp:!0})&&!a}return!1})(e,a,t,C))return r=null,void(df(a)&&n.remove(t));if(p(t))r=null;else{if(v(t,C,S)){var x=n.rename(t,f);return d(x),s.push(x),void(r=null)}if(cf(a)){var E=c(o,t);if(!E&&D(y)&&uf(a)&&(E=c(o,y)),!mf(a)||E)return void(r=null)}D(g)&&((t,r,o,i)=>{var s=t.nodeName.toLowerCase(),d=Qu(e,f,s)&&Qu(e,r,f),c=!l&&bo(t)&&hl(t.data),m=pu(t),u=!mf(a)||!n.isBlock(t);return(o||i)&&d&&!c&&!m&&u})(t,C,S,b)?(r||(r=n.clone(g,!1),y.insertBefore(r,t),s.push(r)),b&&m&&(u=h),r.appendChild(t)):(r=null,te(Ce(t.childNodes),i),m&&(u=h),r=null)}};te(t,i)})),!0===a.links&&te(s,(e=>{var t=e=>{"A"===e.nodeName&&d(e,a),te(Ce(e.childNodes),t)};t(e)})),te(s,(i=>{var l=(e=>{var t=0;return te(e.childNodes,(e=>{(e=>D(e)&&bo(e)&&0===e.length)(e)||Ru(e)||t++})),t})(i);!(s.length>1)&&n.isBlock(i)||0!==l?(mf(a)||df(a)&&a.wrapper)&&(a.exact||1!==l||(i=(e=>{var t=se(e.childNodes,qu).filter((e=>"false"!==n.getContentEditable(e)&&Jb(n,e,a)));return t.map((t=>{var r=n.clone(t,!1);return d(r),n.replace(r,e,!0),n.remove(t,!0),r})).getOr(e)})(i)),eC(e,o,r,i),((e,t,r,n,o)=>{var a=o.parentNode;ty(e,a,r,n)&&Zy(e,t,n,o)||t.merge_with_parents&&a&&e.dom.getParent(a,(a=>!!ty(e,a,r,n)&&(Zy(e,t,n,o),!0)))})(e,a,t,r,i),((e,t,r,n)=>{if(t.styles&&t.styles.backgroundColor){var o=By(e,"fontSize");Oy(n,(t=>o(t)&&e.isEditable(t)),Py(e,"backgroundColor",ef(t.styles.backgroundColor,r)))}})(n,a,r,i),((e,t,r,n)=>{var o=t=>{if(co(t)&&so(t.parentNode)&&e.isEditable(t)){var r=of(e,t.parentNode);e.getStyle(t,"color")&&r?e.setStyle(t,"text-decoration",r):e.getStyle(t,"text-decoration")===r&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Ht.walk(n,o,"childNodes"),o(n))})(n,a,0,i),((e,t,r,n)=>{if(mf(t)&&("sub"===t.inline||"sup"===t.inline)){var o=By(e,"fontSize");Oy(n,(t=>o(t)&&e.isEditable(t)),Py(e,"fontSize",""));var a=oe(e.select("sup"===t.inline?"sub":"sup",n),e.isEditable);e.remove(a,!0)}})(n,a,0,i),Ay(e,a,0,i)):n.remove(i,!0)}))},f=Vu(n)?n:s.getNode();if("false"===l.getContentEditable(f)&&!Ju(e,f))return c(o,n=f),void Hf(e,t,n,r);if(a){if(n)if(Vu(n)){if(!c(o,n)){var g=l.createRng();g.setStartBefore(n),g.setEndAfter(n),u(l,Rf(l,g,o),!0)}}else u(l,n,!0);else i&&mf(a)&&!Mu(e).length?((e,t,r)=>{var n,o=e.selection,a=e.formatter.get(t);if(a){var i=o.getRng(),l=i.startOffset,s=i.startContainer.nodeValue;n=vu(e.getBody(),o.getStart());var d,c,m=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(s&&l>0&&l<s.length&&m.test(s.charAt(l))&&m.test(s.charAt(l-1))){var u=o.getBookmark();i.collapse(!0);var f=Rf(e.dom,i,a);f=Rg(f),e.formatter.apply(t,r,f),o.moveToBookmark(u)}else{var g=n?iy(n):null;n&&(null==g?void 0:g.data)===ay||(d=e.getDoc(),c=ly(!0).dom,g=(n=d.importNode(c,!0)).firstChild,i.insertNode(n),l=1),e.formatter.apply(t,r,n),o.setCursorLocation(g,l)}}})(e,t,r):(s.setRng(Db(s.getRng())),Ku(e,(()=>{$u(e,((e,t)=>{var r=t?e:Rf(l,e,o);u(l,r,!1)}))}),q),e.nodeChanged()),wy(e.formatter,t).each((t=>{te(ky(e.selection),(e=>rC(l,e,t,r)))}));((e,t)=>{Pe(hy,e)&&te(hy[e],(e=>{e(t)}))})(t,e)}Hf(e,t,n,r)},oC=(e,t,r,n)=>{(n||e.selection.isEditable())&&nC(e,t,r,n)},aC=e=>Pe(e,"vars"),iC=e=>e.selection.getStart(),lC=(e,t,r,n,o)=>le(t,(t=>{var a=e.formatter.matchNode(t,r,null!=o?o:{},n);return!T(a)}),(t=>!!Qb(e,t,r)||!n&&D(e.formatter.matchNode(t,r,o,!0)))),sC=(e,t)=>{var r=null!=t?t:iC(e);return oe(af(e.dom,r),(e=>so(e)&&!go(e)))},dC=(e,t,r)=>{var n=sC(e,t);ke(r,((r,o)=>{var a=r=>{var a=lC(e,n,o,r.similar,aC(r)?r.vars:void 0),i=a.isSome();if(r.state.get()!==i){r.state.set(i);var l=a.getOr(t);aC(r)?r.callback(i,{node:l,format:o,parents:n}):te(r.callbacks,(e=>e(i,{node:l,format:o,parents:n})))}};te([r.withSimilar,r.withoutSimilar],a),te(r.withVars,a)}))},cC=(e,t,r,n,o,a)=>(((e,t,r,n,o,a)=>{var i=t.get();te(r.split(","),(t=>{var r=Be(i,t).getOrThunk((()=>{var e={withSimilar:{state:Ho(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ho(!1),similar:!1,callbacks:[]},withVars:[]};return i[t]=e,e})),l=()=>{var r=sC(e);return lC(e,r,t,o,a).isSome()};if(T(a)){var s=o?r.withSimilar:r.withoutSimilar;s.callbacks.push(n),1===s.callbacks.length&&s.state.set(l())}else r.withVars.push({state:Ho(l()),similar:o,vars:a,callback:n})})),t.set(i)})(e,t,r,n,o,a),{unbind:()=>((e,t,r)=>{var n=e.get();te(t.split(","),(e=>Be(n,e).each((t=>{n[e]={withSimilar:u(u({},t.withSimilar),{},{callbacks:oe(t.withSimilar.callbacks,(e=>e!==r))}),withoutSimilar:u(u({},t.withoutSimilar),{},{callbacks:oe(t.withoutSimilar.callbacks,(e=>e!==r))}),withVars:oe(t.withVars,(e=>e.callback!==r))}})))),e.set(n)})(t,r,n)}),mC=Ht.explode,uC=()=>{var e={};return{addFilter:(t,r)=>{te(mC(t),(t=>{Pe(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(r)}))},getFilters:()=>Oe(e),removeFilter:(t,r)=>{te(mC(t),(t=>{if(Pe(e,t))if(D(r)){var n=e[t],o=oe(n.callbacks,(e=>e!==r));o.length>0?n.callbacks=o:delete e[t]}else delete e[t]}))}}},fC=(e,t,r)=>{e.addNodeFilter("font",(e=>{te(e,(e=>{var n=t.parse(e.attr("style")),o=e.attr("color"),a=e.attr("face"),i=e.attr("size");o&&(n.color=o),a&&(n["font-family"]=a),i&&lt(i).each((e=>{n["font-size"]=r[e-1]})),e.name="span",e.attr("style",t.serialize(n)),((e,t)=>{te(t,(t=>{e.attr(t,null)}))})(e,["color","face","size"])}))}))},gC=(e,t,r)=>{var n,o=ii();t.convert_fonts_to_spans&&fC(e,o,Ht.explode(null!==(n=t.font_size_legacy_values)&&void 0!==n?n:"")),((e,t,r)=>{e.addNodeFilter("strike",(e=>{var n="html4"!==t.type;te(e,(e=>{if(n)e.name="s";else{var t=r.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",r.serialize(t))}}))}))})(e,r,o)},pC=e=>{var t=i(e.split(",")),r=t[0],n=t.slice(1).join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(r);if(o){var a=";base64"===o[2],l=a?(e=>{var t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""})(n):decodeURIComponent(n);return K.some({type:o[1],data:l,base64Encoded:a})}return K.none()},vC=function(e,t){var r=t;if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])try{r=atob(t)}catch(e){return K.none()}for(var n=new Uint8Array(r.length),o=0;o<n.length;o++)n[o]=r.charCodeAt(o);return K.some(new Blob([n],{type:e}))},hC=e=>{return Je(e,"blob:")?(e=>fetch(e).then((e=>e.ok?e.blob():Promise.reject())).catch((()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))))(e):Je(e,"data:")?(t=e,new Promise(((e,r)=>{pC(t).bind((e=>{var t=e.type,r=e.data,n=e.base64Encoded;return vC(t,r,n)})).fold((()=>r("Invalid data URI")),e)}))):Promise.reject("Unknown URI format");var t},bC=e=>new Promise(((t,r)=>{var n=new FileReader;n.onloadend=()=>{t(n.result)},n.onerror=()=>{var e;r(null===(e=n.error)||void 0===e?void 0:e.message)},n.readAsDataURL(e)})),yC=0,CC=(e,t,r)=>pC(e).bind((e=>{var n=e.data,o=e.type,a=e.base64Encoded;if(t&&!a)return K.none();var i=a?n:btoa(n);return r(i,o)})),wC=(e,t,r)=>{var n,o=e.create((n||"blobid")+yC++,t,r);return e.add(o),o},SC=function(e,t){return CC(t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],((t,r)=>K.from(e.getByData(t,r)).orThunk((()=>vC(r,t).map((r=>wC(e,r,t)))))))},xC=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,EC=e=>K.from(e.match(xC)).bind((e=>he(e,1))).map((e=>Je(e,"www.")?e.substring(4):e)),kC=(e,t)=>{K.from(e.attr("src")).bind(EC).forall((e=>!Z(t,e)))&&e.attr("sandbox","")},_C=(e,t)=>Je(e,`${t}/`),NC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.src,n=e.width,o=e.height,a=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,l=(e=>T(e)?"iframe":_C(e,"image")?"img":_C(e,"video")?"video":_C(e,"audio")?"audio":"iframe")(t),s=new jp(l,1);return s.attr("audio"===l?{src:r}:{src:r,width:n,height:o}),"audio"!==l&&"video"!==l||s.attr("controls",""),"iframe"===l&&a&&kC(s,i),s},TC=(e,t)=>{var r=t.blob_cache;if(r){var n=e=>{var t=e.attr("src");(e=>e.attr("src")===jt.transparentSrc||D(e.attr("data-mce-placeholder")))(e)||(e=>D(e.attr("data-mce-bogus")))(e)||R(t)||SC(r,t,!0).each((t=>{e.attr("src",t.blobUri())}))};e.addAttributeFilter("src",(e=>te(e,n)))}},RC=Object.entries,DC=Object.setPrototypeOf,AC=Object.isFrozen,OC=Object.getPrototypeOf,BC=Object.getOwnPropertyDescriptor,PC=Object.freeze,LC=Object.seal,MC=Object.create,IC="undefined"!=typeof Reflect&&Reflect,FC=IC.apply,jC=IC.construct;FC||(FC=function(e,t,r){return e.apply(t,r)}),PC||(PC=function(e){return e}),LC||(LC=function(e){return e}),jC||(jC=function(e,t){return new e(...t)});var UC,zC=ZC(Array.prototype.forEach),HC=ZC(Array.prototype.pop),$C=ZC(Array.prototype.push),WC=ZC(String.prototype.toLowerCase),VC=ZC(String.prototype.toString),qC=ZC(String.prototype.match),KC=ZC(String.prototype.replace),GC=ZC(String.prototype.indexOf),YC=ZC(String.prototype.trim),XC=ZC(RegExp.prototype.test),QC=(UC=TypeError,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return jC(UC,t)});function ZC(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return FC(e,t,n)}}function JC(e,t,r){var n;r=null!==(n=r)&&void 0!==n?n:WC,DC&&DC(e,null);for(var o=t.length;o--;){var a=t[o];if("string"==typeof a){var i=r(a);i!==a&&(AC(t)||(t[o]=i),a=i)}e[a]=!0}return e}function ew(e){var t,r=MC(null),n=g(RC(e));try{for(n.s();!(t=n.n()).done;){var o=s(t.value,2),a=o[0],i=o[1];r[a]=i}}catch(e){n.e(e)}finally{n.f()}return r}function tw(e,t){for(;null!==e;){var r=BC(e,t);if(r){if(r.get)return ZC(r.get);if("function"==typeof r.value)return ZC(r.value)}e=OC(e)}return function(e){return console.warn("fallback value for",e),null}}var rw=PC(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),nw=PC(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ow=PC(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),aw=PC(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),iw=PC(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),lw=PC(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),sw=PC(["#text"]),dw=PC(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),cw=PC(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mw=PC(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),uw=PC(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fw=LC(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gw=LC(/<%[\w\W]*|[\w\W]*%>/gm),pw=LC(/\${[\w\W]*}/gm),vw=LC(/^data-[\-\w.\u00B7-\uFFFF]/),hw=LC(/^aria-[\-\w]+$/),bw=LC(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),yw=LC(/^(?:\w+script|data):/i),Cw=LC(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ww=LC(/^html$/i),Sw=Object.freeze({__proto__:null,MUSTACHE_EXPR:fw,ERB_EXPR:gw,TMPLIT_EXPR:pw,DATA_ATTR:vw,ARIA_ATTR:hw,IS_ALLOWED_URI:bw,IS_SCRIPT_OR_DATA:yw,ATTR_WHITESPACE:Cw,DOCTYPE_NAME:ww}),xw=()=>"undefined"==typeof window?null:window;var Ew=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xw(),r=t=>e(t);if(r.version="3.0.5",r.removed=[],!t||!t.document||9!==t.document.nodeType)return r.isSupported=!1,r;var n,o=t.document,a=o.currentScript,i=t.document,l=t.DocumentFragment,s=t.HTMLTemplateElement,d=t.Node,c=t.Element,m=t.NodeFilter,u=t.NamedNodeMap,f=void 0===u?t.NamedNodeMap||t.MozNamedAttrMap:u,g=t.HTMLFormElement,p=t.DOMParser,v=t.trustedTypes,h=c.prototype,b=tw(h,"cloneNode"),y=tw(h,"nextSibling"),C=tw(h,"childNodes"),w=tw(h,"parentNode");if("function"==typeof s){var S=i.createElement("template");S.content&&S.content.ownerDocument&&(i=S.content.ownerDocument)}var x="",E=i,k=E.implementation,_=E.createNodeIterator,N=E.createDocumentFragment,T=E.getElementsByTagName,R=o.importNode,D={};r.isSupported="function"==typeof RC&&"function"==typeof w&&k&&void 0!==k.createHTMLDocument;var A,O,B=Sw.MUSTACHE_EXPR,P=Sw.ERB_EXPR,L=Sw.TMPLIT_EXPR,M=Sw.DATA_ATTR,I=Sw.ARIA_ATTR,F=Sw.IS_SCRIPT_OR_DATA,j=Sw.ATTR_WHITESPACE,U=Sw.IS_ALLOWED_URI,z=null,H=JC({},[...rw,...nw,...ow,...iw,...sw]),$=null,W=JC({},[...dw,...cw,...mw,...uw]),V=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,K=null,G=!0,Y=!0,X=!1,Q=!0,Z=!1,J=!1,ee=!1,te=!1,re=!1,ne=!1,oe=!1,ae=!0,ie=!1,le=!0,se=!1,de={},ce=null,me=JC({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ue=null,fe=JC({},["audio","video","img","source","image","track"]),ge=null,pe=JC({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ve="http://www.w3.org/1998/Math/MathML",he="http://www.w3.org/2000/svg",be="http://www.w3.org/1999/xhtml",ye=be,Ce=!1,we=null,Se=JC({},[ve,he,be],VC),xe=["application/xhtml+xml","text/html"],Ee=null,ke=i.createElement("form"),_e=function(e){return e instanceof RegExp||e instanceof Function},Ne=function(e){if(!Ee||Ee!==e){if(e&&"object"==typeof e||(e={}),e=ew(e),A=A=-1===xe.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,O="application/xhtml+xml"===A?VC:WC,z="ALLOWED_TAGS"in e?JC({},e.ALLOWED_TAGS,O):H,$="ALLOWED_ATTR"in e?JC({},e.ALLOWED_ATTR,O):W,we="ALLOWED_NAMESPACES"in e?JC({},e.ALLOWED_NAMESPACES,VC):Se,ge="ADD_URI_SAFE_ATTR"in e?JC(ew(pe),e.ADD_URI_SAFE_ATTR,O):pe,ue="ADD_DATA_URI_TAGS"in e?JC(ew(fe),e.ADD_DATA_URI_TAGS,O):fe,ce="FORBID_CONTENTS"in e?JC({},e.FORBID_CONTENTS,O):me,q="FORBID_TAGS"in e?JC({},e.FORBID_TAGS,O):{},K="FORBID_ATTR"in e?JC({},e.FORBID_ATTR,O):{},de="USE_PROFILES"in e&&e.USE_PROFILES,G=!1!==e.ALLOW_ARIA_ATTR,Y=!1!==e.ALLOW_DATA_ATTR,X=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Q=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Z=e.SAFE_FOR_TEMPLATES||!1,J=e.WHOLE_DOCUMENT||!1,re=e.RETURN_DOM||!1,ne=e.RETURN_DOM_FRAGMENT||!1,oe=e.RETURN_TRUSTED_TYPE||!1,te=e.FORCE_BODY||!1,ae=!1!==e.SANITIZE_DOM,ie=e.SANITIZE_NAMED_PROPS||!1,le=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,U=e.ALLOWED_URI_REGEXP||bw,ye=e.NAMESPACE||be,V=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&_e(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&_e(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Z&&(Y=!1),ne&&(re=!0),de&&(z=JC({},[...sw]),$=[],!0===de.html&&(JC(z,rw),JC($,dw)),!0===de.svg&&(JC(z,nw),JC($,cw),JC($,uw)),!0===de.svgFilters&&(JC(z,ow),JC($,cw),JC($,uw)),!0===de.mathMl&&(JC(z,iw),JC($,mw),JC($,uw))),e.ADD_TAGS&&(z===H&&(z=ew(z)),JC(z,e.ADD_TAGS,O)),e.ADD_ATTR&&($===W&&($=ew($)),JC($,e.ADD_ATTR,O)),e.ADD_URI_SAFE_ATTR&&JC(ge,e.ADD_URI_SAFE_ATTR,O),e.FORBID_CONTENTS&&(ce===me&&(ce=ew(ce)),JC(ce,e.FORBID_CONTENTS,O)),le&&(z["#text"]=!0),J&&JC(z,["html","head","body"]),z.table&&(JC(z,["tbody"]),delete q.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw QC('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw QC('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');n=e.TRUSTED_TYPES_POLICY,x=n.createHTML("")}else void 0===n&&(n=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;var r=null,n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(r=t.getAttribute(n));var o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(v,a)),null!==n&&"string"==typeof x&&(x=n.createHTML(""));PC&&PC(e),Ee=e}},Te=JC({},["mi","mo","mn","ms","mtext"]),Re=JC({},["foreignobject","desc","title","annotation-xml"]),De=JC({},["title","style","font","a","script"]),Ae=JC({},nw);JC(Ae,ow),JC(Ae,aw);var Oe=JC({},iw);JC(Oe,lw);var Be=function(e){$C(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},Pe=function(e,t){try{$C(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){$C(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!$[e])if(re||ne)try{Be(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Le=function(e){var t,r;if(te)e="<remove></remove>"+e;else{var o=qC(e,/^[\r\n\t ]+/);r=o&&o[0]}"application/xhtml+xml"===A&&ye===be&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var a=n?n.createHTML(e):e;if(ye===be)try{t=(new p).parseFromString(a,A)}catch(e){}if(!t||!t.documentElement){t=k.createDocument(ye,"template",null);try{t.documentElement.innerHTML=Ce?x:a}catch(e){}}var l=t.body||t.documentElement;return e&&r&&l.insertBefore(i.createTextNode(r),l.childNodes[0]||null),ye===be?T.call(t,J?"html":"body")[0]:J?t.documentElement:l},Me=function(e){return _.call(e.ownerDocument||e,e,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT,null,!1)},Ie=function(e){return"object"==typeof d?e instanceof d:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Fe=function(e,t,n){D[e]&&zC(D[e],(e=>{e.call(r,t,n,Ee)}))},je=function(e){var t,n;if(Fe("beforeSanitizeElements",e,null),(n=e)instanceof g&&("string"!=typeof n.nodeName||"string"!=typeof n.textContent||"function"!=typeof n.removeChild||!(n.attributes instanceof f)||"function"!=typeof n.removeAttribute||"function"!=typeof n.setAttribute||"string"!=typeof n.namespaceURI||"function"!=typeof n.insertBefore||"function"!=typeof n.hasChildNodes))return Be(e),!0;var o=O(e.nodeName);if(Fe("uponSanitizeElement",e,{tagName:o,allowedTags:z}),e.hasChildNodes()&&!Ie(e.firstElementChild)&&(!Ie(e.content)||!Ie(e.content.firstElementChild))&&XC(/<[/\w]/g,e.innerHTML)&&XC(/<[/\w]/g,e.textContent))return Be(e),!0;if(!z[o]||q[o]){if(!q[o]&&ze(o)){if(V.tagNameCheck instanceof RegExp&&XC(V.tagNameCheck,o))return!1;if(V.tagNameCheck instanceof Function&&V.tagNameCheck(o))return!1}if(le&&!ce[o]){var a=w(e)||e.parentNode,i=C(e)||e.childNodes;if(i&&a)for(var l=i.length-1;l>=0;--l)a.insertBefore(b(i[l],!0),y(e))}return Be(e),!0}return e instanceof c&&!function(e){var t=w(e);t&&t.tagName||(t={namespaceURI:ye,tagName:"template"});var r=WC(e.tagName),n=WC(t.tagName);return!!we[e.namespaceURI]&&(e.namespaceURI===he?t.namespaceURI===be?"svg"===r:t.namespaceURI===ve?"svg"===r&&("annotation-xml"===n||Te[n]):Boolean(Ae[r]):e.namespaceURI===ve?t.namespaceURI===be?"math"===r:t.namespaceURI===he?"math"===r&&Re[n]:Boolean(Oe[r]):e.namespaceURI===be?!(t.namespaceURI===he&&!Re[n])&&!(t.namespaceURI===ve&&!Te[n])&&!Oe[r]&&(De[r]||!Ae[r]):!("application/xhtml+xml"!==A||!we[e.namespaceURI]))}(e)?(Be(e),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!XC(/<\/no(script|embed|frames)/i,e.innerHTML)?(Z&&3===e.nodeType&&(t=e.textContent,t=KC(t,B," "),t=KC(t,P," "),t=KC(t,L," "),e.textContent!==t&&($C(r.removed,{element:e.cloneNode()}),e.textContent=t)),Fe("afterSanitizeElements",e,null),!1):(Be(e),!0)},Ue=function(e,t,r){if(ae&&("id"===t||"name"===t)&&(r in i||r in ke))return!1;if(Y&&!K[t]&&XC(M,t));else if(G&&XC(I,t));else if(!$[t]||K[t]){if(!(ze(e)&&(V.tagNameCheck instanceof RegExp&&XC(V.tagNameCheck,e)||V.tagNameCheck instanceof Function&&V.tagNameCheck(e))&&(V.attributeNameCheck instanceof RegExp&&XC(V.attributeNameCheck,t)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(t))||"is"===t&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&XC(V.tagNameCheck,r)||V.tagNameCheck instanceof Function&&V.tagNameCheck(r))))return!1}else if(ge[t]);else if(XC(U,KC(r,j,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==GC(r,"data:")||!ue[e]){if(X&&!XC(F,KC(r,j,"")));else if(r)return!1}else;return!0},ze=function(e){return e.indexOf("-")>0},He=function(e){var t,r,o,a;Fe("beforeSanitizeAttributes",e,null);var i=e.attributes;if(i){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$};for(a=i.length;a--;){var s=t=i[a],d=s.name,c=s.namespaceURI,m=r="value"===d?t.value:YC(t.value);if(o=O(d),l.attrName=o,l.attrValue=r,l.keepAttr=!0,l.forceKeepAttr=void 0,Fe("uponSanitizeAttribute",e,l),r=l.attrValue,!l.forceKeepAttr)if(l.keepAttr)if(Q||!XC(/\/>/i,r)){Z&&(r=KC(r,B," "),r=KC(r,P," "),r=KC(r,L," "));var u=O(e.nodeName);if(Ue(u,o,r)){if(!ie||"id"!==o&&"name"!==o||(Pe(d,e),r="user-content-"+r),n&&"object"==typeof v&&"function"==typeof v.getAttributeType)if(c);else switch(v.getAttributeType(u,o)){case"TrustedHTML":r=n.createHTML(r);break;case"TrustedScriptURL":r=n.createScriptURL(r)}if(r!==m)try{c?e.setAttributeNS(c,d,r):e.setAttribute(d,r)}catch(t){Pe(d,e)}}else Pe(d,e)}else Pe(d,e);else Pe(d,e)}Fe("afterSanitizeAttributes",e,null)}},$e=function e(t){var r,n=Me(t);for(Fe("beforeSanitizeShadowDOM",t,null);r=n.nextNode();)Fe("uponSanitizeShadowNode",r,null),je(r)||(r.content instanceof l&&e(r.content),He(r));Fe("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(e){var t,a,i,s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((Ce=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Ie(e)){if("function"!=typeof e.toString)throw QC("toString is not a function");if("string"!=typeof(e=e.toString()))throw QC("dirty is not a string, aborting")}if(!r.isSupported)return e;if(ee||Ne(c),r.removed=[],"string"==typeof e&&(se=!1),se){if(e.nodeName){var m=O(e.nodeName);if(!z[m]||q[m])throw QC("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof d)1===(a=(t=Le("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?t=a:t.appendChild(a);else{if(!re&&!Z&&!J&&-1===e.indexOf("<"))return n&&oe?n.createHTML(e):e;if(!(t=Le(e)))return re?null:oe?x:""}t&&te&&Be(t.firstChild);for(var u=Me(se?e:t);i=u.nextNode();)je(i)||(i.content instanceof l&&$e(i.content),He(i));if(se)return e;if(re){if(ne)for(s=N.call(t.ownerDocument);t.firstChild;)s.appendChild(t.firstChild);else s=t;return($.shadowroot||$.shadowrootmode)&&(s=R.call(o,s,!0)),s}var f=J?t.outerHTML:t.innerHTML;return J&&z["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&XC(ww,t.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+f),Z&&(f=KC(f,B," "),f=KC(f,P," "),f=KC(f,L," ")),n&&oe?n.createHTML(f):f},r.setConfig=function(e){Ne(e),ee=!0},r.clearConfig=function(){Ee=null,ee=!1},r.isValidAttribute=function(e,t,r){Ee||Ne({});var n=O(e),o=O(t);return Ue(n,o,r)},r.addHook=function(e,t){"function"==typeof t&&(D[e]=D[e]||[],$C(D[e],t))},r.removeHook=function(e){if(D[e])return HC(D[e])},r.removeHooks=function(e){D[e]&&(D[e]=[])},r.removeAllHooks=function(){D={}},r}(),kw=Ht.each,_w=Ht.trim,Nw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Tw={ftp:21,http:80,https:443,mailto:25},Rw=["img","video"],Dw=(e,t,r)=>{var n=(e=>{try{return decodeURIComponent(e)}catch(t){return unescape(e)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(n)||!e.allow_html_data_urls&&(/^data:image\//i.test(n)?((e,t)=>D(e)?!e:!D(t)||!Z(Rw,t))(e.allow_svg_data_urls,r)&&/^data:image\/svg\+xml/i.test(n):/^data:/i.test(n)))};class Aw{static parseDataUri(e){var t,r=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(r[0]);return n&&(t=n[1]),{type:t,data:r[1]}}static isDomSafe(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.allow_script_urls)return!0;var n=Oa.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Dw(r,n,t)}static getDocumentBaseUrl(e){var t,r;return r=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(t=e.href)&&void 0!==t?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.path="",this.directory="",e=_w(e),this.settings=t;var r=t.base_uri,n=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))n.source=e;else{var o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(r&&r.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){var a=r?r.path:new Aw(document.location.href).directory;if(""===(null==r?void 0:r.protocol))e="//mce_host"+n.toAbsPath(a,e);else{var i=/([^#?]*)([#?]?.*)/.exec(e);i&&(e=(r&&r.protocol||"http")+"://mce_host"+n.toAbsPath(a,i[1])+i[2])}}e=e.replace(/@@/g,"(mce_at)");var l=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);l&&kw(Nw,((e,t)=>{var r=l[t];r&&(r=r.replace(/\(mce_at\)/g,"@@")),n[e]=r})),r&&(n.protocol||(n.protocol=r.protocol),n.userInfo||(n.userInfo=r.userInfo),n.port||"mce_host"!==n.host||(n.port=r.port),n.host&&"mce_host"!==n.host||(n.host=r.host),n.source=""),o&&(n.protocol="")}}setPath(e){var t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;var t=new Aw(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();var r=this.getURI(),n=t.getURI();if(r===n||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===n)return r;var o=this.toRelPath(this.path,t.path);return t.query&&(o+="?"+t.query),t.anchor&&(o+="#"+t.anchor),o}toAbsolute(e,t){var r=new Aw(e,{base_uri:this});return r.getURI(t&&this.isSameOrigin(r))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=this.protocol?Tw[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){var r,n,o=0,a="",i=e.substring(0,e.lastIndexOf("/")).split("/"),l=t.split("/");if(i.length>=l.length)for(r=0,n=i.length;r<n;r++)if(r>=l.length||i[r]!==l[r]){o=r+1;break}if(i.length<l.length)for(r=0,n=l.length;r<n;r++)if(r>=i.length||i[r]!==l[r]){o=r+1;break}if(1===o)return t;for(r=0,n=i.length-(o-1);r<n;r++)a+="../";for(r=o-1,n=l.length;r<n;r++)a+=r!==o-1?"/"+l[r]:l[r];return a}toAbsPath(e,t){var r=0,n=/\/$/.test(t)?"/":"",o=e.split("/"),a=t.split("/"),i=[];kw(o,(e=>{e&&i.push(e)}));for(var l=[],s=a.length-1;s>=0;s--)0!==a[s].length&&"."!==a[s]&&(".."!==a[s]?r>0?r--:l.push(a[s]):r++);var d,c=i.length-r;return 0!==(d=c<=0?fe(l).join("/"):i.slice(0,c).join("/")+"/"+fe(l).join("/")).indexOf("/")&&(d="/"+d),n&&d.lastIndexOf("/")!==d.length-1&&(d+=n),d}getURI(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.source&&!t||(e="",t||(this.protocol?e+=this.protocol+"://":e+="//",this.userInfo&&(e+=this.userInfo+"@"),this.host&&(e+=this.host),this.port&&(e+=":"+this.port)),this.path&&(e+=this.path),this.query&&(e+="?"+this.query),this.anchor&&(e+="#"+this.anchor),this.source=e),this.source}}var Ow,Bw=Ht.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Pw="data-mce-type",Lw=0,Mw=(e,t,r,n,o)=>{var a,i,l,s,d=t.validate,c=r.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(a=e.nodeValue)&&void 0!==a?a:"")&&(e.nodeValue=" "+e.nodeValue);var m=null!==(i=null==o?void 0:o.tagName)&&void 0!==i?i:e.nodeName.toLowerCase();if("html"!==n&&r.isValid(n))D(o)&&(o.allowedTags[m]=!0);else if(1===e.nodeType&&"body"!==m){var u=_r.fromDom(e),f=ur(u,Pw),g=cr(u,"data-mce-bogus");if(f||!S(g)){var p=r.getElementRule(m);if(!d||p){if(D(o)&&(o.allowedTags[m]=!0),d&&p&&!f){if(te(null!==(l=p.attributesForced)&&void 0!==l?l:[],(e=>{sr(u,e.name,"{$uid}"===e.value?"mce_"+Lw++:e.value)})),te(null!==(s=p.attributesDefault)&&void 0!==s?s:[],(e=>{ur(u,e.name)||sr(u,e.name,"{$uid}"===e.value?"mce_"+Lw++:e.value)})),p.attributesRequired&&!J(p.attributesRequired,(e=>ur(u,e))))return void Dn(u);if(p.removeEmptyAttrs&&(e=>{var t=e.dom.attributes;return null==t||0===t.length})(u))return void Dn(u);p.outputName&&p.outputName!==m&&el(u,p.outputName)}}else Pe(c,m)?Rn(u):Dn(u)}else"all"===g?Rn(u):Dn(u)}},Iw=(e,t,r,n,o,a)=>"html"!==r&&!Vo(n)||!(o in Bw&&Dw(e,a,n))&&(!e.validate||t.isValid(n,o)||Je(o,"data-")||Je(o,"aria-")),Fw=(e,t)=>e.hasAttribute(Pw)&&("id"===t||"class"===t||"style"===t),jw=(e,t)=>e in t.getBoolAttrs(),Uw=(e,t,r,n)=>{for(var o=e.attributes,a=o.length-1;a>=0;a--){var i=o[a],l=i.name,s=i.value;Iw(t,r,n,e.tagName.toLowerCase(),l,s)||Fw(e,l)?jw(l,r)&&e.setAttribute(l,l):e.removeAttribute(l)}},zw=(e,t,r)=>{var n=Ew();return n.addHook("uponSanitizeElement",((n,o)=>{Mw(n,e,t,r.track(n),o)})),n.addHook("uponSanitizeAttribute",((n,o)=>{((e,t,r,n,o)=>{var a=e.tagName.toLowerCase(),i=o.attrName,l=o.attrValue;o.keepAttr=Iw(t,r,n,a,i,l),o.keepAttr?(o.allowedAttributes[i]=!0,jw(i,r)&&(o.attrValue=i),t.allow_svg_data_urls&&Je(l,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):Fw(e,i)&&(o.forceKeepAttr=!0)})(n,e,t,r.current(),o)})),n},Hw=e=>{var t=Ko(e);if("svg"===t){var r=["type","href","role","arcrole","title","show","actuate","label","from","to"].map((e=>`xlink:${e}`)),n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:r};Ew().sanitize(e,n)}else{if("math"!==t)throw new Error("Not a namespace element");Ew().sanitize(e,{IN_PLACE:!0,USE_PROFILES:{mathMl:!0}})}},$w=(e,t)=>{var r,n,o=(r=$o(),{track:e=>(qo(e)?r.set(e):r.get().exists((t=>!t.contains(e)))&&r.clear(),n()),current:n=()=>r.get().map(Ko).getOr("html"),reset:()=>{r.clear()}});if(e.sanitize){var a=zw(e,t,o);return{sanitizeHtmlElement:(t,r)=>{a.sanitize(t,((e,t)=>{var r=u({},{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]});return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r})(e,r)),a.removed=[],o.reset()},sanitizeNamespaceElement:Hw}}return{sanitizeHtmlElement:(r,n)=>{for(var a,i=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);a=i.nextNode();){var l=o.track(a);Mw(a,e,t,l),so(a)&&Uw(a,e,t,l)}o.reset()},sanitizeNamespaceElement:P}},Ww=Ht.makeMap,Vw=Ht.extend,qw=(e,t,r,n)=>{for(var o=e.name,a=(o in r&&"title"!==o&&"textarea"!==o&&"noscript"!==o),i=t.childNodes,l=0,s=i.length;l<s;l++){var d=i[l],c=new jp(d.nodeName.toLowerCase(),d.nodeType);if(so(d)){for(var m=d.attributes,u=0,f=m.length;u<f;u++){var g=m[u];c.attr(g.name,g.value)}Vo(c.name)&&(n(d),c.value=d.innerHTML)}else bo(d)?(c.value=d.data,a&&(c.raw=!0)):(wo(d)||yo(d)||Co(d))&&(c.value=d.data);Vo(c.name)||qw(c,d,r,n),e.append(c)}},Kw=(e,t,r,n)=>{var o=r.validate,a=t.getNonEmptyElements(),i=t.getWhitespaceElements(),l=Vw(Ww("script,style,head,html,body,title,meta,param"),t.getBlockElements()),s=Ya(t),d=/[ \t\r\n]+/g,c=/^[ \t\r\n]+/,m=/[ \t\r\n]+$/,u=e=>{for(var t=e.parent;D(t);){if(t.name in i)return!0;t=t.parent}return!1},f=r=>r.name in l||sa(t,r)||Vo(r.name)&&r.parent===e,g=(t,r)=>{var o=r?t.prev:t.next;return!D(o)&&!R(t.parent)&&(f(t.parent)&&(t.parent!==e||!0===n.isRootContent))};return[e=>{var t;if(3===e.type&&!u(e)){var r=null!==(t=e.value)&&void 0!==t?t:"";r=r.replace(d," "),(((e,t)=>D(e)&&(t(e)||"br"===e.name))(e.prev,f)||g(e,!0))&&(r=r.replace(c,"")),0===r.length?e.remove():e.value=r}},e=>{var l;if(1===e.type){var d=t.getElementRule(e.name);if(o&&d){var c=Eb(t,a,i,e);d.paddInEmptyBlock&&c&&(e=>{for(var r=e;D(r);){if(r.name in s)return Eb(t,a,i,r);r=r.parent}return!1})(e)?Sb(r,n,f,e):d.removeEmpty&&c?f(e)?e.remove():e.unwrap():d.paddEmpty&&(c||(e=>{var t;return xb(e,"#text")&&(null===(t=null==e?void 0:e.firstChild)||void 0===t?void 0:t.value)===eo})(e))&&Sb(r,n,f,e)}}else if(3===e.type&&!u(e)){var p=null!==(l=e.value)&&void 0!==l?l:"";(e.next&&f(e.next)||g(e,!1))&&(p=p.replace(m,"")),0===p.length?e.remove():e.value=p}}]},Gw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qa(),r=uC(),n=uC(),o=u({validate:!0,root_name:"body",sanitize:!0},e),a=new DOMParser,i=$w(o,t),l=r.addFilter,d=r.getFilters,c=r.removeFilter,m=n.addFilter,f=n.getFilters,g=n.removeFilter,p=(e,r)=>{var n=S(r.attr(Pw)),o=1===r.type&&!Pe(e,r.name)&&!sa(t,r)&&!Vo(r.name);return 3===r.type||o&&!n},v={schema:t,addAttributeFilter:m,getAttributeFilters:f,removeAttributeFilter:g,addNodeFilter:l,getNodeFilters:d,removeNodeFilter:c,parse:function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=o.validate,c=null!==(r=n.context)&&void 0!==r?r:o.root_name,m=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"html",o="xhtml"===n?"application/xhtml+xml":"text/html",l=Pe(t.getSpecialElements(),r.toLowerCase()),s=l?`<${r}>${e}</${r}>`:e,d="xhtml"===n?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${s}</body></html>`:`<body>${s}</body>`,c=a.parseFromString(d,o).body;return i.sanitizeHtmlElement(c,o),l?c.firstChild:c}(e,c,n.format);ta(t,m);var u=new jp(c,11);qw(u,m,t.getSpecialElements(),i.sanitizeNamespaceElement),m.innerHTML="";var g=s(Kw(u,t,o,n),2),v=g[0],h=g[1],b=[],y=l?e=>((e,r)=>{Tb(t,e)&&r.push(e)})(e,b):P,C={nodes:{},attributes:{}},w=e=>yb(d(),f(),e,C);if(((e,t,r)=>{for(var n=[],o=function(r){var o=r;te(t,(e=>e(o))),R(o.parent)&&o!==e?r=i:n.push(o),a=r},a=e,i=a;a;i=a,a=a.walk())o(a);for(var l=function(){var e=n[s];te(r,(t=>t(e)))},s=n.length-1;s>=0;s--)l()})(u,[v,w],[h,y]),b.reverse(),l&&b.length>0)if(n.context){var S=ne(b,(e=>e.parent===u)),x=S.pass,E=S.fail;Nb(E,t,u,w),n.invalid=x.length>0}else Nb(b,t,u,w);var k=((e,t)=>{var r,n=null!==(r=t.forced_root_block)&&void 0!==r?r:e.forced_root_block;return!1===n?"":!0===n?"p":n})(o,n);return k&&("body"===u.name||n.isRootContent)&&((e,r)=>{var n=Vw(Ww("script,style,head,html,body,title,meta,param"),t.getBlockElements()),a=/^[ \t\r\n]+/,i=/[ \t\r\n]+$/,l=e.firstChild,s=null,d=e=>{var t,r;e&&((l=e.firstChild)&&3===l.type&&(l.value=null===(t=l.value)||void 0===t?void 0:t.replace(a,"")),(l=e.lastChild)&&3===l.type&&(l.value=null===(r=l.value)||void 0===r?void 0:r.replace(i,"")))};if(t.isValidChild(e.name,r.toLowerCase())){for(;l;){var c=l.next;p(n,l)?(s||((s=new jp(r,1)).attr(o.forced_root_block_attrs),e.insert(s,l)),s.append(l)):(d(s),s=null),l=c}d(s)}})(u,k),n.invalid||Cb(C,n),u}};return((e,t)=>{var r,n,o=e.schema;e.addAttributeFilter("href",(e=>{var r,n,o=e.length;if(!t.allow_unsafe_link_target)for(;o--;){var a=e[o];"a"===a.name&&"_blank"===a.attr("target")&&a.attr("rel",(n=void 0,n=(r=a.attr("rel"))?Ht.trim(r):"",/\b(noopener)\b/g.test(n)?n:(e=>e.split(" ").filter((e=>e.length>0)).concat(["noopener"]).sort().join(" "))(n)))}})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(e=>{for(var t,r,n,o,a=e.length;a--;)if("a"===(o=e[a]).name&&o.firstChild&&!o.attr("href"))for(n=o.parent,t=o.lastChild;t&&n;)r=t.prev,n.insert(t,o),t=r})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(e=>{for(var t,r,n=e.length;n--;)if((r=(t=e[n]).parent)&&("ul"===r.name||"ol"===r.name))if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var o=new jp("li",1);o.attr("style","list-style-type: none"),t.wrap(o)}}));var a=o.getValidClasses();t.validate&&a&&e.addAttributeFilter("class",(e=>{for(var t,r=e.length;r--;){for(var n=e[r],o=null!==(t=n.attr("class"))&&void 0!==t?t:"",i=Ht.explode(o," "),l="",s=0;s<i.length;s++){var d=i[s],c=!1,m=a["*"];m&&m[d]&&(c=!0),m=a[n.name],!c&&m&&m[d]&&(c=!0),c&&(l&&(l+=" "),l+=d)}l.length||(l=null),n.attr("class",l)}})),TC(e,t);var i=null!==(r=t.sandbox_iframes)&&void 0!==r&&r,l=Se(null!==(n=t.sandbox_iframes_exclusions)&&void 0!==n?n:[]);t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",(e=>te(e,(e=>{e.replace(NC({type:e.attr("type"),src:"object"===e.name?e.attr("data"):e.attr("src"),width:e.attr("width"),height:e.attr("height")},i,l))})))),i&&e.addNodeFilter("iframe",(e=>te(e,(e=>kC(e,l)))))})(v,o),((e,t,r)=>{t.inline_styles&&gC(e,t,r)})(v,o,t),v},Yw=(e,t,r)=>{var n=(e=>Vb(e)?av({validate:!1}).serialize(e):e)(e),o=t(n);if(o.isDefaultPrevented())return o;if(Vb(e)){if(o.content!==n){var a=Gw(u({validate:!1,forced_root_block:!1},r)).parse(o.content,{context:e.name});return u(u({},o),{},{content:a})}return u(u({},o),{},{content:e})}return o},Xw=e=>({sanitize:Hc(e),sandbox_iframes:Gc(e),sandbox_iframes_exclusions:Yc(e)}),Qw=(e,t)=>{if(t.no_events)return Hs.value(t);var r=((e,t)=>e.dispatch("BeforeGetContent",t))(e,t);return r.isDefaultPrevented()?Hs.error(Vf(e,u({content:""},r)).content):Hs.value(r)},Zw=(e,t,r)=>{if(r.no_events)return t;var n=Yw(t,(t=>Vf(e,u(u({},r),{},{content:t}))),Xw(e));return n.content},Jw=(e,t)=>{if(t.no_events)return Hs.value(t);var r=Yw(t.content,(r=>((e,t)=>e.dispatch("BeforeSetContent",t))(e,u(u({},t),{},{content:r}))),Xw(e));return r.isDefaultPrevented()?(Wf(e,r),Hs.error(void 0)):Hs.value(r)},eS=(e,t,r)=>{r.no_events||Wf(e,u(u({},r),{},{content:t}))},tS=(e,t,r)=>({element:e,width:t,rows:r}),rS=(e,t)=>({element:e,cells:t}),nS=(e,t)=>({x:e,y:t}),oS=(e,t)=>mr(e,t).bind(lt).getOr(1),aS=(e,t,r)=>{var n=e.rows;return!!(n[r]?n[r].cells:[])[t]},iS=e=>ie(e,((e,t)=>t.cells.length>e?t.cells.length:e),0),lS=(e,t)=>{for(var r=e.rows,n=0;n<r.length;n++)for(var o=r[n].cells,a=0;a<o.length;a++)if(Dr(o[a],t))return K.some(nS(a,n));return K.none()},sS=(e,t,r,n,o)=>{for(var a=[],i=e.rows,l=r;l<=o;l++){var s=i[l].cells,d=t<n?s.slice(t,n+1):s.slice(n,t+1);a.push(rS(i[l].element,d))}return a},dS=e=>{var t=tS(Zi(e),0,[]);return te(Kn(e,"tr"),((e,r)=>{te(Kn(e,"td,th"),((n,o)=>{((e,t,r,n,o)=>{for(var a=oS(o,"rowspan"),i=oS(o,"colspan"),l=e.rows,s=r;s<r+a;s++){l[s]||(l[s]=rS(Ji(n),[]));for(var d=t;d<t+i;d++)l[s].cells[d]=s===r&&d===t?o:Zi(o)}})(t,((e,t,r)=>{for(;aS(e,t,r);)t++;return t})(t,o,r),r,e,n)}))})),tS(t.element,iS(t.rows),t.rows)},cS=e=>((e,t)=>{var r=Zi(e.element),n=_r.fromTag("tbody");return Nn(n,t),kn(r,n),r})(e,(e=>ee(e.rows,(e=>{var t=ee(e.cells,(e=>{var t=Ji(e);return fr(t,"colspan"),fr(t,"rowspan"),t})),r=Zi(e.element);return Nn(r,t),r})))(e)),mS=(e,t,r)=>lS(e,t).bind((t=>lS(e,r).map((r=>((e,t,r)=>{var n=t.x,o=t.y,a=r.x,i=r.y,l=o<i?sS(e,n,o,a,i):sS(e,n,i,a,o);return tS(e.element,iS(l),l)})(e,t,r))))),uS=(e,t)=>se(e,(e=>"li"===Zt(e)&&Uu(e,t))).fold(I([]),(t=>(e=>se(e,(e=>"ul"===Zt(e)||"ol"===Zt(e))))(e).map((e=>{var t=_r.fromTag(Zt(e)),r=De(Cn(e),((e,t)=>Je(t,"list-style")));return vn(t,r),[_r.fromTag("li"),t]})).getOr([]))),fS=(e,t,r)=>{var n=_r.fromDom(t.commonAncestorContainer),o=Rv(n,e),a=oe(o,(e=>r.isWrapper(Zt(e)))),i=uS(o,t),l=a.concat(i.length?i:(e=>dl(e)?Lr(e).filter(sl).fold(I([]),(t=>[e,t])):sl(e)?[e]:[])(n));return ee(l,Zi)},gS=()=>vg([]),pS=(e,t,r)=>{return n=_r.fromDom(t.cloneContents()),o=fS(e,t,r),a=ie(o,((e,t)=>(kn(t,e),t)),n),o.length>0?vg([a]):a;var n,o,a},vS=(e,t)=>((e,t)=>sn(t,"table",U(Dr,e)))(e,t[0]).bind((e=>{var r=t[0],n=t[t.length-1],o=dS(e);return mS(o,r,n).map((e=>vg([cS(e)])))})).getOrThunk(gS),hS=(e,t,r)=>{var n=Lu(t,e);return n.length>0?vS(e,n):((e,t,r)=>t.length>0&&t[0].collapsed?gS():pS(e,t[0],r))(e,t,r)},bS=(e,t)=>t>=0&&t<e.length&&Au(e.charAt(t)),yS=e=>bl(e.innerText),CS=(e,t)=>{if("text"===t.format)return(e=>K.from(e.selection.getRng()).map((t=>{var r,n=K.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),a=(e=>e.map((e=>e.nodeName)).getOr("div").toLowerCase())(n),i=_r.fromDom(t.cloneContents());Jp(i),ev(i);var l=e.dom.add(o,a,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},i.dom),s=yS(l),d=bl(null!==(r=l.textContent)&&void 0!==r?r:"");if(e.dom.remove(l),bS(d,0)||bS(d,d.length-1)){var c=n.getOr(o),m=yS(c),u=m.indexOf(s);return-1===u?s:(bS(m,u-1)?" ":"")+s+(bS(m,u+s.length)?" ":"")}return s})).getOr(""))(e);var r=((e,t)=>{var r=e.selection.getRng(),n=e.dom.create("body"),o=e.selection.getSel(),a=Pp(e,Bu(o)),i=t.contextual?hS(_r.fromDom(e.getBody()),a,e.schema).dom:r.cloneContents();return i&&n.appendChild(i),e.selection.serializer.serialize(n,t)})(e,t);return"tree"===t.format?r:e.selection.isCollapsed()?"":r},wS=function(e,t){var r=((e,t)=>u(u({},e),{},{format:t,get:!0,selection:!0,getInner:!0}))(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);return Qw(e,r).fold(F,(t=>{var r=CS(e,t);return Zw(e,r,t)}))},SS=e=>so(e)?e.outerHTML:bo(e)?Oa.encodeRaw(e.data,!1):wo(e)?"\x3c!--"+e.data+"--\x3e":"",xS=(e,t,r)=>{var n=(e=>{var t,r=document.createElement("div"),n=document.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)n.appendChild(t);return n})(t);if(e.hasChildNodes()&&r<e.childNodes.length){var o=e.childNodes[r];e.insertBefore(n,o)}else e.appendChild(n)},ES=(e,t)=>{var r,n,o,a,i,l,s,d,c,m=ee(Ce(t.childNodes),SS);return((e,t)=>{var r=0;te(e,(e=>{0===e[0]?r++:1===e[0]?(xS(t,e[1],r),r++):2===e[0]&&((e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){var r=e.childNodes[t];e.removeChild(r)}})(t,r)}))})((n=e,o=(r=m).length+n.length+2,a=new Array(o),i=new Array(o),l=(e,t,o,a,i)=>{var s=d(e,t,o,a);if(null===s||s.start===t&&s.diag===t-a||s.end===e&&s.diag===e-o)for(var c=e,m=o;c<t||m<a;)c<t&&m<a&&r[c]===n[m]?(i.push([0,r[c]]),++c,++m):t-e>a-o?(i.push([2,r[c]]),++c):(i.push([1,n[m]]),++m);else{l(e,s.start,o,s.start-s.diag,i);for(var u=s.start;u<s.end;++u)i.push([0,r[u]]);l(s.end,t,s.end-s.diag,a,i)}},s=(e,t,o,a)=>{for(var i=e;i-t<a&&i<o&&r[i]===n[i-t];)++i;return((e,t,r)=>({start:e,end:t,diag:r}))(e,i,t)},d=(e,t,o,l)=>{var d=t-e,c=l-o;if(0===d||0===c)return null;var m,u,f,g,p,v=d-c,h=c+d,b=(h%2==0?h:h+1)/2;for(a[1+b]=e,i[1+b]=t+1,m=0;m<=b;++m){for(u=-m;u<=m;u+=2){for(f=u+b,u===-m||u!==m&&a[f-1]<a[f+1]?a[f]=a[f+1]:a[f]=a[f-1]+1,p=(g=a[f])-e+o-u;g<t&&p<l&&r[g]===n[p];)a[f]=++g,++p;if(v%2!=0&&v-m<=u&&u<=v+m&&i[f-v]<=a[f])return s(i[f-v],u+e-o,t,l)}for(u=v-m;u<=v+m;u+=2){for(f=u+b-v,u===v-m||u!==v+m&&i[f+1]<=i[f-1]?i[f]=i[f+1]-1:i[f]=i[f-1],p=(g=i[f]-1)-e+o-u;g>=e&&p>=o&&r[g]===n[p];)i[f]=g--,p--;if(v%2==0&&-m<=u&&u<=m&&i[f]<=a[f+v])return s(i[f],u+e-o,t,l)}}return null},c=[],l(0,r.length,0,n.length,c),c),t),t},kS=Ve((()=>document.implementation.createHTMLDocument("undo"))),_S=e=>{var t,r=e.serializer.getTempAttrs(),n=Zp(e.getBody(),r);return(e=>null!==e.querySelector("iframe"))(n)?(t=((e,t)=>oe(ee(Ce(e.childNodes),t?L(bl,SS):SS),(e=>e.length>0)))(n,!0),{type:"fragmented",fragments:t,content:"",bookmark:null,beforeBookmark:null}):{type:"complete",fragments:null,content:bl(n.innerHTML),bookmark:null,beforeBookmark:null}},NS=(e,t,r)=>{var n=r?t.beforeBookmark:t.bookmark;"fragmented"===t.type?ES(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!D(n)||!bu(n)||!n.isFakeCaret}),n&&(e.selection.moveToBookmark(n),e.selection.scrollIntoView())},TS=e=>"fragmented"===e.type?e.fragments.join(""):e.content,RS=e=>{var t=_r.fromTag("body",kS());return Bn(t,TS(e)),te(Kn(t,"*[data-mce-bogus]"),Dn),On(t)},DS=(e,t)=>!(!e||!t)&&(!!((e,t)=>TS(e)===TS(t))(e,t)||((e,t)=>RS(e)===RS(t))(e,t)),AS=e=>0===e.get(),OS=(e,t,r)=>{AS(r)&&(e.typing=t)},BS=(e,t)=>{e.typing&&(OS(e,!1,t),e.add())},PS=e=>({init:{bindEvents:P},undoManager:{beforeChange:(t,r)=>((e,t,r)=>{AS(t)&&r.set(js(e.selection))})(e,t,r),add:(t,r,n,o,a,i)=>((e,t,r,n,o,a,i)=>{var l=_S(e),s=Ht.extend(a||{},l);if(!AS(n)||e.removed)return null;var d=t.data[r.get()];if(e.dispatch("BeforeAddUndo",{level:s,lastLevel:d,originalEvent:i}).isDefaultPrevented())return null;if(d&&DS(d,s))return null;t.data[r.get()]&&o.get().each((e=>{t.data[r.get()].beforeBookmark=e}));var c=ac(e);if(c&&t.data.length>c){for(var m=0;m<t.data.length-1;m++)t.data[m]=t.data[m+1];t.data.length--,r.set(t.data.length)}s.bookmark=js(e.selection),r.get()<t.data.length-1&&(t.data.length=r.get()+1),t.data.push(s),r.set(t.data.length-1);var u={level:s,lastLevel:d,originalEvent:i};return r.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",u),e.dispatch("change",u)):e.dispatch("AddUndo",u),s})(e,t,r,n,o,a,i),undo:(t,r,n)=>((e,t,r,n)=>{var o;return t.typing&&(t.add(),t.typing=!1,OS(t,!1,r)),n.get()>0&&(n.set(n.get()-1),o=t.data[n.get()],NS(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o})(e,t,r,n),redo:(t,r)=>((e,t,r)=>{var n;return t.get()<r.length-1&&(t.set(t.get()+1),n=r[t.get()],NS(e,n,!1),e.setDirty(!0),e.dispatch("Redo",{level:n})),n})(e,t,r),clear:(t,r)=>((e,t,r)=>{t.data=[],r.set(0),t.typing=!1,e.dispatch("ClearUndos")})(e,t,r),reset:e=>(e=>{e.clear(),e.add()})(e),hasUndo:(t,r)=>((e,t,r)=>r.get()>0||t.typing&&t.data[0]&&!DS(_S(e),t.data[0]))(e,t,r),hasRedo:(e,t)=>((e,t)=>t.get()<e.data.length-1&&!e.typing)(e,t),transact:(e,t,r)=>((e,t,r)=>(BS(e,t),e.beforeChange(),e.ignore(r),e.add()))(e,t,r),ignore:(e,t)=>((e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}})(e,t),extra:(t,r,n,o)=>((e,t,r,n,o)=>{if(t.transact(n)){var a=t.data[r.get()].bookmark,i=t.data[r.get()-1];NS(e,i,!0),t.transact(o)&&(t.data[r.get()-1].beforeBookmark=a)}})(e,t,r,n,o)},formatter:{match:(t,r,n,o)=>ry(e,t,r,n,o),matchAll:(t,r)=>((e,t,r)=>{var n=[],o={},a=e.selection.getStart();return e.dom.getParent(a,(a=>{for(var i=0;i<t.length;i++){var l=t[i];!o[l]&&ty(e,a,l,r)&&(o[l]=!0,n.push(l))}}),e.dom.getRoot()),n})(e,t,r),matchNode:(t,r,n,o)=>ty(e,t,r,n,o),canApply:t=>((e,t)=>{var r=e.formatter.get(t),n=e.dom;if(r&&e.selection.isEditable())for(var o=e.selection.getStart(),a=af(n,o),i=r.length-1;i>=0;i--){var l=r[i];if(!cf(l))return!0;for(var s=a.length-1;s>=0;s--)if(n.is(a[s],l.selector))return!0}return!1})(e,t),closest:t=>ny(e,t),apply:(t,r,n)=>oC(e,t,r,n),remove:(t,r,n,o)=>Qy(e,t,r,n,o),toggle:(t,r,n)=>((e,t,r,n)=>{var o=e.formatter.get(t);o&&(!ry(e,t,r,n)||"toggle"in o[0]&&!o[0].toggle?oC(e,t,r,n):Qy(e,t,r,n))})(e,t,r,n),formatChanged:(t,r,n,o,a)=>cC(e,t,r,n,o,a)},editor:{getContent:t=>((e,t)=>K.from(e.getBody()).fold(I("tree"===t.format?new jp("body",11):""),(r=>rv(e,t,r))))(e,t),setContent:(t,r)=>Kb(e,t,r),insertContent:(t,r)=>Wb(e,t,r),addVisual:t=>((e,t)=>{var r=e.dom,n=D(t)?t:e.getBody();te(r.select("table,a",n),(t=>{switch(t.nodeName){case"TABLE":var n=gc(e),o=r.getAttrib(t,"border");o&&"0"!==o||!e.hasVisual?r.removeClass(t,n):r.addClass(t,n);break;case"A":if(!r.getAttrib(t,"href")){var a=r.getAttrib(t,"name")||t.id,i=pc(e);a&&e.hasVisual?r.addClass(t,i):r.removeClass(t,i)}}})),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})})(e,t)},selection:{getContent:(t,r)=>wS(e,t,r)},autocompleter:{addDecoration:P,removeDecoration:P},raw:{getModel:()=>K.none()}}),LS=e=>Pe(e.plugins,"rtc"),MS=e=>{var t=e;return(e=>Be(e.plugins,"rtc").bind((e=>K.from(e.setup))))(e).fold((()=>(t.rtcInstance=PS(e),K.none())),(e=>(t.rtcInstance=(()=>{var e=I(null),t=I("");return{init:{bindEvents:P},undoManager:{beforeChange:P,add:e,undo:e,redo:e,clear:P,reset:P,hasUndo:V,hasRedo:V,transact:e,ignore:P,extra:P},formatter:{match:V,matchAll:I([]),matchNode:I(void 0),canApply:V,closest:t,apply:P,remove:P,toggle:P,formatChanged:I({unbind:P})},editor:{getContent:t,setContent:I({content:"",html:""}),insertContent:I(""),addVisual:P},selection:{getContent:t},autocompleter:{addDecoration:P,removeDecoration:P},raw:{getModel:I(K.none())}}})(),K.some((()=>e().then((e=>(t.rtcInstance=(e=>{var t=e=>x(e)?e:{},r=e.init,n=e.undoManager,o=e.formatter,a=e.editor,i=e.selection,l=e.autocompleter,s=e.raw;return{init:{bindEvents:r.bindEvents},undoManager:{beforeChange:n.beforeChange,add:n.add,undo:n.undo,redo:n.redo,clear:n.clear,reset:n.reset,hasUndo:n.hasUndo,hasRedo:n.hasRedo,transact:(e,t,r)=>n.transact(r),ignore:(e,t)=>n.ignore(t),extra:(e,t,r,o)=>n.extra(r,o)},formatter:{match:(e,r,n,a)=>o.match(e,t(r),a),matchAll:o.matchAll,matchNode:o.matchNode,canApply:e=>o.canApply(e),closest:e=>o.closest(e),apply:(e,r,n)=>o.apply(e,t(r)),remove:(e,r,n,a)=>o.remove(e,t(r)),toggle:(e,r,n)=>o.toggle(e,t(r)),formatChanged:(e,t,r,n,a)=>o.formatChanged(t,r,n,a)},editor:{getContent:e=>a.getContent(e),setContent:(e,t)=>({content:a.setContent(e,t),html:""}),insertContent:(e,t)=>(a.insertContent(e),""),addVisual:a.addVisual},selection:{getContent:(e,t)=>i.getContent(t)},autocompleter:{addDecoration:l.addDecoration,removeDecoration:l.removeDecoration},raw:{getModel:()=>K.some(s.getRawModel())}}})(e),e.rtc.isRemote))))))))},IS=e=>e.rtcInstance?e.rtcInstance:PS(e),FS=e=>{var t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},jS=e=>FS(e).init.bindEvents(),US=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return((e,t,r)=>FS(e).selection.getContent(t,r))(e,t.format?t.format:"html",t)},zS=e=>0===e.dom.length?(Rn(e),K.none()):K.some(e),HS=(e,t,r,n,o)=>{e.bind((e=>((n?dh:sh)(e.dom,n?e.dom.length:0,o),t.filter(nr).map((t=>((e,t,r,n,o)=>{var a=e.dom,i=t.dom,l=n?a.length:i.length;n?(ch(a,i,o,!1,!n),r.setStart(i,l)):(ch(i,a,o,!1,!n),r.setEnd(i,l))})(e,t,r,n,o)))))).orThunk((()=>{var e=((e,t)=>e.filter((e=>jf.isBookmarkNode(e.dom))).bind(t?jr:Fr))(t,n).or(t).filter(nr);return e.map((e=>((e,t,r)=>{Lr(e).each((n=>{var o=e.dom;t&&Zv(n,hs(o,0),r)?sh(o,0,r):!t&&Jv(n,hs(o,o.length),r)&&dh(o,o.length,r)}))})(e,n,o)))}))},$S=function(e,t){var r=((e,t)=>u(u({format:"html"},e),{},{set:!0,selection:!0,content:t}))(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);Jw(e,r).each((t=>{var r=((e,t)=>{if("raw"!==t.format){var r=e.selection.getRng(),n=e.dom.getParent(r.commonAncestorContainer,e.dom.isBlock),o=n?{context:n.nodeName.toLowerCase()}:{},a=e.parser.parse(t.content,u(u({forced_root_block:!1},o),t));return av({validate:!1},e.schema).serialize(a)}return t.content})(e,t),n=e.selection.getRng();((e,t,r)=>{var n=K.from(t.firstChild).map(_r.fromDom),o=K.from(t.lastChild).map(_r.fromDom);e.deleteContents(),e.insertNode(t);var a=n.bind(Fr).filter(nr).bind(zS),i=o.bind(jr).filter(nr).bind(zS);HS(a,n,e,!0,r),HS(i,o,e,!1,r),e.collapse(!1)})(n,n.createContextualFragment(r),e.schema),e.selection.setRng(n),Jg(e,n),eS(e,r,t)}))},WS=(e,t,r)=>{if(Pe(e,t)){var n=oe(e[t],(e=>e!==r));0===n.length?delete e[t]:e[t]=n}},VS=(e,t)=>{var r,n,o=(t,r)=>se(r,(r=>e.is(r,t))),a=t=>e.getParents(t,void 0,e.getRoot());return{selectorChangedWithUnbind:(e,i)=>(r||(r={},n={},t.on("NodeChange",(e=>{var t=e.element,i=a(t),l={};ke(r,((e,t)=>{o(t,i).each((r=>{n[t]||(te(e,(e=>{e(!0,{node:r,selector:t,parents:i})})),n[t]=e),l[t]=e}))})),ke(n,((e,r)=>{l[r]||(delete n[r],te(e,(e=>{e(!1,{node:t,selector:r,parents:i})})))}))}))),r[e]||(r[e]=[]),r[e].push(i),o(e,a(t.selection.getStart())).each((()=>{n[e]=r[e]})),{unbind:()=>{WS(r,e,i),WS(n,e,i)}})}},qS=e=>!(!e||!e.ownerDocument)&&Ar(_r.fromDom(e.ownerDocument),_r.fromDom(e)),KS=(e,t,r,n)=>{var o,a,i=VS(e,n).selectorChangedWithUnbind,l=(e,t)=>$S(n,e,t),s=e=>{var t=c();t.collapse(!!e),m(t)},d=()=>t.getSelection?t.getSelection():t.document.selection,c=()=>{var r,i=(e,t,r)=>{try{return t.compareBoundaryPoints(e,r)}catch(e){return-1}},l=t.document;if(D(n.bookmark)&&!kp(n)){var s=mp(n);if(s.isSome())return s.map((e=>Pp(n,[e])[0])).getOr(l.createRange())}try{var c=d();c&&!lo(c.anchorNode)&&(r=c.rangeCount>0?c.getRangeAt(0):l.createRange(),r=Pp(n,[r])[0])}catch(e){}if(r||(r=l.createRange()),So(r.startContainer)&&r.collapsed){var m=e.getRoot();r.setStart(m,0),r.setEnd(m,0)}return o&&a&&(0===i(r.START_TO_START,r,o)&&0===i(r.END_TO_END,r,o)?r=a:(o=null,a=null)),r},m=(e,t)=>{if((e=>!!e&&qS(e.startContainer)&&qS(e.endContainer))(e)){var r=d();if(e=n.dispatch("SetSelectionRange",{range:e,forward:t}).range,r){a=e;try{r.removeAllRanges(),r.addRange(e)}catch(e){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),o=r.rangeCount>0?r.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&(null==r?void 0:r.setBaseAndExtent)&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){var i=e.startContainer.childNodes[e.startOffset];i&&"IMG"===i.nodeName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(i,0,i,1))}n.dispatch("AfterSetSelectionRange",{range:e,forward:t})}},u=()=>{var t=d(),r=null==t?void 0:t.anchorNode,n=null==t?void 0:t.focusNode;if(!t||!r||!n||lo(r)||lo(n))return!0;var o=e.createRng(),a=e.createRng();try{o.setStart(r,t.anchorOffset),o.collapse(!0),a.setStart(n,t.focusOffset),a.collapse(!0)}catch(e){return!0}return o.compareBoundaryPoints(o.START_TO_START,a)<=0},f={dom:e,win:t,serializer:r,editor:n,expand:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"word"};return m(Dg(e).expand(c(),t))},collapse:s,setCursorLocation:(t,r)=>{var o=e.createRng();D(t)&&D(r)?(o.setStart(t,r),o.setEnd(t,r),m(o),s(!1)):(zu(e,o,n.getBody(),!0),m(o))},getContent:e=>US(n,e),setContent:l,getBookmark:(e,t)=>g.getBookmark(e,t),moveToBookmark:e=>g.moveToBookmark(e),select:(t,r)=>(((e,t,r)=>K.from(t).bind((t=>K.from(t.parentNode).map((n=>{var o=e.nodeIndex(t),a=e.createRng();return a.setStart(n,o),a.setEnd(n,o+1),r&&(zu(e,a,t,!0),zu(e,a,t,!1)),a})))))(e,t,r).each(m),t),isCollapsed:()=>{var e=c(),t=d();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{var t=c(),r=n.getBody().querySelectorAll('[data-mce-selected="1"]');return r.length>0?ue(r,(t=>e.isEditable(t.parentElement))):Rp(e,t)},isForward:u,setNode:t=>(l(e.getOuterHTML(t)),t),getNode:()=>((e,t)=>{if(!t)return e;var r=t.startContainer,n=t.endContainer,o=t.startOffset,a=t.endOffset,i=t.commonAncestorContainer;t.collapsed||(r===n&&a-o<2&&r.hasChildNodes()&&(i=r.childNodes[o]),bo(r)&&bo(n)&&(r=r.length===o?Bp(r.nextSibling,!0):r.parentNode,n=0===a?Bp(n.previousSibling,!1):n.parentNode,r&&r===n&&(i=r)));var l=bo(i)?i.parentNode:i;return co(l)?l:e})(n.getBody(),c()),getSel:d,setRng:m,getRng:c,getStart:e=>Ap(n.getBody(),c(),e),getEnd:e=>Op(n.getBody(),c(),e),getSelectedBlocks:(t,r)=>((e,t,r,n)=>{var o=[],a=e.getRoot(),i=e.getParent(r||Ap(a,t,t.collapsed),e.isBlock),l=e.getParent(n||Op(a,t,t.collapsed),e.isBlock);if(i&&i!==a&&o.push(i),i&&l&&i!==l)for(var s,d=new Qn(i,a);(s=d.next())&&s!==l;)e.isBlock(s)&&o.push(s);return l&&i!==l&&l!==a&&o.push(l),o})(e,c(),t,r),normalize:()=>{var t=c(),r=d();if(!(Bu(r).length>1)&&Hu(n)){var o=Ng(e,t);return o.each((e=>{m(e,u())})),o.getOr(t)}return t},selectorChanged:(e,t)=>(i(e,t),f),selectorChangedWithUnbind:i,getScrollContainer:()=>{for(var t,r=e.getRoot();r&&"BODY"!==r.nodeName;){if(r.scrollHeight>r.clientHeight){t=r;break}r=r.parentNode}return t},scrollIntoView:(e,t)=>{D(e)?((e,t,r)=>{(e.inline?Xg:Zg)(e,t,r)})(n,e,t):Jg(n,c(),t)},placeCaretAt:(e,t)=>m(yg(e,t,n.getDoc())),getBoundingClientRect:()=>{var e=c();return e.collapsed?hs.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{t=o=a=null,p.destroy()}},g=jf(f),p=Jf(f,n);return f.bookmarkManager=g,f.controlSelection=p,f},GS=(e,t,r)=>{e.addAttributeFilter("data-mce-tabindex",((e,t)=>{for(var r=e.length;r--;){var n=e[r];n.attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}})),e.addAttributeFilter("src,href,style",((e,n)=>{for(var o="data-mce-"+n,a=t.url_converter,i=t.url_converter_scope,l=e.length;l--;){var s=e[l],d=s.attr(o);void 0!==d?(s.attr(n,d.length>0?d:null),s.attr(o,null)):(d=s.attr(n),"style"===n?d=r.serializeStyle(r.parseStyle(d),s.name):a&&(d=a.call(i,d,n,s.name)),s.attr(n,d.length>0?d:null))}})),e.addAttributeFilter("class",(e=>{for(var t=e.length;t--;){var r=e[t],n=r.attr("class");n&&(n=n.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",n.length>0?n:null))}})),e.addAttributeFilter("data-mce-type",((e,t,r)=>{for(var n=e.length;n--;){var o=e[n];if("bookmark"===o.attr("data-mce-type")&&!r.cleanup){var a=K.from(o.firstChild).exists((e=>{var t;return!hl(null!==(t=e.value)&&void 0!==t?t:"")}));a?o.unwrap():o.remove()}}})),e.addNodeFilter("script,style",((e,r)=>{for(var n,o=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),a=e.length;a--;){var i=e[a],l=i.firstChild,s=null!==(n=null==l?void 0:l.value)&&void 0!==n?n:"";if("script"===r){var d=i.attr("type");d&&i.attr("type","mce-no/type"===d?null:d.replace(/^mce\-/,"")),"xhtml"===t.element_format&&l&&s.length>0&&(l.value="// <![CDATA[\n"+o(s)+"\n// ]]>")}else"xhtml"===t.element_format&&l&&s.length>0&&(l.value="\x3c!--\n"+o(s)+"\n--\x3e")}})),e.addNodeFilter("#comment",(e=>{for(var n=e.length;n--;){var o=e[n],a=o.value;t.preserve_cdata&&0===(null==a?void 0:a.indexOf("[CDATA["))?(o.name="#cdata",o.type=4,o.value=r.decode(a.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==a?void 0:a.indexOf("mce:protected "))&&(o.name="#text",o.type=3,o.raw=!0,o.value=unescape(a).substr(14))}})),e.addNodeFilter("xml:namespace,input",((e,t)=>{for(var r=e.length;r--;){var n=e[r];7===n.type?n.remove():1===n.type&&("input"!==t||n.attr("type")||n.attr("type","text"))}})),e.addAttributeFilter("data-mce-type",(t=>{te(t,(t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",((e,t)=>{for(var r=e.length;r--;)e[r].attr(t,null)})),t.remove_trailing_brs&&((e,t,r)=>{t.addNodeFilter("br",((t,n,o)=>{var a=Ht.extend({},r.getBlockElements()),i=r.getNonEmptyElements(),l=r.getWhitespaceElements();a.body=1;for(var s=(e=>e.name in a||sa(r,e)),d=0,c=t.length;d<c;d++){var m=t[d],u=m.parent;if(u&&s(u)&&m===u.lastChild){for(var f=m.prev;f;){var g=f.name;if("span"!==g||"bookmark"!==f.attr("data-mce-type")){"br"===g&&(m=null);break}f=f.prev}if(m&&(m.remove(),Eb(r,i,l,u))){var p=r.getElementRule(u.name);p&&(p.removeEmpty?u.remove():p.paddEmpty&&Sb(e,o,s,u))}}else{for(var v=m;u&&u.firstChild===v&&u.lastChild===v&&(v=u,!a[u.name]);)u=u.parent;if(v===u){var h=new jp("#text",3);h.value=eo,m.replace(h)}}}}))})(t,e,e.schema)},YS=(e,t,r)=>((e,t)=>D(e)&&e.hasEventListeners("PreProcess")&&!t.no_events)(e,r)?((e,t,r)=>{var n,o=e.dom,a=t.cloneNode(!0),i=document.implementation;if(i.createHTMLDocument){var l=i.createHTMLDocument("");Ht.each("BODY"===a.nodeName?a.childNodes:[a],(e=>{l.body.appendChild(l.importNode(e,!0))})),a="BODY"!==a.nodeName?l.body.firstChild:l.body,n=o.doc,o.doc=l}return((e,t)=>{e.dispatch("PreProcess",t)})(e,u(u({},r),{},{node:a})),n&&(o.doc=n),a})(e,t,r):t,XS=(e,t,r)=>{-1===Ht.inArray(t,r)&&(e.addAttributeFilter(r,((e,t)=>{for(var r=e.length;r--;)e[r].attr(t,null)})),t.push(r))},QS=(e,t,r,n,o)=>{var a=((e,t,r)=>av(e,t).serialize(r))(t,r,n);return((e,t,r)=>{if(!t.no_events&&e){var n=((e,t)=>e.dispatch("PostProcess",t))(e,u(u({},t),{},{content:r}));return n.content}return r})(e,o,a)},ZS=(e,t)=>{var r=["data-mce-selected"],n=u({entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1},e),o=t&&t.dom?t.dom:_i.DOM,a=t&&t.schema?t.schema:Qa(n),i=Gw(n,a);GS(i,n,o);return{schema:a,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:function(e){var r=u({format:"html"},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),l=YS(t,e,r),s=((e,t,r)=>{var n=bl(r.getInner?t.innerHTML:e.getOuterHTML(t));return r.selection||ul(_r.fromDom(t))?n:Ht.trim(n)})(o,l,r),d=((e,t,r)=>{var n=r.selection?u({forced_root_block:!1},r):r,o=e.parse(t,n);return(e=>{var t=e=>"br"===(null==e?void 0:e.name),r=e.lastChild;if(t(r)){var n=r.prev;t(n)&&(r.remove(),n.remove())}})(o),o})(i,s,r);return"tree"===r.format?d:QS(t,n,a,d,r)},addRules:a.addValidElements,setRules:a.setValidElements,addTempAttr:U(XS,i,r),getTempAttrs:I(r),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter}},JS=(e,t)=>{var r=ZS(e,t);return{schema:r.schema,addNodeFilter:r.addNodeFilter,addAttributeFilter:r.addAttributeFilter,serialize:r.serialize,addRules:r.addRules,setRules:r.setRules,addTempAttr:r.addTempAttr,getTempAttrs:r.getTempAttrs,getNodeFilters:r.getNodeFilters,getAttributeFilters:r.getAttributeFilters,removeNodeFilter:r.removeNodeFilter,removeAttributeFilter:r.removeAttributeFilter}},ex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=((e,t)=>u(u({},e),{},{format:t,get:!0,getInner:!0}))(t,t.format?t.format:"html");return Qw(e,r).fold(F,(t=>{var r=((e,t)=>IS(e).editor.getContent(t))(e,t);return Zw(e,r,t)}))},tx=function(e,t){var r=((e,t)=>u(u({format:"html"},e),{},{set:!0,content:t}))(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);return Jw(e,r).map((t=>{var r=((e,t,r)=>IS(e).editor.setContent(t,r))(e,t.content,t);return eS(e,r.html,t),r.content})).getOr(t)},rx="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),nx=[],ox="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),ax=[],ix=(e,t)=>{var r=oe(t,(t=>Pe(e,t)));return ve(r)},lx=e=>{var t=ix(e,rx),r=e.forced_root_block;return!1!==r&&""!==r||t.push("forced_root_block (false only)"),ve(t)},sx=e=>ix(e,nx),dx=(e,t)=>{var r=Ht.makeMap(e.plugins," "),n=oe(t,(e=>Pe(r,e)));return ve(n)},cx=e=>dx(e,ox),mx=e=>dx(e,ax.map((e=>e.name))),ux=e=>se(ax,(t=>t.name===e)).fold((()=>e),(t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e)),fx=(e,t)=>{((e,t)=>{var r=lx(e),n=cx(t),o=n.length>0,a=r.length>0,i="mobile"===t.theme;if(o||a||i){var l="\n- ",s=i?`\n\nThemes:${l}mobile`:"",d=o?`\n\nPlugins:${l}${n.join(l)}`:"",c=a?`\n\nOptions:${l}${r.join(l)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+s+d+c)}})(e,t),((e,t)=>{var r=sx(e),n=mx(t),o=n.length>0,a=r.length>0;if(o||a){var i="\n- ",l=o?`\n\nPlugins:${i}${n.map(ux).join(i)}`:"",s=a?`\n\nOptions:${i}${r.join(i)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+l+s)}})(e,t)},gx=_i.DOM,px=e=>K.from(e).each((e=>e.destroy())),vx=e=>{if(!e.removed){var t=e._selectionOverrides,r=e.editorUpload,n=e.getBody(),o=e.getElement();n&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&D(null==o?void 0:o.nextSibling)&&gx.remove(o.nextSibling),(e=>{e.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&n&&(e=>{gx.setStyle(e.id,"display",e.orgDisplay)})(e),(e=>{e.dispatch("detach")})(e),gx.remove(e.getContainer()),px(t),px(r),e.destroy()}},hx=(e,t)=>{var r=e.selection,n=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),px(r),px(n)),(e=>{var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),gx.unbind(t,"submit reset",e.formEventDelegate))})(e),(e=>{var t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;var r=e.selection;if(r){var n=r.dom;t.selection=r.win=r.dom=n.doc=null}})(e),e.destroyed=!0):e.remove())},bx=(()=>{var e={};return{add:(t,r)=>{e[t]=r},get:t=>e[t]?e[t]:{icons:{}},has:t=>Pe(e,t)}})(),yx=Bi.ModelManager,Cx=(e,t)=>t.dom[e],wx=(e,t)=>parseInt(hn(t,e),10),Sx=U(Cx,"clientWidth"),xx=U(Cx,"clientHeight"),Ex=U(wx,"margin-top"),kx=U(wx,"margin-left"),_x=(e,t,r)=>{var n,o=_r.fromDom(e.getBody()),a=e.inline?o:(n=o,_r.fromDom(Br(n).dom.documentElement)),i=((e,t,r,n)=>{var o=(e=>e.dom.getBoundingClientRect())(t);return{x:r-(e?o.left+t.dom.clientLeft+kx(t):0),y:n-(e?o.top+t.dom.clientTop+Ex(t):0)}})(e.inline,a,t,r);return((e,t,r)=>{var n=Sx(e),o=xx(e);return t>=0&&r>=0&&t<=n&&r<=o})(a,i.x,i.y)},Nx=e=>{var t,r=e.inline?e.getBody():e.getContentAreaContainer();return(t=r,K.from(t).map(_r.fromDom)).map(tn).getOr(!1)},Tx=e=>{var t=[],r=()=>{var t,r=e.theme;return r&&r.getNotificationManagerImpl?r.getNotificationManagerImpl():{open:t=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,getArgs:t}},n=()=>K.from(t[0]),o=()=>{n().each((e=>{e.reposition()}))},a=e=>{de(t,(t=>t===e)).each((e=>{t.splice(e,1)}))},i=function(n){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.removed||!Nx(e)?{}:(i&&e.dispatch("BeforeOpenNotification",{notification:n}),se(t,(e=>{return t=r().getArgs(e),o=n,!(t.type!==o.type||t.text!==o.text||t.progressBar||t.timeout||o.progressBar||o.timeout);var t,o})).getOrThunk((()=>{e.editorManager.setActive(e);var i=r().open(n,(()=>{a(i)}),(()=>_p(e)));return(e=>{t.push(e)})(i),o(),e.dispatch("OpenNotification",{notification:u({},i)}),i})))},l=I(t);return(e=>{e.on("SkinLoaded",(()=>{var t=$d(e);t&&i({text:t,type:"warning",timeout:0},!1),o()})),e.on("show ResizeEditor NodeChange",(()=>{requestAnimationFrame(o)})),e.on("remove",(()=>{te(t.slice(),(e=>{r().close(e)}))})),e.addShortcut("alt+F12","Focus to notification",(()=>n().map((e=>_r.fromDom(e.getEl()))).each((e=>ep(e)))))})(e),{open:i,close:()=>{n().each((e=>{r().close(e),a(e),o()}))},getNotifications:l}},Rx=Bi.PluginManager,Dx=Bi.ThemeManager,Ax=e=>{var t=[],r=()=>{var t,r=e.theme;return r&&r.getWindowManagerImpl?r.getWindowManagerImpl():{open:t=()=>{throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:t,alert:t,confirm:t,close:t}},n=(e,t)=>function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t?t.apply(e,n):void 0},o=r=>{t.push(r),(t=>{e.dispatch("OpenWindow",{dialog:t})})(r)},a=r=>{(t=>{e.dispatch("CloseWindow",{dialog:t})})(r),0===(t=oe(t,(e=>e!==r))).length&&e.focus()},i=t=>{e.editorManager.setActive(e),cp(e),e.ui.show();var r=t();return o(r),r};return e.on("remove",(()=>{te(t,(e=>{r().close(e)}))})),{open:(e,t)=>i((()=>r().open(e,t,a))),openUrl:e=>i((()=>r().openUrl(e,a))),alert:(e,t,o)=>{var a=r();a.alert(e,n(o||a,t))},confirm:(e,t,o)=>{var a=r();a.confirm(e,n(o||a,t))},close:()=>{K.from(t[t.length-1]).each((e=>{r().close(e),a(e)}))}}},Ox=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Bx=(e,t)=>{e._skinLoaded?Ox(e,t):e.on("SkinLoaded",(()=>{Ox(e,t)}))},Px=(e,t,r)=>{zf(e,t,{message:r}),console.error(r)},Lx=(e,t,r)=>r?`Failed to load ${e}: ${r} from url ${t}`:`Failed to load ${e} url: ${t}`,Mx=function(e){var t=window.console;if(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];t.error?t.error(e,...n):t.log(e,...n)}},Ix=e=>"content/"+e+"/content.css",Fx=(e,t)=>{var r=e.editorManager.baseURL+"/skins/content",n=`content${e.editorManager.suffix}.css`;return ee(t,(t=>(e=>tinymce.Resource.has(Ix(e)))(t)?t:(e=>/^[a-z0-9\-]+$/i.test(e))(t)&&!e.inline?`${r}/${t}/${n}`:e.documentBaseURI.toAbsolute(t)))},jx=e=>{e.contentCSS=e.contentCSS.concat((e=>Fx(e,Pd(e)))(e),(e=>Fx(e,Md(e)))(e))},Ux=(e,t)=>{var r={};return{findAll:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q,a=oe((e=>e?Ce(e.getElementsByTagName("img")):[])(n),(t=>{var r=t.src;return!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!r||r===jt.transparentSrc)&&(Je(r,"blob:")?!e.isUploaded(r)&&o(t):!!Je(r,"data:")&&o(t))))})),i=ee(a,(e=>{var n=e.src;if(Pe(r,n))return r[n].then((t=>S(t)?t:{image:e,blobInfo:t.blobInfo}));var o=((e,t)=>{var r=()=>Promise.reject("Invalid data URI");if(Je(t,"blob:")){var n=e.getByUri(t);return D(n)?Promise.resolve(n):hC(t).then((t=>bC(t).then((n=>CC(n,!1,(r=>K.some(wC(e,t,r)))).getOrThunk(r)))))}return Je(t,"data:")?SC(e,t).fold(r,(e=>Promise.resolve(e))):Promise.reject("Unknown image data format")})(t,n).then((t=>(delete r[n],{image:e,blobInfo:t}))).catch((e=>(delete r[n],e)));return r[n]=o,o}));return Promise.all(i)}}},zx=()=>{var e={},t=(e,t)=>({status:e,resultUri:t}),r=t=>t in e;return{hasBlobUri:r,getResultUri:t=>{var r=e[t];return r?r.resultUri:null},isPending:t=>!!r(t)&&1===e[t].status,isUploaded:t=>!!r(t)&&2===e[t].status,markPending:r=>{e[r]=t(1,null)},markUploaded:(r,n)=>{e[r]=t(2,n)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}},Hx=0,$x=e=>{return e+Hx+++(t=()=>Math.round(4294967295*Math.random()).toString(36),"s"+(new Date).getTime().toString(36)+t()+t()+t());var t},Wx=(e,t)=>{var r={},n=(e,r)=>new Promise(((n,o)=>{var a=new XMLHttpRequest;a.open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=e=>{r(e.loaded/e.total*100)},a.onerror=()=>{o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=()=>{if(a.status<200||a.status>=300)o("HTTP Error: "+a.status);else{var e,r,i=JSON.parse(a.responseText);if(i&&S(i.location))n((e=t.basePath,r=i.location,e?e.replace(/\/$/,"")+"/"+r.replace(/^\//,""):r));else o("Invalid JSON: "+a.responseText)}};var i=new FormData;i.append("file",e.blob(),e.filename()),a.send(i)})),o=A(t.handler)?t.handler:n,a=(e,t)=>({url:t,blobInfo:e,status:!0}),i=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),l=(e,t)=>{Ht.each(r[e],(e=>{e(t)})),delete r[e]},s=(t,r,n)=>(e.markPending(t.blobUri()),new Promise((o=>{var s;try{var d=()=>{s&&(s.close(),P)};r(t,(e=>{e<0||e>100||K.from(s).orThunk((()=>K.from(n).map($))).each((t=>{s=t,t.progressBar.value(e)}))})).then((r=>{d(),e.markUploaded(t.blobUri(),r),l(t.blobUri(),a(t,r)),o(a(t,r))}),(r=>{(r=>{d(),e.removeFailed(t.blobUri()),l(t.blobUri(),i(t,r)),o(i(t,r))})(S(r)?{message:r}:r)}))}catch(e){o(i(t,e))}}))),d=(t,n)=>(t=Ht.grep(t,(t=>!e.isUploaded(t.blobUri()))),Promise.all(Ht.map(t,(t=>e.isPending(t.blobUri())?(e=>{var t=e.blobUri();return new Promise((e=>{r[t]=r[t]||[],r[t].push(e)}))})(t):s(t,o,n)))));return{upload:(e,r)=>t.url||o!==n?d(e,r):new Promise((e=>{e([])}))}},Vx=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),qx=(e,t)=>Wx(t,{url:Ed(e),basePath:kd(e),credentials:_d(e),handler:Nd(e)}),Kx=e=>t=>{((e,t)=>e.dom.isEmpty(t.dom)&&D(e.schema.getTextBlockElements()[Zt(t)]))(e,t)&&kn(t,_r.fromHtml('<br data-mce-bogus="1" />'))},Gx=e=>{var t,r,n=(()=>{var e=[],t=e=>{if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var t,r=e.id||$x("blobid"),n=e.name||r,o=e.blob;return{id:I(r),name:I(n),filename:I(e.filename||n+"."+(t=o.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[t.toLowerCase()]||"dat")),blob:I(o),base64:I(e.base64),blobUri:I(e.blobUri||URL.createObjectURL(o)),uri:I(e.uri)}},r=t=>se(e,t).getOrUndefined(),n=e=>r((t=>t.id()===e));return{create:(e,r,n,o,a)=>{if(S(e))return t({id:e,name:o,filename:a,blob:r,base64:n});if(x(e))return t(e);throw new Error("Unknown input type")},add:t=>{n(t.id())||e.push(t)},get:n,getByUri:e=>r((t=>t.blobUri()===e)),getByData:(e,t)=>r((r=>r.base64()===e&&r.blob().type===t)),findFirst:r,removeByUri:t=>{e=oe(e,(e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)))},destroy:()=>{te(e,(e=>{URL.revokeObjectURL(e.blobUri())})),e=[]}}})(),o=zx(),a=[],i=t=>r=>e.selection?t(r):[],l=(e,t,r)=>{var n=0;do{-1!==(n=e.indexOf(t,n))&&(e=e.substring(0,n)+r+e.substr(n+t.length),n+=r.length-t.length+1)}while(-1!==n);return e},s=(e,t,r)=>{var n=`src="${r}"${r===jt.transparentSrc?' data-mce-placeholder="1"':""}`;return e=l(e,`src="${t}"`,n),e=l(e,'data-mce-src="'+t+'"','data-mce-src="'+r+'"')},d=(t,r)=>{te(e.undoManager.data,(e=>{"fragmented"===e.type?e.fragments=ee(e.fragments,(e=>s(e,t,r))):e.content=s(e.content,t,r)}))},c=()=>(t||(t=qx(e,o)),f().then(i((r=>{var o=ee(r,(e=>e.blobInfo));return t.upload(o,Vx(e)).then(i((t=>{var o=[],a=!1,i=ee(t,((t,i)=>{var l=r[i],s=l.blobInfo,c=l.image,m=!1;return t.status&&wd(e)?(t.url&&!Ze(c.src,t.url)&&(a=!0),n.removeByUri(c.src),LS(e)||((t,r)=>{var n,o=e.convertURL(r,"src");d(t.src,r),dr(_r.fromDom(t),{src:Cd(e)?(n=r,n+(-1===n.indexOf("?")?"?":"&")+(new Date).getTime()):r,"data-mce-src":o})})(c,t.url)):t.error&&(t.error.remove&&(d(c.src,jt.transparentSrc),o.push(c),m=!0),((e,t)=>{Bx(e,Oi.translate(["Failed to upload image: {0}",t]))})(e,t.error.message)),{element:c,status:t.status,uploadUri:t.url,blobInfo:s,removed:m}}));return o.length>0&&!LS(e)?e.undoManager.transact((()=>{te(An(o),(t=>{var r=Lr(t);Rn(t),r.each(Kx(e)),n.removeByUri(t.dom.src)}))})):a&&e.undoManager.dispatchChange(),i})))})))),m=()=>yd(e)?c():Promise.resolve([]),u=e=>ue(a,(t=>t(e))),f=()=>(r||(r=Ux(o,n)),r.findAll(e.getBody(),u).then(i((t=>{var r=oe(t,(t=>S(t)?(Bx(e,t),!1):"blob"!==t.uriType));return LS(e)||te(r,(e=>{d(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),r})))),g=t=>t.replace(/src="(blob:[^"]+)"/g,((t,r)=>{var a=o.getResultUri(r);if(a)return'src="'+a+'"';var i=n.getByUri(r);return i||(i=ie(e.editorManager.get(),((e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r)),void 0)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':t}));return e.on("SetContent",(()=>{yd(e)?m():f()})),e.on("RawSaveContent",(e=>{e.content=g(e.content)})),e.on("GetContent",(e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=g(e.content))})),e.on("PostRender",(()=>{e.parser.addNodeFilter("img",(e=>{te(e,(e=>{var t=e.attr("src");if(t&&!n.getByUri(t)){var r=o.getResultUri(t);r&&e.attr("src",r)}}))}))})),{blobCache:n,addFilter:e=>{a.push(e)},uploadImages:c,uploadImagesAuto:m,scanForImages:f,destroy:()=>{n.destroy(),o.destroy(),r=t=null}}},Yx={remove_similar:!0,inherit:!1},Xx=u({selector:"td,th"},Yx),Qx={tablecellbackgroundcolor:u({styles:{backgroundColor:"%value"}},Xx),tablecellverticalalign:u({styles:{"vertical-align":"%value"}},Xx),tablecellbordercolor:u({styles:{borderColor:"%value"}},Xx),tablecellclass:u({classes:["%value"]},Xx),tableclass:u({selector:"table",classes:["%value"]},Yx),tablecellborderstyle:u({styles:{borderStyle:"%value"}},Xx),tablecellborderwidth:u({styles:{borderWidth:"%value"}},Xx)},Zx=I(Qx),Jx=e=>{var t={},r=(e,n)=>{e&&(S(e)?(k(n)||(n=[n]),te(n,(e=>{T(e.deep)&&(e.deep=!cf(e)),T(e.split)&&(e.split=!cf(e)||mf(e)),T(e.remove)&&cf(e)&&!mf(e)&&(e.remove="none"),cf(e)&&mf(e)&&(e.mixed=!0,e.block_expand=!0),S(e.classes)&&(e.classes=e.classes.split(/\s+/))})),t[e]=n):ke(e,((e,t)=>{r(t,e)})))};return r((e=>{var t,r,n,o=e.dom,a=e.schema.type,i={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{o.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{o.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(t={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},n={inline:"s",remove:"all",preserve_attributes:["class","style"]},"html4"!==a?[n,t,r]:[t,n,r]),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,r)=>so(e)&&e.hasAttribute("href"),onformat:(e,t,r)=>{Ht.each(r,((t,r)=>{o.setAttrib(e,r,t)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ht.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),(e=>{i[e]={block:e,remove:"all"}})),i})(e)),r(Zx()),r(Yd(e)),{get:e=>D(e)?t[e]:t,has:e=>Pe(t,e),register:r,unregister:e=>(e&&t[e]&&delete t[e],t)}},eE=Ht.each,tE=_i.DOM,rE=e=>D(e)&&x(e),nE=(e,t)=>{var r=t&&t.schema||Qa({}),n=e=>{var t=S(e)?{name:e,classes:[],attrs:{}}:e,r=tE.create(t.name);return((e,t)=>{t.classes.length>0&&tE.addClass(e,t.classes.join(" ")),tE.setAttribs(e,t.attrs)})(r,t),r},o=(e,t,a)=>{var i,l=t[0],s=rE(l)?l.name:void 0,d=((e,t)=>{var n=r.getElementRule(e.nodeName.toLowerCase()),o=null==n?void 0:n.parentsRequired;return!(!o||!o.length)&&(t&&Z(o,t)?t:o[0])})(e,s);if(d)s===d?(i=l,t=t.slice(1)):i=d;else if(l)i=l,t=t.slice(1);else if(!a)return e;var c=i?n(i):tE.create("div");c.appendChild(e),a&&Ht.each(a,(t=>{var r=n(t);c.insertBefore(r,e)}));var m=rE(i)?i.siblings:void 0;return o(c,t,m)},a=tE.create("div");if(e.length>0){var i=e[0],l=n(i),s=rE(i)?i.siblings:void 0;a.appendChild(o(l,e.slice(1),s))}return a},oE=e=>{var t="div",r={name:t,classes:[],attrs:{},selector:e=Ht.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,((e,t,n,o,a)=>{switch(t){case"#":r.attrs.id=n;break;case".":r.classes.push(n);break;case":":-1!==Ht.inArray("checked disabled enabled read-only required".split(" "),n)&&(r.attrs[n]=n)}if("["===o){var i=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);i&&(r.attrs[i[1]]=i[2])}return""}))),r.name=t||"div",r},aE=(e,t)=>{var r="",n=Xd(e);if(""===n)return"";var o=e=>S(e)?e.replace(/%(\w+)/g,""):"",a=(t,r)=>tE.getStyle(null!=r?r:e.getBody(),t,!0);if(S(t)){var i=e.formatter.get(t);if(!i)return"";t=i[0]}if("preview"in t){var l=t.preview;if(!1===l)return"";n=l||n}var s,d,c=t.block||t.inline||"span",m=(d=t.selector,S(d)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ht.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),(e=>{var t=Ht.map(e.split(/(?:~\+|~|\+)/),oE),r=t.pop();return t.length&&(r.siblings=t),r})).reverse()):[]);m.length>0?(m[0].name||(m[0].name=c),c=t.selector,s=nE(m,e)):s=nE([c],e);var u=tE.select(c,s)[0]||s.firstChild;eE(t.styles,((e,t)=>{var r=o(e);r&&tE.setStyle(u,t,r)})),eE(t.attributes,((e,t)=>{var r=o(e);r&&tE.setAttrib(u,t,r)})),eE(t.classes,(e=>{var t=o(e);tE.hasClass(u,t)||tE.addClass(u,t)})),e.dispatch("PreviewFormats"),tE.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s);var f=a("fontSize"),g=/px$/.test(f)?parseInt(f,10):0;return eE(n.split(" "),(e=>{var t=a(e,u);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=a(e),"#ffffff"===ai(t).toLowerCase())||"color"===e&&"#000000"===ai(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===g)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*g+"px"}"border"===e&&t&&(r+="padding:0 2px;"),r+=e+":"+t+";"}})),e.dispatch("AfterPreviewFormats"),tE.remove(s),r},iE=e=>{var t=Jx(e),r=Ho({});return(e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),fy(e),LS(e)||((e,t)=>{e.set({}),t.on("NodeChange",(r=>{dC(t,r.element,e.get())})),t.on("FormatApply FormatRemove",(r=>{var n=K.from(r.node).map((e=>Vu(e)?e:e.startContainer)).bind((e=>so(e)?K.some(e):K.from(e.parentElement))).getOrThunk((()=>iC(t)));dC(t,n,e.get())}))})(r,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,r,n)=>{((e,t,r,n)=>{FS(e).formatter.apply(t,r,n)})(e,t,r,n)},remove:(t,r,n,o)=>{((e,t,r,n,o)=>{FS(e).formatter.remove(t,r,n,o)})(e,t,r,n,o)},toggle:(t,r,n)=>{((e,t,r,n)=>{FS(e).formatter.toggle(t,r,n)})(e,t,r,n)},match:(t,r,n,o)=>((e,t,r,n,o)=>FS(e).formatter.match(t,r,n,o))(e,t,r,n,o),closest:t=>((e,t)=>FS(e).formatter.closest(t))(e,t),matchAll:(t,r)=>((e,t,r)=>FS(e).formatter.matchAll(t,r))(e,t,r),matchNode:(t,r,n,o)=>((e,t,r,n,o)=>FS(e).formatter.matchNode(t,r,n,o))(e,t,r,n,o),canApply:t=>((e,t)=>FS(e).formatter.canApply(t))(e,t),formatChanged:(t,n,o,a)=>((e,t,r,n,o,a)=>FS(e).formatter.formatChanged(t,r,n,o,a))(e,r,t,n,o,a),getCssText:U(aE,e)}},lE=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},sE=e=>{var t=$o(),r=Ho(0),n=Ho(0),o={data:[],typing:!1,beforeChange:()=>{((e,t,r)=>{FS(e).undoManager.beforeChange(t,r)})(e,r,t)},add:(a,i)=>((e,t,r,n,o,a,i)=>FS(e).undoManager.add(t,r,n,o,a,i))(e,o,n,r,t,a,i),dispatchChange:()=>{e.setDirty(!0);var t=_S(e);t.bookmark=js(e.selection),e.dispatch("change",{level:t,lastLevel:he(o.data,n.get()).getOrUndefined()})},undo:()=>((e,t,r,n)=>FS(e).undoManager.undo(t,r,n))(e,o,r,n),redo:()=>((e,t,r)=>FS(e).undoManager.redo(t,r))(e,n,o.data),clear:()=>{((e,t,r)=>{FS(e).undoManager.clear(t,r)})(e,o,n)},reset:()=>{((e,t)=>{FS(e).undoManager.reset(t)})(e,o)},hasUndo:()=>((e,t,r)=>FS(e).undoManager.hasUndo(t,r))(e,o,n),hasRedo:()=>((e,t,r)=>FS(e).undoManager.hasRedo(t,r))(e,o,n),transact:t=>((e,t,r,n)=>FS(e).undoManager.transact(t,r,n))(e,o,r,t),ignore:t=>{((e,t,r)=>{FS(e).undoManager.ignore(t,r)})(e,r,t)},extra:(t,r)=>{((e,t,r,n,o)=>{FS(e).undoManager.extra(t,r,n,o)})(e,o,n,t,r)}};return LS(e)||((e,t,r)=>{var n=Ho(!1),o=e=>{OS(t,!1,r),t.add({},e)};e.on("init",(()=>{t.add()})),e.on("BeforeExecCommand",(e=>{var n=e.command;lE(n)||(BS(t,r),t.beforeChange())})),e.on("ExecCommand",(e=>{var t=e.command;lE(t)||o(e)})),e.on("ObjectResizeStart cut",(()=>{t.beforeChange()})),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",(r=>{var a=r.keyCode;if(!r.isDefaultPrevented()){var i=jt.os.isMacOS()&&"Meta"===r.key;(a>=33&&a<=36||a>=37&&a<=40||45===a||r.ctrlKey||i)&&(o(),e.nodeChanged()),46!==a&&8!==a||e.nodeChanged(),n.get()&&t.typing&&!DS(_S(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),n.set(!1),e.nodeChanged())}})),e.on("keydown",(e=>{var a=e.keyCode;if(!e.isDefaultPrevented())if(a>=33&&a<=36||a>=37&&a<=40||45===a)t.typing&&o(e);else{var i=e.ctrlKey&&!e.altKey||e.metaKey;if((a<16||a>20)&&224!==a&&91!==a&&!t.typing&&!i)return t.beforeChange(),OS(t,!0,r),t.add({},e),void n.set(!0);(jt.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&t.beforeChange()}})),e.on("mousedown",(e=>{t.typing&&o(e)})),e.on("input",(e=>{var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||(e=>"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)(e))&&o(e)})),e.on("AddUndo Undo Redo ClearUndos",(t=>{t.isDefaultPrevented()||e.nodeChanged()}))})(e,o,r),(e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")})(e),o},dE=[9,27,Gf.HOME,Gf.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Gf.DOWN,Gf.UP,Gf.LEFT,Gf.RIGHT].concat(jt.browser.isFirefox()?[224]:[]),cE="data-mce-placeholder",mE=e=>"keydown"===e.type||"keyup"===e.type,uE=e=>{var t=e.keyCode;return t===Gf.BACKSPACE||t===Gf.DELETE},fE=e=>{var t,r=e.dom,n=ud(e),o=null!==(t=zd(e))&&void 0!==t?t:"",a=(t,i)=>{if(!(e=>{if(mE(e)){var t=e.keyCode;return!uE(e)&&(Gf.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||Z(dE,t))}return!1})(t)){var l=e.getBody(),s=!(e=>mE(e)&&!(uE(e)||"keyup"===e.type&&229===e.keyCode))(t)&&((e,t,r)=>{if(e.isEmpty(t,void 0,{skipBogus:!1,includeZwsp:!0})){var n=t.firstElementChild;return!n||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&r===n.nodeName.toLowerCase()}return!1})(r,l,n);(""!==r.getAttrib(l,cE)!==s||i)&&(r.setAttrib(l,cE,s?o:null),((e,t)=>{e.dispatch("PlaceholderToggle",{state:t})})(e,s),e.on(s?"keydown":"keyup",a),e.off(s?"keyup":"keydown",a))}};at(o)&&e.on("init",(t=>{a(t,!0),e.on("change SetContent ExecCommand",a),e.on("paste",(t=>fp.setEditorTimeout(e,(()=>a(t)))))}))},gE=(e,t)=>({from:e,to:t}),pE=(e,t)=>{var r=_r.fromDom(e),n=_r.fromDom(t.container());return Oh(r,n).map((e=>((e,t)=>({block:e,position:t}))(e,t)))},vE=(e,t)=>on(t,(e=>ml(e)||_o(e.dom)),(t=>Dr(t,e))).filter(rr).getOr(e),hE=(e,t,r,n)=>{var o=pE(t,hs.fromRangeStart(n)),a=o.bind((n=>iu(r,t,n.position).bind((n=>pE(t,n).map((n=>((e,t,r,n)=>Eo(n.position.getNode())&&!Uo(e,n.block)?du(!1,n.block.dom).bind((e=>e.isEqual(n.position)?iu(r,t,e).bind((e=>pE(t,e))):K.some(n))).getOr(n):n)(e,t,r,n)))))));return Vt(o,a,gE).filter((e=>(e=>!Dr(e.from.block,e.to.block))(e)&&((e,t)=>{var r=_r.fromDom(e);return Dr(vE(r,t.from.block),vE(r,t.to.block))})(t,e)&&(e=>!1===No(e.from.block.dom)&&!1===No(e.to.block.dom))(e)&&(e=>{var t=e=>ll(e)||na(e.dom)||dl(e);return t(e.from.block)&&t(e.to.block)})(e)&&(e=>!(Ar(e.to.block,e.from.block)||Ar(e.from.block,e.to.block)))(e)))},bE=(e,t,r)=>{var n=r?Ur(e).reverse():zr(e),o=de(n,(e=>t.isBlock(Zt(e)))).fold(I(n),(e=>n.slice(0,e)));return r?o.reverse():o},yE=(e,t,r,n,o)=>{var a=((e,t,r,n,o)=>{if(o&&Ar(e,t))return bE(t,r,n);if(o&&Ar(t,e))return bE(e,r,n);var a=Hr(t);return de(a,(e=>r.isBlock(Zt(e)))).fold(I(a),(e=>a.slice(0,e)))})(e,t,r,n,o);return te(a,Rn),a},CE=(e,t,r)=>{var n=Rv(r,t);return se(n.reverse(),(t=>Uo(e,t))).each(Rn)},wE=(e,t,r,n,o,a)=>{if(Uo(n,r))return pl(r),uu(r.dom);((e,t)=>0===oe(Ur(t),(t=>!Uo(e,t))).length)(n,a)&&Uo(n,t)&&Sn(a,_r.fromTag("br"));var i=mu(r.dom,hs.before(a.dom));return te(yE(r,t,n,o,!1),(e=>{Sn(a,e)})),CE(n,e,t),i},SE=(e,t,r,n,o)=>{if(Uo(n,r)){if(Uo(n,t)){var a=ae((i=(e,t)=>Wr(e).fold((()=>t),(e=>((e,t)=>e.isInline(Zt(t)))(n,e)?i(e,t.concat(Zi(e))):t)),i(r,[])),((e,t)=>(_n(e,t),t)),gl());Tn(t),kn(t,a)}return Rn(r),uu(t.dom)}var i,l=fu(r.dom);return te(yE(r,t,n,o,!0),(e=>{o&&Ar(t,r)?En(r,e):kn(r,e)})),CE(n,e,t),l},xE=(e,t)=>Ar(t,e)?((e,t)=>{var r=Rv(t,e);return K.from(r[r.length-1])})(t,e):K.none(),EE=(e,t)=>{du(e,t.dom).bind((e=>K.from(e.getNode()))).map(_r.fromDom).filter(il).each(Rn)},kE=(e,t,r,n,o)=>(EE(!0,t),EE(!1,r),xE(t,r).fold(U(SE,e,t,r,n,o),U(wE,e,t,r,n,o))),_E=function(e,t,r,n,o){if(arguments.length>5&&void 0!==arguments[5]&&arguments[5]){if(Ar(n,r))return kE(e,n,r,o,!t);if(Ar(r,n))return kE(e,r,n,o,t)}return t?kE(e,n,r,o,t):kE(e,r,n,o,!t)},NE=(e,t)=>{var r=_r.fromDom(e.getBody()),n=((e,t,r,n)=>n.collapsed?hE(e,t,r,n):K.none())(e.schema,r.dom,t,e.selection.getRng()).map((n=>()=>{_E(r,t,n.from.block,n.to.block,e.schema,!0).each((t=>{e.selection.setRng(t.toRange())}))}));return n},TE=(e,t)=>{var r=_r.fromDom(t),n=U(Dr,e);return nn(r,ml,n).isSome()},RE=(e,t)=>{var r=mu(e.dom,hs.fromRangeStart(t)).isNone(),n=cu(e.dom,hs.fromRangeEnd(t)).isNone();return!((e,t)=>TE(e,t.startContainer)||TE(e,t.endContainer))(e,t)&&r&&n},DE=e=>{var t=_r.fromDom(e.getBody()),r=e.selection.getRng();return RE(t,r)?(e=>K.some((()=>{e.setContent(""),e.selection.setCursorLocation()})))(e):((e,t,r)=>{var n=t.getRng();return Vt(Oh(e,_r.fromDom(n.startContainer)),Oh(e,_r.fromDom(n.endContainer)),((o,a)=>Dr(o,a)?K.none():K.some((()=>{n.deleteContents(),_E(e,!0,o,a,r).each((e=>{t.setRng(e.toRange())}))})))).getOr(K.none())})(t,e.selection,e.schema)},AE=(e,t)=>e.selection.isCollapsed()?K.none():DE(e),OE=(e,t,r,n,o)=>K.from(t._selectionOverrides.showCaret(e,r,n,o)),BE=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?K.none():K.some((e=>{var t=e.ownerDocument.createRange();return t.selectNode(e),t})(t)),PE=(e,t,r)=>t.collapsed?((e,t,r)=>{var n=Fm(1,e.getBody(),t),o=hs.fromRangeStart(n),a=o.getNode();if(pm(a))return OE(1,e,a,!o.isAtEnd(),!1);var i=o.getNode(!0);if(pm(i))return OE(1,e,i,!1,!1);var l=gb(e.dom.getRoot(),o.getNode());return pm(l)?OE(1,e,l,!1,r):K.none()})(e,t,r).getOr(t):t,LE=e=>_v(e)||Sv(e),ME=e=>Nv(e)||xv(e),IE=(e,t,r,n,o,a)=>{OE(n,e,a.getNode(!o),o,!0).each((r=>{if(t.collapsed){var n=t.cloneRange();o?n.setEnd(r.startContainer,r.startOffset):n.setStart(r.endContainer,r.endOffset),n.deleteContents()}else t.deleteContents();e.selection.setRng(r)})),((e,t)=>{bo(t)&&0===t.data.length&&e.remove(t)})(e.dom,r)},FE=(e,t)=>((e,t)=>{var r=e.selection.getRng();if(!bo(r.commonAncestorContainer))return K.none();var n=t?Ws.Forwards:Ws.Backwards,o=tu(e.getBody()),a=U(Hm,t?o.next:o.prev),i=t?LE:ME,l=Um(n,e.getBody(),r),s=a(l),d=s?kh(t,s):s;if(!d||!$m(l,d))return K.none();if(i(d))return K.some((()=>IE(e,r,l.getNode(),n,t,d)));var c=a(d);return c&&i(c)&&$m(d,c)?K.some((()=>IE(e,r,l.getNode(),n,t,c))):K.none()})(e,t),jE=(e,t)=>{var r=e.getBody();return t?uu(r).filter(_v):fu(r).filter(Nv)},UE=e=>{var t=e.selection.getRng();return!t.collapsed&&(jE(e,!0).exists((e=>e.isEqual(hs.fromRangeStart(t))))||jE(e,!1).exists((e=>e.isEqual(hs.fromRangeEnd(t)))))},zE=$s([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),HE=(e,t,r,n,o)=>{var a=o.getNode(!r);return Oh(_r.fromDom(t),_r.fromDom(n.getNode())).map((t=>Uo(e,t)?zE.remove(t.dom):zE.moveToElement(a))).orThunk((()=>K.some(zE.moveToElement(a))))},$E=(e,t,r,n)=>iu(t,e,r).bind((o=>{return a=o.getNode(),D(a)&&(ml(_r.fromDom(a))||dl(_r.fromDom(a)))||((e,t,r,n,o)=>{var a=t=>o.isInline(t.nodeName.toLowerCase())&&!Am(r,n,e);return jm(!t,r).fold((()=>jm(t,n).fold(V,a)),a)})(e,t,r,o,n)?K.none():t&&No(o.getNode())||!t&&No(o.getNode(!0))?HE(n,e,t,r,o):t&&Nv(r)||!t&&_v(r)?K.some(zE.moveToPosition(o)):K.none();var a})),WE=(e,t,r,n)=>((e,t)=>{var r=t.getNode(!e),n=e?"after":"before";return so(r)&&r.getAttribute("data-mce-caret")===n})(t,r)?((e,t)=>R(t)?K.none():e&&No(t.nextSibling)?K.some(zE.moveToElement(t.nextSibling)):!e&&No(t.previousSibling)?K.some(zE.moveToElement(t.previousSibling)):K.none())(t,r.getNode(!t)).orThunk((()=>$E(e,t,r,n))):$E(e,t,r,n).bind((t=>((e,t,r)=>r.fold((e=>K.some(zE.remove(e))),(e=>K.some(zE.moveToElement(e))),(r=>Am(t,r,e)?K.none():K.some(zE.moveToPosition(r)))))(e,r,t))),VE=(e,t)=>K.from(gb(e.getBody(),t)),qE=(e,t)=>{var r=e.selection.getNode();return VE(e,r).filter(No).fold((()=>((e,t,r,n)=>{var o=Fm(t?1:-1,e,r),a=hs.fromRangeStart(o),i=_r.fromDom(e);return!t&&Nv(a)?K.some(zE.remove(a.getNode(!0))):t&&_v(a)?K.some(zE.remove(a.getNode())):!t&&_v(a)&&zv(i,a,n)?Hv(i,a,n).map((e=>zE.remove(e.getNode()))):t&&Nv(a)&&Uv(i,a,n)?$v(i,a,n).map((e=>zE.remove(e.getNode()))):WE(e,t,a,n)})(e.getBody(),t,e.selection.getRng(),e.schema).map((r=>()=>r.fold(((e,t)=>r=>(e._selectionOverrides.hideFakeCaret(),Ch(e,t,_r.fromDom(r)),!0))(e,t),((e,t)=>r=>{var n=t?hs.before(r):hs.after(r);return e.selection.setRng(n.toRange()),!0})(e,t),(e=>t=>(e.selection.setRng(t.toRange()),!0))(e))))),(()=>K.some(P)))},KE=(e,t)=>{var r=e.selection.getNode();return No(r)&&!To(r)?VE(e,r.parentNode).filter(No).fold((()=>K.some((()=>{var r;r=_r.fromDom(e.getBody()),te(Kn(r,".mce-offscreen-selection"),Rn),Ch(e,t,_r.fromDom(e.selection.getNode())),Bh(e)}))),(()=>K.some(P))):UE(e)?K.some((()=>{Mh(e,e.selection.getRng(),_r.fromDom(e.getBody()))})):K.none()},GE=e=>{var t=e.dom,r=e.selection,n=gb(e.getBody(),r.getNode());if(_o(n)&&t.isBlock(n)&&t.isEmpty(n)){var o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(n,""),n.appendChild(o),r.setRng(hs.before(o).toRange())}return!0},YE=(e,t)=>e.selection.isCollapsed()?qE(e,t):KE(e,t),XE=e=>e.hasOwnProperty("text"),QE=e=>e.hasOwnProperty("marker"),ZE=(e,t)=>{var r=(e,r)=>{if(bo(e))return{text:e,offset:r};var n=t(),o=e.childNodes;return r<o.length?(e.insertBefore(n,o[r]),{marker:n,before:!0}):(e.appendChild(n),{marker:n,before:!1})},n=r(e.endContainer,e.endOffset);return{start:r(e.startContainer,e.startOffset),end:n}},JE=e=>{var t,r,n=e.start,o=e.end,a=new window.Range;return XE(n)?a.setStart(n.text,n.offset):QE(n)&&(n.before?a.setStartBefore(n.marker):a.setStartAfter(n.marker),null===(t=n.marker.parentNode)||void 0===t||t.removeChild(n.marker)),XE(o)?a.setEnd(o.text,o.offset):QE(o)&&(o.before?a.setEndBefore(o.marker):a.setEndAfter(o.marker),null===(r=o.marker.parentNode)||void 0===r||r.removeChild(o.marker)),a},ek=(e,t)=>{var r,n=e.dom,o=n.getParent(e.selection.getStart(),n.isBlock),a=n.getParent(e.selection.getEnd(),n.isBlock),i=e.getBody();if("div"===(null===(r=null==o?void 0:o.nodeName)||void 0===r?void 0:r.toLowerCase())&&o&&a&&o===i.firstChild&&a===i.lastChild&&!n.isEmpty(i)){var l=o.cloneNode(!1);return K.some((()=>{if(t?Dh(e):Rh(e),i.firstChild!==o){var r=ZE(e.selection.getRng(),(()=>document.createElement("span")));Array.from(i.childNodes).forEach((e=>l.appendChild(e))),i.appendChild(l),e.selection.setRng(JE(r))}}))}return K.none()},tk=(e,t)=>e.selection.isCollapsed()?((e,t)=>{var r=hs.fromRangeStart(e.selection.getRng());return iu(t,e.getBody(),r).filter((e=>t?Cv(e):wv(e))).bind((e=>Om(t?0:-1,e))).map((t=>()=>e.selection.select(t)))})(e,t):K.none(),rk=bo,nk=e=>rk(e)&&e.data[0]===vl,ok=e=>rk(e)&&e.data[e.data.length-1]===vl,ak=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(vl)},ik=(e,t)=>e?(e=>{var t;if(rk(e.previousSibling))return ok(e.previousSibling)||e.previousSibling.appendData(vl),e.previousSibling;if(rk(e))return nk(e)||e.insertData(0,vl),e;var r=ak(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(r,e),r})(t):(e=>{var t,r;if(rk(e.nextSibling))return nk(e.nextSibling)||e.nextSibling.insertData(0,vl),e.nextSibling;if(rk(e))return ok(e)||e.appendData(vl),e;var n=ak(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e.nextSibling):null===(r=e.parentNode)||void 0===r||r.appendChild(n),n})(t),lk=U(ik,!0),sk=U(ik,!1),dk=(e,t)=>bo(e.container())?ik(t,e.container()):ik(t,e.getNode()),ck=(e,t)=>{var r=t.get();return r&&e.container()===r&&Sl(r)},mk=(e,t)=>t.fold((t=>{sm(e.get());var r=lk(t);return e.set(r),K.some(hs(r,r.length-1))}),(t=>uu(t).map((t=>{if(ck(t,e)){var r=e.get();return hs(r,1)}sm(e.get());var n=dk(t,!0);return e.set(n),hs(n,1)}))),(t=>fu(t).map((t=>{if(ck(t,e)){var r=e.get();return hs(r,r.length-1)}sm(e.get());var n=dk(t,!1);return e.set(n),hs(n,n.length-1)}))),(t=>{sm(e.get());var r=sk(t);return e.set(r),K.some(hs(r,1))})),uk=(e,t)=>{for(var r=0;r<e.length;r++){var n=e[r].apply(null,t);if(n.isSome())return n}return K.none()},fk=$s([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),gk=(e,t)=>{var r=Dm(t,e);return r||e},pk=(e,t,r)=>{var n=_h(r),o=gk(t,n.container());return Eh(e,o,n).fold((()=>cu(o,n).bind(U(Eh,e,o)).map((e=>fk.before(e)))),K.none)},vk=(e,t)=>null===vu(e,t),hk=(e,t,r)=>Eh(e,t,r).filter(U(vk,t)),bk=(e,t,r)=>{var n=Nh(r);return hk(e,t,n).bind((e=>mu(e,n).isNone()?K.some(fk.start(e)):K.none()))},yk=(e,t,r)=>{var n=_h(r);return hk(e,t,n).bind((e=>cu(e,n).isNone()?K.some(fk.end(e)):K.none()))},Ck=(e,t,r)=>{var n=Nh(r),o=gk(t,n.container());return Eh(e,o,n).fold((()=>mu(o,n).bind(U(Eh,e,o)).map((e=>fk.after(e)))),K.none)},wk=e=>!xh(xk(e)),Sk=(e,t,r)=>uk([pk,bk,yk,Ck],[e,t,r]).filter(wk),xk=e=>e.fold(F,F,F,F),Ek=e=>e.fold(I("before"),I("start"),I("end"),I("after")),kk=e=>e.fold(fk.before,fk.before,fk.after,fk.after),_k=e=>e.fold(fk.start,fk.start,fk.end,fk.end),Nk=(e,t,r,n,o,a)=>Vt(Eh(t,r,n),Eh(t,r,o),((t,n)=>t!==n&&((e,t,r)=>{var n=Dm(t,e),o=Dm(r,e);return D(n)&&n===o})(r,t,n)?fk.after(e?t:n):a)).getOr(a),Tk=(e,t)=>e.fold(q,(e=>{return n=t,!(Ek(r=e)===Ek(n)&&xk(r)===xk(n));var r,n})),Rk=(e,t)=>e?t.fold(L(K.some,fk.start),K.none,L(K.some,fk.after),K.none):t.fold(K.none,L(K.some,fk.before),K.none,L(K.some,fk.end)),Dk=(e,t,r,n)=>{var o=kh(e,n),a=Sk(t,r,o);return Sk(t,r,o).bind(U(Rk,e)).orThunk((()=>((e,t,r,n,o)=>{var a=kh(e,o);return iu(e,r,a).map(U(kh,e)).fold((()=>n.map(kk)),(o=>Sk(t,r,o).map(U(Nk,e,t,r,a,o)).filter(U(Tk,n)))).filter(wk)})(e,t,r,a,n)))},Ak=(e,t,r)=>{var n=e?1:-1;return t.setRng(hs(r.container(),r.offset()+n).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Ok=(e,t)=>{var r=t.selection.getRng(),n=e?hs.fromRangeEnd(r):hs.fromRangeStart(r);return!!(e=>A(e.selection.getSel().modify))(t)&&(e&&kl(n)?Ak(!0,t.selection,n):!(e||!_l(n))&&Ak(!1,t.selection,n))};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(Ow||(Ow={}));var Bk,Pk=(e,t)=>e===Ws.Backwards?fe(t):t,Lk=(e,t,r)=>e===Ws.Forwards?t.next(r):t.prev(r),Mk=(e,t,r,n)=>Eo(n.getNode(t===Ws.Forwards))?Ow.Br:!1===Am(r,n)?Ow.Block:Ow.Wrap,Ik=(e,t,r,n)=>{for(var o=tu(r),a=n,i=[];a;){var l=Lk(t,o,a);if(!l)break;if(Eo(l.getNode(!1)))return t===Ws.Forwards?{positions:Pk(t,i).concat([l]),breakType:Ow.Br,breakAt:K.some(l)}:{positions:Pk(t,i),breakType:Ow.Br,breakAt:K.some(l)};if(l.isVisible()){if(e(a,l)){var s=Mk(0,t,a,l);return{positions:Pk(t,i),breakType:s,breakAt:K.some(l)}}i.push(l),a=l}else a=l}return{positions:Pk(t,i),breakType:Ow.Eol,breakAt:K.none()}},Fk=(e,t,r,n)=>t(r,n).breakAt.map((n=>{var o=t(r,n).positions;return e===Ws.Backwards?o.concat(n):[n].concat(o)})).getOr([]),jk=(e,t)=>ie(e,((e,r)=>e.fold((()=>K.some(r)),(n=>Vt(be(n.getClientRects()),be(r.getClientRects()),((e,o)=>{var a=Math.abs(t-e.left);return Math.abs(t-o.left)<=a?r:n})).or(e)))),K.none()),Uk=(e,t)=>be(t.getClientRects()).bind((t=>jk(e,t.left))),zk=U(Ik,hs.isAbove,-1),Hk=U(Ik,hs.isBelow,1),$k=U(Fk,-1,zk),Wk=U(Fk,1,Hk),Vk=(e,t)=>zk(e,t).breakAt.isNone(),qk=(e,t)=>Hk(e,t).breakAt.isNone(),Kk=(e,t)=>Uk($k(e,t),t),Gk=(e,t)=>Uk(Wk(e,t),t),Yk=No,Xk=(e,t)=>Math.abs(e.left-t),Qk=(e,t)=>Math.abs(e.right-t),Zk=(e,t)=>He(e,((e,r)=>{var n=Math.min(Xk(e,t),Qk(e,t)),o=Math.min(Xk(r,t),Qk(r,t));return o===n&&Le(r,"node")&&Yk(r.node)||o<n?r:e})),Jk=e=>{var t=t=>ee(t,(t=>{var r=Ol(t);return r.node=e,r}));if(so(e))return t(e.getClientRects());if(bo(e)){var r=e.ownerDocument.createRange();return r.setStart(e,0),r.setEnd(e,e.data.length),t(r.getClientRects())}return[]},e_=e=>me(e,Jk);!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(Bk||(Bk={}));var t_,r_=(e,t,r,n,o,a)=>{var i=0,l=[],s=n=>{var a=e_([n]);-1===e&&(a=a.reverse());for(var s=0;s<a.length;s++){var c=a[s];if(!r(c,d)){if(l.length>0&&t(c,We(l))&&i++,c.line=i,o(c))return!0;l.push(c)}}return!1},d=We(a.getClientRects());if(!d)return l;var c=a.getNode();return c&&(s(c),((e,t,r,n)=>{for(var o=n;o=Rm(o,e,Zl,t);)if(r(o))return})(e,n,s,c)),l},n_=U(r_,Bk.Up,Ll,Ml),o_=U(r_,Bk.Down,Ml,Ll),a_=e=>We(e.getClientRects()),i_=e=>t=>((e,t)=>t.line>e)(e,t),l_=e=>t=>((e,t)=>t.line===e)(e,t),s_=(e,t)=>{e.selection.setRng(t),Jg(e,e.selection.getRng())},d_=(e,t,r)=>K.some(PE(e,t,r)),c_=(e,t,r,n,o,a)=>{var i=t===Ws.Forwards,l=tu(e.getBody()),s=U(Hm,i?l.next:l.prev),d=i?n:o;if(!r.collapsed){var c=Fl(r);if(a(c))return OE(t,e,c,t===Ws.Backwards,!1);if(UE(e)){var m=r.cloneRange();return m.collapse(t===Ws.Backwards),K.from(m)}}var u=Um(t,e.getBody(),r);if(d(u))return BE(e,u.getNode(!i));var f=s(u),g=Dl(r);if(!f)return g?K.some(r):K.none();if(d(f=kh(i,f)))return OE(t,e,f.getNode(!i),i,!1);var p=s(f);return p&&d(p)&&$m(f,p)?OE(t,e,p.getNode(!i),i,!1):g?d_(e,f.toRange(),!1):K.none()},m_=(e,t,r,n,o,a)=>{var i=Um(t,e.getBody(),r),l=We(i.getClientRects()),s=t===Bk.Down,d=e.getBody();if(!l)return K.none();if(UE(e)){var c=s?hs.fromRangeEnd(r):hs.fromRangeStart(r);return(s?Gk:Kk)(d,c).orThunk((()=>K.from(c))).map((e=>e.toRange()))}var m,u=(s?o_:n_)(d,i_(1),i),f=oe(u,l_(1)),g=l.left,p=Zk(f,g);if(p&&a(p.node)){var v=Math.abs(g-p.left),h=Math.abs(g-p.right);return OE(t,e,p.node,v<h,!1)}if(m=n(i)?i.getNode():o(i)?i.getNode(!0):Fl(r)){var b=((e,t,r,n)=>{var o,a,i,l,s=tu(t),d=[],c=0;1===e?(o=s.next,a=Ml,i=Ll,l=hs.after(n)):(o=s.prev,a=Ll,i=Ml,l=hs.before(n));var m=a_(l);do{if(l.isVisible()){var u=a_(l);if(!i(u,m)){d.length>0&&a(u,We(d))&&c++;var f=Ol(u);if(f.position=l,f.line=c,r(f))return d;d.push(f)}}}while(l=o(l));return d})(t,d,i_(1),m),y=Zk(oe(b,l_(1)),g);if(y)return d_(e,y.position.toRange(),!1);if(y=We(oe(b,l_(0))))return d_(e,y.position.toRange(),!1)}return 0===f.length?u_(e,s).filter(s?o:n).map((t=>PE(e,t.toRange(),!1))):K.none()},u_=(e,t)=>{var r,n,o=e.selection.getRng(),a=t?hs.fromRangeEnd(o):hs.fromRangeStart(o),i=(r=a.container(),n=e.getBody(),nn(_r.fromDom(r),(e=>hm(e.dom)),(e=>e.dom===n)).map((e=>e.dom)).getOr(n));if(t){var l=Hk(i,a);return ye(l.positions)}var s=zk(i,a);return be(s.positions)},f_=(e,t,r)=>u_(e,t).filter(r).exists((t=>(e.selection.setRng(t.toRange()),!0))),g_=(e,t)=>{var r=e.dom.createRng();r.setStart(t.container(),t.offset()),r.setEnd(t.container(),t.offset()),e.selection.setRng(r)},p_=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},v_=(e,t,r)=>mk(t,r).map((t=>(g_(e,t),r))),h_=(e,t,r)=>{var n=e.getBody(),o=((e,t,r)=>{var n=hs.fromRangeStart(e);if(e.collapsed)return n;var o=hs.fromRangeEnd(e);return r?mu(t,o).getOr(o):cu(t,n).getOr(n)})(e.selection.getRng(),n,r),a=U(Sh,e);return Dk(r,a,n,o).bind((r=>v_(e,t,r)))},b_=(e,t)=>{var r=t.get();if(e.selection.isCollapsed()&&!e.composing&&r){var n=hs.fromRangeStart(e.selection.getRng());hs.isTextPosition(n)&&!(e=>kl(e)||_l(e))(n)&&(g_(e,lm(r,n)),t.set(null))}},y_=(e,t,r)=>!!Gd(e)&&h_(e,t,r).isSome(),C_=(e,t,r)=>!!Gd(t)&&Ok(e,t),w_=e=>{var t=Ho(null),r=U(Sh,e);return e.on("NodeChange",(n=>{Gd(e)&&(((e,t,r)=>{var n=ee(Kn(_r.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),(e=>e.dom)),o=oe(n,e),a=oe(r,e);te(ge(o,a),U(p_,!1)),te(ge(a,o),U(p_,!0))})(r,e.dom,n.parents),b_(e,t),((e,t,r,n)=>{if(t.selection.isCollapsed()){var o=oe(n,e);te(o,(n=>{var o=hs.fromRangeStart(t.selection.getRng());Sk(e,t.getBody(),o).bind((e=>v_(t,r,e)))}))}})(r,e,t,n.parents))})),t},S_=U(C_,!0),x_=U(C_,!1),E_=(e,t,r)=>{if(Gd(e)){var n=u_(e,t).getOrThunk((()=>{var r=e.selection.getRng();return t?hs.fromRangeEnd(r):hs.fromRangeStart(r)}));return Sk(U(Sh,e),e.getBody(),n).exists((t=>{var n=kk(t);return mk(r,n).exists((t=>(g_(e,t),!0)))}))}return!1},k_=(e,t)=>r=>mk(t,r).map((t=>()=>g_(e,t))),__=(e,t,r,n)=>{var o=e.getBody(),a=U(Sh,e);e.undoManager.ignore((()=>{e.selection.setRng(((e,t)=>{var r=document.createRange();return r.setStart(e.container(),e.offset()),r.setEnd(t.container(),t.offset()),r})(r,n)),Rh(e),Sk(a,o,hs.fromRangeStart(e.selection.getRng())).map(_k).bind(k_(e,t)).each(W)})),e.nodeChanged()},N_=(e,t,r,n)=>{var o=((e,t)=>{var r=Dm(t,e);return r||e})(e.getBody(),n.container()),a=U(Sh,e),i=Sk(a,o,n);return i.bind((e=>r?e.fold(I(K.some(_k(e))),K.none,I(K.some(kk(e))),K.none):e.fold(K.none,I(K.some(kk(e))),K.none,I(K.some(_k(e)))))).map(k_(e,t)).getOrThunk((()=>{var l=lu(r,o,n),s=l.bind((e=>Sk(a,o,e)));return Vt(i,s,(()=>Eh(a,o,n).bind((t=>(e=>Vt(uu(e),fu(e),((t,r)=>{var n=kh(!0,t),o=kh(!1,r);return cu(e,n).forall((e=>e.isEqual(o)))})).getOr(!0))(t)?K.some((()=>{Ch(e,r,_r.fromDom(t))})):K.none())))).getOrThunk((()=>s.bind((()=>l.map((o=>()=>{r?__(e,t,n,o):__(e,t,o,n)}))))))}))},T_=(e,t,r)=>{if(e.selection.isCollapsed()&&Gd(e)){var n=hs.fromRangeStart(e.selection.getRng());return N_(e,t,r,n)}return K.none()},R_=(e,t)=>{var r=_r.fromDom(e.getBody()),n=_r.fromDom(e.selection.getStart()),o=Rv(n,r);return de(o,t).fold(I(o),(e=>o.slice(0,e)))},D_=e=>1===qr(e),A_=e=>R_(e,(t=>e.schema.isBlock(Zt(t))||(e=>qr(e)>1)(t))),O_=(e,t)=>{var r=U(vy,e);return me(t,(e=>r(e)?[e.dom]:[]))},B_=e=>{var t=(e=>R_(e,(t=>e.schema.isBlock(Zt(t)))))(e);return O_(e,t)},P_=(e,t)=>{var r=oe(A_(e),D_);return ye(r).bind((n=>{var o=hs.fromRangeStart(e.selection.getRng());return Ph(t,o,n.dom)&&!gf(n)?K.some((()=>((e,t,r,n)=>{var o=O_(t,n);if(0===o.length)Ch(t,e,r);else{var a=py(r.dom,o);t.selection.setRng(a.toRange())}})(t,e,n,r))):K.none()}))},L_=(e,t)=>{var r,n=e.selection.getStart(),o=((e,t)=>{var r=t.parentElement;return Eo(t)&&!_(r)&&e.dom.isEmpty(r)})(e,n)||(r=n,gf(_r.fromDom(r)))?py(n,t):((e,t)=>{var r=gy(t),n=r.caretContainer,o=r.caretPosition;return e.insertNode(n.dom),o})(e.selection.getRng(),t);e.selection.setRng(o.toRange())},M_=e=>bo(e.startContainer),I_=e=>(e=>{var t=e.startContainer.parentNode,r=e.endContainer.parentNode;return!_(t)&&!_(r)&&t.isEqualNode(r)})(e)&&(e=>{var t=e.endContainer;return e.endOffset===(bo(t)?t.length:t.childNodes.length)})(e),F_=e=>{var t=e.selection.getRng();return(e=>0===e.startOffset&&M_(e))(t)&&((e,t)=>{var r=t.startContainer.parentElement;return!_(r)&&vy(e,_r.fromDom(r))})(e,t)&&(e=>I_(e)||(e=>!e.endContainer.isEqualNode(e.commonAncestorContainer))(e))(t)},j_=e=>{if(F_(e)){var t=B_(e);return K.some((()=>{Rh(e),((e,t)=>{var r=ge(t,B_(e));r.length>0&&L_(e,r)})(e,t)}))}return K.none()},U_=(e,t)=>e.selection.isCollapsed()?P_(e,t):j_(e),z_=e=>{return t=_r.fromDom(e.selection.getStart()),r=e.schema,Gn(t,(e=>pu(e.dom)),(e=>r.isBlock(Zt(e))));var t,r},H_=e=>((e=>{var t=e.selection.getRng();return t.collapsed&&(M_(t)||e.dom.isEmpty(t.startContainer))&&!z_(e)})(e)&&L_(e,[]),!0),$_=(e,t,r)=>D(r)?K.some((()=>{e._selectionOverrides.hideFakeCaret(),Ch(e,t,_r.fromDom(r))})):K.none(),W_=(e,t)=>e.selection.isCollapsed()?((e,t)=>{var r=t?Sv:xv,n=t?Ws.Forwards:Ws.Backwards,o=Um(n,e.getBody(),e.selection.getRng());return r(o)?$_(e,t,o.getNode(!t)):K.from(kh(t,o)).filter((e=>r(e)&&$m(o,e))).bind((r=>$_(e,t,r.getNode(!t))))})(e,t):((e,t)=>{var r=e.selection.getNode();return Do(r)?$_(e,t,r):K.none()})(e,t),V_=e=>lt(null!=e?e:"").getOr(0),q_=(e,t)=>(e||"table"===Zt(t)?"margin":"padding")+("rtl"===hn(t,"direction")?"-right":"-left"),K_=e=>{var t=Y_(e);return!e.mode.isReadOnly()&&(t.length>1||((e,t)=>ue(t,(t=>{var r=q_(Od(e),t),n=yn(t,r).map(V_).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&n>0})))(e,t))},G_=e=>sl(e)||dl(e),Y_=e=>oe(An(e.selection.getSelectedBlocks()),(e=>!G_(e)&&!(e=>Lr(e).exists(G_))(e)&&on(e,(e=>_o(e.dom)||No(e.dom))).exists((e=>_o(e.dom))))),X_=(e,t)=>{var r,n,o=e.dom,a=Bd(e),i=null!==(n=null===(r=/[a-z%]+$/i.exec(a))||void 0===r?void 0:r[0])&&void 0!==n?n:"px",l=V_(a),s=Od(e);te(Y_(e),(e=>{((e,t,r,n,o,a)=>{var i=q_(r,_r.fromDom(a)),l=V_(e.getStyle(a,i));if("outdent"===t){var s=Math.max(0,l-n);e.setStyle(a,i,s?s+o:"")}else{var d=l+n+o;e.setStyle(a,i,d)}})(o,t,s,l,i,e.dom)}))},Q_=e=>X_(e,"outdent"),Z_=e=>{if(e.selection.isCollapsed()&&K_(e)){var t=e.dom,r=e.selection.getRng(),n=hs.fromRangeStart(r),o=t.getParent(r.startContainer,t.isBlock);if(null!==o&&Pv(_r.fromDom(o),n,e.schema))return K.some((()=>Q_(e)))}return K.none()},J_=(e,t,r)=>we([Z_,YE,FE,(e,r)=>T_(e,t,r),NE,fb,tk,W_,AE,U_,ek],(t=>t(e,r))).filter((t=>e.selection.isEditable())),eN=(e,t)=>{e.addCommand("delete",(()=>{((e,t)=>{J_(e,t,!1).fold((()=>{e.selection.isEditable()&&(Rh(e),Bh(e))}),W)})(e,t)})),e.addCommand("forwardDelete",(()=>{((e,t)=>{J_(e,t,!0).fold((()=>{e.selection.isEditable()&&Dh(e)}),W)})(e,t)}))},tN=e=>void 0===e.touches||1!==e.touches.length?K.none():K.some(e.touches[0]),rN=e=>{var t=$o(),r=Ho(!1),n=Li((t=>{e.dispatch("longpress",u(u({},t),{},{type:"longpress"})),r.set(!0)}),400);e.on("touchstart",(e=>{tN(e).each((o=>{n.cancel();var a={x:o.clientX,y:o.clientY,target:e.target};n.throttle(e),r.set(!1),t.set(a)}))}),!0),e.on("touchmove",(o=>{n.cancel(),tN(o).each((n=>{t.on((o=>{((e,t)=>{var r=Math.abs(e.clientX-t.x),n=Math.abs(e.clientY-t.y);return r>5||n>5})(n,o)&&(t.clear(),r.set(!1),e.dispatch("longpresscancel"))}))}))}),!0),e.on("touchend touchcancel",(o=>{n.cancel(),"touchcancel"!==o.type&&t.get().filter((e=>e.target.isEqualNode(o.target))).each((()=>{r.get()?o.preventDefault():e.dispatch("tap",u(u({},o),{},{type:"tap"}))}))}),!0)},nN=(e,t)=>Pe(e,t.nodeName),oN=(e,t)=>!!bo(t)||!!so(t)&&!(nN(e.getBlockElements(),t)||Ru(t)||ia(e,t)||qo(t)),aN=(e,t)=>{if(bo(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||nN(e,t.nextSibling)||qo(t.nextSibling)}return!1},iN=e=>e.dom.create(ud(e),fd(e)),lN=e=>{var t,r,n=e.dom,o=e.selection,a=e.schema,i=a.getBlockElements(),l=o.getStart(),s=e.getBody(),d=null,c=ud(e);if(l&&so(l)){var m=s.nodeName.toLowerCase();if(a.isValidChild(m,c.toLowerCase())&&!((e,t,r)=>J(Tv(_r.fromDom(r),_r.fromDom(t)),(t=>nN(e,t.dom))))(i,s,l)){if(s.firstChild===s.lastChild&&Eo(s.firstChild))return(t=iN(e)).appendChild(gl().dom),s.replaceChild(t,s.firstChild),e.selection.setCursorLocation(t,0),void e.nodeChanged();for(var u=s.firstChild;u;)if(so(u)&&ra(a,u),oN(a,u)){if(aN(i,u)){r=u,u=u.nextSibling,n.remove(r);continue}if(!t){if(!d&&e.hasFocus()&&(d=ZE(e.selection.getRng(),(()=>document.createElement("span")))),!u.parentNode){u=null;break}t=iN(e),s.insertBefore(t,u)}r=u,u=u.nextSibling,t.appendChild(r)}else t=null,u=u.nextSibling;d&&(e.selection.setRng(JE(d)),e.nodeChanged())}}},sN=(e,t,r)=>{var n=_r.fromDom(iN(e)),o=gl();kn(n,o),r(t,n);var a=document.createRange();return a.setStartBefore(o.dom),a.setEndBefore(o.dom),a},dN=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),cN=(e,t,r)=>function(n){var o=arguments,a=o[o.length-2],i=a>0?t.charAt(a-1):"";if('"'===i)return n;if(">"===i){var l=t.lastIndexOf("<",a);if(-1!==l)if(-1!==t.substring(l,a).indexOf('contenteditable="false"'))return n}return'<span class="'+r+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},mN=(e,t)=>ue(e,(e=>{var r=t.match(e);return null!==r&&r[0].length===t.length})),uN=e=>{var t="contenteditable",r=" "+Ht.trim(Fc(e))+" ",n=" "+Ht.trim(Ic(e))+" ",o=dN(r),a=dN(n),i=jc(e);i.length>0&&e.on("BeforeSetContent",(t=>{((e,t,r)=>{var n=t.length,o=r.content;if("raw"!==r.format){for(;n--;)o=o.replace(t[n],cN(e,o,Ic(e)));r.content=o}})(e,i,t)})),e.parser.addAttributeFilter("class",(e=>{for(var r=e.length;r--;){var n=e[r];o(n)?n.attr(t,"true"):a(n)&&n.attr(t,"false")}})),e.serializer.addAttributeFilter(t,(e=>{for(var r=e.length;r--;){var n=e[r];if(o(n)||a(n)){var l=n.attr("data-mce-content");i.length>0&&l?mN(i,l)?(n.name="#text",n.type=3,n.raw=!0,n.value=l):n.remove():n.attr(t,null)}}}))},fN=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Rl(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},gN=(e,t)=>{var r=(e=>dn(_r.fromDom(e.getBody()),"*[data-mce-caret]").map((e=>e.dom)).getOrNull())(e);if(r)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void fN(e,r)):void(El(r)&&(fN(e,r),e.undoManager.add()))},pN=No,vN=(e,t,r)=>{var n=tu(e.getBody()),o=U(Hm,1===t?n.next:n.prev);if(r.collapsed){var a=e.dom.getParent(r.startContainer,"PRE");if(!a)return;if(!o(hs.fromRangeStart(r))){var i=_r.fromDom((e=>{var t=e.dom.create(ud(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));1===t?xn(_r.fromDom(a),i):Sn(_r.fromDom(a),i),e.selection.select(i.dom,!0),e.selection.collapse()}}},hN=(e,t)=>{var r=t?Ws.Forwards:Ws.Backwards,n=e.selection.getRng();return((e,t,r)=>c_(t,e,r,_v,Nv,pN))(r,e,n).orThunk((()=>(vN(e,r,n),K.none())))},bN=(e,t)=>{var r=t?1:-1,n=e.selection.getRng();return((e,t,r)=>m_(t,e,r,(e=>_v(e)||Ev(e)),(e=>Nv(e)||kv(e)),pN))(r,e,n).orThunk((()=>(vN(e,r,n),K.none())))},yN=(e,t)=>hN(e,((e,t)=>{var r=t?e.getEnd(!0):e.getStart(!0);return xh(r)?!t:t})(e.selection,t)).exists((t=>(s_(e,t),!0))),CN=(e,t)=>bN(e,t).exists((t=>(s_(e,t),!0))),wN=(e,t)=>f_(e,t,t?Nv:_v),SN=(e,t)=>jE(e,!t).map((r=>{var n=r.toRange(),o=e.selection.getRng();return t?n.setStart(o.startContainer,o.startOffset):n.setEnd(o.endContainer,o.endOffset),n})).exists((t=>(s_(e,t),!0))),xN=e=>Z(["figcaption"],Zt(e)),EN=(e,t)=>{var r=_r.fromDom(e.getBody()),n=hs.fromRangeStart(e.selection.getRng());return((e,t,r)=>{var n=U(Dr,t);return on(_r.fromDom(e.container()),(e=>r.isBlock(Zt(e))),n).filter(xN)})(n,r,e.schema).exists((()=>{if(((e,t,r)=>t?qk(e.dom,r):Vk(e.dom,r))(r,t,n)){var o=sN(e,r,t?kn:En);return e.selection.setRng(o),!0}return!1}))},kN=(e,t)=>!!e.selection.isCollapsed()&&EN(e,t),_N=(e,t)=>t?K.from(e.dom.getParent(e.selection.getNode(),"details")).map((t=>((e,t)=>{var r=e.selection.getRng(),n=hs.fromRangeStart(r);return!(e.getBody().lastChild!==t||!qk(t,n)||(e.execCommand("InsertNewBlockAfter"),0))})(e,t))).getOr(!1):K.from(e.dom.getParent(e.selection.getNode(),"summary")).bind((t=>K.from(e.dom.getParent(t,"details")).map((r=>((e,t,r)=>{var n=e.selection.getRng(),o=hs.fromRangeStart(n);return!(e.getBody().firstChild!==t||!Vk(r,o)||(e.execCommand("InsertNewBlockBefore"),0))})(e,r,t))))).getOr(!1),NN=(e,t)=>_N(e,t),TN={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},RN=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,DN=(e,t)=>me((e=>ee(e,(e=>u(u({},TN),e))))(e),(e=>RN(e,t)?[e]:[])),AN=(e,t)=>me((e=>ee(e,(e=>u(u({},TN),e))))(e),(e=>RN(e,t)?[e]:[])),ON=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return()=>e.apply(null,r)},BN=(e,t)=>se(DN(e,t),(e=>e.action())),PN=(e,t)=>we(AN(e,t),(e=>e.action())),LN=(e,t)=>{var r=t?Ws.Forwards:Ws.Backwards,n=e.selection.getRng();return c_(e,r,n,Sv,xv,Do).exists((t=>(s_(e,t),!0)))},MN=(e,t)=>{var r=t?1:-1,n=e.selection.getRng();return m_(e,r,n,Sv,xv,Do).exists((t=>(s_(e,t),!0)))},IN=(e,t)=>f_(e,t,t?xv:Sv),FN=$s([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),jN=u(u({},FN),{},{none:e=>FN.none(e)}),UN=(e,t,r)=>me(Hr(e),(e=>Tr(e,t)?r(e)?[e]:[]:UN(e,t,r))),zN=(e,t)=>function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V;return r(t)?K.none():Z(e,Zt(t))?K.some(t):sn(t,e.join(","),(e=>Tr(e,"table")||r(e)))}(["td","th"],e,t),HN=e=>UN(e,"th,td",q),$N=(e,t)=>cn(e,"table",t),WN=function e(t,r,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:q,i=1===o;if(!i&&n<=0)return jN.first(t[0]);if(i&&n>=t.length-1)return jN.last(t[t.length-1]);var l=n+o,s=t[l];return a(s)?jN.middle(r,s):e(t,r,l,o,a)},VN=(e,t)=>$N(e,t).bind((t=>{var r=HN(t);return de(r,(t=>Dr(e,t))).map((e=>({index:e,all:r})))})),qN=e=>{return(t=e,nl.getOption(t)).filter((e=>0!==e.trim().length||e.indexOf(eo)>-1)).isSome();var t},KN=["img","br"],GN=e=>qN(e)||Z(KN,Zt(e))||(e=>tr(e)&&"false"===cr(e,"contenteditable"))(e),YN=(e,t,r,n,o)=>{var a=Kn(_r.fromDom(r),"td,th,caption").map((e=>e.dom)),i=oe(((e,t)=>me(t,(t=>{var r=((e,t)=>({left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}))(Ol(t.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:t},{x:r.right,y:e(r),cell:t}]})))(e,a),(e=>t(e,o)));return((e,t,r)=>ie(e,((e,n)=>e.fold((()=>K.some(n)),(e=>{var o=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-r)),a=Math.sqrt(Math.abs(n.x-t)+Math.abs(n.y-r));return K.some(a<o?n:e)}))),K.none()))(i,n,o).map((e=>e.cell))},XN=U(YN,(e=>e.bottom),((e,t)=>e.y<t)),QN=U(YN,(e=>e.top),((e,t)=>e.y>t)),ZN=(e,t)=>be(t.getClientRects()).bind((t=>XN(e,t.left,t.top))).bind((e=>{return Uk(fu(r=e).map((e=>zk(r,e).positions.concat(e))).getOr([]),t);var r})),JN=(e,t)=>ye(t.getClientRects()).bind((t=>QN(e,t.left,t.top))).bind((e=>{return Uk(uu(r=e).map((e=>[e].concat(Hk(r,e).positions))).getOr([]),t);var r})),eT=(e,t,r)=>{var n=e(t,r);return(e=>e.breakType===Ow.Wrap&&0===e.positions.length)(n)||!Eo(r.getNode())&&(e=>e.breakType===Ow.Br&&1===e.positions.length)(n)?!((e,t,r)=>r.breakAt.exists((r=>e(t,r).breakAt.isSome())))(e,t,n):n.breakAt.isNone()},tT=U(eT,zk),rT=U(eT,Hk),nT=(e,t,r,n)=>{var o=e.selection.getRng(),a=t?1:-1;return!(!gm()||!((e,t,r)=>{var n=hs.fromRangeStart(t);return du(!e,r).exists((e=>e.isEqual(n)))})(t,o,r))&&(OE(a,e,r,!t,!1).each((t=>{s_(e,t)})),!0)},oT=(e,t)=>{var r=t.getNode(e);return po(r)?K.some(r):K.none()},aT=(e,t,r)=>{var n=oT(!!t,r),o=!1===t;n.fold((()=>s_(e,r.toRange())),(n=>du(o,e.getBody()).filter((e=>e.isEqual(r))).fold((()=>s_(e,r.toRange())),(r=>((e,t,r)=>{t.undoManager.transact((()=>{var n=e?xn:Sn,o=sN(t,_r.fromDom(r),n);s_(t,o)}))})(t,e,n)))))},iT=(e,t,r,n)=>{var o=e.selection.getRng(),a=hs.fromRangeStart(o),i=e.getBody();if(!t&&tT(n,a)){var l=((e,t,r)=>ZN(t,r).orThunk((()=>be(r.getClientRects()).bind((r=>jk($k(e,hs.before(t)),r.left))))).getOr(hs.before(t)))(i,r,a);return aT(e,t,l),!0}if(t&&rT(n,a)){var s=((e,t,r)=>JN(t,r).orThunk((()=>be(r.getClientRects()).bind((r=>jk(Wk(e,hs.after(t)),r.left))))).getOr(hs.after(t)))(i,r,a);return aT(e,t,s),!0}return!1},lT=(e,t,r)=>K.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((n=>K.from(e.dom.getParent(n,"table")).map((o=>r(e,t,o,n))))).getOr(!1),sT=(e,t)=>lT(e,t,nT),dT=(e,t)=>lT(e,t,iT),cT=(e,t,r)=>r.fold(K.none,K.none,((e,t)=>{return(r=t,ln(r,GN)).map((e=>(e=>{var t=ug.exact(e,0,e,0);return hg(t)})(e)));var r}),(r=>(e.execCommand("mceTableInsertRowAfter"),mT(e,t,r)))),mT=(e,t,r)=>cT(e,t,((e,t,r)=>VN(e,r).fold((()=>jN.none(e)),(r=>WN(r.all,e,r.index,1,t))))(r,mn)),uT=(e,t,r)=>cT(e,t,((e,t,r)=>VN(e,r).fold((()=>jN.none()),(r=>WN(r.all,e,r.index,-1,t))))(r,mn)),fT=(e,t)=>{var r=["table","li","dl"],n=_r.fromDom(e.getBody()),o=e=>{var t=Zt(e);return Dr(e,n)||Z(r,t)},a=e.selection.getRng(),i=_r.fromDom(t?a.endContainer:a.startContainer);return zN(i,o).map((r=>($N(r,o).each((t=>{e.model.table.clearSelectedCells(t.dom)})),e.selection.collapse(!t),(t?mT:uT)(e,o,r).each((t=>{e.selection.setRng(t)})),!0))).getOr(!1)},gT=(e,t)=>{e.on("keydown",(r=>{r.isDefaultPrevented()||((e,t,r)=>{var n=jt.os.isMacOS()||jt.os.isiOS();BN([{keyCode:Gf.RIGHT,action:ON(yN,e,!0)},{keyCode:Gf.LEFT,action:ON(yN,e,!1)},{keyCode:Gf.UP,action:ON(CN,e,!1)},{keyCode:Gf.DOWN,action:ON(CN,e,!0)},...n?[{keyCode:Gf.UP,action:ON(SN,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Gf.DOWN,action:ON(SN,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Gf.RIGHT,action:ON(sT,e,!0)},{keyCode:Gf.LEFT,action:ON(sT,e,!1)},{keyCode:Gf.UP,action:ON(dT,e,!1)},{keyCode:Gf.DOWN,action:ON(dT,e,!0)},{keyCode:Gf.UP,action:ON(dT,e,!1)},{keyCode:Gf.UP,action:ON(NN,e,!1)},{keyCode:Gf.DOWN,action:ON(NN,e,!0)},{keyCode:Gf.RIGHT,action:ON(LN,e,!0)},{keyCode:Gf.LEFT,action:ON(LN,e,!1)},{keyCode:Gf.UP,action:ON(MN,e,!1)},{keyCode:Gf.DOWN,action:ON(MN,e,!0)},{keyCode:Gf.RIGHT,action:ON(y_,e,t,!0)},{keyCode:Gf.LEFT,action:ON(y_,e,t,!1)},{keyCode:Gf.RIGHT,ctrlKey:!n,altKey:n,action:ON(S_,e,t)},{keyCode:Gf.LEFT,ctrlKey:!n,altKey:n,action:ON(x_,e,t)},{keyCode:Gf.UP,action:ON(kN,e,!1)},{keyCode:Gf.DOWN,action:ON(kN,e,!0)}],r).each((e=>{r.preventDefault()}))})(e,t,r)}))},pT=(e,t)=>({container:e,offset:t}),vT=_i.DOM,hT=e=>t=>e===t?-1:0,bT=(e,t,r)=>{if(bo(e)&&t>=0)return K.some(pT(e,t));var n=rl(vT);return K.from(n.backwards(e,t,hT(e),r)).map((e=>pT(e.container,e.container.data.length)))},yT=(e,t,r)=>{if(!bo(e))return K.none();var n=e.data;if(t>=0&&t<=n.length)return K.some(pT(e,t));var o=rl(vT);return K.from(o.backwards(e,t,hT(e),r)).bind((e=>{var n=e.container.data;return yT(e.container,t+n.length,r)}))},CT=(e,t,r)=>{if(!bo(e))return K.none();var n=e.data;if(t<=n.length)return K.some(pT(e,t));var o=rl(vT);return K.from(o.forwards(e,t,hT(e),r)).bind((e=>CT(e.container,t-n.length,r)))},wT=(e,t,r,n,o)=>{var a=rl(e,(e=>t=>e.isBlock(t)||Z(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t))(e));return K.from(a.backwards(t,r,n,o))},ST=e=>""!==e&&-1!==" Â \f\n\r\t\v".indexOf(e),xT=(e,t)=>e.substring(t.length),ET=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(n=t).collapsed||!bo(n.startContainer))return K.none();var a={text:"",offset:0},i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return wT(e,t.startContainer,t.startOffset,((e,t,n)=>(a.text=n+a.text,a.offset+=t,function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=r.charAt(0);for(n=t-1;n>=0;n--){var i=e.charAt(n);if(!o&&ST(i))return K.none();if(a===i&&Ze(e,r,n,t))break}return K.some(n)}(a.text,a.offset,r,o).getOr(t))),i).bind((e=>{var n=t.cloneRange();if(n.setStart(e.container,e.offset),n.setEnd(t.endContainer,t.endOffset),n.collapsed)return K.none();var o=(e=>bl(e.toString().replace(/\u00A0/g," ")))(n);return 0!==o.lastIndexOf(r)?K.none():K.some({text:xT(o,r),range:n,trigger:r})}))},kT=e=>{if((e=>3===e.nodeType)(e))return pT(e,e.data.length);var t=e.childNodes;return t.length>0?kT(t[t.length-1]):pT(e,t.length)},_T=(e,t)=>{var r=e.childNodes;return r.length>0&&t<r.length?_T(r[t],0):r.length>0&&(e=>1===e.nodeType)(e)&&r.length===t?kT(r[r.length-1]):pT(e,t)},NT=e=>t=>{var r=_T(t.startContainer,t.startOffset);return!((e,t)=>{var r,n=null!==(r=e.getParent(t.container,e.isBlock))&&void 0!==r?r:e.getRoot();return wT(e,t.container,t.offset,((e,t)=>0===t?-1:t),n).filter((e=>{var t=e.container.data.charAt(e.offset-1);return!ST(t)})).isSome()})(e,r)},TT=(e,t)=>{var r=t(),n=e.selection.getRng();return((e,t,r)=>we(r.triggers,(r=>ET(e,t,r))))(e.dom,n,r).bind((r=>RT(e,t,r)))},RT=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t(),i=null!==(n=e.selection.getRng().startContainer.nodeValue)&&void 0!==n?n:"",l=oe(a.lookupByTrigger(r.trigger),(t=>r.text.length>=t.minChars&&t.matches.getOrThunk((()=>NT(e.dom)))(r.range,i,r.text)));if(0===l.length)return K.none();var s=Promise.all(ee(l,(e=>e.fetch(r.text,e.maxResults,o).then((t=>({matchText:r.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))))));return K.some({lookupData:s,context:r})};!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(t_||(t_={}));var DT,AT,OT=(e,t,r)=>e.stype===t_.Error?t(e.serror):r(e.svalue),BT=e=>({stype:t_.Value,svalue:e}),PT=e=>({stype:t_.Error,serror:e}),LT=e=>OT(e,Hs.error,Hs.value),MT=BT,IT=e=>{var t=[],r=[];return te(e,(e=>{OT(e,(e=>r.push(e)),(e=>t.push(e)))})),{values:t,errors:r}},FT=PT,jT=(e,t)=>e.stype===t_.Error?t(e.serror):e,UT=(e,t)=>e.stype===t_.Value?{stype:t_.Value,svalue:t(e.svalue)}:e,zT=(e,t)=>e.stype===t_.Error?{stype:t_.Error,serror:t(e.serror)}:e,HT=OT,$T=e=>x(e)&&xe(e).length>100?" removed due to size":JSON.stringify(e,null,2),WT=(e,t)=>FT([{path:e,getErrorInfo:t}]),VT=(e,t,r,n)=>Be(r,n).fold((()=>((e,t,r)=>WT(e,(()=>'The chosen schema: "'+r+'" did not exist in branches: '+$T(t))))(e,r,n)),(r=>r.extract(e.concat(["branch: "+n]),t))),qT=(e,t)=>({extract:(r,n)=>Be(n,e).fold((()=>((e,t)=>WT(e,(()=>'Choice schema did not contain choice key: "'+t+'"')))(r,e)),(e=>VT(r,n,t,e))),toString:()=>"chooseOn("+e+"). Possible values: "+xe(t)}),KT=e=>function(){if(0===arguments.length)throw new Error("Can't merge zero objects");for(var t={},r=0;r<arguments.length;r++){var n=r<0||arguments.length<=r?void 0:arguments[r];for(var o in n)Pe(n,o)&&(t[o]=e(t[o],n[o]))}return t},GT=KT(((e,t)=>E(e)&&E(t)?GT(e,t):t)),YT=KT(((e,t)=>t)),XT=e=>({tag:"defaultedThunk",process:I(e)}),QT=e=>L(FT,ce)(e),ZT=e=>{var t=IT(e);return t.errors.length>0?QT(t.errors):MT(t.values)},JT=(e,t,r)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return r(e.newKey,e.instantiator)}},eR=e=>({extract:(t,r)=>jT(e(r),(e=>((e,t)=>WT(e,I(t)))(t,e))),toString:I("val")}),tR=eR(MT),rR=(e,t,r,n)=>Be(t,r).fold((()=>((e,t,r)=>WT(e,(()=>'Could not find valid *required* value for "'+t+'" in '+$T(r))))(e,r,t)),n),nR=(e,t,r,n)=>n(Be(e,t).getOrThunk((()=>r(e)))),oR=(e,t,r,n,o)=>{var a=e=>o.extract(t.concat([n]),e),i=e=>e.fold((()=>MT(K.none())),(e=>{var r=o.extract(t.concat([n]),e);return UT(r,K.some)}));switch(e.tag){case"required":return rR(t,r,n,a);case"defaultedThunk":return nR(r,n,e.process,a);case"option":return((e,t,r)=>r(Be(e,t)))(r,n,i);case"defaultedOptionThunk":return((e,t,r,n)=>n(Be(e,t).map((t=>!0===t?r(e):t))))(r,n,e.process,i);case"mergeWithThunk":return nR(r,n,I({}),(t=>{var n=GT(e.process(r),t);return a(n)}))}},aR=e=>({extract:(t,r)=>((e,t,r)=>{var n,o={},a=[],i=g(r);try{for(i.s();!(n=i.n()).done;){var l=n.value;JT(l,((r,n,i,l)=>{var s=oR(i,e,t,r,l);HT(s,(e=>{a.push(...e)}),(e=>{o[n]=e}))}),((e,r)=>{o[e]=r(t)}))}}catch(e){i.e(e)}finally{i.f()}return a.length>0?FT(a):MT(o)})(t,r,e),toString:()=>{var t=ee(e,(e=>JT(e,((e,t,r,n)=>e+" -> "+n.toString()),((e,t)=>"state("+e+")"))));return"obj{\n"+t.join("\n")+"}"}}),iR=e=>({extract:(t,r)=>{var n=ee(r,((r,n)=>e.extract(t.concat(["["+n+"]"]),r)));return ZT(n)},toString:()=>"array("+e.toString()+")"}),lR=(e,t,r)=>LT(((e,t,r)=>{var n=t.extract([e],r);return zT(n,(e=>({input:r,errors:e})))})(e,t,r)),sR=e=>{return"Errors: \n"+(t=e.errors,r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:I("... (only showing first ten failures)")}]):t,ee(r,(e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()))).join("\n")+"\n\nInput object: "+$T(e.input);var t,r},dR=(e,t)=>qT(e,_e(t,aR)),cR=I(tR),mR=(e,t)=>eR((r=>{var n=typeof r;return e(r)?MT(r):FT(`Expected type: ${t} but got: ${n}`)})),uR=mR(O,"number"),fR=mR(S,"string"),gR=mR(N,"boolean"),pR=mR(A,"function"),vR=(e,t,r,n)=>({tag:"field",key:e,newKey:t,presence:r,prop:n}),hR=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),bR=e=>{return t=t=>Z(e,t)?Hs.value(t):Hs.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`),eR((e=>t(e).fold(FT,MT)));var t},yR=(e,t)=>vR(e,e,{tag:"required",process:{}},t),CR=e=>yR(e,fR),wR=e=>yR(e,pR),SR=(e,t)=>vR(e,e,{tag:"option",process:{}},t),xR=e=>SR(e,fR),ER=(e,t,r)=>vR(e,e,XT(t),r),kR=(e,t)=>ER(e,t,uR),_R=(e,t,r)=>ER(e,t,bR(r)),NR=(e,t)=>ER(e,t,gR),TR=(e,t)=>ER(e,t,pR),RR=CR("type"),DR=wR("fetch"),AR=wR("onAction"),OR=TR("onSetup",(()=>P)),BR=xR("text"),PR=xR("icon"),LR=xR("tooltip"),MR=xR("label"),IR=NR("active",!1),FR=NR("enabled",!0),jR=NR("primary",!1),UR=e=>((e,t)=>ER(e,t,fR))("type",e),zR=aR([RR,CR("trigger"),kR("minChars",1),(AT=1,((e,t)=>vR(e,e,XT(t),cR()))("columns",AT)),kR("maxResults",10),(DT="matches",SR(DT,pR)),DR,AR,((e,t,r)=>ER(e,t,iR(r)))("highlightOn",[],fR)]),HR=[FR,LR,PR,BR,OR],$R=[IR].concat(HR),WR=[TR("predicate",V),_R("scope","node",["node","editor"]),_R("position","selection",["node","selection","line"])],VR=HR.concat([UR("contextformbutton"),jR,AR,hR("original",F)]),qR=$R.concat([UR("contextformbutton"),jR,AR,hR("original",F)]),KR=HR.concat([UR("contextformbutton")]),GR=$R.concat([UR("contextformtogglebutton")]),YR=dR("type",{contextformbutton:VR,contextformtogglebutton:qR});aR([UR("contextform"),TR("initValue",I("")),MR,((e,t)=>vR(e,e,{tag:"required",process:{}},iR(t)))("commands",YR),SR("launch",dR("type",{contextformbutton:KR,contextformtogglebutton:GR}))].concat(WR));var XR=e=>{var t=e.ui.registry.getAll().popups,r=_e(t,(e=>{return(t=e,lR("Autocompleter",zR,t)).fold((e=>{throw new Error(sR(e))}),F);var t})),n=Me(Ae(r,(e=>e.trigger))),o=Oe(r);return{dataset:r,triggers:n,lookupByTrigger:e=>oe(o,(t=>t.trigger===e))}},QR=e=>{var t=$o(),r=Ho(!1),n=t.isSet,o=()=>{n()&&((e=>{e.dispatch("AutocompleterEnd")})(e),r.set(!1),t.clear())},a=Ve((()=>XR(e))),i=i=>{(r=>t.get().map((t=>ET(e.dom,e.selection.getRng(),t.trigger,!0).bind((t=>RT(e,a,t,r))))).getOrThunk((()=>TT(e,a))))(i).fold(o,(o=>{(e=>{n()||t.set({trigger:e.trigger,matchLength:e.text.length})})(o.context),o.lookupData.then((n=>{t.get().map((a=>{var i=o.context;a.trigger===i.trigger&&(t.set(u(u({},a),{},{matchLength:i.text.length})),r.get()?(qf(e,{range:i.range}),((e,t)=>{e.dispatch("AutocompleterUpdate",t)})(e,{lookupData:n})):(r.set(!0),qf(e,{range:i.range}),((e,t)=>{e.dispatch("AutocompleterStart",t)})(e,{lookupData:n})))}))}))}))},l=()=>t.get().bind((t=>{var n=t.trigger,o=e.selection.getRng();return ET(e.dom,o,n,r.get()).filter((e=>{var t,r,n,a,i=e.range;return r=i,n=(t=o).compareBoundaryPoints(window.Range.START_TO_START,r),a=t.compareBoundaryPoints(window.Range.END_TO_END,r),n>=0&&a<=0})).map((e=>e.range))}));e.addCommand("mceAutocompleterReload",((e,t)=>{var r=x(t)?t.fetchOptions:{};i(r)})),e.addCommand("mceAutocompleterClose",o),e.addCommand("mceAutocompleterRefreshActiveRange",(()=>{l().each((t=>{qf(e,{range:t})}))})),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",(()=>l().isSome())),((e,t)=>{var r=Li(t.load,50);e.on("input",(t=>{("insertCompositionText"!==t.inputType||e.composing)&&r.throttle()})),e.on("keydown",(e=>{var n=e.which;8===n?r.throttle():27===n?(r.cancel(),t.cancelIfNecessary()):38!==n&&40!==n||r.cancel()}),!0),e.on("remove",r.cancel)})(e,{cancelIfNecessary:o,load:i})},ZR=Ot().browser.isSafari(),JR=e=>pl(_r.fromDom(e)),eD=(e,t)=>{var r;return 0===e.startOffset&&e.endOffset===(null===(r=t.textContent)||void 0===r?void 0:r.length)},tD=(e,t)=>K.from(e.getParent(t.container(),"details")),rD=(e,t)=>tD(e,t).isSome(),nD=(e,t)=>t.startSummary.exists((t=>((e,t)=>uu(t).exists((t=>t.isEqual(e))))(e,t))),oD=(e,t)=>t.startSummary.exists((t=>((e,t)=>fu(t).exists((r=>Eo(r.getNode())&&mu(t,r).exists((t=>t.isEqual(e)))||r.isEqual(e))))(e,t))),aD=(e,t)=>{var r=t.getNode();T(r)||e.selection.setCursorLocation(r,t.offset())},iD=(e,t,r)=>{var n=e.dom.getParent(t.container(),"details");if(n&&!n.open){var o=e.dom.select("summary",n)[0];if(o)(r?uu(o):fu(o)).each((t=>aD(e,t)))}else aD(e,t)},lD=(e,t,r)=>{var n=e.dom,o=e.selection,a=e.getBody();if("character"===r){var i=hs.fromRangeStart(o.getRng()),l=n.getParent(i.container(),n.isBlock),s=tD(n,i),d=l&&n.isEmpty(l),c=_(null==l?void 0:l.previousSibling),m=_(null==l?void 0:l.nextSibling);if(d)if(t?m:c)if(lu(!t,a,i).exists((e=>rD(n,e)&&!Wt(s,tD(n,e)))))return!0;return lu(t,a,i).fold(V,(r=>{var o=tD(n,r);if(rD(n,r)&&!Wt(s,o)){if(t||iD(e,r,!1),l&&d){if(t&&c)return!0;if(!t&&m)return!0;iD(e,r,t),e.dom.remove(l)}return!0}return!1}))}return!1},sD=(e,t,r,n)=>{var o=e.selection.getRng(),a=hs.fromRangeStart(o),i=e.getBody();return"selection"===n?((e,t)=>{var r=t.startSummary.exists((t=>t.contains(e.startContainer))),n=t.startSummary.exists((t=>t.contains(e.endContainer))),o=t.startDetails.forall((e=>t.endDetails.forall((t=>e!==t))));return(r||n)&&!(r&&n)||o})(o,t):r?oD(a,t)||((e,t,r)=>r.startDetails.exists((r=>cu(e,t).forall((e=>!r.contains(e.container()))))))(i,a,t):nD(a,t)||((e,t)=>t.startDetails.exists((r=>mu(r,e).forall((r=>t.startSummary.exists((t=>!t.contains(e.container())&&t.contains(r.container()))))))))(a,t)},dD=(e,t,r)=>((e,t)=>{var r=K.from(e.getParent(t.startContainer,"details")),n=K.from(e.getParent(t.endContainer,"details"));if(r.isSome()||n.isSome()){var o=r.bind((t=>K.from(e.select("summary",t)[0])));return K.some({startSummary:o,startDetails:r,endDetails:n})}return K.none()})(e.dom,e.selection.getRng()).fold((()=>lD(e,t,r)),(n=>sD(e,n,t,r)||lD(e,t,r))),cD=(e,t,r)=>dD(e,t,r)||ZR&&((e,t,r)=>{var n=e.selection,o=n.getNode(),a=n.getRng(),i=hs.fromRangeStart(a);return!!Bo(o)&&("selection"===r&&eD(a,o)||Ph(t,i,o)?JR(o):e.undoManager.transact((()=>{var a=n.getSel(),i=null!=a?a:{},l=i.anchorNode,s=i.anchorOffset,d=i.focusNode,c=i.focusOffset,m=()=>{D(l)&&D(s)&&D(d)&&D(c)&&(null==a||a.setBaseAndExtent(l,s,d,c))},u=(e,t)=>{te(e.childNodes,(e=>{Vu(e)&&t.appendChild(e)}))},f=e.dom.create("span",{"data-mce-bogus":"1"});u(o,f),o.appendChild(f),m(),"word"!==r&&"line"!==r||null==a||a.modify("extend",t?"right":"left",r),!n.isCollapsed()&&eD(n.getRng(),f)?JR(o):(e.execCommand(t?"ForwardDelete":"Delete"),l=null==a?void 0:a.anchorNode,s=null==a?void 0:a.anchorOffset,d=null==a?void 0:a.focusNode,c=null==a?void 0:a.focusOffset,u(f,o),m()),e.dom.remove(f)})),!0)})(e,t,r)?K.some(P):K.none(),mD=e=>function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.getBody(),a={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:P,inputType:r},i=di(new InputEvent(e));return t.dispatch(e,u(u(u({},i),a),n))},uD=mD("input"),fD=mD("beforeinput"),gD=Ot(),pD=gD.os,vD=pD.isMacOS()||pD.isiOS(),hD=gD.browser.isFirefox(),bD=(e,t)=>{var r=!1;e.on("keydown",(n=>{r=n.keyCode===Gf.BACKSPACE,n.isDefaultPrevented()||((e,t,r)=>{var n=r.keyCode===Gf.BACKSPACE?"deleteContentBackward":"deleteContentForward",o=e.selection.isCollapsed(),a=o?"character":"selection",i=e=>o?e?"word":"line":"selection";PN([{keyCode:Gf.BACKSPACE,action:ON(Z_,e)},{keyCode:Gf.BACKSPACE,action:ON(YE,e,!1)},{keyCode:Gf.DELETE,action:ON(YE,e,!0)},{keyCode:Gf.BACKSPACE,action:ON(FE,e,!1)},{keyCode:Gf.DELETE,action:ON(FE,e,!0)},{keyCode:Gf.BACKSPACE,action:ON(T_,e,t,!1)},{keyCode:Gf.DELETE,action:ON(T_,e,t,!0)},{keyCode:Gf.BACKSPACE,action:ON(fb,e,!1)},{keyCode:Gf.DELETE,action:ON(fb,e,!0)},{keyCode:Gf.BACKSPACE,action:ON(cD,e,!1,a)},{keyCode:Gf.DELETE,action:ON(cD,e,!0,a)},...vD?[{keyCode:Gf.BACKSPACE,altKey:!0,action:ON(cD,e,!1,i(!0))},{keyCode:Gf.DELETE,altKey:!0,action:ON(cD,e,!0,i(!0))},{keyCode:Gf.BACKSPACE,metaKey:!0,action:ON(cD,e,!1,i(!1))}]:[{keyCode:Gf.BACKSPACE,ctrlKey:!0,action:ON(cD,e,!1,i(!0))},{keyCode:Gf.DELETE,ctrlKey:!0,action:ON(cD,e,!0,i(!0))}],{keyCode:Gf.BACKSPACE,action:ON(tk,e,!1)},{keyCode:Gf.DELETE,action:ON(tk,e,!0)},{keyCode:Gf.BACKSPACE,action:ON(W_,e,!1)},{keyCode:Gf.DELETE,action:ON(W_,e,!0)},{keyCode:Gf.BACKSPACE,action:ON(AE,e,!1)},{keyCode:Gf.DELETE,action:ON(AE,e,!0)},{keyCode:Gf.BACKSPACE,action:ON(NE,e,!1)},{keyCode:Gf.DELETE,action:ON(NE,e,!0)},{keyCode:Gf.BACKSPACE,action:ON(U_,e,!1)},{keyCode:Gf.DELETE,action:ON(U_,e,!0)},{keyCode:Gf.BACKSPACE,action:ON(ek,e,!1)},{keyCode:Gf.DELETE,action:ON(ek,e,!0)}],r).filter((t=>e.selection.isEditable())).each((t=>{r.preventDefault(),fD(e,n).isDefaultPrevented()||(t(),uD(e,n))}))})(e,t,n)})),e.on("keyup",(t=>{t.isDefaultPrevented()||((e,t,r)=>{BN([{keyCode:Gf.BACKSPACE,action:ON(GE,e)},{keyCode:Gf.DELETE,action:ON(GE,e)},...vD?[{keyCode:Gf.BACKSPACE,altKey:!0,action:ON(H_,e)},{keyCode:Gf.DELETE,altKey:!0,action:ON(H_,e)},...r?[{keyCode:hD?224:91,action:ON(H_,e)}]:[]]:[{keyCode:Gf.BACKSPACE,ctrlKey:!0,action:ON(H_,e)},{keyCode:Gf.DELETE,ctrlKey:!0,action:ON(H_,e)}]],t)})(e,t,r),r=!1}))},yD=(e,t)=>{var r=e.dom,n=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var o=(e=>{for(;e;){if(so(e)||bo(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(t.firstChild);o&&/^(UL|OL|DL)$/.test(o.nodeName)&&t.insertBefore(r.doc.createTextNode(eo),t.firstChild)}var a=r.createRng();if(t.normalize(),t.hasChildNodes()){for(var i,l=new Qn(t,t),s=t;i=l.current();){if(bo(i)){a.setStart(i,0),a.setEnd(i,0);break}if(n[i.nodeName.toLowerCase()]){a.setStartBefore(i),a.setEndBefore(i);break}s=i,i=l.next()}i||(a.setStart(s,0),a.setEnd(s,0))}else Eo(t)?t.nextSibling&&r.isBlock(t.nextSibling)?(a.setStartBefore(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)):(a.setStart(t,0),a.setEnd(t,0));e.selection.setRng(a),Jg(e,a)}},CD=(e,t)=>{for(var r,n=e.getRoot(),o=t;o!==n&&o&&"false"!==e.getContentEditable(o);){if("true"===e.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},wD=e=>K.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),SD=e=>{e.innerHTML='<br data-mce-bogus="1">'},xD=(e,t)=>{ud(e).toLowerCase()===t.tagName.toLowerCase()&&((e,t,r)=>{var n=e.dom;K.from(r.style).map(n.parseStyle).each((e=>{var r=u(u({},Cn(_r.fromDom(t))),e);n.setStyles(t,r)}));var o=K.from(r.class).map((e=>e.split(/\s+/))),a=K.from(t.className).map((e=>oe(e.split(/\s+/),(e=>""!==e))));Vt(o,a,((e,r)=>{var o=oe(r,(t=>!Z(e,t))),a=[...e,...o];n.setAttrib(t,"class",a.join(" "))}));var i=["style","class"],l=De(r,((e,t)=>!Z(i,t)));n.setAttribs(t,l)})(e,t,fd(e))},ED=function(e,t,r,n){var o,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,s=e.dom,d=e.schema,c=ud(e),m=r?r.nodeName.toUpperCase():"",u=t,f=d.getTextInlineElements(),g=o=i||"TABLE"===m||"HR"===m?s.create(i||c,l||{}):r.cloneNode(!1);if(a){do{if(f[u.nodeName]){if(pu(u)||Ru(u))continue;var p=u.cloneNode(!1);s.setAttrib(p,"id",""),o.hasChildNodes()?(p.appendChild(o.firstChild),o.appendChild(p)):(g=p,o.appendChild(p))}}while((u=u.parentNode)&&u!==n)}else s.setAttrib(o,"style",null),s.setAttrib(o,"class",null);return xD(e,o),SD(g),o},kD=(e,t,r)=>!t&&r.nodeName.toLowerCase()===ud(e)&&e.dom.isEmpty(r)&&((e,t,r)=>{for(var n=t;n&&n!==e&&_(n.nextSibling);){var o=n.parentElement;if(!o||!r(o))return Oo(o);n=o}return!1})(e.getBody(),r,(t=>Pe(e.schema.getTextBlockElements(),t.nodeName.toLowerCase()))),_D=(e,t,r)=>{var n,o,a,i=t(ud(e)),l=((e,t)=>e.dom.getParent(t,Oo))(e,r);l&&(e.dom.insertAfter(i,l),yD(e,i),(null!==(a=null===(o=null===(n=r.parentElement)||void 0===n?void 0:n.childNodes)||void 0===o?void 0:o.length)&&void 0!==a?a:0)>1&&e.dom.remove(r))},ND=(e,t)=>{var r=null==e?void 0:e.parentNode;return D(r)&&r.nodeName===t},TD=e=>D(e)&&/^(OL|UL|LI)$/.test(e.nodeName),RD=e=>D(e)&&/^(LI|DT|DD)$/.test(e.nodeName),DD=e=>{var t=e.parentNode;return RD(t)?t:e},AD=(e,t,r)=>{for(var n=e[r?"firstChild":"lastChild"];n&&!so(n);)n=n[r?"nextSibling":"previousSibling"];return n===t},OD=e=>ie(Ae(Cn(_r.fromDom(e)),((e,t)=>`${t}: ${e};`)),((e,t)=>e+t),""),BD=(e,t,r,n,o)=>{var a=e.dom,i=e.selection.getRng(),l=r.parentNode;if(r!==e.getBody()&&l){var s;TD(s=r)&&TD(s.parentNode)&&(o="LI");var d=RD(n)?OD(n):void 0,c=RD(n)&&d?t(o,{style:OD(n)}):t(o);if(AD(r,n,!0)&&AD(r,n,!1))if(ND(r,"LI")){var m=DD(r);a.insertAfter(c,m),(e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e})(r)?a.remove(m):a.remove(r)}else a.replace(c,r);else if(AD(r,n,!0))ND(r,"LI")?(a.insertAfter(c,DD(r)),c.appendChild(a.doc.createTextNode(" ")),c.appendChild(r)):l.insertBefore(c,r),a.remove(n);else if(AD(r,n,!1))a.insertAfter(c,DD(r)),a.remove(n);else{r=DD(r);var u=i.cloneRange();u.setStartAfter(n),u.setEndAfter(r);var f=u.extractContents();if("LI"===o&&((e,t)=>e.firstChild&&e.firstChild.nodeName===t)(f,"LI")){var g=oe(ee(c.children,_r.fromDom),z(ir("br")));c=f.firstChild,a.insertAfter(f,r),te(g,(e=>En(_r.fromDom(c),e))),d&&c.setAttribute("style",d)}else a.insertAfter(f,r),a.insertAfter(c,r);a.remove(n)}yD(e,c)}},PD=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),LD=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,MD=(e,t)=>D(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),ID=(e,t,r)=>bo(t)?e?1===r&&t.data.charAt(r-1)===vl?0:r:r===t.data.length-1&&t.data.charAt(r)===vl?t.data.length:r:r,FD={insert:(e,t)=>{var r,n,o,a,i=!1,l=e.dom,s=e.schema.getNonEmptyElements(),d=e.selection.getRng(),c=ud(e),m=_r.fromDom(d.startContainer),u=$r(m,d.startOffset),f=u.exists((e=>tr(e)&&!mn(e))),g=d.collapsed&&f,p=(t,n)=>ED(e,r,w,C,hd(e),t,n),v=e=>{var t=ID(e,r,n);if(bo(r)&&(e?t>0:t<r.data.length))return!1;if((r.parentNode===w||r===w)&&i&&!e)return!0;if(e&&so(r)&&r===w.firstChild)return!0;if(LD(r,"TABLE")||LD(r,"HR"))return i&&!e||!i&&e;var o,a=new Qn(r,w);for(bo(r)&&(e&&0===t?a.prev():e||t!==r.data.length||a.next());o=a.current();){if(so(o)){if(!o.getAttribute("data-mce-bogus")){var l=o.nodeName.toLowerCase();if(s[l]&&"br"!==l)return!1}}else if(bo(o)&&!no(o.data))return!1;e?a.prev():a.next()}return!0},h=()=>{var t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==x?p(c):p(),((e,t)=>{var r=bd(e);return!R(t)&&(S(r)?Z(Ht.explode(r),t.nodeName.toLowerCase()):r)})(e,a)&&MD(l,a)&&l.isEmpty(w,void 0,{includeZwsp:!0})?t=l.split(a,w):l.insertAfter(t,w),yD(e,t),t};Ng(l,d).each((e=>{d.setStart(e.startContainer,e.startOffset),d.setEnd(e.endContainer,e.endOffset)})),r=d.startContainer,n=d.startOffset;var b=!(!t||!t.shiftKey),y=!(!t||!t.ctrlKey);so(r)&&r.hasChildNodes()&&!g&&(i=n>r.childNodes.length-1,r=r.childNodes[Math.min(n,r.childNodes.length-1)]||r,n=i&&bo(r)?r.data.length:0);var C=CD(l,r);if(C&&!((e,t)=>{var r=e.dom.getParent(t,"ol,ul,dl");return null!==r&&"false"===e.dom.getContentEditableParent(r)})(e,r)){b||(r=((e,t,r,n,o)=>{var a,i,l=e.dom,s=null!==(a=CD(l,n))&&void 0!==a?a:l.getRoot(),d=l.getParent(n,l.isBlock);if(!d||!MD(l,d)){if(!(d=d||s).hasChildNodes()){var c=l.create(t);return xD(e,c),d.appendChild(c),r.setStart(c,0),r.setEnd(c,0),c}for(var m,u=n;u&&u.parentNode!==d;)u=u.parentNode;for(;u&&!l.isBlock(u);)m=u,u=u.previousSibling;var f=null===(i=null==m?void 0:m.parentElement)||void 0===i?void 0:i.nodeName;if(m&&f&&e.schema.isValidChild(f,t.toLowerCase())){var g=m.parentNode,p=l.create(t);for(xD(e,p),g.insertBefore(p,m),u=m;u&&!l.isBlock(u);){var v=u.nextSibling;p.appendChild(u),u=v}r.setStart(n,o),r.setEnd(n,o)}}return n})(e,c,d,r,n));var w=l.getParent(r,l.isBlock)||l.getRoot();a=D(null==w?void 0:w.parentNode)?l.getParent(w.parentNode,l.isBlock):null,o=w?w.nodeName.toUpperCase():"";var x=a?a.nodeName.toUpperCase():"";if("LI"===x&&!y){w=a,a=a.parentNode,o=x}if(so(a)&&kD(e,b,w))return _D(e,p,w);if(/^(LI|DT|DD)$/.test(o)&&so(a)&&l.isEmpty(w))BD(e,p,a,w,c);else if(g||w!==e.getBody()&&MD(l,w)){var E,k=w.parentNode;if(g)E=p(c),u.fold((()=>{kn(m,_r.fromDom(E))}),(e=>{Sn(e,_r.fromDom(E))})),e.selection.setCursorLocation(E,0);else if(wl(w))E=Rl(w),l.isEmpty(w)&&SD(w),xD(e,E),yD(e,E);else if(v(!1))E=h();else if(v(!0)&&k){var _=hs.fromRangeStart(d),N=kv(_),T=_r.fromDom(w),A=zv(T,_,e.schema)?Hv(T,_,e.schema).bind((e=>K.from(e.getNode()))):K.none();E=k.insertBefore(p(),w);var O=LD(w,"HR")||N?E:A.getOr(w);yD(e,O)}else{var B=(e=>{var t=e.cloneRange();return t.setStart(e.startContainer,ID(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,ID(!1,e.endContainer,e.endOffset)),t})(d).cloneRange();B.setEndAfter(w);var P=B.extractContents();(e=>{te(qn(_r.fromDom(e),nr),(e=>{var t=e.dom;t.nodeValue=bl(t.data)}))})(P),(e=>{var t=e;do{bo(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)})(P),E=P.firstChild,l.insertAfter(P,w),((e,t,r)=>{var n,o=[];if(r){for(var a=r;a=a.firstChild;){if(e.isBlock(a))return;so(a)&&!t[a.nodeName.toLowerCase()]&&o.push(a)}for(var i=o.length;i--;)(!(a=o[i]).hasChildNodes()||a.firstChild===a.lastChild&&""===(null===(n=a.firstChild)||void 0===n?void 0:n.nodeValue)||PD(e,a))&&e.remove(a)}})(l,s,E),((e,t)=>{t.normalize();var r=t.lastChild;(!r||so(r)&&/^(left|right)$/gi.test(e.getStyle(r,"float",!0)))&&e.add(t,"br")})(l,w),l.isEmpty(w)&&SD(w),E.normalize(),l.isEmpty(E)?(l.remove(E),h()):(xD(e,E),yD(e,E))}l.setAttrib(E,"id",""),e.dispatch("NewBlock",{newBlock:E})}}},fakeEventName:"insertParagraph"},jD=(e,t,r)=>{var n=e.dom.createRng();r?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),e.selection.setRng(n),Jg(e,n)},UD=(e,t)=>{var r,n=e.selection,o=e.dom,a=n.getRng(),i=!1;Ng(o,a).each((e=>{a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)}));var l=a.startOffset,s=a.startContainer;if(so(s)&&s.hasChildNodes()){var d=l>s.childNodes.length-1;s=s.childNodes[Math.min(l,s.childNodes.length-1)]||s,l=d&&bo(s)?s.data.length:0}var c=o.getParent(s,o.isBlock),m=c&&c.parentNode?o.getParent(c.parentNode,o.isBlock):null,u=m?m.nodeName.toUpperCase():"",f=!(!t||!t.ctrlKey);"LI"!==u||f||(c=m),bo(s)&&l>=s.data.length&&(((e,t,r)=>{for(var n,o=new Qn(t,r),a=e.getNonEmptyElements();n=o.next();)if(a[n.nodeName.toLowerCase()]||bo(n)&&n.length>0)return!0;return!1})(e.schema,s,c||o.getRoot())||(r=o.create("br"),a.insertNode(r),a.setStartAfter(r),a.setEndAfter(r),i=!0)),r=o.create("br"),ys(o,a,r),jD(e,r,i),e.undoManager.add()},zD=(e,t)=>{var r=_r.fromTag("br");Sn(_r.fromDom(t),r),e.undoManager.add()},HD=(e,t)=>{$D(e.getBody(),t)||xn(_r.fromDom(t),_r.fromTag("br"));var r=_r.fromTag("br");xn(_r.fromDom(t),r),jD(e,r.dom,!1),e.undoManager.add()},$D=(e,t)=>{return r=hs.after(t),!!Eo(r.getNode())||cu(e,hs.after(t)).map((e=>Eo(e.getNode()))).getOr(!1);var r},WD=e=>e&&"A"===e.nodeName&&"href"in e,VD=e=>e.fold(V,WD,WD,V),qD=(e,t)=>{t.fold(P,U(zD,e),U(HD,e),P)},KD={insert:(e,t)=>{var r=(e=>{var t=U(Sh,e),r=hs.fromRangeStart(e.selection.getRng());return Sk(t,e.getBody(),r).filter(VD)})(e);r.isSome()?r.each(U(qD,e)):UD(e,t)},fakeEventName:"insertLineBreak"},GD=(e,t)=>wD(e).filter((e=>t.length>0&&Tr(_r.fromDom(e),t))).isSome(),YD=$s([{br:[]},{block:[]},{none:[]}]),XD=(e,t)=>(e=>GD(e,vd(e)))(e),QD=e=>(t,r)=>(e=>wD(e).filter((e=>dl(_r.fromDom(e)))).isSome())(t)===e,ZD=(e,t)=>(r,n)=>{var o=(e=>wD(e).fold(I(""),(e=>e.nodeName.toUpperCase())))(r)===e.toUpperCase();return o===t},JD=e=>{var t=CD(e.dom,e.selection.getStart());return R(t)},eA=e=>ZD("pre",e),tA=e=>(t,r)=>md(t)===e,rA=(e,t)=>(e=>GD(e,pd(e)))(e),nA=(e,t)=>t,oA=e=>{var t=ud(e),r=CD(e.dom,e.selection.getStart());return D(r)&&e.schema.isValidChild(r.nodeName,t)},aA=e=>{var t=e.selection.getRng(),r=_r.fromDom(t.startContainer),n=$r(r,t.startOffset).map((e=>tr(e)&&!mn(e)));return t.collapsed&&n.getOr(!0)},iA=(e,t)=>(r,n)=>ie(e,((e,t)=>e&&t(r,n)),!0)?K.some(t):K.none(),lA=(e,t,r)=>{if((t.selection.isCollapsed()||(e=>{e.execCommand("delete")})(t),D(r))&&fD(t,e.fakeEventName).isDefaultPrevented())return;e.insert(t,r),D(r)&&uD(t,e.fakeEventName)},sA=(e,t)=>{var r=()=>lA(KD,e,t),n=()=>lA(FD,e,t),o=((e,t)=>uk([iA([XD],YD.none()),iA([eA(!0),JD],YD.none()),iA([ZD("summary",!0)],YD.br()),iA([eA(!0),tA(!1),nA],YD.br()),iA([eA(!0),tA(!1)],YD.block()),iA([eA(!0),tA(!0),nA],YD.block()),iA([eA(!0),tA(!0)],YD.br()),iA([QD(!0),nA],YD.br()),iA([QD(!0)],YD.block()),iA([rA],YD.br()),iA([nA],YD.br()),iA([oA],YD.block()),iA([aA],YD.block())],[e,!(!t||!t.shiftKey)]).getOr(YD.none()))(e,t);switch(gd(e)){case"linebreak":o.fold(r,r,P);break;case"block":o.fold(n,n,P);break;case"invert":o.fold(n,r,P);break;default:o.fold(r,n,P)}},dA=Ot(),cA=dA.os.isiOS()&&dA.browser.isSafari(),mA=(e,t)=>{var r;t.isDefaultPrevented()||(t.preventDefault(),(r=e.undoManager).typing&&(r.typing=!1,r.add()),e.undoManager.transact((()=>{sA(e,t)})))},uA=e=>{var t=K.none();e.on("keydown",(r=>{r.keyCode===Gf.ENTER&&(cA&&(e=>{if(!e.collapsed)return!1;var t=e.startContainer;if(bo(t)){var r=t.data.charAt(e.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(r)}return!1})(e.selection.getRng())?(e=>{t=K.some(e.selection.getBookmark()),e.undoManager.add()})(e):mA(e,r))})),e.on("keyup",(r=>{r.keyCode===Gf.ENTER&&t.each((()=>((e,r)=>{e.undoManager.undo(),t.fold(P,(t=>e.selection.moveToBookmark(t))),mA(e,r),t=K.none()})(e,r)))}))},fA=(e,t)=>{e.on("keydown",(r=>{r.isDefaultPrevented()||((e,t,r)=>{var n=jt.os.isMacOS()||jt.os.isiOS();BN([{keyCode:Gf.END,action:ON(wN,e,!0)},{keyCode:Gf.HOME,action:ON(wN,e,!1)},...n?[]:[{keyCode:Gf.HOME,action:ON(SN,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Gf.END,action:ON(SN,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Gf.END,action:ON(IN,e,!0)},{keyCode:Gf.HOME,action:ON(IN,e,!1)},{keyCode:Gf.END,action:ON(E_,e,!0,t)},{keyCode:Gf.HOME,action:ON(E_,e,!1,t)}],r).each((e=>{r.preventDefault()}))})(e,t,r)}))},gA=e=>{e.on("input",(t=>{t.isComposing||(e=>{var t=_r.fromDom(e.getBody());e.selection.isCollapsed()&&ih(t,hs.fromRangeStart(e.selection.getRng()),e.schema).each((t=>{e.selection.setRng(t.toRange())}))})(e)}))},pA=Ot(),vA=e=>e.stopImmediatePropagation(),hA=e=>e.keyCode===Gf.PAGE_UP||e.keyCode===Gf.PAGE_DOWN,bA=(e,t,r)=>{r&&!e.get()?t.on("NodeChange",vA,!0):!r&&e.get()&&t.off("NodeChange",vA),e.set(r)},yA=(e,t)=>{if(!pA.os.isMacOS()){var r=Ho(!1);e.on("keydown",(t=>{hA(t)&&bA(r,e,!0)})),e.on("keyup",(n=>{n.isDefaultPrevented()||((e,t,r)=>{BN([{keyCode:Gf.PAGE_UP,action:ON(E_,e,!1,t)},{keyCode:Gf.PAGE_DOWN,action:ON(E_,e,!0,t)}],r)})(e,t,n),hA(n)&&r.get()&&(bA(r,e,!1),e.nodeChanged())}))}},CA=(e,t)=>{var r=t.container(),n=t.offset();return bo(r)?(r.insertData(n,e),K.some(hs(r,n+e.length))):zm(t).map((r=>{var n=_r.fromText(e);return t.isAtEnd()?xn(r,n):Sn(r,n),hs(n.dom,e.length)}))},wA=U(CA,eo),SA=U(CA," "),xA=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},EA=e=>{var t=hs.fromRangeStart(e.selection.getRng()),r=_r.fromDom(e.getBody());if(e.selection.isCollapsed()){var n=U(Sh,e),o=hs.fromRangeStart(e.selection.getRng());return Sk(n,e.getBody(),o).bind((e=>t=>t.fold((t=>mu(e.dom,hs.before(t))),(e=>uu(e)),(e=>fu(e)),(t=>cu(e.dom,hs.after(t)))))(r)).map((n=>()=>((e,t,r)=>n=>Qv(e,n,r)?wA(t):SA(t))(r,t,e.schema)(n).each(xA(e))))}return K.none()},kA=e=>{var t,r;return qt(jt.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,r=e.selection.getRng().startContainer,t.isEditable(t.getParent(r,"summary"))),(()=>{var t=_r.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((e,t,r)=>Qv(e,t,r)?wA(t):SA(t))(t,hs.fromRangeStart(e.selection.getRng()),e.schema).each(xA(e))}))},_A=e=>{e.on("keydown",(t=>{t.isDefaultPrevented()||((e,t)=>{PN([{keyCode:Gf.SPACEBAR,action:ON(EA,e)},{keyCode:Gf.SPACEBAR,action:ON(kA,e)}],t).each((r=>{t.preventDefault(),fD(e,"insertText",{data:" "}).isDefaultPrevented()||(r(),uD(e,"insertText",{data:" "}))}))})(e,t)}))},NA=e=>Vc(e)?[{keyCode:Gf.TAB,action:ON(fT,e,!0)},{keyCode:Gf.TAB,shiftKey:!0,action:ON(fT,e,!1)}]:[],TA=e=>{e.on("keydown",(t=>{t.isDefaultPrevented()||((e,t)=>{BN([...NA(e)],t).each((e=>{t.preventDefault()}))})(e,t)}))},RA=e=>{if(e.addShortcut("Meta+P","","mcePrint"),QR(e),LS(e))return Ho(null);var t=w_(e);return(e=>{e.on("beforeinput",(t=>{e.selection.isEditable()&&!J(t.getTargetRanges(),(t=>!Rp(e.dom,t)))||t.preventDefault()}))})(e),(e=>{e.on("keyup compositionstart",U(gN,e))})(e),gT(e,t),bD(e,t),uA(e),_A(e),gA(e),TA(e),fA(e,t),yA(e,t),t};class DA{constructor(e){var t;this.lastPath=[],this.editor=e;var r=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",(r=>{var n=e.selection.getRng(),o={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset};"nodechange"!==r.type&&Cg(o,t)||e.dispatch("SelectionChange"),t=o})),e.on("contextmenu",(()=>{cp(e),e.dispatch("SelectionChange")})),e.on("SelectionChange",(()=>{var t=e.selection.getStart(!0);t&&Hu(e)&&!r.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("mouseup",(t=>{!t.isDefaultPrevented()&&Hu(e)&&("IMG"===e.selection.getNode().nodeName?fp.setEditorTimeout(e,(()=>{e.nodeChanged()})):e.nodeChanged())}))}nodeChanged(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.editor.selection;if(this.editor.initialized&&r&&!ic(this.editor)&&!this.editor.mode.isReadOnly()){var n=this.editor.getBody();(e=r.getStart(!0)||n).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(e,n)||(e=n);var o=[];this.editor.dom.getParent(e,(e=>e===n||(o.push(e),!1))),this.editor.dispatch("NodeChange",u(u({},t),{},{element:e,parents:o}))}}isSameElementPath(e){var t,r=this.editor,n=fe(r.dom.getParents(e,q,r.getBody()));if(n.length===this.lastPath.length){for(t=n.length;t>=0&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1}}var AA,OA,BA=Xi("image"),PA=Xi("event"),LA=e=>t=>{t[PA]=e},MA=LA(0),IA=LA(2),FA=LA(1),jA=(AA=0,e=>{var t=e;return K.from(t[PA]).exists((e=>e===AA))}),UA=Xi("mode"),zA=e=>t=>{t[UA]=e},HA=(e,t)=>zA(t)(e),$A=zA(0),WA=zA(2),VA=zA(1),qA=e=>t=>{var r=t;return K.from(r[UA]).exists((t=>t===e))},KA=qA(0),GA=qA(1),YA=["none","copy","link","move"],XA=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],QA=()=>{var e=new window.DataTransfer,t="move",r="all",n={get dropEffect(){return t},set dropEffect(e){Z(YA,e)&&(t=e)},get effectAllowed(){return r},set effectAllowed(e){jA(n)&&Z(XA,e)&&(r=e)},get items(){return((e,t)=>u(u({},t),{},{get length(){return t.length},add:(r,n)=>{if(KA(e)){if(!S(r))return t.add(r);if(!T(n))return t.add(r,n)}return null},remove:r=>{KA(e)&&t.remove(r)},clear:()=>{KA(e)&&t.clear()}}))(n,e.items)},get files(){return GA(n)?Object.freeze({length:0,item:e=>null}):e.files},get types(){return e.types},setDragImage:(t,r,o)=>{var a;KA(n)&&(a={image:t,x:r,y:o},n[BA]=a,e.setDragImage(t,r,o))},getData:t=>GA(n)?"":e.getData(t),setData:(t,r)=>{KA(n)&&e.setData(t,r)},clearData:t=>{KA(n)&&e.clearData(t)}};return $A(n),n},ZA=e=>{var t,r=QA(),n=(t=e,K.from(t[UA]));return WA(e),MA(r),r.dropEffect=e.dropEffect,r.effectAllowed=e.effectAllowed,(e=>{var t=e;return K.from(t[BA])})(e).each((e=>r.setDragImage(e.image,e.x,e.y))),te(e.types,(t=>{"Files"!==t&&r.setData(t,e.getData(t))})),te(e.files,(e=>r.items.add(e))),(e=>{var t=e;return K.from(t[PA])})(e).each((e=>{((e,t)=>{LA(t)(e)})(r,e)})),n.each((t=>{HA(e,t),HA(r,t)})),r},JA=(e,t)=>e.setData("text/html",t),eO="x-tinymce/html",tO=I(eO),rO="\x3c!-- "+eO+" --\x3e",nO=e=>rO+e,oO=e=>-1!==e.indexOf(rO),aO=(e,t,r)=>{var n=e.split(/\n\n/),o=((e,t)=>{var r="<"+e,n=Ae(t,((e,t)=>t+'="'+Oa.encodeAllRaw(e)+'"'));return n.length&&(r+=" "+n.join(" ")),r+">"})(t,r),a="</"+t+">",i=ee(n,(e=>e.split(/\n/).join("<br />")));return 1===i.length?i[0]:ee(i,(e=>o+e+a)).join("")},iO="%MCEPASTEBIN%",lO=e=>e.dom.get("mcepastebin"),sO=e=>D(e)&&"mcepastebin"===e.id,dO=e=>e===iO,cO=e=>{var t=Ho(null);return{create:()=>((e,t)=>{var r=e.dom,n=e.selection,o=e.getBody();t.set(n.getRng());var a=r.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},iO);jt.browser.isFirefox()&&r.setStyle(a,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(a,"beforedeactivate focusin focusout",(e=>{e.stopPropagation()})),a.focus(),n.select(a,!0)})(e,t),remove:()=>((e,t)=>{var r=e.dom;if(lO(e)){for(var n,o=t.get();n=lO(e);)r.remove(n),r.unbind(n);o&&e.selection.setRng(o)}t.set(null)})(e,t),getEl:()=>lO(e),getHtml:()=>(e=>{var t=e.dom,r=(e,r)=>{e.appendChild(r),t.remove(r,!0)},n=i(oe(e.getBody().childNodes,sO)),o=n[0],a=n.slice(1);te(a,(e=>{r(o,e)}));for(var l=t.select("div[id=mcepastebin]",o),s=l.length-1;s>=0;s--){var d=t.create("div");o.insertBefore(d,l[s]),r(d,l[s])}return o?o.innerHTML:""})(e),getLastRng:t.get}},mO=(e,t)=>(Ht.each(t,(t=>{e=w(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])})),e),uO=e=>e=mO(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,r)=>t||r?eo:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),fO=(e,t)=>({content:e,cancelled:t}),gO=(e,t,r)=>{var n=((e,t,r)=>e.dispatch("PastePreProcess",{content:t,internal:r}))(e,t,r),o=((e,t)=>{var r=Gw({sanitize:Hc(e),sandbox_iframes:Gc(e),sandbox_iframes_exclusions:Yc(e),convert_unsafe_embeds:Xc(e)},e.schema);r.addNodeFilter("meta",(e=>{Ht.each(e,(e=>{e.remove()}))}));var n=r.parse(t,{forced_root_block:!1,isRootContent:!0});return av({validate:!0},e.schema).serialize(n)})(e,n.content);return e.hasEventListeners("PastePostProcess")&&!n.isDefaultPrevented()?((e,t,r)=>{var n=e.dom.create("div",{style:"display:none"},t),o=((e,t,r)=>e.dispatch("PastePostProcess",{node:t,internal:r}))(e,n,r);return fO(o.node.innerHTML,o.isDefaultPrevented())})(e,o,r):fO(o,n.isDefaultPrevented())},pO=(e,t)=>(e.insertContent(t,{merge:Dc(e),paste:!0}),!0),vO=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),hO=(e,t,r)=>!(e.selection.isCollapsed()||!vO(t))&&((e,t,r)=>(e.undoManager.extra((()=>{r(e,t)}),(()=>{e.execCommand("mceInsertLink",!1,t)})),!0))(e,t,r),bO=(e,t,r)=>!!((e,t)=>vO(t)&&J(Wc(e),(e=>et(t.toLowerCase(),`.${e.toLowerCase()}`))))(e,t)&&((e,t,r)=>(e.undoManager.extra((()=>{r(e,t)}),(()=>{e.insertContent('<img src="'+t+'">')})),!0))(e,t,r),yO=(e,t,r)=>{r||!Ac(e)?pO(e,t):((e,t)=>{Ht.each([hO,bO,pO],(r=>!r(e,t,pO)))})(e,t)},CO=(e=>{var t=0;return()=>e+t++})("mceclip"),wO=e=>{var t=QA();return JA(t,e),WA(t),t},SO=(e,t,r,n,o)=>{var a=((e,t,r)=>gO(e,t,r))(e,t,r);if(!a.cancelled){var i=a.content,l=()=>yO(e,i,n);if(o)fD(e,"insertFromPaste",{dataTransfer:wO(i)}).isDefaultPrevented()||(l(),uD(e,"insertFromPaste"));else l()}},xO=(e,t,r,n)=>{var o=r||oO(t);SO(e,(e=>e.replace(rO,""))(t),o,!1,n)},EO=(e,t,r)=>{var n=e.dom.encode(t).replace(/\r\n/g,"\n"),o=ao(n,Bc(e)),a=aO(o,ud(e),fd(e));SO(e,a,!1,!0,r)},kO=e=>{var t={};if(e&&e.types)for(var r=0;r<e.types.length;r++){var n=e.types[r];try{t[n]=e.getData(n)}catch(e){t[n]=""}}return t},_O=(e,t)=>t in e&&e[t].length>0,NO=e=>_O(e,"text/html")||_O(e,"text/plain"),TO=(e,t,r,n)=>{var o=CO(),a=Cd(e)&&D(r.name),i=a?((e,t)=>{var r=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return D(r)?e.dom.encode(r[1]):void 0})(e,r.name):o,l=a?r.name:void 0,s=t.create(o,r,n,i,l);return t.add(s),s},RO=e=>{var t=Wc(e);return e=>Je(e.type,"image/")&&J(t,(t=>{return r=t.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},(Ht.hasOwn(n,r)?"image/"+n[r]:"image/"+r)===e.type;var r,n}))},DO=(e,t,r)=>{var n,o="paste"===t.type?t.clipboardData:t.dataTransfer;if(Ec(e)&&o){var a=((e,t)=>{var r=t.items?me(Ce(t.items),(e=>"file"===e.kind?[e.getAsFile()]:[])):[],n=t.files?Ce(t.files):[];return oe(r.length>0?r:n,RO(e))})(e,o);if(a.length>0)return t.preventDefault(),(n=a,Promise.all(ee(n,(e=>bC(e).then((t=>({file:e,uri:t}))))))).then((t=>{r&&e.selection.setRng(r),te(t,(t=>{((e,t)=>{pC(t.uri).each((r=>{var n=r.data,o=r.type,a=r.base64Encoded?n:btoa(n),i=t.file,l=e.editorUpload.blobCache,s=l.getByData(a,o),d=null!=s?s:TO(e,l,i,a);xO(e,`<img src="${d.blobUri()}">`,!1,!0)}))})(e,t)}))})),!0}return!1},AO=(e,t,r,n,o)=>{var a=uO(r),i=_O(t,tO())||oO(r),l=!i&&(e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e))(a),s=vO(a);(dO(a)||!a.length||l&&!s)&&(n=!0),(n||s)&&(a=_O(t,"text/plain")&&l?t["text/plain"]:(e=>{var t=Qa(),r=Gw({},t),n="",o=t.getVoidElements(),a=Ht.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),l=e=>{var r=e.name,s=e;if("br"!==r){if("wbr"!==r)if(o[r]&&(n+=" "),a[r])n+=" ";else{if(3===e.type&&(n+=e.value),!(e.name in t.getVoidElements())){var d=e.firstChild;if(d)do{l(d)}while(d=d.next)}i[r]&&s.next&&(n+="\n","p"===r&&(n+="\n"))}}else n+="\n"};return e=mO(e,[/<!\[[^\]]+\]>/g]),l(r.parse(e)),n})(a)),dO(a)||(n?EO(e,a,o):xO(e,a,i,o))},OO=(e,t,r)=>{var n;e.on("keydown",(e=>{(e=>Gf.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode)(e)&&!e.isDefaultPrevented()&&(n=e.shiftKey&&86===e.keyCode)})),e.on("paste",(o=>{if(!o.isDefaultPrevented()&&!(e=>{var t,r;return jt.os.isAndroid()&&0===(null===(r=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===r?void 0:r.length)})(o)){var a="text"===r.get()||n;n=!1;var i=kO(o.clipboardData);!NO(i)&&DO(e,o,t.getLastRng()||e.selection.getRng())||(_O(i,"text/html")?(o.preventDefault(),AO(e,i,i["text/html"],a,!0)):_O(i,"text/plain")&&_O(i,"text/uri-list")?(o.preventDefault(),AO(e,i,i["text/plain"],a,!0)):(t.create(),fp.setEditorTimeout(e,(()=>{var r=t.getHtml();t.remove(),AO(e,i,r,a,!1)}),0)))}}))},BO=(e,t,r)=>{OO(e,t,r),(e=>{var t=e=>Je(e,"webkit-fake-url"),r=e=>Je(e,"data:");e.parser.addNodeFilter("img",((n,o,a)=>{if(!Ec(e)&&(e=>{var t;return!0===(null===(t=e.data)||void 0===t?void 0:t.paste)})(a)){var i,l=g(n);try{for(l.s();!(i=l.n()).done;){var s=i.value,d=s.attr("src");S(d)&&!s.attr("data-mce-object")&&d!==jt.transparentSrc&&(t(d)||!Pc(e)&&r(d))&&s.remove()}}catch(e){l.e(e)}finally{l.f()}}}))})(e)},PO=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",(()=>{((e,t)=>{"text"===t.get()?(t.set("html"),Kf(e,!1)):(t.set("text"),Kf(e,!0)),e.focus()})(e,t)})),e.addCommand("mceInsertClipboardContent",((t,r)=>{r.html&&xO(e,r.html,r.internal,!1),r.text&&EO(e,r.text,!1)}))},LO=(e,t,r,n)=>{((e,t,r)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(tO(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),n()):r(t.html,n)},MO=e=>(t,r)=>{var n=e.dom,o=e.selection,a=n.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=n.create("div",{contenteditable:"true"},t);n.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(i),n.add(e.getBody(),a);var l=o.getRng();i.focus();var s=n.createRng();s.selectNodeContents(i),o.setRng(s),fp.setEditorTimeout(e,(()=>{o.setRng(l),n.remove(a),r()}),0)},IO=e=>({html:nO(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),FO=e=>!e.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(e),jO=e=>{e.on("cut",(e=>t=>{!t.isDefaultPrevented()&&FO(e)&&e.selection.isEditable()&&LO(t,IO(e),MO(e),(()=>{if(jt.browser.isChromium()||jt.browser.isFirefox()){var t=e.selection.getRng();fp.setEditorTimeout(e,(()=>{e.selection.setRng(t),e.execCommand("Delete")}),0)}else e.execCommand("Delete")}))})(e)),e.on("copy",(e=>t=>{!t.isDefaultPrevented()&&FO(e)&&LO(t,IO(e),MO(e),P)})(e))},UO=(e,t)=>{var r,n;return Dg.getCaretRangeFromPoint(null!==(r=t.clientX)&&void 0!==r?r:0,null!==(n=t.clientY)&&void 0!==n?n:0,e.getDoc())},zO=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},HO=(e,t)=>{xc(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(e=>{e.preventDefault(),e.stopPropagation()})),Ec(e)||e.on("drop",(e=>{var t=e.dataTransfer;t&&(e=>J(e.files,(e=>/^image\//.test(e.type))))(t)&&e.preventDefault()})),e.on("drop",(r=>{if(!r.isDefaultPrevented()){var n=UO(e,r);if(!R(n)){var o=kO(r.dataTransfer),a=_O(o,tO());if(NO(o)&&!(e=>{var t=e["text/plain"];return!!t&&0===t.indexOf("file://")})(o)||!DO(e,r,n)){var i=o[tO()],l=i||o["text/html"]||o["text/plain"],s=((e,t,r,n)=>{var o=e.getParent(r,(e=>ia(t,e)));if(!_(e.getParent(r,"summary")))return!0;if(o&&Pe(n,"text/html")){var a=(new DOMParser).parseFromString(n["text/html"],"text/html").body;return!_(a.querySelector(o.nodeName.toLowerCase()))}return!1})(e.dom,e.schema,n.startContainer,o),d=t.get();d&&!s||l&&(r.preventDefault(),fp.setEditorTimeout(e,(()=>{e.undoManager.transact((()=>{(i||d&&s)&&e.execCommand("Delete"),zO(e,n);var t=uO(l);o["text/html"]?xO(e,t,a,!0):EO(e,t,!0)}))})))}}}})),e.on("dragstart",(e=>{t.set(!0)})),e.on("dragover dragend",(r=>{Ec(e)&&!t.get()&&(r.preventDefault(),zO(e,UO(e,r))),"dragend"===r.type&&t.set(!1)})),(e=>{e.on("input",(t=>{if("deleteByDrag"===t.inputType){var r=oe(e.dom.select("details"),(e=>_(e.querySelector("summary"))));te(r,(t=>{Eo(t.firstChild)&&t.firstChild.remove();var r=e.dom.create("summary");r.appendChild(gl().dom),t.prepend(r)}))}}))})(e)},$O=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,WO=e=>Ht.trim(e).replace($O,ai).toLowerCase(),VO=(e,t,r)=>{var n=Tc(e);if(r||"all"===n||!Rc(e))return t;var o=n?n.split(/[, ]/):[];if(o&&"none"!==n){var a=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,((e,t,r,n)=>{for(var l=a.parseStyle(a.decode(r)),s={},d=0;d<o.length;d++){var c=l[o[d]],m=c,u=a.getStyle(i,o[d],!0);/color/.test(o[d])&&(m=WO(m),u=WO(u)),u!==m&&(s[o[d]]=c)}var f=a.serializeStyle(s,"span");return f?t+' style="'+f+'"'+n:t+n}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,((e,t,r,n)=>t+' style="'+r+'"'+n)),t},qO=e=>{var t=Ho(!1),r=Ho(Oc(e)?"text":"html"),n=cO(e);(e=>{(jt.browser.isChromium()||jt.browser.isSafari())&&((e,t)=>{e.on("PastePreProcess",(r=>{r.content=t(e,r.content,r.internal)}))})(e,VO)})(e),PO(e,r),(e=>{var t=t=>r=>{t(e,r)},r=kc(e);A(r)&&e.on("PastePreProcess",t(r));var n=_c(e);A(n)&&e.on("PastePostProcess",t(n))})(e),e.addQueryStateHandler("mceTogglePlainTextPaste",(()=>"text"===r.get())),e.on("PreInit",(()=>{jO(e),HO(e,t),BO(e,n,r)}))},KO=e=>{(e=>{e.on("click",(t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()}))})(e),(e=>{e.parser.addNodeFilter("details",(t=>{var r=qc(e);te(t,(e=>{"expanded"===r?e.attr("open","open"):"collapsed"===r&&e.attr("open",null)}))})),e.serializer.addNodeFilter("details",(t=>{var r=Kc(e);te(t,(e=>{"expanded"===r?e.attr("open","open"):"collapsed"===r&&e.attr("open",null)}))}))})(e)},GO=Eo,YO=bo,XO=e=>No(e.dom),QO=e=>t=>Dr(_r.fromDom(e),t),ZO=(e,t,r)=>on(_r.fromDom(e),(e=>(e=>_o(e.dom))(e)||r.isBlock(Zt(e))),QO(t)).getOr(_r.fromDom(t)).dom,JO=(e,t)=>on(_r.fromDom(e),XO,QO(t)),eB=(e,t,r)=>{for(var n=new Qn(e,t),o=r?n.next.bind(n):n.prev.bind(n),a=e,i=r?e:o();i&&!GO(i);i=o())Xl(i)&&(a=i);return a},tB=e=>{var t=((e,t,r)=>{var n=hs.fromRangeStart(e).getNode(),o=ZO(n,t,r),a=eB(n,o,!1),i=eB(n,o,!0),l=document.createRange();return JO(a,o).fold((()=>{YO(a)?l.setStart(a,0):l.setStartBefore(a)}),(e=>l.setStartBefore(e.dom))),JO(i,o).fold((()=>{YO(i)?l.setEnd(i,i.data.length):l.setEndAfter(i)}),(e=>l.setEndAfter(e.dom))),l})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Db(t))};!function(e){e.Before="before",e.After="after"}(OA||(OA={}));var rB=(e,t)=>Math.abs(e.left-t),nB=(e,t)=>Math.abs(e.right-t),oB=(e,t)=>{var r=((e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)))(e,t)/Math.min(e.height,t.height);return((e,t)=>e.top<t.bottom&&e.bottom>t.top)(e,t)&&r>.5},aB=(e,t)=>(e=>ie(e,((e,t)=>e.fold((()=>K.some(t)),(e=>{var r=Math.min(t.left,e.left),n=Math.min(t.top,e.top),o=Math.max(t.right,e.right),a=Math.max(t.bottom,e.bottom);return K.some({top:n,right:o,bottom:a,left:r,width:o-r,height:a-n})}))),K.none()))(oe(e,(e=>{return(r=t)>=(n=e).top&&r<=n.bottom;var r,n}))).fold((()=>[[],e]),(t=>{var r=ne(e,(e=>oB(e,t)));return[r.pass,r.fail]})),iB=(e,t,r)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),lB=(e,t,r,n)=>{var o=e=>Xl(e.node)?K.some(e):so(e.node)?lB(Ce(e.node.childNodes),t,r,!1):K.none(),a=(e,a)=>{var i=ve(e,((e,n)=>a(e,t,r)-a(n,t,r)));return we(i,o).map((e=>n&&!bo(e.node)&&i.length>1?((e,n,a)=>o(n).filter((n=>Math.abs(a(e,t,r)-a(n,t,r))<2&&bo(n.node))))(e,i[1],a).getOr(e):e))},i=s(aB(e_(e),r),2),l=i[0],d=i[1],c=ne(d,(e=>e.top<r)),m=c.pass,u=c.fail;return a(l,iB).orThunk((()=>a(u,Il))).orThunk((()=>a(m,Il)))},sB=(e,t,r)=>{var n=_r.fromDom(e),o=Br(n),a=_r.fromPoint(o,t,r).filter((e=>Ar(n,e))).getOr(n);return((e,t,r,n)=>{var o=(t,a)=>{var i=oe(t.dom.childNodes,z((e=>so(e)&&e.classList.contains("mce-drag-container"))));return a.fold((()=>lB(i,r,n,!0)),(e=>{var t=oe(i,(t=>t!==e.dom));return lB(t,r,n,!0)})).orThunk((()=>(Dr(t,e)?K.none():Mr(t)).bind((e=>o(e,K.some(t))))))};return o(t,K.none())})(n,a,t,r)},dB=(e,t,r)=>sB(e,t,r).filter((e=>vm(e.node))).map((e=>((e,t)=>({node:e.node,position:rB(e,t)<nB(e,t)?OA.Before:OA.After}))(e,t))),cB=e=>{var t,r,n=e.getBoundingClientRect(),o=e.ownerDocument,a=o.documentElement,i=o.defaultView;return{top:n.top+(null!==(t=null==i?void 0:i.scrollY)&&void 0!==t?t:0)-a.clientTop,left:n.left+(null!==(r=null==i?void 0:i.scrollX)&&void 0!==r?r:0)-a.clientLeft}},mB=(e,t)=>{return r=(e=>e.inline?cB(e.getBody()):{left:0,top:0})(e),n=(e=>{var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}})(e),o=((e,t)=>{if(t.target.ownerDocument!==e.getDoc()){var r=cB(e.getContentAreaContainer()),n=(e=>{var t=e.getBody(),r=e.getDoc().documentElement,n={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||r.scrollLeft,top:t.scrollTop||r.scrollTop};return e.inline?n:o})(e);return{left:t.pageX-r.left+n.left,top:t.pageY-r.top+n.top}}return{left:t.pageX,top:t.pageY}})(e,t),{pageX:o.left-r.left+n.left,pageY:o.top-r.top+n.top};var r,n,o},uB=e=>({target:e,srcElement:e}),fB=(e,t,r,n)=>{var o=((e,t)=>{var r=ZA(e);return"dragstart"===t?(MA(r),$A(r)):"drop"===t?(IA(r),WA(r)):(FA(r),VA(r)),r})(r,e);return T(n)?((e,t,r)=>{var n=H("Function not supported on simulated event.");return u({bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:n,initEvent:n,preventDefault:P,stopImmediatePropagation:P,stopPropagation:P,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:n,initMouseEvent:n,getModifierState:n,dataTransfer:r},uB(t))})(e,t,o):((e,t,r,n)=>u(u({},t),{},{dataTransfer:n,type:e},uB(r)))(e,n,t,o)},gB=No,pB=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(var r=0;r<t.length;r++)if(t[r](e))return!0;return!1}}(gB,_o),vB=(e,t,r,n)=>{var o=e.dom,a=t.cloneNode(!0);o.setStyles(a,{width:r,height:n}),o.setAttrib(a,"data-mce-selected",null);var i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:r,height:n}),o.setStyles(a,{margin:0,boxSizing:"border-box"}),i.appendChild(a),i},hB=(e,t)=>r=>()=>{var n="left"===e?r.scrollX:r.scrollY;r.scroll({[e]:n+t,behavior:"smooth"})},bB=hB("left",-32),yB=hB("left",32),CB=hB("top",-32),wB=hB("top",32),SB=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},xB=(e,t)=>r=>{if((e=>0===e.button)(r)){var n=se(t.dom.getParents(r.target),pB).getOr(null);if(D(n)&&((e,t,r)=>gB(r)&&r!==t&&e.isEditable(r.parentElement))(t.dom,t.getBody(),n)){var o=t.dom.getPos(n),a=t.getBody(),i=t.getDoc().documentElement;e.set({element:n,dataTransfer:QA(),dragging:!1,screenX:r.screenX,screenY:r.screenY,maxX:(t.inline?a.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?a.scrollHeight:i.offsetHeight)-2,relX:r.pageX-o.x,relY:r.pageY-o.y,width:n.offsetWidth,height:n.offsetHeight,ghost:vB(t,n,n.offsetWidth,n.offsetHeight),intervalId:(l=100,s=Ho(K.none()),d=()=>s.get().each((e=>clearInterval(e))),{clear:()=>{d(),s.set(K.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:e=>{d(),s.set(K.some(setInterval(e,l)))}})})}}var l,s,d},EB=(e,t,r,n,o)=>{"dragstart"===t&&JA(n,e.dom.getOuterHTML(r));var a=fB(t,r,n,o);return e.dispatch(t,a)},kB=(e,t)=>{var r=Pi(((e,r)=>((e,t,r)=>{e._selectionOverrides.hideFakeCaret(),dB(e.getBody(),t,r).fold((()=>e.selection.placeCaretAt(t,r)),(n=>{var o=e._selectionOverrides.showCaret(1,n.node,n.position===OA.Before,!1);o?e.selection.setRng(o):e.selection.placeCaretAt(t,r)}))})(t,e,r)),0);t.on("remove",r.cancel);var n=e;return o=>e.on((e=>{var a,i,l=Math.max(Math.abs(o.screenX-e.screenX),Math.abs(o.screenY-e.screenY));if(!e.dragging&&l>10){var s=EB(t,"dragstart",e.element,e.dataTransfer,o);if(D(s.dataTransfer)&&(e.dataTransfer=s.dataTransfer),s.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var d=o.currentTarget===t.getDoc().documentElement,c=((e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}))(e,mB(t,o));a=e.ghost,i=t.getBody(),a.parentNode!==i&&i.appendChild(a),((e,t,r,n,o,a,i,l,s,d,c,m)=>{var u=0,f=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+r>o&&(u=t.pageX+r-o),t.pageY+n>a&&(f=t.pageY+n-a),e.style.width=r-u+"px",e.style.height=n-f+"px";var g=s.clientHeight,p=s.clientWidth,v=i+s.getBoundingClientRect().top,h=l+s.getBoundingClientRect().left;c.on((e=>{e.intervalId.clear(),e.dragging&&m&&(i+8>=g?e.intervalId.set(wB(d)):i-8<=0?e.intervalId.set(CB(d)):l+8>=p?e.intervalId.set(yB(d)):l-8<=0?e.intervalId.set(bB(d)):v+16>=window.innerHeight?e.intervalId.set(wB(window)):v-16<=0?e.intervalId.set(CB(window)):h+16>=window.innerWidth?e.intervalId.set(yB(window)):h-16<=0&&e.intervalId.set(bB(window)))}))})(e.ghost,c,e.width,e.height,e.maxX,e.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),n,d),r.throttle(o.clientX,o.clientY)}}))},_B=(e,t)=>r=>{e.on((e=>{var n;if(e.intervalId.clear(),e.dragging){if(((e,t,r)=>!R(t)&&t!==r&&!e.dom.isChildOf(t,r)&&e.dom.isEditable(t))(t,(e=>{var t=e.getSel();if(D(t)){var r=t.getRangeAt(0).startContainer;return bo(r)?r.parentNode:r}return null})(t.selection),e.element)){var o=null!==(n=t.getDoc().elementFromPoint(r.clientX,r.clientY))&&void 0!==n?n:t.getBody();EB(t,"drop",o,e.dataTransfer,r).isDefaultPrevented()||t.undoManager.transact((()=>{((e,t)=>{var r=e.getParent(t.parentNode,e.isBlock);SB(t),r&&r!==e.getRoot()&&e.isEmpty(r)&&pl(_r.fromDom(r))})(t.dom,e.element),(e=>{var t=e.getData("text/html");return""===t?K.none():K.some(t)})(e.dataTransfer).each((e=>t.insertContent(e))),t._selectionOverrides.hideFakeCaret()}))}EB(t,"dragend",t.getBody(),e.dataTransfer,r)}})),TB(e)},NB=(e,t,r)=>{e.on((e=>{e.intervalId.clear(),e.dragging&&r.fold((()=>EB(t,"dragend",e.element,e.dataTransfer)),(r=>EB(t,"dragend",e.element,e.dataTransfer,r)))})),TB(e)},TB=e=>{e.on((e=>{e.intervalId.clear(),SB(e.ghost)})),e.clear()},RB=e=>{var t=$o(),r=_i.DOM,n=document,o=xB(t,e),a=kB(t,e),i=_B(t,e),l=((e,t)=>r=>NB(e,t,K.some(r)))(t,e);e.on("mousedown",o),e.on("mousemove",a),e.on("mouseup",i),r.bind(n,"mousemove",a),r.bind(n,"mouseup",l),e.on("remove",(()=>{r.unbind(n,"mousemove",a),r.unbind(n,"mouseup",l)})),e.on("keydown",(r=>{r.keyCode===Gf.ESC&&NB(t,e,K.none())}))},DB=e=>{RB(e),uc(e)&&(e=>{var t=t=>{if(!t.isDefaultPrevented()){var r=t.dataTransfer;r&&(Z(r.types,"Files")||r.files.length>0)&&(t.preventDefault(),"drop"===t.type&&Bx(e,"Dropped file type is not supported"))}},r=r=>{hp(e,r.target)&&t(r)},n=()=>{var n=_i.DOM,o=e.dom,a=document,i=e.inline?e.getBody():e.getDoc(),l=["drop","dragover"];te(l,(e=>{n.bind(a,e,r),o.bind(i,e,t)})),e.on("remove",(()=>{te(l,(e=>{n.unbind(a,e,r),o.unbind(i,e,t)}))}))};e.on("init",(()=>{fp.setEditorTimeout(e,n,0)}))})(e)},AB=No,OB=(e,t)=>gb(e.getBody(),t),BB=e=>{var t,r=e.selection,n=e.dom,o=e.getBody(),a=fm(e,o,n.isBlock,(()=>kp(e))),i="sel-"+n.uniqueId(),l="data-mce-selected",s=e=>e!==o&&(AB(e)||Do(e))&&n.isChildOf(e,o)&&n.isEditable(e.parentNode),d=function(t,n,o){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e.dispatch("ShowCaret",{target:n,direction:t,before:o}).isDefaultPrevented()?null:(i&&r.scrollIntoView(n,-1===t),a.show(o,n))},c=e=>xl(e)||Nl(e)||Tl(e),m=e=>c(e.startContainer)||c(e.endContainer),u=t=>{var r=e.schema.getVoidElements(),o=n.createRng(),a=t.startContainer,i=t.startOffset,l=t.endContainer,s=t.endOffset;return Pe(r,a.nodeName.toLowerCase())?0===i?o.setStartBefore(a):o.setStartAfter(a):o.setStart(a,i),Pe(r,l.nodeName.toLowerCase())?0===s?o.setEndBefore(l):o.setEndAfter(l):o.setEnd(l,s),o},f=o=>{var a=o.cloneNode(!0),s=e.dispatch("ObjectSelected",{target:o,targetClone:a});if(s.isDefaultPrevented())return null;var d=((t,o)=>{var a=_r.fromDom(e.getBody()),l=e.getDoc(),s=dn(a,"#"+i).getOrThunk((()=>{var e=_r.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',l);return sr(e,"id",i),kn(a,e),e})),d=n.createRng();Tn(s),Nn(s,[_r.fromText(eo,l),_r.fromDom(o),_r.fromText(eo,l)]),d.setStart(s.dom.firstChild,1),d.setEnd(s.dom.lastChild,0),vn(s,{top:n.getPos(t,e.getBody()).y+"px"}),ep(s);var c=r.getSel();return c&&(c.removeAllRanges(),c.addRange(d)),d})(o,s.targetClone),c=_r.fromDom(o);return te(Kn(_r.fromDom(e.getBody()),`*[${l}]`),(e=>{Dr(c,e)||fr(e,l)})),n.getAttrib(o,l)||o.setAttribute(l,"1"),t=o,v(),d},g=(e,t)=>{if(!e)return null;if(e.collapsed){if(!m(e)){var r=t?1:-1,a=Um(r,o,e),i=a.getNode(!t);if(D(i)){if(vm(i))return d(r,i,!!t&&!a.isAtEnd(),!1);if(Sl(i)&&No(i.nextSibling)){var l=n.createRng();return l.setStart(i,0),l.setEnd(i,0),l}}var c=a.getNode(t);if(D(c)){if(vm(c))return d(r,c,!t&&!a.isAtEnd(),!1);if(Sl(c)&&No(c.previousSibling)){var u=n.createRng();return u.setStart(c,1),u.setEnd(c,1),u}}}return null}var g=e.startContainer,p=e.startOffset,v=e.endOffset;if(bo(g)&&0===p&&AB(g.parentNode)&&(g=g.parentNode,p=n.nodeIndex(g),g=g.parentNode),!so(g))return null;if(v===p+1&&g===e.endContainer){var h=g.childNodes[p];if(s(h))return f(h)}return null},p=()=>{t&&t.removeAttribute(l),dn(_r.fromDom(e.getBody()),"#"+i).each(Rn),t=null},v=()=>{a.hide()};return LS(e)||(e.on("click",(t=>{n.isEditable(t.target)||(t.preventDefault(),e.focus())})),e.on("blur NewBlock",p),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",(t=>{var r=t.target,n=OB(e,r);AB(n)?(t.preventDefault(),BE(e,n).each(g)):s(r)&&BE(e,r).each(g)}),!0),e.on("mousedown",(t=>{var a=t.target;if((a===o||"HTML"===a.nodeName||n.isChildOf(a,o))&&_x(e,t.clientX,t.clientY)){p(),v();var i=OB(e,a);AB(i)?(t.preventDefault(),BE(e,i).each(g)):dB(o,t.clientX,t.clientY).each((n=>{t.preventDefault(),(e=>{e&&r.setRng(e)})(d(1,n.node,n.position===OA.Before,!1)),co(i)?i.focus():e.getBody().focus()}))}})),e.on("keypress",(e=>{Gf.modifierPressed(e)||AB(r.getNode())&&e.preventDefault()})),e.on("GetSelectionRange",(e=>{var r=e.range;if(t){if(!t.parentNode)return void(t=null);(r=r.cloneRange()).selectNode(t),e.range=r}})),e.on("SetSelectionRange",(e=>{e.range=u(e.range);var t=g(e.range,e.forward);t&&(e.range=t)})),e.on("AfterSetSelectionRange",(e=>{var t,r=e.range,o=r.startContainer.parentElement;m(r)||so(t=o)&&"mcepastebin"===t.id||v(),(e=>D(e)&&n.hasClass(e,"mce-offscreen-selection"))(o)||p()})),DB(e),(e=>{var t=Pi((()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){var t=e.selection.getRng();if(t.collapsed){var r=PE(e,t,!1);e.selection.setRng(r)}}}),0);e.on("focus",(()=>{t.throttle()})),e.on("blur",(()=>{t.cancel()}))})(e),(e=>{e.on("init",(()=>{e.on("focusin",(t=>{var r=t.target;if(Do(r)){var n=gb(e.getBody(),r),o=No(n)?n:r;e.selection.getNode()!==o&&BE(e,o).each((t=>e.selection.setRng(t)))}}))}))})(e)),{showCaret:d,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(Rl(e),r.scrollIntoView(e))},hideFakeCaret:v,destroy:()=>{a.destroy(),t=null}}},PB=(e,t)=>{for(var r=t,n=e.previousSibling;bo(n);n=n.previousSibling)r+=n.data.length;return r},LB=(e,t,r,n,o)=>{if(bo(r)&&(n<0||n>r.data.length))return[];for(var a=o&&bo(r)?[PB(r,n)]:[n],i=r;i!==t&&i.parentNode;)a.push(e.nodeIndex(i,o)),i=i.parentNode;return i===t?a.reverse():[]},MB=function(e,t,r,n,o,a){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return{start:LB(e,t,r,n,i),end:LB(e,t,o,a,i)}},IB=(e,t)=>{var r=t.slice(),n=r.pop();return O(n)?ie(r,((e,t)=>e.bind((e=>K.from(e.childNodes[t])))),K.some(e)).bind((e=>bo(e)&&(n<0||n>e.data.length)?K.none():K.some({node:e,offset:n}))):K.none()},FB=(e,t)=>IB(e,t.start).bind((r=>{var n=r.node,o=r.offset;return IB(e,t.end).map((e=>{var t=e.node,r=e.offset,a=document.createRange();return a.setStart(n,o),a.setEnd(t,r),a}))})),jB=(e,t,r)=>{if(t&&e.isEmpty(t)&&!r(t)){var n=t.parentNode;e.remove(t,bo(t.firstChild)&&no(t.firstChild.data)),jB(e,n,r)}},UB=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),n&&!r(t.startContainer)&&(bo(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),bo(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),jB(e,o,r),o!==a&&jB(e,a,r))},zB=(e,t)=>K.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),HB=(e,t,r)=>{var n=e.dynamicPatternsLookup({text:r,block:t});return u(u({},e),{},{blockPatterns:Gs(n).concat(e.blockPatterns),inlinePatterns:Ys(n).concat(e.inlinePatterns)})},$B=(e,t,r,n)=>{var o=e.createRng();return o.setStart(t,0),o.setEnd(r,n),o.toString()},WB=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),VB=(e,t)=>{var r=e.createRng();return r.setStartAfter(t.start),r.setEndBefore(t.end),r},qB=(e,t,r)=>{var n=FB(e.getRoot(),r).getOrDie("Unable to resolve path range"),o=n.startContainer,a=n.endContainer,i=0===n.endOffset?a:a.splitText(n.endOffset),l=0===n.startOffset?o:o.splitText(n.startOffset),s=l.parentNode;return{prefix:t,end:i.parentNode.insertBefore(WB(e,t+"-end"),i),start:s.insertBefore(WB(e,t+"-start"),l)}},KB=(e,t,r)=>{jB(e,e.get(t.prefix+"-end"),r),jB(e,e.get(t.prefix+"-start"),r)},GB=e=>0===e.start.length,YB=(e,t,r,n)=>{var o,a=t.start;return wT(e,n.container,n.offset,(o=a,(e,t)=>{var r=e.data.substring(0,t),n=r.lastIndexOf(o.charAt(o.length-1)),a=r.lastIndexOf(o);return-1!==a?a+o.length:-1!==n?n+1:-1}),r).bind((n=>{var o,i,l=null!==(i=null===(o=r.textContent)||void 0===o?void 0:o.indexOf(a))&&void 0!==i?i:-1;if(-1!==l&&n.offset>=l+a.length){var s=e.createRng();return s.setStart(n.container,n.offset-a.length),s.setEnd(n.container,n.offset),K.some(s)}var d=n.offset-a.length;return yT(n.container,d,r).map((t=>{var r=e.createRng();return r.setStart(t.container,t.offset),r.setEnd(n.container,n.offset),r})).filter((e=>e.toString()===a)).orThunk((()=>YB(e,t,r,pT(n.container,0))))}))},XB=(e,t,r,n)=>{var o=e.dom,a=o.getRoot(),i=r.pattern,l=r.position.container,s=r.position.offset;return yT(l,s-r.pattern.end.length,t).bind((d=>{var c=MB(o,a,d.container,d.offset,l,s,n);if(GB(i))return K.some({matches:[{pattern:i,startRng:c,endRng:c}],position:d});var m=QB(e,r.remainingPatterns,d.container,d.offset,t,n),u=m.getOr({matches:[],position:d}),f=u.position,g=function(e,t,r,n,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(0===t.start.length&&!a){var i=e.createRng();return i.setStart(r,n),i.setEnd(r,n),K.some(i)}return bT(r,n,o).bind((r=>YB(e,t,o,r).bind((e=>{var t;if(a){if(e.endContainer===r.container&&e.endOffset===r.offset)return K.none();if(0===r.offset&&(null===(t=e.endContainer.textContent)||void 0===t?void 0:t.length)===e.endOffset)return K.none()}return K.some(e)}))))}(o,i,f.container,f.offset,t,m.isNone());return g.map((e=>{var t=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return MB(e,t,r.startContainer,r.startOffset,r.endContainer,r.endOffset,n)}(o,a,e,n);return{matches:u.matches.concat([{pattern:i,startRng:t,endRng:c}]),position:pT(e.startContainer,e.startOffset)}}))}))},QB=(e,t,r,n,o,a)=>{var i=e.dom;return bT(r,n,i.getRoot()).bind((l=>{for(var s=$B(i,o,r,n),d=0;d<t.length;d++){var c=t[d];if(et(s,c.end)){var m=t.slice();m.splice(d,1);var u=XB(e,o,{pattern:c,remainingPatterns:m,position:l},a);if(u.isNone()&&n>0)return QB(e,t,r,n-1,o,a);if(u.isSome())return u}}return K.none()}))},ZB=(e,t,r)=>{e.selection.setRng(r),"inline-format"===t.type?te(t.format,(t=>{e.formatter.apply(t)})):e.execCommand(t.cmd,!1,t.value)},JB=(e,t,r,n,o,a)=>{var i;return((e,t)=>{var r=ue(e,(e=>J(t,(t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end))));return e.length===t.length?r?e:t:e.length>t.length?e:t})(QB(e,o.inlinePatterns,r,n,t,a).fold((()=>[]),(e=>e.matches)),QB(e,(i=o.inlinePatterns,ve(i,((e,t)=>t.end.length-e.end.length))),r,n,t,a).fold((()=>[]),(e=>e.matches)))},eP=(e,t)=>{if(0!==t.length){var r=e.dom,n=e.selection.getBookmark(),o=((e,t)=>{var r=Xi("mce_textpattern"),n=ae(t,((t,n)=>{var o=qB(e,r+`_end${t.length}`,n.endRng);return t.concat([u(u({},n),{},{endMarker:o})])}),[]);return ae(n,((t,o)=>{var a=n.length-t.length-1,i=GB(o.pattern)?o.endMarker:qB(e,r+`_start${a}`,o.startRng);return t.concat([u(u({},o),{},{startMarker:i})])}),[])})(r,t);te(o,(t=>{var n=r.getParent(t.startMarker.start,r.isBlock),o=e=>e===n;GB(t.pattern)?((e,t,r,n)=>{var o=VB(e.dom,r);UB(e.dom,o,n),ZB(e,t,o)})(e,t.pattern,t.endMarker,o):((e,t,r,n,o)=>{var a=e.dom,i=VB(a,n),l=VB(a,r);UB(a,l,o),UB(a,i,o);var s={prefix:r.prefix,start:r.end,end:n.start},d=VB(a,s);ZB(e,t,d)})(e,t.pattern,t.startMarker,t.endMarker,o),KB(r,t.endMarker,o),KB(r,t.startMarker,o)})),e.selection.moveToBookmark(n)}},tP=(e,t,r)=>((e,t,r)=>{if(bo(e)&&t>=e.length)return K.some(pT(e,t));var n=rl(vT);return K.from(n.forwards(e,t,hT(e),r)).map((e=>pT(e.container,0)))})(t,0,t).map((n=>{var o=n.container;return CT(o,r.start.length,t).each((r=>{var n=e.createRng();n.setStart(o,0),n.setEnd(r.container,r.offset),UB(e,n,(e=>e===t))})),o})),rP=e=>(t,r)=>{var n=t.dom,o=r.pattern,a=FB(n.getRoot(),r.range).getOrDie("Unable to resolve path range");return zB(t,a).each((r=>{"block-format"===o.type?((e,t)=>{var r=t.get(e);return k(r)&&be(r).exists((e=>Pe(e,"block")))})(o.format,t.formatter)&&t.undoManager.transact((()=>{e(t.dom,r,o),t.formatter.apply(o.format)})):"block-command"===o.type&&t.undoManager.transact((()=>{e(t.dom,r,o),t.execCommand(o.cmd,!1,o.value)}))})),!0},nP=e=>(t,r)=>{var n=(e=>ve(e,((e,t)=>t.start.length-e.start.length)))(t),o=r.replace(eo," ");return se(n,(t=>e(t,r,o)))},oP=(e,t)=>(r,n,o,a,i)=>{var l;void 0===i&&(i=null!==(l=n.textContent)&&void 0!==l?l:"");var s=r.dom,d=ud(r);return s.is(n,d)?e(o.blockPatterns,i).map((e=>t&&Ht.trim(i).length===e.start.length?[]:[{pattern:e,range:MB(s,s.getRoot(),n,0,n,0,a)}])).getOr([]):[]},aP=rP(((e,t,r)=>{tP(e,t,r).each((e=>{var t=_r.fromDom(e),r=ol(t);/^\s[^\s]/.test(r)&&((e,t)=>{nl.set(e,t)})(t,r.slice(1))}))})),iP=nP(((e,t,r)=>0===t.indexOf(e.start)||0===r.indexOf(e.start))),lP=oP(iP,!0),sP=rP(tP),dP=nP(((e,t,r)=>t===e.start||r===e.start)),cP=oP(dP,!1),mP=(e,t)=>((e,t)=>{var r=e.selection.getRng();return zB(e,r).map((n=>{var o,a=Math.max(0,r.startOffset),i=HB(t,n,null!==(o=n.textContent)&&void 0!==o?o:"");return{inlineMatches:JB(e,n,r.startContainer,a,i,!0),blockMatches:lP(e,n,i,!0)}})).filter((e=>{var t=e.inlineMatches;return e.blockMatches.length>0||t.length>0}))})(e,t).fold(V,(t=>{var r=t.inlineMatches,n=t.blockMatches;return e.undoManager.add(),e.undoManager.extra((()=>{e.execCommand("mceInsertNewLine")}),(()=>{(e=>{e.insertContent(vl,{preserve_zwsp:!0})})(e),eP(e,r),((e,t)=>{if(0!==t.length){var r=e.selection.getBookmark();te(t,(t=>aP(e,t))),e.selection.moveToBookmark(r)}})(e,n);var t=e.selection.getRng(),o=bT(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),o.each((t=>{var r=t.container;r.data.charAt(t.offset-1)===Jn&&(r.deleteData(t.offset-1,1),jB(e.dom,r.parentNode,(t=>t===e.dom.getRoot())))}))})),!0})),uP=(e,t)=>((e,t)=>{var r=e.selection.getRng();return zB(e,r).map((n=>{var o=Math.max(0,r.startOffset),a=$B(e.dom,n,r.startContainer,o),i=HB(t,n,a);return cP(e,n,i,!1,a)})).filter((e=>e.length>0))})(e,t).fold(V,(t=>(e.undoManager.transact((()=>{((e,t)=>{te(t,(t=>sP(e,t)))})(e,t)})),!0))),fP=(e,t,r)=>{for(var n=0;n<e.length;n++)if(r(e[n],t))return!0;return!1},gP=e=>{var t=[",",".",";",":","!","?"],r=[32],n=()=>{return t=Lc(e),r=Mc(e),{inlinePatterns:Ys(t),blockPatterns:Gs(t),dynamicPatternsLookup:r};var t,r},o=()=>(e=>e.options.isSet("text_patterns_lookup"))(e);e.on("keydown",(t=>{if(13===t.keyCode&&!Gf.modifierPressed(t)&&e.selection.isCollapsed()){var r=Xs(n(),"enter");(r.inlinePatterns.length>0||r.blockPatterns.length>0||o())&&mP(e,r)&&t.preventDefault()}}),!0),e.on("keydown",(t=>{if(32===t.keyCode&&e.selection.isCollapsed()){var r=Xs(n(),"space");(r.blockPatterns.length>0||o())&&uP(e,r)&&t.preventDefault()}}),!0);var a=()=>{if(e.selection.isCollapsed()){var t=Xs(n(),"space");(t.inlinePatterns.length>0||o())&&((e,t)=>{var r=e.selection.getRng();zB(e,r).map((n=>{var o=Math.max(0,r.startOffset-1),a=$B(e.dom,n,r.startContainer,o),i=HB(t,n,a),l=JB(e,n,r.startContainer,o,i,!1);l.length>0&&e.undoManager.transact((()=>{eP(e,l)}))}))})(e,t)}};e.on("keyup",(e=>{fP(r,e,((e,t)=>e===t.keyCode&&!Gf.modifierPressed(t)))&&a()})),e.on("keypress",(r=>{fP(t,r,((e,t)=>e.charCodeAt(0)===t.charCode))&&fp.setEditorTimeout(e,a)}))},pP=e=>{var t,r,n=Ht.each,o=Gf.BACKSPACE,a=Gf.DELETE,i=e.dom,l=e.selection,s=e.parser,d=jt.browser,c=d.isFirefox(),m=d.isChromium()||d.isSafari(),u=jt.deviceType.isiPhone()||jt.deviceType.isiPad(),f=jt.os.isMacOS()||jt.os.isiOS(),g=(t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},p=e=>e.isDefaultPrevented(),v=()=>{var t=e=>{var t=i.create("body"),r=e.cloneContents();return t.appendChild(r),l.serializer.serialize(t,{format:"html"})};e.on("keydown",(r=>{var n=r.keyCode;if(!p(r)&&(n===a||n===o)&&e.selection.isEditable()){var l=e.selection.isCollapsed(),s=e.getBody();if(l&&!jo(e.schema,s))return;if(!l&&!(r=>{var n=t(r),o=i.createRng();return o.selectNode(e.getBody()),n===t(o)})(e.selection.getRng()))return;r.preventDefault(),e.setContent(""),s.firstChild&&i.isBlock(s.firstChild)?e.selection.setCursorLocation(s.firstChild,0):e.selection.setCursorLocation(s,0),e.nodeChanged()}}))},h=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{e.inline||i.bind(e.getDoc(),"mousedown mouseup",(t=>{var r;if(t.target===e.getDoc().documentElement)if(r=l.getRng(),e.getBody().focus(),"mousedown"===t.type){if(xl(r.startContainer))return;l.placeCaretAt(t.clientX,t.clientY)}else l.setRng(r)}))},y=()=>{Range.prototype.getClientRects||e.on("mousedown",(t=>{if(!p(t)&&"HTML"===t.target.nodeName){var r=e.getBody();r.blur(),fp.setEditorTimeout(e,(()=>{r.focus()}))}}))},C=()=>{var t=pc(e);e.on("click",(r=>{var n=r.target;/^(IMG|HR)$/.test(n.nodeName)&&i.isEditable(n)&&(r.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&i.hasClass(n,t)&&0===n.childNodes.length&&i.isEditable(n.parentNode)&&(r.preventDefault(),l.select(n))}))},w=()=>{e.on("keydown",(e=>{if(!p(e)&&e.keyCode===o&&l.isCollapsed()&&0===l.getRng().startOffset){var t=l.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0}))},S=()=>{lc(e)||e.on("BeforeExecCommand mousedown",(()=>{g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),jd(e)||g("enableObjectResizing",!1)}))},x=()=>{e.on("SetContent ExecCommand",(e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||n(i.select("a:not([data-mce-block])"),(e=>{var t,r=e.parentNode,n=i.getRoot();if((null==r?void 0:r.lastChild)===e){for(;r&&!i.isBlock(r);){if((null===(t=r.parentNode)||void 0===t?void 0:t.lastChild)!==r||r===n)return;r=r.parentNode}i.add(r,"br",{"data-mce-bogus":1})}}))}))},E=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},k=()=>{e.inline||e.on("keydown",(()=>{document.activeElement===document.body&&e.getWin().focus()}))},_=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(t=>{var r;"HTML"===t.target.nodeName&&(r=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(r),e.selection.normalize(),e.nodeChanged())})))},N=()=>{f&&e.on("keydown",(t=>{!Gf.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}))},T=()=>{e.on("click",(e=>{var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},R=()=>{e.on("init",(()=>{e.dom.bind(e.getBody(),"submit",(e=>{e.preventDefault()}))}))},D=P;return LS(e)?(m&&(b(),C(),R(),h(),u&&(k(),_(),T())),c&&(y(),S(),E(),N())):(e.on("keydown",(t=>{if(!p(t)&&t.keyCode===Gf.BACKSPACE){var r=l.getRng(),n=r.startContainer,o=r.startOffset,a=i.getRoot(),s=n;if(r.collapsed&&0===o){for(;s.parentNode&&s.parentNode.firstChild===s&&s.parentNode!==a;)s=s.parentNode;"BLOCKQUOTE"===s.nodeName&&(e.formatter.toggle("blockquote",void 0,s),(r=i.createRng()).setStart(n,0),r.setEnd(n,0),l.setRng(r))}}})),v(),jt.windowsPhone||e.on("keyup focusin mouseup",(t=>{Gf.modifierPressed(t)||(e=>{var t=e.getBody(),r=e.selection.getRng();return r.startContainer===r.endContainer&&r.startContainer===t&&0===r.startOffset&&r.endOffset===t.childNodes.length})(e)||l.normalize()}),!0),m&&(b(),C(),e.on("init",(()=>{g("DefaultParagraphSeparator",ud(e))})),R(),w(),s.addNodeFilter("br",(e=>{for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})),u?(k(),_(),T()):h()),c&&(e.on("keydown",(t=>{if(!p(t)&&t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&0===l.getRng().startOffset){var r=l.getNode(),n=r.previousSibling;if("HR"===r.nodeName)return i.remove(r),void t.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(i.remove(n),t.preventDefault())}}})),y(),t=()=>{var t=i.getAttribs(l.getStart().cloneNode(!1));return()=>{var r=l.getStart();r!==e.getBody()&&(i.setAttrib(r,"style",null),n(t,(e=>{r.setAttributeNode(e.cloneNode(!0))})))}},r=()=>!l.isCollapsed()&&i.getParent(l.getStart(),i.isBlock)!==i.getParent(l.getEnd(),i.isBlock),e.on("keypress",(n=>{var o;return!(!(p(n)||8!==n.keyCode&&46!==n.keyCode)&&r()&&(o=t(),e.getDoc().execCommand("delete",!1),o(),n.preventDefault(),1))})),i.bind(e.getDoc(),"cut",(n=>{if(!p(n)&&r()){var o=t();fp.setEditorTimeout(e,(()=>{o()}))}})),S(),x(),E(),N(),w())),{refreshContentEditable:D,isHidden:()=>{if(!c||e.removed)return!1;var t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},vP=_i.DOM,hP=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,bP=e=>De(e,(e=>!1===T(e))),yP=e=>{var t=e.options.get,r=e.editorUpload.blobCache;return bP({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:hP(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:Yc(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:r,document:e.getDoc()})},CP=e=>{var t=e.options.get;return bP({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},wP=e=>{e.bindPendingEventDelegates(),e.initialized=!0,(e=>{e.dispatch("Init")})(e),e.focus(!0),(e=>{var t=e.dom.getRoot();e.inline||Hu(e)&&e.selection.getStart(!0)!==t||uu(t).each((t=>{var r=t.getNode(),n=po(r)?uu(r).getOr(t):t;e.selection.setRng(n.toRange())}))})(e),e.nodeChanged({initial:!0});var t=bc(e);A(t)&&t.call(e,e),(e=>{var t=Cc(e);t&&fp.setEditorTimeout(e,(()=>{var r;(r=!0===t?e:e.editorManager.get(t))&&!r.destroyed&&(r.focus(),r.selection.scrollIntoView())}),100)})(e)},SP=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,xP=e=>{var t=SP(e),r=Md(e),n=e.contentCSS,o=()=>{t.unloadAll(n),e.inline||e.ui.styleSheetLoader.unloadAll(r)},a=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){var i="";Ht.each(e.contentStyles,(e=>{i+=e+"\r\n"})),e.dom.addStyle(i)}var l=Promise.all(((e,t,r)=>{var n=ne(t,(e=>tinymce.Resource.has(Ix(e)))),o=n.pass,a=n.fail,i=o.map((t=>{var r=tinymce.Resource.get(Ix(t));return S(r)?Promise.resolve(SP(e).loadRawCss(t,r)):Promise.resolve()})),l=[...i,SP(e).loadAll(a)];return e.inline?l:l.concat([e.ui.styleSheetLoader.loadAll(r)])})(e,n,r)).then(a).catch(a),s=Ld(e);return s&&((e,t)=>{var r=_r.fromDom(e.getBody()),n=Qr(Xr(r)),o=_r.fromTag("style");sr(o,"type","text/css"),kn(o,_r.fromText(t)),kn(n,o),e.on("remove",(()=>{Rn(o)}))})(e,s),l},EP=e=>{!0!==e.removed&&((e=>{LS(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})})(e),wP(e))},kP=e=>{var t=e.getElement(),r=e.getDoc();e.inline&&(vP.addClass(t,"mce-content-body"),e.contentDocument=r=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);var n=e.getBody();n.disabled=!0,e.readonly=lc(e),e._editableRoot=sc(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===vP.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable="true"),n.disabled=!1,e.editorUpload=Gx(e),e.schema=Qa(CP(e)),e.dom=_i(r,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Td(e),referrerPolicy:Rd(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)}}),e.parser=(e=>{var t=Gw(yP(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",((t,r)=>{for(var n=e.dom,o="data-mce-"+r,a=t.length;a--;){var i=t[a],l=i.attr(r);if(l&&!i.attr(o)){if(0===l.indexOf("data:")||0===l.indexOf("blob:"))continue;"style"===r?((l=n.serializeStyle(n.parseStyle(l),i.name)).length||(l=null),i.attr(o,l),i.attr(r,l)):"tabindex"===r?(i.attr(o,l),i.attr(r,null)):i.attr(o,e.convertURL(l,r,i.name))}}})),t.addNodeFilter("script",(e=>{for(var t=e.length;t--;){var r=e[t],n=r.attr("type")||"no/type";0!==n.indexOf("mce-")&&r.attr("type","mce-"+n)}})),Uc(e)&&t.addNodeFilter("#cdata",(t=>{for(var r,n=t.length;n--;){var o=t[n];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(null!==(r=o.value)&&void 0!==r?r:"")+"]]"}})),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(t=>{for(var r=t.length,n=e.schema.getNonEmptyElements();r--;){var o=t[r];o.isEmpty(n)&&0===o.getAll("br").length&&o.append(new jp("br",1))}})),t})(e),e.serializer=JS((e=>{var t=e.options.get;return u(u(u({},yP(e)),CP(e)),bP({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")}))})(e),e),e.selection=KS(e.dom,e.getWin(),e.serializer,e),e.annotator=Ff(e),e.formatter=iE(e),e.undoManager=sE(e),e._nodeChangeDispatcher=new DA(e),e._selectionOverrides=BB(e),rN(e),KO(e),uN(e),LS(e)||((e=>{e.on("mousedown",(t=>{t.detail>=3&&(t.preventDefault(),tB(e))}))})(e),(e=>{gP(e)})(e));var o=RA(e);eN(e,o),(e=>{e.on("NodeChange",(()=>lN(e)))})(e),fE(e),qO(e);var a=MS(e);(e=>{var t=e.getDoc(),r=e.getBody();(e=>{e.dispatch("PreInit")})(e),wc(e)||(t.body.spellcheck=!1,vP.setAttrib(r,"spellcheck","false")),e.quirks=pP(e),(e=>{e.dispatch("PostRender")})(e);var n=Id(e);void 0!==n&&(r.dir=n);var o=Sc(e);o&&e.on("BeforeSetContent",(e=>{Ht.each(o,(t=>{e.content=e.content.replace(t,(e=>"\x3c!--mce:protected "+escape(e)+"--\x3e"))}))})),e.on("SetContent",(()=>{e.addVisual(e.getBody())})),e.on("compositionstart compositionend",(t=>{e.composing="compositionstart"===t.type}))})(e),(e=>{var t=Qc(e);S(Zc(e))||!T(t)&&"INVALID"!==(e=>(e=>"gpl"===e.toLowerCase())(e)||(e=>e.length>=64&&e.length<=255)(e)?"VALID":"INVALID")(t)||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(e),a.fold((()=>{var t=(e=>{var t=!1,r=setTimeout((()=>{t||e.setProgressState(!0)}),500);return()=>{clearTimeout(r),t=!0,e.setProgressState(!1)}})(e);xP(e).then((()=>{EP(e),t()}))}),(t=>{e.setProgressState(!0),xP(e).then((()=>{t().then((t=>{e.setProgressState(!1),EP(e),jS(e)}),(t=>{e.notificationManager.open({type:"error",text:String(t)}),EP(e),jS(e)}))}))}))},_P=q,NP=_i.DOM,TP=(e,t)=>{var r=jt.browser.isFirefox()?vc(e):"Rich Text Area",n=e.translate(r),o=mr(_r.fromDom(e.getElement()),"tabindex").bind(lt),a=((e,t,r,n)=>{var o=_r.fromTag("iframe");return n.each((e=>sr(o,"tabindex",e))),dr(o,r),dr(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Cr(o,"tox-edit-area__iframe"),o})(e.id,n,ad(e),o).dom;a.onload=()=>{a.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=a,e.iframeHTML=(e=>{var t=id(e)+"<html><head>";ld(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var r=sd(e),n=dd(e),o=e.translate(vc(e));return cd(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+cd(e)+'" />'),t+`</head><body id="${r}" class="mce-content-body ${n}" data-id="${e.id}" aria-label="${o}"><br></body></html>`})(e),NP.add(t.iframeContainer,a)},RP=e=>{var t,r=e.iframeElement,n=()=>{e.contentDocument=r.contentDocument,kP(e)};if($c(e)||jt.browser.isFirefox()){var o=e.getDoc();o.open(),o.write(e.iframeHTML),o.close(),n()}else{var a=(t=_r.fromDom(r),Ln(t,"load",_P,(()=>{a.unbind(),n()})));r.srcdoc=e.iframeHTML}},DP=(e,t)=>{TP(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=NP.isHidden(t.editorContainer)),e.getElement().style.display="none",NP.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,RP(e)},AP=_i.DOM,OP=(e,t,r)=>{var n=Rx.get(r),o=Rx.urls[r]||e.documentBaseUrl.replace(/\/$/,"");if(r=Ht.trim(r),n&&-1===Ht.inArray(t,r)){if(e.plugins[r])return;try{var a=n(e,o)||{};e.plugins[r]=a,A(a.init)&&(a.init(e,o),t.push(r))}catch(t){((e,t,r)=>{var n=Oi.translate(["Failed to initialize plugin: {0}",t]);zf(e,"PluginLoadError",{message:n}),Mx(n,r),Bx(e,n)})(e,r,t)}}},BP=e=>{var t=[];te(cc(e),(r=>{OP(e,t,(e=>e.replace(/^\-/,""))(r))}))},PP=e=>{var t=Ht.trim(Sd(e)),r=e.ui.registry.getAll().icons,n=u(u({},bx.get("default").icons),bx.get(t).icons);ke(n,((t,n)=>{Pe(r,n)||e.ui.registry.addIcon(n,t)}))},LP=e=>{var t=Wd(e);if(S(t)){var r=Dx.get(t);e.theme=r(e,Dx.urls[t])||{},A(e.theme.init)&&e.theme.init(e,Dx.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},MP=e=>{var t=qd(e),r=yx.get(t);e.model=r(e,yx.urls[t])},IP=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),FP=e=>{var t=e.getElement();return e.inline?IP(null):(e=>{var t=AP.create("div");return AP.insertAfter(t,e),IP(t,t)})(t)},jP=e=>{var t=e.getElement();return e.orgDisplay=t.style.display,S(Wd(e))?(e=>{var t=e.theme.renderUI;return t?t():FP(e)})(e):A(Wd(e))?(e=>{var t=e.getElement(),r=Wd(e)(e,t);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:t.offsetHeight,r})(e):FP(e)},UP=(e,t)=>{var r={show:K.from(t.show).getOr(P),hide:K.from(t.hide).getOr(P),isEnabled:K.from(t.isEnabled).getOr(q),setEnabled:r=>{e.mode.isReadOnly()||K.from(t.setEnabled).each((e=>e(r)))}};e.ui=u(u({},e.ui),r)},zP=function(){var e,t=(e=o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch("ScriptsLoaded"),PP(t),LP(t),MP(t),BP(t),e.next=7,jP(t);case 7:r=e.sent,UP(t,K.from(r.api).getOr({})),t.editorContainer=r.editorContainer,jx(t),t.inline?kP(t):DP(t,{editorContainer:r.editorContainer,iframeContainer:r.iframeContainer});case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){a(i,n,o,l,s,"next",e)}function s(e){a(i,n,o,l,s,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),HP=_i.DOM,$P=e=>"-"===e.charAt(0),WP=(e,t)=>{var r=Dd(t),n=Ad(t);if(!Oi.hasCode(r)&&"en"!==r){var o=at(n)?n:`${t.editorManager.baseURL}/langs/${r}.js`;e.add(o).catch((()=>{((e,t,r)=>{Px(e,"LanguageLoadError",Lx("language",t,r))})(t,o,r)}))}},VP=(e,t)=>{var r=Wd(e);if(S(r)&&!$P(r)&&!Pe(Dx.urls,r)){var n=Vd(e),o=n?e.documentBaseURI.toAbsolute(n):`themes/${r}/theme${t}.js`;Dx.load(r,o).catch((()=>{((e,t,r)=>{Px(e,"ThemeLoadError",Lx("theme",t,r))})(e,o,r)}))}},qP=(e,t)=>{var r=qd(e);if("plugin"!==r&&!Pe(yx.urls,r)){var n=Kd(e),o=S(n)?e.documentBaseURI.toAbsolute(n):`models/${r}/model${t}.js`;yx.load(r,o).catch((()=>{((e,t,r)=>{Px(e,"ModelLoadError",Lx("model",t,r))})(e,o,r)}))}},KP=(e,t,r)=>K.from(t).filter((e=>at(e)&&!bx.has(e))).map((t=>({url:`${e.editorManager.baseURL}/icons/${t}/icons${r}.js`,name:K.some(t)}))),GP=(e,t,r)=>{var n=KP(t,"default",r),o=(e=>K.from(xd(e)).filter(at).map((e=>({url:e,name:K.none()}))))(t).orThunk((()=>KP(t,Sd(t),"")));te((e=>{for(var t=[],r=e=>{t.push(e)},n=0;n<e.length;n++)e[n].each(r);return t})([n,o]),(r=>{e.add(r.url).catch((()=>{((e,t,r)=>{Px(e,"IconsLoadError",Lx("icons",t,r))})(t,r.url,r.name.getOrUndefined())}))}))},YP=(e,t)=>{var r=(t,r)=>{Rx.load(t,r).catch((()=>{((e,t,r)=>{Px(e,"PluginLoadError",Lx("plugin",t,r))})(e,r,t)}))};ke(mc(e),((t,n)=>{r(n,t),e.options.set("plugins",cc(e).concat(n))})),te(cc(e),(e=>{!(e=Ht.trim(e))||Rx.urls[e]||$P(e)||r(e,`plugins/${e}/plugin${t}.js`)}))},XP=(e,t)=>{var r=Ti.ScriptLoader,n=()=>{!e.removed&&(e=>{var t=Wd(e);return!S(t)||D(Dx.get(t))})(e)&&(e=>{var t=qd(e);return D(yx.get(t))})(e)&&zP(e)};VP(e,t),qP(e,t),WP(r,e),GP(r,e,t),YP(e,t),r.loadQueue().then(n,n)},QP=e=>{var t=e.id;Oi.setCode(Dd(e));var r=()=>{HP.unbind(window,"ready",r),e.render()};if(vi.Event.domLoaded){if(e.getElement()){var n=_r.fromDom(e.getElement()),o=gr(n);e.on("remove",(()=>{re(n.dom.attributes,(e=>fr(n,e.name))),dr(n,o)})),e.ui.styleSheetLoader=((e,t)=>ga.forElement(e,{contentCssCors:dc(t),referrerPolicy:Rd(t)}))(n,e),ec(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var a=e.getElement().form||HP.getParent(t,"form");a&&(e.formElement=a,tc(e)&&!ho(e.getElement())&&(HP.insertAfter(HP.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},HP.bind(a,"submit reset",e.formEventDelegate),e.on("reset",(()=>{e.resetContent()})),!rc(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=Ax(e),e.notificationManager=Tx(e),(e=>"xml"===e.options.get("encoding"))(e)&&e.on("GetContent",(e=>{e.save&&(e.content=HP.encode(e.content))})),nc(e)&&e.on("submit",(()=>{e.initialized&&e.save()})),oc(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),XP(e,e.suffix)}}else HP.bind(window,"ready",r)},ZP=Ot().deviceType,JP=ZP.isPhone(),eL=ZP.isTablet(),tL=e=>{if(R(e))return[];var t=k(e)?e:e.split(/[ ,]/),r=ee(t,rt);return oe(r,at)},rL=(e,t)=>{var r,n,o,a,i=(r=(t,r)=>Z(e,r),o={},Re(t,r,Te(n={}),Te(o)),{t:n,f:o});return a=i.f,{sections:I(i.t),options:I(a)}},nL=(e,t)=>Pe(e.sections(),t),oL=(e,t)=>u(u({},{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Be(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1}),t?{menubar:!1}:{}),aL=(e,t)=>{var r,n=null!==(r=t.external_plugins)&&void 0!==r?r:{};return e&&e.external_plugins?Ht.extend({},e.external_plugins,n):n},iL=(e,t,r,n)=>{var o=tL(r.forced_plugins),a=tL(n.plugins),i=((e,t)=>nL(e,t)?e.sections()[t]:{})(t,"mobile"),l=((e,t,r,n)=>e&&nL(t,"mobile")?n:r)(e,t,a,i.plugins?tL(i.plugins):a),s=((e,t)=>[...tL(e),...tL(t)])(o,l);return Ht.extend(n,{forced_plugins:o,plugins:s})},lL=(e,t,r,n,o)=>{var a,i=e?{mobile:oL(null!==(a=o.mobile)&&void 0!==a?a:{},t)}:{},l=rL(["mobile"],GT(i,o)),s=Ht.extend(r,n,l.options(),((e,t)=>e&&nL(t,"mobile"))(e,l)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.sections(),o=Be(n,t).getOr({});return Ht.extend({},r,o)}(l,"mobile"):{},{external_plugins:aL(n,l.options())});return iL(e,l,n,s)},sL=(e,t)=>((e,t)=>FS(e).editor.addVisual(t))(e,t),dL=e=>{var t=t=>()=>{te("left,center,right,justify".split(","),(r=>{t!==r&&e.formatter.remove("align"+r)})),"none"!==t&&((t,r)=>{e.formatter.toggle(t,r),e.nodeChanged()})("align"+t)};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})},cL=e=>{dL(e),(e=>{var t=t=>()=>{var r=e.selection,n=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return J(n,(r=>D(e.formatter.matchNode(r,t))))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(e)},mL=(e,t)=>{var r=e.selection,n=e.dom;return/^ | $/.test(t)?((e,t,r,n)=>{var o=_r.fromDom(e.getRoot());return r=Zv(o,hs.fromRangeStart(t),n)?r.replace(/^ /,"&nbsp;"):r.replace(/^&nbsp;/," "),Jv(o,hs.fromRangeEnd(t),n)?r.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):r.replace(/&nbsp;(<br( \/)?>)?$/," ")})(n,r.getRng(),t,e.schema):t},uL=(e,t)=>{if(e.selection.isEditable()){var r=(e=>{if("string"!=typeof e){var t=Ht.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}})(t),n=r.content,o=r.details;Jw(e,u(u({},o),{},{content:mL(e,n),format:"html",set:!1,selection:!0})).each((t=>{var r=((e,t,r)=>IS(e).editor.insertContent(t,r))(e,t.content,o);eS(e,r,t),e.addVisual()}))}},fL={"font-size":"size","font-family":"face"},gL=ir("font"),pL=(e,t,r)=>Yb(_r.fromDom(r),(t=>(t=>yn(t,e).orThunk((()=>gL(t)?Be(fL,e).bind((e=>mr(t,e))):K.none())))(t)),(e=>Dr(_r.fromDom(t),e))),vL=e=>(t,r)=>K.from(r).map(_r.fromDom).filter(rr).bind((r=>pL(e,t,r.dom).or(((e,t)=>K.from(_i.DOM.getStyle(t,e,!0)))(e,r.dom)))).getOr(""),hL=vL("font-size"),bL=L((e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")),vL("font-family")),yL=e=>uu(e.getBody()).bind((e=>{var t=e.container();return K.from(bo(t)?t.parentNode:t)})),CL=(e,t)=>(e=>K.from(e.selection.getRng()).bind((t=>{var r=e.getBody();return t.startContainer===r&&0===t.startOffset?K.none():K.from(e.selection.getStart(!0))})))(e).orThunk(U(yL,e)).map(_r.fromDom).filter(rr).bind(t),wL=(e,t)=>CL(e,M(K.some,t)),SL=(e,t)=>{if(/^[0-9.]+$/.test(t)){var r=parseInt(t,10);if(r>=1&&r<=7){var n=(e=>Ht.explode(e.options.get("font_size_style_values")))(e),o=(e=>Ht.explode(e.options.get("font_size_classes")))(e);return o.length>0?o[r-1]||t:n[r-1]||t}return t}return t},xL=e=>{var t=e.split(/\s*,\s*/);return ee(t,(e=>-1===e.indexOf(" ")||Je(e,'"')||Je(e,"'")?e:`'${e}'`)).join(",")},EL=e=>{var t=(t,r)=>{e.formatter.toggle(t,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,r,n)=>{t(e,{value:n})},BackColor:(e,r,n)=>{t("hilitecolor",{value:n})},FontName:(t,r,n)=>{((e,t)=>{var r=SL(e,t);e.formatter.toggle("fontname",{value:xL(r)}),e.nodeChanged()})(e,n)},FontSize:(t,r,n)=>{((e,t)=>{e.formatter.toggle("fontsize",{value:SL(e,t)}),e.nodeChanged()})(e,n)},LineHeight:(t,r,n)=>{((e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()})(e,n)},Lang:(e,r,n)=>{var o;t(e,{value:n.code,customValue:null!==(o=n.customCode)&&void 0!==o?o:null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,r,n)=>{t(S(n)?n:"p")},mceToggleFormat:(e,r,n)=>{t(n)}})},kL=e=>{var t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",(()=>(e=>wL(e,(t=>bL(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("FontSize",(()=>(e=>wL(e,(t=>hL(e.getBody(),t.dom))).getOr(""))(e))),e.editorCommands.addQueryValueHandler("LineHeight",(()=>(e=>wL(e,(t=>{var r=_r.fromDom(e.getBody()),n=Yb(t,(e=>yn(e,"line-height")),U(Dr,r));return n.getOrThunk((()=>{var e=parseFloat(hn(t,"line-height")),r=parseFloat(hn(t,"font-size"));return String(e/r)}))})).getOr(""))(e)))},_L=e=>{e.editorCommands.addCommands({Indent:()=>{(e=>{X_(e,"indent")})(e)},Outdent:()=>{Q_(e)}}),e.editorCommands.addCommands({Outdent:()=>K_(e)},"state")},NL=(e,t)=>{var r=e.dom,n=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),a=t?n.startContainer:n.endContainer,i=CD(r,a);if(i&&i.isContentEditable){var l=t?Sn:xn,s=ud(e);((e,t,r,n)=>{var o=e.dom,a=e=>o.isBlock(e)&&e.parentElement===r,i=a(t)?t:o.getParent(n,a,r);return K.from(i).map(_r.fromDom)})(e,o,i,a).each((t=>{var r=ED(e,a,t.dom,i,!1,s);l(t,_r.fromDom(r)),e.selection.setCursorLocation(r,0),e.dispatch("NewBlock",{newBlock:r}),uD(e,"insertParagraph")}))}},TL=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{(e=>{NL(e,!0)})(e)},InsertNewBlockAfter:()=>{(e=>{NL(e,!1)})(e)}})},RL=e=>{cL(e),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{var r,n=e.getDoc();try{n.execCommand(t)}catch(e){r=!0}if("paste"!==t||n.queryCommandEnabled(t)||(r=!0),r||!n.queryCommandSupported(t)){var o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(jt.os.isMacOS()||jt.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"â+")),e.notificationManager.open({text:o,type:"error"})}}})})(e),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(e),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,r,n)=>{var o=0;e.dom.getParent(e.selection.getNode(),(t=>!so(t)||o++!==n||(e.selection.select(t),!1)),e.getBody())},mceSelectNode:(t,r,n)=>{e.selection.select(n)},selectAll:()=>{var t=e.dom.getParent(e.selection.getStart(),_o);if(t){var r=e.dom.createRng();r.selectNodeContents(t),e.selection.setRng(r)}}})})(e),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{var t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,r,n)=>{uL(e,e.dom.createHTML("img",{src:n}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,r,n)=>{uL(e,e.dom.encode(n))},insertHTML:(t,r,n)=>{uL(e,n)},mceInsertContent:(t,r,n)=>{uL(e,n)},mceSetContent:(t,r,n)=>{e.setContent(n)},mceReplaceContent:(t,r,n)=>{e.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Nc(e))}})})(e),(e=>{var t=(t,r,n)=>{var o=S(n)?{href:n}:n,a=e.dom.getParent(e.selection.getNode(),"a");x(o)&&S(o.href)&&(o.href=o.href.replace(/ /g,"%20"),a&&o.href||e.formatter.remove("link"),o.href&&e.formatter.apply("link",o,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");return void(t&&e.dom.remove(t,!0))}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})})(e),_L(e),TL(e),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{lA(FD,e)},mceInsertNewLine:(t,r,n)=>{sA(e,n)},InsertLineBreak:(t,r,n)=>{lA(KD,e)}})})(e),(e=>{EL(e),kL(e)})(e),(e=>{e.editorCommands.addCommands({mceRemoveNode:(t,r,n)=>{var o=null!=n?n:e.selection.getNode();if(o!==e.getBody()){var a=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,r,n)=>{Tp(e,!0===n)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(e)},DL=["toggleview"],AL=e=>Z(DL,e.toLowerCase());class OL{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=this.editor,a=e.toLowerCase(),i=null==n?void 0:n.skip_focus;if(o.removed)return!1;if("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?(e=>{mp(e).each((t=>e.selection.setRng(t)))})(o):o.focus()),o.dispatch("BeforeExecCommand",{command:e,ui:t,value:r}).isDefaultPrevented())return!1;var l=this.commands.exec[a];return!!A(l)&&(l(a,t,r),o.dispatch("ExecCommand",{command:e,ui:t,value:r}),!0)}queryCommandState(e){if(!AL(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;var t=e.toLowerCase(),r=this.commands.state[t];return!!A(r)&&r(t)}queryCommandValue(e){if(!AL(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";var t=e.toLowerCase(),r=this.commands.value[t];return A(r)?r(t):""}addCommands(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"exec",r=this.commands;ke(e,((e,n)=>{te(n.toLowerCase().split(","),(n=>{r[t][n]=e}))}))}addCommand(e,t,r){var n=e.toLowerCase();this.commands.exec[n]=(e,n,o)=>t.call(null!=r?r:this.editor,n,o)}queryCommandSupported(e){var t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,r){this.commands.state[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}addQueryValueHandler(e,t,r){this.commands.value[e.toLowerCase()]=()=>t.call(null!=r?r:this.editor)}}var BL="data-mce-contenteditable",PL=(e,t,r)=>{try{e.getDoc().execCommand(t,!1,String(r))}catch(e){}},LL=(e,t)=>{e.dom.contentEditable=t?"true":"false"},ML=(e,t)=>{var r=_r.fromDom(e.getBody());((e,t,r)=>{Er(e,t)&&!r?Sr(e,t):r&&Cr(e,t)})(r,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(e=>{K.from(e.selection.getNode()).each((e=>{e.removeAttribute("data-mce-selected")}))})(e),e.readonly=!0,LL(r,!1),te(Kn(r,'*[contenteditable="true"]'),(e=>{sr(e,BL,"true"),LL(e,!1)}))):(e.readonly=!1,e.hasEditableRoot()&&LL(r,!0),(e=>{te(Kn(e,`*[${BL}="true"]`),(e=>{fr(e,BL),LL(e,!0)}))})(r),PL(e,"StyleWithCSS",!1),PL(e,"enableInlineTableEditing",!1),PL(e,"enableObjectResizing",!1),_p(e)&&e.focus(),(e=>{e.selection.setRng(e.selection.getRng())})(e),e.nodeChanged())},IL=e=>e.readonly,FL=e=>{e.parser.addAttributeFilter("contenteditable",(t=>{IL(e)&&te(t,(e=>{e.attr(BL,e.attr("contenteditable")),e.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(BL,(t=>{IL(e)&&te(t,(e=>{e.attr("contenteditable",e.attr(BL))}))})),e.serializer.addTempAttr(BL)},jL=["copy"],UL=(e,t)=>{if((e=>"click"===e.type)(t)&&!Gf.metaKeyPressed(t)){var r=_r.fromDom(t.target);((e,t)=>cn(t,"a",(t=>Dr(t,_r.fromDom(e.getBody())))).bind((e=>mr(e,"href"))))(e,r).each((r=>{if(t.preventDefault(),/^#/.test(r)){var n=e.dom.select(`${r},[name="${Qe(r,"#")}"]`);n.length&&e.selection.scrollIntoView(n[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))}else(e=>Z(jL,e.type))(t)&&e.dispatch(t.type,t)},zL=Ht.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class HL{static isNative(e){return!!zL[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||V}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){var r=e.toLowerCase(),n=ci(r,null!=t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(n);var o=this.bindings[r];if(o)for(var a=0,i=o.length;a<i;a++){var l=o[a];if(!l.removed){if(l.once&&this.off(r,l.func),n.isImmediatePropagationStopped())return n;if(!1===l.func.call(this.scope,n))return n.preventDefault(),n}}return n}on(e,t,r,n){if(!1===t&&(t=V),t){var o={func:t,removed:!1};n&&Ht.extend(o,n);for(var a=e.toLowerCase().split(" "),i=a.length;i--;){var l=a[i],s=this.bindings[l];s||(s=[],this.toggleEvent(l,!0)),s=r?[o,...s]:[...s,o],this.bindings[l]=s}}return this}off(e,t){if(e)for(var r=e.toLowerCase().split(" "),n=r.length;n--;){var o=r[n],a=this.bindings[o];if(!o)return ke(this.bindings,((e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]})),this;if(a){if(t){var i=ne(a,(e=>e.func===t));a=i.fail,this.bindings[o]=a,te(i.pass,(e=>{e.removed=!0}))}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[o])}}else ke(this.bindings,((e,t)=>{this.toggleEvent(t,!1)})),this.bindings={};return this}once(e,t,r){return this.on(e,t,r,{once:!0})}has(e){e=e.toLowerCase();var t=this.bindings[e];return!(!t||0===t.length)}}var $L,WL=e=>(e._eventDispatcher||(e._eventDispatcher=new HL({scope:e,toggleEvent:(t,r)=>{HL.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,r)}})),e._eventDispatcher),VL={fire(e,t,r){return this.dispatch(e,t,r)},dispatch(e,t,r){var n=this;if(n.removed&&"remove"!==e&&"detach"!==e)return ci(e.toLowerCase(),null!=t?t:{},n);var o=WL(n).dispatch(e,t);if(!1!==r&&n.parent)for(var a=n.parent();a&&!o.isPropagationStopped();)a.dispatch(e,o,!1),a=a.parent?a.parent():void 0;return o},on(e,t,r){return WL(this).on(e,t,r)},off(e,t){return WL(this).off(e,t)},once(e,t){return WL(this).once(e,t)},hasEventListeners(e){return WL(this).has(e)}},qL=_i.DOM,KL=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;var r=Hd(e);return r?(e.eventRoot||(e.eventRoot=qL.select(r)[0]),e.eventRoot):e.getBody()},GL=(e,t,r)=>{(e=>!e.hidden&&!IL(e))(e)?e.dispatch(t,r):IL(e)&&UL(e,r)},YL=(e,t)=>{if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed){var r=KL(e,t);if(Hd(e)){if($L||($L={},e.editorManager.on("removeEditor",(()=>{e.editorManager.activeEditor||$L&&(ke($L,((t,r)=>{e.dom.unbind(KL(e,r))})),$L=null)}))),$L[t])return;var n=r=>{for(var n=r.target,o=e.editorManager.get(),a=o.length;a--;){var i=o[a].getBody();(i===n||qL.isChildOf(n,i))&&GL(o[a],t,r)}};$L[t]=n,qL.bind(r,t,n)}else{var o=r=>{GL(e,t,r)};qL.bind(r,t,o),e.delegates[t]=o}}},XL=u(u({},VL),{},{bindPendingEventDelegates(){var e=this;Ht.each(e._pendingNativeEvents,(t=>{YL(e,t)}))},toggleNativeEvent(e,t){var r=this;"focus"!==e&&"blur"!==e&&(r.removed||(t?r.initialized?YL(r,e):r._pendingNativeEvents?r._pendingNativeEvents.push(e):r._pendingNativeEvents=[e]:r.initialized&&r.delegates&&(r.dom.unbind(KL(r,e),e,r.delegates[e]),delete r.delegates[e])))},unbindAllNativeEvents(){var e=this,t=e.getBody(),r=e.dom;e.delegates&&(ke(e.delegates,((t,r)=>{e.dom.unbind(KL(e,r),r,t)})),delete e.delegates),!e.inline&&t&&r&&(t.onload=null,r.unbind(e.getWin()),r.unbind(e.getDoc())),r&&(r.unbind(t),r.unbind(e.getContainer()))}}),QL=e=>S(e)?{value:e.split(/[ ,]/),valid:!0}:B(e,S)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},ZL=(e,t)=>e+(it(t.message)?"":`. ${t.message}`),JL=e=>e.valid,eM=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t(e);return N(n)?n?{value:e,valid:!0}:{valid:!1,message:r}:n},tM=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n={},o={},a=(e,t,r)=>{var n=eM(t,r);return JL(n)?(o[e]=n.value,!0):(console.warn(ZL(`Invalid value passed for the ${e} option`,n)),!1)},i=e=>Pe(n,e);return{register:(e,r)=>{var i=(e=>S(e.processor))(r)?(e=>{var t=(()=>{switch(e){case"array":return k;case"boolean":return N;case"function":return A;case"number":return O;case"object":return x;case"string":return S;case"string[]":return QL;case"object[]":return e=>B(e,x);case"regexp":return e=>w(e,RegExp);default:return q}})();return r=>eM(r,t,`The value must be a ${e}.`)})(r.processor):r.processor,l=((e,t,r)=>{if(!T(t)){var n=eM(t,r);if(JL(n))return n.value;console.error(ZL(`Invalid default value passed for the "${e}" option`,n))}})(e,r.default,i);n[e]=u(u({},r),{},{default:l,processor:i}),Be(o,e).orThunk((()=>Be(t,e))).each((t=>a(e,t,i)))},isRegistered:i,get:e=>Be(o,e).orThunk((()=>Be(n,e).map((e=>e.default)))).getOrUndefined(),set:(e,t)=>{if(i(e)){var r=n[e];return r.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):a(e,t,r.processor)}return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:e=>{var t=i(e);return t&&delete o[e],t},isSet:e=>Pe(o,e),debug:()=>{try{console.log(JSON.parse(JSON.stringify(r,((e,t)=>N(t)||O(t)||S(t)||_(t)||k(t)||E(t)?t:Object.prototype.toString.call(t)))))}catch(e){console.error(e)}}}},rM=["design","readonly"],nM=(e,t,r,n)=>{var o=r[t.get()],a=r[n];try{a.activate()}catch(e){return void console.error(`problem while activating editor mode ${n}:`,e)}o.deactivate(),o.editorReadOnly!==a.editorReadOnly&&ML(e,a.editorReadOnly),t.set(n),((e,t)=>{e.dispatch("SwitchMode",{mode:t})})(e,n)},oM=e=>{var t=Ho("design"),r=Ho({design:{activate:P,deactivate:P,editorReadOnly:!1},readonly:{activate:P,deactivate:P,editorReadOnly:!0}});return(e=>{e.serializer?FL(e):e.on("PreInit",(()=>{FL(e)}))})(e),(e=>{e.on("ShowCaret",(t=>{IL(e)&&t.preventDefault()})),e.on("ObjectSelected",(t=>{IL(e)&&t.preventDefault()}))})(e),{isReadOnly:()=>IL(e),set:n=>((e,t,r,n)=>{if(n!==r.get()){if(!Pe(t,n))throw new Error(`Editor mode '${n}' is invalid`);e.initialized?nM(e,r,t,n):e.on("init",(()=>nM(e,r,t,n)))}})(e,r.get(),t,n),get:()=>t.get(),register:(e,t)=>{r.set(((e,t,r)=>{if(Z(rM,t))throw new Error(`Cannot override default mode ${t}`);return u(u({},e),{},{[t]:u(u({},r),{},{deactivate:()=>{try{r.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}})})})(r.get(),e,t))}}},aM=Ht.each,iM=Ht.explode,lM={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},sM=Ht.makeMap("alt,ctrl,shift,meta,access"),dM=e=>{var t={},r=jt.os.isMacOS()||jt.os.isiOS();aM(iM(e.toLowerCase(),"+"),(e=>{(e=>e in sM)(e)?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=lM[e]||e.toUpperCase().charCodeAt(0))}));var n,o=[t.keyCode];for(n in sM)t[n]?o.push(n):t[n]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,r?t.ctrl=!0:t.shift=!0),t.meta&&(r?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class cM{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;var t=this;e.on("keyup keypress keydown",(e=>{!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(aM(t.shortcuts,(r=>{t.matchShortcut(e,r)&&(t.pendingPatterns=r.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(r))})),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))}))}add(e,t,r,n){var o=this,a=o.normalizeCommandFunc(r);return aM(iM(Ht.trim(e)),(e=>{var r=o.createShortcut(e,t,a,n);o.shortcuts[r.id]=r})),!0}remove(e){var t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){var t=this,r=e;return"string"==typeof r?()=>{t.editor.execCommand(r,!1,null)}:Ht.isArray(r)?()=>{t.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(e,t,r,n){var o=Ht.map(iM(e,">"),dM);return o[o.length-1]=Ht.extend(o[o.length-1],{func:r,scope:n||this.editor}),Ht.extend(o[0],{desc:this.editor.translate(t),subpatterns:o.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}var mM=()=>{var e=(()=>{var e={},t={},r={},n={},o={},a={},i={},l={},s=(e,t)=>(r,n)=>{e[r.toLowerCase()]=u(u({},n),{},{type:t})};return{addButton:s(e,"button"),addGroupToolbarButton:s(e,"grouptoolbarbutton"),addToggleButton:s(e,"togglebutton"),addMenuButton:s(e,"menubutton"),addSplitButton:s(e,"splitbutton"),addMenuItem:s(t,"menuitem"),addNestedMenuItem:s(t,"nestedmenuitem"),addToggleMenuItem:s(t,"togglemenuitem"),addAutocompleter:s(r,"autocompleter"),addContextMenu:s(o,"contextmenu"),addContextToolbar:s(a,"contexttoolbar"),addContextForm:s(a,"contextform"),addSidebar:s(i,"sidebar"),addView:s(l,"views"),addIcon:(e,t)=>n[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:n,popups:r,contextMenus:o,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},uM=_i.DOM,fM=Ht.extend,gM=Ht.each;class pM{constructor(e,t,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,fM(this,XL);var n=this;this.id=e,this.hidden=!1;var o,a,i=((e,t)=>{var r=YT(t);return lL(JP||eL,JP,r,e,r)})(r.defaultOptions,t);this.options=tM(n,i,t),(a=(o=n).options.register)("id",{processor:"string",default:o.id}),a("selector",{processor:"string"}),a("target",{processor:"object"}),a("suffix",{processor:"string"}),a("cache_suffix",{processor:"string"}),a("base_url",{processor:"string"}),a("referrer_policy",{processor:"string",default:""}),a("language_load",{processor:"boolean",default:!0}),a("inline",{processor:"boolean",default:!1}),a("iframe_attrs",{processor:"object",default:{}}),a("doctype",{processor:"string",default:"<!DOCTYPE html>"}),a("document_base_url",{processor:"string",default:o.documentBaseUrl}),a("body_id",{processor:od(o,"tinymce"),default:"tinymce"}),a("body_class",{processor:od(o),default:""}),a("content_security_policy",{processor:"string",default:""}),a("br_in_pre",{processor:"boolean",default:!0}),a("forced_root_block",{processor:e=>{var t=S(e)&&at(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),a("forced_root_block_attrs",{processor:"object",default:{}}),a("newline_behavior",{processor:e=>{var t=Z(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),a("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),a("no_newline_selector",{processor:"string",default:""}),a("keep_styles",{processor:"boolean",default:!0}),a("end_container_on_empty_block",{processor:e=>N(e)||S(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),a("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),a("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),a("font_size_classes",{processor:"string",default:""}),a("automatic_uploads",{processor:"boolean",default:!0}),a("images_reuse_filename",{processor:"boolean",default:!1}),a("images_replace_blob_uris",{processor:"boolean",default:!0}),a("icons",{processor:"string",default:""}),a("icons_url",{processor:"string",default:""}),a("images_upload_url",{processor:"string",default:""}),a("images_upload_base_path",{processor:"string",default:""}),a("images_upload_credentials",{processor:"boolean",default:!1}),a("images_upload_handler",{processor:"function"}),a("language",{processor:"string",default:"en"}),a("language_url",{processor:"string",default:""}),a("entity_encoding",{processor:"string",default:"named"}),a("indent",{processor:"boolean",default:!0}),a("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),a("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),a("indent_use_margin",{processor:"boolean",default:!1}),a("indentation",{processor:"string",default:"40px"}),a("content_css",{processor:e=>{var t=!1===e||S(e)||B(e,S);return t?S(e)?{value:ee(e.split(","),rt),valid:t}:k(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:ec(o)?[]:["default"]}),a("content_style",{processor:"string"}),a("content_css_cors",{processor:"boolean",default:!1}),a("font_css",{processor:e=>{var t=S(e)||B(e,S);return t?{value:k(e)?e:ee(e.split(","),rt),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),a("inline_boundaries",{processor:"boolean",default:!0}),a("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),a("object_resizing",{processor:e=>{var t=N(e)||S(e);return t?!1===e||Zs.isiPhone()||Zs.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!Js}),a("resize_img_proportional",{processor:"boolean",default:!0}),a("event_root",{processor:"string"}),a("service_message",{processor:"string"}),a("theme",{processor:e=>!1===e||S(e)||A(e),default:"silver"}),a("theme_url",{processor:"string"}),a("formats",{processor:"object"}),a("format_empty_lines",{processor:"boolean",default:!1}),a("format_noneditable_selector",{processor:"string",default:""}),a("preview_styles",{processor:e=>{var t=!1===e||S(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),a("custom_ui_selector",{processor:"string",default:""}),a("hidden_input",{processor:"boolean",default:!0}),a("submit_patch",{processor:"boolean",default:!0}),a("encoding",{processor:"string"}),a("add_form_submit_trigger",{processor:"boolean",default:!0}),a("add_unload_trigger",{processor:"boolean",default:!0}),a("custom_undo_redo_levels",{processor:"number",default:0}),a("disable_nodechange",{processor:"boolean",default:!1}),a("readonly",{processor:"boolean",default:!1}),a("editable_root",{processor:"boolean",default:!0}),a("plugins",{processor:"string[]",default:[]}),a("external_plugins",{processor:"object"}),a("forced_plugins",{processor:"string[]"}),a("model",{processor:"string",default:o.hasPlugin("rtc")?"plugin":"dom"}),a("model_url",{processor:"string"}),a("block_unsupported_drop",{processor:"boolean",default:!0}),a("visual",{processor:"boolean",default:!0}),a("visual_table_class",{processor:"string",default:"mce-item-table"}),a("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),a("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),a("setup",{processor:"function"}),a("init_instance_callback",{processor:"function"}),a("url_converter",{processor:"function",default:o.convertURL}),a("url_converter_scope",{processor:"object",default:o}),a("urlconverter_callback",{processor:"function"}),a("allow_conditional_comments",{processor:"boolean",default:!1}),a("allow_html_data_urls",{processor:"boolean",default:!1}),a("allow_svg_data_urls",{processor:"boolean"}),a("allow_html_in_named_anchor",{processor:"boolean",default:!1}),a("allow_script_urls",{processor:"boolean",default:!1}),a("allow_unsafe_link_target",{processor:"boolean",default:!1}),a("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),a("fix_list_elements",{processor:"boolean",default:!1}),a("preserve_cdata",{processor:"boolean",default:!1}),a("remove_trailing_brs",{processor:"boolean",default:!0}),a("pad_empty_with_br",{processor:"boolean",default:!1}),a("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),a("element_format",{processor:"string",default:"html"}),a("entities",{processor:"string"}),a("schema",{processor:"string",default:"html5"}),a("convert_urls",{processor:"boolean",default:!0}),a("relative_urls",{processor:"boolean",default:!0}),a("remove_script_host",{processor:"boolean",default:!0}),a("custom_elements",{processor:nd}),a("extended_valid_elements",{processor:"string"}),a("invalid_elements",{processor:"string"}),a("invalid_styles",{processor:nd}),a("valid_children",{processor:"string"}),a("valid_classes",{processor:nd}),a("valid_elements",{processor:"string"}),a("valid_styles",{processor:nd}),a("verify_html",{processor:"boolean",default:!0}),a("auto_focus",{processor:e=>S(e)||!0===e}),a("browser_spellcheck",{processor:"boolean",default:!1}),a("protect",{processor:"array"}),a("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),a("deprecation_warnings",{processor:"boolean",default:!0}),a("a11y_advanced_options",{processor:"boolean",default:!1}),a("api_key",{processor:"string"}),a("license_key",{processor:"string"}),a("paste_block_drop",{processor:"boolean",default:!1}),a("paste_data_images",{processor:"boolean",default:!0}),a("paste_preprocess",{processor:"function"}),a("paste_postprocess",{processor:"function"}),a("paste_webkit_styles",{processor:"string",default:"none"}),a("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),a("paste_merge_formats",{processor:"boolean",default:!0}),a("smart_paste",{processor:"boolean",default:!0}),a("paste_as_text",{processor:"boolean",default:!1}),a("paste_tab_spaces",{processor:"number",default:4}),a("text_patterns",{processor:e=>B(e,x)||!1===e?{value:Qs(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),a("text_patterns_lookup",{processor:e=>{return A(e)?{value:(t=e,e=>{var r=t(e);return Qs(r)}),valid:!0}:{valid:!1,message:"Must be a single function"};var t},default:e=>[]}),a("noneditable_class",{processor:"string",default:"mceNonEditable"}),a("editable_class",{processor:"string",default:"mceEditable"}),a("noneditable_regexp",{processor:e=>B(e,td)?{value:e,valid:!0}:td(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),a("table_tab_navigation",{processor:"boolean",default:!0}),a("highlight_on_focus",{processor:"boolean",default:!0}),a("xss_sanitization",{processor:"boolean",default:!0}),a("details_initial_state",{processor:e=>{var t=Z(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),a("details_serialized_state",{processor:e=>{var t=Z(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),a("init_content_sync",{processor:"boolean",default:!1}),a("newdocument_content",{processor:"string",default:""}),a("sandbox_iframes",{processor:"boolean",default:!0}),a("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),a("convert_unsafe_embeds",{processor:"boolean",default:!0}),o.on("ScriptsLoaded",(()=>{a("directionality",{processor:"string",default:Oi.isRtl()?"rtl":void 0}),a("placeholder",{processor:"string",default:ed.getAttrib(o.getElement(),"placeholder")})}));var l=this.options.get;l("deprecation_warnings")&&fx(t,i);var s=l("suffix");s&&(r.suffix=s),this.suffix=r.suffix;var d=l("base_url");d&&r._setBaseUrl(d),this.baseUri=r.baseURI;var c=Rd(n);c&&(Ti.ScriptLoader._setReferrerPolicy(c),_i.DOM.styleSheetLoader._setReferrerPolicy(c));var m=dc(n);D(m)&&_i.DOM.styleSheetLoader._setContentCssCors(m),Bi.languageLoad=l("language_load"),Bi.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Aw(ld(n),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=ec(n),this.hasVisual=fc(n),this.shortcuts=new cM(this),this.editorCommands=new OL(this),RL(this);var u=l("cache_suffix");u&&(jt.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:mM(),styleSheetLoader:void 0,show:P,hide:P,setEnabled:P,isEnabled:q},this.mode=oM(n),r.dispatch("SetupEditor",{editor:this});var f=hc(n);A(f)&&f.call(n,n)}render(){QP(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return kp(this)}translate(e){return Oi.translate(e)}getParam(e,t,r){var n=this.options;return n.isRegistered(e)||(D(r)?n.register(e,{processor:r,default:t}):n.register(e,{processor:q,default:t})),n.isSet(e)||T(t)?n.get(e):t}hasPlugin(e,t){return!!Z(cc(this),e)&&(!t||void 0!==Rx.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,r){this.editorCommands.addCommand(e,t,r)}addQueryStateHandler(e,t,r){this.editorCommands.addQueryStateHandler(e,t,r)}addQueryValueHandler(e,t,r){this.editorCommands.addQueryValueHandler(e,t,r)}addShortcut(e,t,r,n){this.shortcuts.add(e,t,r,n)}execCommand(e,t,r,n){return this.editorCommands.execCommand(e,t,r,n)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(uM.show(e.getContainer()),uM.hide(e.id)),e.load(),e.dispatch("show"))}hide(){var e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(uM.hide(e.getContainer()),uM.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=t.getElement();if(t.removed)return"";if(r){var n=u(u({},e),{},{load:!0}),o=ho(r)?r.value:r.innerHTML,a=t.setContent(o,n);return n.no_events||t.dispatch("LoadContent",u(u({},n),{},{element:r})),a}return""}save(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=t.getElement();if(!r||!t.initialized||t.removed)return"";var n=u(u({},e),{},{save:!0,element:r}),o=t.getContent(n),a=u(u({},n),{},{content:o});if(a.no_events||t.dispatch("SaveContent",a),"raw"===a.format&&t.dispatch("RawSaveContent",a),o=a.content,ho(r))r.value=o;else{!e.is_removing&&t.inline||(r.innerHTML=o);var i=uM.getParent(t.id,"form");i&&gM(i.elements,(e=>e.name!==t.id||(e.value=o,!1)))}return a.element=n.element=r=null,!1!==a.set_dirty&&t.setDirty(!1),o}setContent(e,t){return tx(this,e,t)}getContent(e){return ex(this,e)}insertContent(e,t){t&&(e=fM({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?tx(this,this.startContent,{format:"raw"}):tx(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){var e=this;return e.container||(e.container=e.editorContainer||uM.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=uM.get(this.id)),this.targetElm}getWin(){var e=this;if(!e.contentWindow){var t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}getDoc(){var e=this;if(!e.contentDocument){var t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}getBody(){var e,t,r=this.getDoc();return null!==(t=null!==(e=this.bodyElement)&&void 0!==e?e:null==r?void 0:r.body)&&void 0!==t?t:null}convertURL(e,t,r){var n=this,o=n.options.get,a=yc(n);if(A(a))return a.call(n,e,r,!0,t);if(!o("convert_urls")||"link"===r||x(r)&&"LINK"===r.nodeName||0===e.indexOf("file:")||0===e.length)return e;var i=new Aw(e);return"http"!==i.protocol&&"https"!==i.protocol&&""!==i.protocol?e:o("relative_urls")?n.documentBaseURI.toRelative(e):e=n.documentBaseURI.toAbsolute(e,o("remove_script_host"))}addVisual(e){sL(this,e)}setEditableRoot(e){((e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),((e,t)=>{e.dispatch("EditableRootStateChange",{state:t})})(e,t))})(this,e)}hasEditableRoot(){return this._editableRoot}remove(){vx(this)}destroy(e){hx(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}var vM,hM=_i.DOM,bM=Ht.each,yM=!1,CM=[],wM=e=>{var t=e.type;bM(kM.get(),(r=>{switch(t){case"scroll":r.dispatch("ScrollWindow",e);break;case"resize":r.dispatch("ResizeWindow",e)}}))},SM=e=>{if(e!==yM){var t=_i.DOM;e?(t.bind(window,"resize",wM),t.bind(window,"scroll",wM)):(t.unbind(window,"resize",wM),t.unbind(window,"scroll",wM)),yM=e}},xM=e=>{var t=CM;return CM=oe(CM,(t=>e!==t)),kM.activeEditor===e&&(kM.activeEditor=CM.length>0?CM[0]:null),kM.focusedEditor===e&&(kM.focusedEditor=null),t.length!==CM.length},EM="CSS1Compat"!==document.compatMode,kM=u(u({},VL),{},{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"2.1",releaseDate:"2024-07-03",i18n:Oi,activeEditor:null,focusedEditor:null,setup(){var e=this,t="",r="",n=Aw.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));var o,a=window.tinymce||window.tinyMCEPreInit;if(a)t=a.base||a.baseURL,r=a.suffix;else{for(var i=document.getElementsByTagName("script"),l=0;l<i.length;l++){var s=i[l].src||"";if(""!==s){var d=s.substring(s.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(s)){-1!==d.indexOf(".min")&&(r=".min"),t=s.substring(0,s.lastIndexOf("/"));break}}}if(!t&&document.currentScript){var c=document.currentScript.src;-1!==c.indexOf(".min")&&(r=".min"),t=c.substring(0,c.lastIndexOf("/"))}}e.baseURL=new Aw(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new Aw(e.baseURL),e.suffix=r,(o=e).on("AddEditor",U(yp,o)),o.on("RemoveEditor",U(Cp,o))},overrideDefaults(e){var t=e.base_url;t&&this._setBaseUrl(t);var r=e.suffix;r&&(this.suffix=r),this.defaultOptions=e;var n=e.plugin_base_urls;void 0!==n&&ke(n,((e,t)=>{Bi.PluginManager.urls[t]=e}))},init(e){var t,r=this,n=Ht.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=e=>{t=e},a=()=>{var t,i=0,l=[];hM.unbind(window,"ready",a),(t=>{var n=e[t];if(n)n.apply(r,[])})("onpageload"),t=Se((e=>jt.browser.isIE()||jt.browser.isEdge()?(Mx("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):EM?(Mx("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):S(e.selector)?hM.select(e.selector):D(e.target)?[e.target]:[])(e)),Ht.each(t,(e=>{var t;(t=r.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(xM(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0)})),0===(t=Ht.grep(t,(e=>!r.get(e.id)))).length?o([]):bM(t,(a=>{((e,t)=>e.inline&&t.tagName.toLowerCase()in n)(e,a)?Mx("Could not initialize inline editor on invalid inline target element",a):((e,n,a)=>{var s=new pM(e,n,r);l.push(s),s.on("init",(()=>{++i===t.length&&o(l)})),s.targetElm=s.targetElm||a,s.render()})((e=>{var t=e.id;return t||(t=Be(e,"name").filter((e=>!hM.get(e))).getOrThunk(hM.uniqueId),e.setAttribute("id",t)),t})(a),e,a)}))};return hM.bind(window,"ready",a),new Promise((e=>{t?e(t):o=t=>{e(t)}}))},get(e){return 0===arguments.length?CM.slice(0):S(e)?se(CM,(t=>t.id===e)).getOr(null):O(e)&&CM[e]?CM[e]:null},add(e){var t=this,r=t.get(e.id);return r===e||(null===r&&CM.push(e),SM(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),vM||(vM=e=>{var r=t.dispatch("BeforeUnload");if(r.returnValue)return e.preventDefault(),e.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",vM))),e},createEditor(e,t){return this.add(new pM(e,t,this))},remove(e){var t,r=this;if(e){if(!S(e))return t=e,_(r.get(t.id))?null:(xM(t)&&r.dispatch("RemoveEditor",{editor:t}),0===CM.length&&window.removeEventListener("beforeunload",vM),t.remove(),SM(CM.length>0),t);bM(hM.select(e),(e=>{(t=r.get(e.id))&&r.remove(t)}))}else for(var n=CM.length-1;n>=0;n--)r.remove(CM[n])},execCommand(e,t,r){var n,o=this,a=x(r)?null!==(n=r.id)&&void 0!==n?n:r.index:r;switch(e){case"mceAddEditor":if(!o.get(a)){var i=r.options;new pM(a,i,o).render()}return!0;case"mceRemoveEditor":var l=o.get(a);return l&&l.remove(),!0;case"mceToggleEditor":var s=o.get(a);return s?(s.isHidden()?s.show():s.hide(),!0):(o.execCommand("mceAddEditor",!1,r),!0)}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,r)},triggerSave:()=>{bM(CM,(e=>{e.save()}))},addI18n:(e,t)=>{Oi.add(e,t)},translate:e=>Oi.translate(e),setActive(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Aw(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Aw(this.baseURL)}});kM.setup();var _M,NM,TM,RM,DM,AM={FakeClipboardItem:e=>({items:e,types:xe(e),getType:t=>Be(e,t).getOrUndefined()}),write:e=>{_M.set(e)},read:()=>_M.get().getOrUndefined(),clear:(_M=$o()).clear},OM=Math.min,BM=Math.max,PM=Math.round,LM=(e,t,r)=>{var n=t.x,o=t.y,a=e.w,i=e.h,l=t.w,s=t.h,d=(r||"").split("");return"b"===d[0]&&(o+=s),"r"===d[1]&&(n+=l),"c"===d[0]&&(o+=PM(s/2)),"c"===d[1]&&(n+=PM(l/2)),"b"===d[3]&&(o-=i),"r"===d[4]&&(n-=a),"c"===d[3]&&(o-=PM(i/2)),"c"===d[4]&&(n-=PM(a/2)),MM(n,o,a,i)},MM=(e,t,r,n)=>({x:e,y:t,w:r,h:n}),IM={inflate:(e,t,r)=>MM(e.x-t,e.y-r,e.w+2*t,e.h+2*r),relativePosition:LM,findBestRelativePosition:(e,t,r,n)=>{for(var o=0;o<n.length;o++){var a=LM(e,t,n[o]);if(a.x>=r.x&&a.x+a.w<=r.w+r.x&&a.y>=r.y&&a.y+a.h<=r.h+r.y)return n[o]}return null},intersect:(e,t)=>{var r=BM(e.x,t.x),n=BM(e.y,t.y),o=OM(e.x+e.w,t.x+t.w),a=OM(e.y+e.h,t.y+t.h);return o-r<0||a-n<0?null:MM(r,n,o-r,a-n)},clamp:(e,t,r)=>{var n=e.x,o=e.y,a=e.x+e.w,i=e.y+e.h,l=t.x+t.w,s=t.y+t.h,d=BM(0,t.x-n),c=BM(0,t.y-o),m=BM(0,a-l),u=BM(0,i-s);return n+=d,o+=c,r&&(a+=d,i+=c,n-=m,o-=u),MM(n,o,(a-=m)-n,(i-=u)-o)},create:MM,fromClientRect:e=>MM(e.left,e.top,e.width,e.height)},FM=(NM={},TM={},RM={},{load:(e,t)=>{var r=`Script at URL "${t}" failed to load`,n=`Script at URL "${t}" did not call \`tinymce.Resource.add('${e}', data)\` within 1 second`;if(void 0!==NM[e])return NM[e];var o=new Promise(((o,a)=>{var i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=!1,o=null,a=e=>function(){if(!n){n=!0,null!==o&&(clearTimeout(o),o=null);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e.apply(null,r)}},i=a(e),l=a(t);return{start:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n||null!==o||(o=setTimeout((()=>l.apply(null,t)),r))},resolve:i,reject:l}}(o,a);TM[e]=i.resolve,Ti.ScriptLoader.loadScript(t).then((()=>i.start(n)),(()=>i.reject(r)))}));return NM[e]=o,o},add:(e,t)=>{void 0!==TM[e]&&(TM[e](t),delete TM[e]),NM[e]=Promise.resolve(t),RM[e]=t},has:e=>e in RM,get:e=>RM[e],unload:e=>{delete NM[e],delete RM[e]}});try{var jM="__storage_test__";(DM=window.localStorage).setItem(jM,jM),DM.removeItem(jM)}catch(e){DM=(()=>{var e={},t=[],r={getItem:t=>e[t]||null,setItem:(r,n)=>{t.push(r),e[r]=String(n)},key:e=>t[e],removeItem:r=>{t=t.filter((e=>e===r)),delete e[r]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(r,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),r})()}var UM={geom:{Rect:IM},util:{Delay:fp,Tools:Ht,VK:Gf,URI:Aw,EventDispatcher:HL,Observable:VL,I18n:Oi,LocalStorage:DM,ImageUploader:e=>{var t=zx(),r=qx(e,t);return{upload:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r.upload(t,n?Vx(e):void 0)}}}},dom:{EventUtils:vi,TreeWalker:Qn,TextSeeker:rl,DOMUtils:_i,ScriptLoader:Ti,RangeUtils:Dg,Serializer:JS,StyleSheetLoader:fa,ControlSelection:Jf,BookmarkManager:jf,Selection:KS,Event:vi.Event},html:{Styles:ii,Entities:Oa,Node:jp,Schema:Qa,DomParser:Gw,Writer:ov,Serializer:av},Env:jt,AddOnManager:Bi,Annotator:Ff,Formatter:iE,UndoManager:sE,EditorCommands:OL,WindowManager:Ax,NotificationManager:Tx,EditorObservable:XL,Shortcuts:cM,Editor:pM,FocusManager:up,EditorManager:kM,DOM:_i.DOM,ScriptLoader:Ti.ScriptLoader,PluginManager:Rx,ThemeManager:Dx,ModelManager:yx,IconManager:bx,Resource:FM,FakeClipboard:AM,trim:Ht.trim,isArray:Ht.isArray,is:Ht.is,toArray:Ht.toArray,makeMap:Ht.makeMap,each:Ht.each,map:Ht.map,grep:Ht.grep,inArray:Ht.inArray,extend:Ht.extend,walk:Ht.walk,resolve:Ht.resolve,explode:Ht.explode,_addCacheSuffix:Ht._addCacheSuffix},zM=Ht.extend(kM,UM);(e=>{window.tinymce=e,window.tinyMCE=e})(zM),(t=>{try{e.exports=t}catch(e){}})(zM)}()}}]);
}catch(e){WRMCB(e)};