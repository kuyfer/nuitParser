WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-editor-plugin:split_core', location = 'core.js' */
/*! For license information please see core.js.LICENSE.txt */
(window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff=window.atlassianWebpackJsonp1126d6c3ec4535e33734b1025bd581ff||[]).push([["core"],[,,,,,,,,,,,,,,,,function(e,t,n){var o,r=0,a=n(72),i={hmr:!0};i.insertInto=function(){return window.document.getElementById("wysiwygTextarea_ifr").contentDocument.head},"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(t.locals=a.locals),t.use=t.ref=function(){return r++||(o=n(11)(a,i)),t},t.unuse=t.unref=function(){r>0&&!--r&&(o(),o=null)}},function(e,t){e.exports=require("confluence-macro-browser/macro-browser")},function(e,t){e.exports=require("confluence-editor/i18n/translations.i18n")},,function(e,t){e.exports=require("confluence/table-color-names")},,function(e,t){e.exports=require("confluence-editor/utils/attachments-insert-utils")},,function(e,t){e.exports=require("confluence-rest/confluence-rest")},function(e,t){e.exports=require("confluence/aui-overrides")},function(e,t){e.exports=require("confluence-drag-and-drop/analytics/files-upload-analytics")},function(e,t){e.exports=require("confluence/form-state-control")},,function(e,t){e.exports=require("confluence/root")},,function(e,t,n){var o,r=0,a=n(80),i={hmr:!0};i.insertInto=function(){return window.document.getElementById("wysiwygTextarea_ifr").contentDocument.head},"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(t.locals=a.locals),t.use=t.ref=function(){return r++||(o=n(11)(a,i)),t},t.unuse=t.unref=function(){r>0&&!--r&&(o(),o=null)}},function(e,t,n){var o,r=0,a=n(85),i={hmr:!0};i.insertInto=function(){return window.document.getElementById("wysiwygTextarea_ifr").contentDocument.head},"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(t.locals=a.locals),t.use=t.ref=function(){return r++||(o=n(11)(a,i)),t},t.unuse=t.unref=function(){r>0&&!--r&&(o(),o=null)}},function(e,t,n){var o,r=0,a=n(88),i={hmr:!0};i.insertInto=function(){return window.document.getElementById("wysiwygTextarea_ifr").contentDocument.head},"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(t.locals=a.locals),t.use=t.ref=function(){return r++||(o=n(11)(a,i)),t},t.unuse=t.unref=function(){r>0&&!--r&&(o(),o=null)}},function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e.DIALOG_CONTROL="editor.charmap.dialog"}(o||(o={}))},function(e,t){e.exports=require("confluence/macro-js-overrides")},,function(e,t){e.exports=require("confluence-editor/loader/collaborative-helper")},function(e,t,n){e.exports=n(103)},,,,,,,,function(e,t){function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){"use strict";var e=e=>parseInt(e,10),t=(e,t)=>{var n=e-t;return 0===n?0:n>0?1:-1},o=(e,t,n)=>({major:e,minor:t,patch:n}),r=t=>{var n=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(t);return n?o(e(n[1]),e(n[2]),e(n[3])):o(0,0,0)},i=e=>t=>(e=>{var t,n,o,r,a=typeof e;return null===e?"null":"object"===a&&Array.isArray(e)?"array":"object"===a&&(t=n=e,(o=String).prototype.isPrototypeOf(t)||(null===(r=n.constructor)||void 0===r?void 0:r.name)===o.name)?"string":a})(t)===e,l=e=>t=>typeof t===e,s=e=>t=>e===t,c=i("string"),d=i("object"),u=i("array"),g=s(null),m=l("boolean"),p=s(void 0),f=e=>null==e,h=e=>!f(e),v=l("function"),b=l("number");class y{constructor(e,t){this.tag=e,this.value=t}static some(e){return new y(!0,e)}static none(){return y.singletonNone}static from(e){return h(e)?y.some(e):y.none()}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?y.some(e(this.value)):y.none()}bind(e){return this.tag?e(this.value):y.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:y.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}y.singletonNone=new y(!1);var w=()=>{},C=e=>()=>e,A=e=>e,x=(e,t)=>e===t;function M(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];var a=n.concat(o);return e.apply(null,a)}}var k=C(!1),E=C(!0),T=Array.prototype.slice,D=Array.prototype.indexOf,S=Array.prototype.push,I=(e,t)=>{return n=e,o=t,D.call(n,o)>-1;var n,o},O=(e,t)=>{for(var n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},j=(e,t)=>{for(var n=[],o=0;o<e;o++)n.push(t(o));return n},N=(e,t)=>{for(var n=e.length,o=new Array(n),r=0;r<n;r++){var a=e[r];o[r]=t(a,r)}return o},L=(e,t)=>{for(var n=0,o=e.length;n<o;n++)t(e[n],n)},B=(e,t)=>{for(var n=[],o=[],r=0,a=e.length;r<a;r++){var i=e[r];(t(i,r)?n:o).push(i)}return{pass:n,fail:o}},R=(e,t)=>{for(var n=[],o=0,r=e.length;o<r;o++){var a=e[o];t(a,o)&&n.push(a)}return n},P=(e,t)=>{if(0===e.length)return[];for(var n=t(e[0]),o=[],r=[],a=0,i=e.length;a<i;a++){var l=e[a],s=t(l);s!==n&&(o.push(r),r=[]),n=s,r.push(l)}return 0!==r.length&&o.push(r),o},$=(e,t,n)=>(((e,t)=>{for(var n=e.length-1;n>=0;n--)t(e[n],n)})(e,((e,o)=>{n=t(n,e,o)})),n),H=(e,t,n)=>(L(e,((e,o)=>{n=t(n,e,o)})),n),F=(e,t)=>((e,t,n)=>{for(var o=0,r=e.length;o<r;o++){var a=e[o];if(t(a,o))return y.some(a);if(n(a,o))break}return y.none()})(e,t,k),z=(e,t)=>(e=>{for(var t=[],n=0,o=e.length;n<o;++n){if(!u(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);S.apply(t,e[n])}return t})(N(e,t)),U=(e,t)=>{for(var n=0,o=e.length;n<o;++n)if(!0!==t(e[n],n))return!1;return!0},_=(e,t)=>{var n=T.call(e,0);return n.sort(t),n},Q=(e,t)=>t>=0&&t<e.length?y.some(e[t]):y.none(),W=e=>Q(e,0),V=e=>Q(e,e.length-1),K=(e,t)=>{for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o.isSome())return o}return y.none()},G=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x;return e.exists((e=>n(e,t)))},Y=(e,t,n)=>e.isSome()&&t.isSome()?y.some(n(e.getOrDie(),t.getOrDie())):y.none(),J=e=>e.bind(A),q=(e,t)=>e?y.some(t):y.none(),Z=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},X={fromHtml:(e,t)=>{var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){var o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Z(n.childNodes[0])},fromTag:(e,t)=>{var n=(t||document).createElement(e);return Z(n)},fromText:(e,t)=>{var n=(t||document).createTextNode(e);return Z(n)},fromDom:Z,fromPoint:(e,t,n)=>y.from(e.dom.elementFromPoint(t,n)).map(Z)};"undefined"!=typeof window?window:Function("return this;")();var ee,te,ne=e=>e.dom.nodeName.toLowerCase(),oe=e=>e.dom.nodeType,re=e=>t=>oe(t)===e,ae=e=>8===oe(e)||"#comment"===ne(e),ie=re(1),le=re(3),se=re(9),ce=re(11),de=e=>t=>ie(t)&&ne(t)===e,ue=(e,t)=>{var n=e.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},ge=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,me=(e,t)=>e.dom===t.dom,pe=ue,fe=e=>X.fromDom(e.dom.ownerDocument),he=e=>se(e)?e:fe(e),ve=e=>y.from(e.dom.parentNode).map(X.fromDom),be=(e,t)=>{for(var n=v(t)?t:k,o=e.dom,r=[];null!==o.parentNode&&void 0!==o.parentNode;){var a=o.parentNode,i=X.fromDom(a);if(r.push(i),!0===n(i))break;o=a}return r},ye=e=>y.from(e.dom.previousSibling).map(X.fromDom),we=e=>y.from(e.dom.nextSibling).map(X.fromDom),Ce=e=>N(e.dom.childNodes,X.fromDom),Ae=v(Element.prototype.attachShadow)&&v(Node.prototype.getRootNode)?e=>X.fromDom(e.dom.getRootNode()):he,xe=e=>X.fromDom(e.dom.host),Me=e=>{var t=le(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;var n,o,r=t.ownerDocument;return(e=>{var t,n=Ae(e);return ce(t=n)&&h(t.dom.host)?y.some(n):y.none()})(X.fromDom(t)).fold((()=>r.body.contains(t)),(n=Me,o=xe,e=>n(o(e))))},ke=(e,t)=>{var n=[];return L(Ce(e),(e=>{t(e)&&(n=n.concat([e])),n=n.concat(ke(e,t))})),n},Ee=(e,t)=>((e,n)=>R(Ce(e),(e=>ue(e,t))))(e),Te=(e,t)=>((e,t)=>{var n=void 0===t?document:t.dom;return ge(n)?[]:N(n.querySelectorAll(e),X.fromDom)})(t,e),De=(e,t,n)=>{for(var o=e.dom,r=v(n)?n:k;o.parentNode;){o=o.parentNode;var a=X.fromDom(o);if(t(a))return y.some(a);if(r(a))break}return y.none()},Se=(e,t,n)=>De(e,(e=>ue(e,t)),n),Ie=(e,t)=>((e,n)=>F(e.dom.childNodes,(e=>{return n=X.fromDom(e),ue(n,t);var n})).map(X.fromDom))(e),Oe=(e,t)=>((e,t)=>{var n=void 0===t?document:t.dom;return ge(n)?y.none():y.from(n.querySelector(e)).map(X.fromDom)})(t,e),je=(e,t,n)=>((e,t,n,o,r)=>((e,t)=>ue(e,t))(n,o)?y.some(n):v(r)&&r(n)?y.none():t(n,o,r))(0,Se,e,t,n),Ne=Object.keys,Le=Object.hasOwnProperty,Be=(e,t)=>{for(var n=Ne(e),o=0,r=n.length;o<r;o++){var a=n[o];t(e[a],a)}},Re=(e,t)=>{var n=[];return Be(e,((e,o)=>{n.push(t(e,o))})),n},Pe=e=>Re(e,A),$e=e=>Ne(e).length,He=(e,t)=>Fe(e,t)?y.from(e[t]):y.none(),Fe=(e,t)=>Le.call(e,t),ze=e=>{for(var t in e)if(Le.call(e,t))return!1;return!0},Ue=(e,t,n)=>{if(!(c(n)||m(n)||b(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},_e=(e,t,n)=>{Ue(e.dom,t,n)},Qe=(e,t)=>{var n=e.dom;Be(t,((e,t)=>{Ue(n,t,e)}))},We=(e,t)=>{var n=e.dom.getAttribute(t);return null===n?void 0:n},Ve=(e,t)=>y.from(We(e,t)),Ke=(e,t)=>{e.dom.removeAttribute(t)},Ge=e=>H(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),Ye=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,r=e.indexOf(t,n);return-1!==r&&(!!p(o)||r+t.length<=o)},Je=(e=>t=>t.replace(e,""))(/^\s+|\s+$/g),qe=e=>!(e=>e.length>0)(e),Ze=e=>void 0!==e.style&&v(e.style.getPropertyValue),Xe=(e,t,n)=>{((e,t,n)=>{if(!c(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Ze(e)&&e.style.setProperty(t,n)})(e.dom,t,n)},et=(e,t)=>{var n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||Me(e)?o:tt(n,t)},tt=(e,t)=>Ze(e)?e.style.getPropertyValue(t):"",nt=(e,t)=>{var n=e.dom,o=tt(n,t);return y.from(o).filter((e=>e.length>0))},ot=(e,t)=>{((e,t)=>{Ze(e)&&e.style.removeProperty(t)})(e.dom,t),G(Ve(e,"style").map(Je),"")&&Ke(e,"style")},rt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Ve(e,t).map((e=>parseInt(e,10))).getOr(n)},at=e=>de("col")(e)?rt(e,"span",1)>1:((e,t)=>rt(e,"colspan",1))(e)>1,it=C(10),lt=(e,t)=>st(e,t,E),st=(e,t,n)=>z(Ce(e),(e=>ue(e,t)?n(e)?[e]:[]:st(e,t,n))),ct=["tfoot","thead","tbody","colgroup"],dt=(e,t,n)=>({element:e,rowspan:t,colspan:n}),ut=(e,t,n)=>({element:e,cells:t,section:n}),gt=(e,t,n)=>({element:e,isNew:t,isLocked:n}),mt=(e,t,n,o)=>({element:e,cells:t,section:n,isNew:o}),pt=(e,t)=>function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;return n(t)?y.none():I(e,ne(t))?y.some(t):Se(t,e.join(","),(e=>ue(e,"table")||n(e)))}(["td","th"],e,t),ft=e=>lt(e,"th,td"),ht=e=>ue(e,"colgroup")?Ee(e,"col"):z(yt(e),(e=>Ee(e,"col"))),vt=(e,t)=>je(e,"table",t),bt=e=>lt(e,"tr"),yt=e=>vt(e).fold(C([]),(e=>Ee(e,"colgroup"))),wt=e=>ve(e).map((e=>{var t=ne(e);return(e=>I(ct,e))(t)?t:"tbody"})).getOr("tbody"),Ct=(e,t)=>e.cells[t],At=(e,t)=>Ct(e,t).element,xt=e=>{var t=B(e,(e=>"colgroup"===e.section));return{rows:t.fail,cols:t.pass}},Mt="data-snooker-locked-cols",kt=e=>Ve(e,Mt).bind((e=>y.from(e.match(/\d+/g)))).map((e=>((e,t)=>{for(var n={},o=0,r=e.length;o<r;o++){var a=e[o];n[String(a)]=t(a,o)}return n})(e,E))),Et=(e,t)=>e+","+t,Tt=e=>{var t={},n=[],o=W(e).map((e=>e.element)).bind(vt).bind(kt).getOr({}),r=0,a=0,i=0,l=B(e,(e=>"colgroup"===e.section)),s=l.pass,c=l.fail;L(c,(e=>{var l=[];L(e.cells,(e=>{for(var n=0;void 0!==t[Et(i,n)];)n++;for(var r=((e,t)=>Fe(e,t)&&void 0!==e[t]&&null!==e[t])(o,n.toString()),s=((e,t,n,o,r,a)=>({element:e,rowspan:t,colspan:n,row:o,column:r,isLocked:a}))(e.element,e.rowspan,e.colspan,i,n,r),c=0;c<e.colspan;c++)for(var d=0;d<e.rowspan;d++){var u=n+c,g=Et(i+d,u);t[g]=s,a=Math.max(a,u+1)}l.push(s)})),r++,n.push(ut(e.element,l,e.section)),i++}));var d=V(s).map((e=>{var t=(e=>{var t={},n=0;return L(e.cells,(e=>{var o=e.colspan;j(o,(r=>{var a=n+r;t[a]=((e,t,n)=>({element:e,colspan:t,column:n}))(e.element,o,a)})),n+=o})),t})(e),n=((e,t)=>({element:e,columns:t}))(e.element,Pe(t));return{colgroups:[n],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),u=d.columns,g=d.colgroups,m=((e,t)=>({rows:e,columns:t}))(r,a);return{grid:m,access:t,all:n,columns:u,colgroups:g}},Dt=e=>{var t=(e=>{var t,n,o=bt(e);return t=[...yt(e),...o],n=wt,N(t,(e=>{if("colgroup"===ne(e)){var t=N(ht(e),(e=>{var t=rt(e,"span",1);return dt(e,1,t)}));return ut(e,t,"colgroup")}var o=N(ft(e),(e=>{var t=rt(e,"rowspan",1),n=rt(e,"colspan",1);return dt(e,t,n)}));return ut(e,o,n(e))}))})(e);return Tt(t)},St=Tt,It=(e,t,n)=>y.from(e.access[Et(t,n)]),Ot=(e,t,n)=>{var o=((e,t)=>{var n=z(e.all,(e=>e.cells));return R(n,t)})(e,(e=>n(t,e.element)));return o.length>0?y.some(o[0]):y.none()},jt=e=>Pe(e.columns),Nt=e=>Ne(e.columns).length>0,Lt=(e,t)=>y.from(e.columns[t]),Bt=e=>X.fromDom(e.getBody()),Rt=e=>t=>me(t,Bt(e)),Pt=e=>X.fromDom(e.selection.getStart()),$t=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Ht=(e,t,n)=>((e,t,n)=>((e,t,n)=>{var o=Ot(e,t,me),r=Ot(e,n,me);return o.bind((e=>r.map((t=>{return n=e,o=t,{startRow:Math.min(n.row,o.row),startCol:Math.min(n.column,o.column),finishRow:Math.max(n.row+n.rowspan-1,o.row+o.rowspan-1),finishCol:Math.max(n.column+n.colspan-1,o.column+o.colspan-1)};var n,o}))))})(e,t,n).bind((t=>((e,t)=>{for(var n=!0,o=M($t,t),r=t.startRow;r<=t.finishRow;r++)for(var a=t.startCol;a<=t.finishCol;a++)n=n&&It(e,r,a).exists(o);return n?y.some(t):y.none()})(e,t))))(Ft(e),t,n),Ft=Dt,zt=(e,t)=>{ve(e).each((n=>{n.dom.insertBefore(t.dom,e.dom)}))},Ut=(e,t)=>{we(e).fold((()=>{ve(e).each((e=>{Qt(e,t)}))}),(e=>{zt(e,t)}))},_t=(e,t)=>{(e=>((e,t)=>{var n=e.dom.childNodes;return y.from(n[0]).map(X.fromDom)})(e))(e).fold((()=>{Qt(e,t)}),(n=>{e.dom.insertBefore(t.dom,n.dom)}))},Qt=(e,t)=>{e.dom.appendChild(t.dom)},Wt=(e,t)=>{zt(e,t),Qt(t,e)},Vt=(e,t)=>{L(t,((n,o)=>{var r=0===o?e:t[o-1];Ut(r,n)}))},Kt=(e,t)=>{L(t,(t=>{Qt(e,t)}))},Gt=e=>{e.dom.textContent="",L(Ce(e),(e=>{Yt(e)}))},Yt=e=>{var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Jt=e=>{var t=Ce(e);t.length>0&&Vt(e,t),Yt(e)},qt=((e,t)=>{var n=t=>e(t)?y.from(t.dom.nodeValue):y.none();return{get:t=>{if(!e(t))throw new Error("Can only get text value of a text node");return n(t).getOr("")},getOption:n,set:(t,n)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=n}}})(le),Zt=e=>qt.get(e),Xt=(e,t)=>qt.set(e,t),en=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],tn=()=>({up:C({selector:Se,closest:je,predicate:De,all:be}),down:C({selector:Te,predicate:ke}),styles:C({get:et,getRaw:nt,set:Xe,remove:ot}),attrs:C({get:We,set:_e,remove:Ke,copyTo:(e,t)=>{var n=Ge(e);Qe(t,n)}}),insert:C({before:zt,after:Ut,afterAll:Vt,append:Qt,appendAll:Kt,prepend:_t,wrap:Wt}),remove:C({unwrap:Jt,remove:Yt}),create:C({nu:X.fromTag,clone:e=>X.fromDom(e.dom.cloneNode(!1)),text:X.fromText}),query:C({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:ye,nextSibling:we}),property:C({children:Ce,name:ne,parent:ve,document:e=>he(e).dom,isText:le,isComment:ae,isElement:ie,isSpecial:e=>{var t=ne(e);return I(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>ie(e)?Ve(e,"lang"):y.none(),getText:Zt,setText:Xt,isBoundary:e=>!!ie(e)&&("body"===ne(e)||I(en,ne(e))),isEmptyTag:e=>!!ie(e)&&I(["br","img","hr","input"],ne(e)),isNonEditable:e=>ie(e)&&"false"===We(e,"contenteditable")}),eq:me,is:pe}),nn=(e,t,n,o)=>{var r=t(e,n);return $(o,((n,o)=>{var r=t(e,o);return on(e,n,r)}),r)},on=(e,t,n)=>t.bind((t=>n.filter(M(e.eq,t)))),rn=tn(),an=e=>Se(e,"table"),ln=A,sn=e=>{var t=(e,t)=>Ve(e,t).exists((e=>parseInt(e,10)>1));return e.length>0&&U(e,(e=>t(e,"rowspan")||t(e,"colspan")))?y.some(e):y.none()},cn=(e,t,n)=>{return t.length<=1?y.none():(o=e,r=n.firstSelectedSelector,a=n.lastSelectedSelector,((e,t,n)=>Oe(e,t).bind((t=>Oe(e,n).bind((e=>{return(n=an,o=[t,e],((e,t,n)=>n.length>0?((e,t,n,o)=>o(e,t,n[0],n.slice(1)))(e,t,n,nn):y.none())(rn,((e,t)=>n(t)),o)).map((n=>({first:t,last:e,table:n})));var n,o})))))(o,r,a).bind((e=>{var t=e=>me(o,e),n="thead,tfoot,tbody,table",r=Se(e.first,n,t),a=Se(e.last,n,t);return r.bind((t=>a.bind((n=>me(t,n)?Ht(e.table,e.first,e.last):y.none()))))}))).map((e=>({bounds:e,cells:t})));var o,r,a},dn={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},un=e=>({element:e,mergable:y.none(),unmergable:y.none(),selection:[e]}),gn=(e,t,n)=>({element:n,mergable:cn(t,e,dn),unmergable:sn(e),selection:ln(e)}),mn=e=>(t,n)=>{var o,r=ne(t),a="col"===r||"colgroup"===r?vt(o=t).bind((e=>((e,t)=>((e,t)=>{var n=Te(e,t);return n.length>0?y.some(n):y.none()})(e,t))(e,dn.firstSelectedSelector))).fold(C(o),(e=>e[0])):t;return je(a,e,n)},pn=mn("th,td,caption"),fn=mn("th,td"),hn=e=>{return t=e.model.table.getSelectedCells(),N(t,X.fromDom);var t},vn=e=>{var t,n=!1;return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n||(n=!0,t=e.apply(null,r)),t}},bn=(e,t)=>({element:e,offset:t}),yn=(e,t,n)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?n(t).bind((t=>yn(e,t,n).orThunk((()=>y.some(t))))):y.none(),wn=(e,t)=>e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length,Cn=(e,t)=>{var n=yn(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return bn(n,wn(e,n));var o=e.property().children(n);return o.length>0?Cn(e,o[o.length-1]):bn(n,wn(e,n))},An=Cn,xn=tn(),Mn={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},kn=(()=>{var e="[0-9]+",t="[eE][+-]?[0-9]+",n=e=>`(?:${e})?`,o=["Infinity","[0-9]+\\."+n(e)+n(t),"\\.[0-9]+"+n(t),e+n(t)].join("|");return new RegExp(`^([+-]?(?:${o}))(.*)$`)})(),En=(e,t)=>y.from(kn.exec(e)).bind((e=>{var n=Number(e[1]),o=e[2];return((e,t)=>O(t,(t=>O(Mn[t],(t=>e===t)))))(o,t)?y.some({value:n,unit:o}):y.none()})),Tn=(e,t,n)=>((e,t)=>(e=>{var t=parseFloat(e);return isNaN(t)?y.none():y.some(t)})(e).getOr(t))(et(e,t),n),Dn=((e,t)=>{var n=e=>{var t=(e=>e.dom.offsetWidth)(e);if(t<=0||null===t){var n=et(e,"width");return parseFloat(n)||0}return t},o=(e,t)=>H(t,((t,n)=>{var o=et(e,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?t:t+r}),0);return{set:(e,t)=>{if(!b(t)&&!t.match(/^[0-9]+$/))throw new Error("width.set accepts only positive integer values. Value was "+t);var n=e.dom;Ze(n)&&(n.style.width=t+"px")},get:n,getOuter:n,aggregate:o,max:(e,t,n)=>{var r=o(e,n);return t>r?t-r:0}}})(),Sn=e=>Dn.get(e),In=e=>Dn.getOuter(e),On=e=>((e,t)=>{var n=e.dom,o=n.getBoundingClientRect().width||n.offsetWidth;return((e,t,n,o)=>t-Tn(e,"padding-left",0)-Tn(e,"padding-right",0)-Tn(e,"border-left-width",0)-Tn(e,"border-right-width",0))(e,o)})(e),jn=de("col"),Nn=(e,t,n)=>{var o,r=(o=e,y.from(o.dom.parentElement).map(X.fromDom)).getOrThunk((()=>(e=>{var t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return X.fromDom(t)})(fe(e))));return t(e)/n(r)*100},Ln=(e,t)=>{Xe(e,"width",t+"px")},Bn=(e,t)=>{Xe(e,"width",t+"%")},Rn=e=>((e,t)=>nt(e,t).orThunk((()=>Ve(e,t).map((e=>e+"px")))))(e,"width"),Pn=e=>Nn(e,Sn,On),$n=e=>{return jn(e)?Sn(e):Tn(t=e,"width",t.dom.offsetWidth);var t},Hn=(e,t,n)=>{Xe(e,"width",t+n)},Fn=C(/(\d+(\.\d+)?)%/),zn=(e,t)=>{if(!at(e)){var n=(e=>Rn(e).bind((e=>En(e,["fixed","relative","empty"]))))(e);n.each((n=>{var o=n.value/2;Hn(e,o,n.unit),Hn(t,o,n.unit)}))}},Un=de("col"),_n=de("colgroup"),Qn=e=>({element:e,colspan:rt(e,"colspan",1),rowspan:rt(e,"rowspan",1)}),Wn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qn,n=n=>{if((e=>"tr"===ne(e)||_n(e))(n))return _n((r={element:n}).element)?e.colgroup(r):e.row(r);var r,a=n,i=(t=>Un(t.element)?e.col(t):e.cell(t))(t(a));return o=y.some({item:a,replacement:i}),i},o=y.none();return{getOrInit:(e,t)=>o.fold((()=>n(e)),(o=>t(e,o.item)?o.replacement:n(e)))}},Vn=e=>N(e,C(0)),Kn=e=>(t,n,o,r)=>{if(e(o)){var a=Math.max(r,t[n]-Math.abs(o)),i=Math.abs(a-t[n]);return o>=0?i:-i}return o},Gn=Kn((e=>e<0)),Yn=Kn(E),Jn=()=>{var e=(e,t,n,o,r)=>{var a=Yn(e,o>=0?n:t,o,r);return((e,t,n,o,r)=>r(e.slice(0,t)).concat(o).concat(r(e.slice(n))))(e,t,n+1,[a,-a],Vn)};return{resizeTable:(e,t,n)=>{n&&e(t)},clampTableDelta:(e,t,n,o,r)=>{if(r){if(n>=0)return n;var a=H(e,((e,t)=>e+t-o),0);return Math.max(-a,n)}return Gn(e,t,n,o)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,n,o,r,a,i)=>e(t,o,r,a,i),calcRightEdgeDeltas:(e,t,n,o,r,a)=>{if(a)return Vn(e);var i=o/e.length;return N(e,C(i))},calcRedestributedWidths:(e,t,n,o)=>({delta:0,newSizes:e})}},qn=(e,t)=>X.fromDom(e.dom.cloneNode(t)),Zn=(de("th"),(e,t,n)=>gt(n(e.element,t),!0,e.isLocked)),Xn=()=>({transformRow:A,transformCell:Zn}),eo=()=>to(0,0),to=(e,t)=>({major:e,minor:t}),no={nu:to,detect:(e,t)=>{var n=String(t).toLowerCase();return 0===e.length?eo():((e,t)=>{var n=((e,t)=>{for(var n=0;n<e.length;n++){var o=e[n];if(o.test(t))return o}})(e,t);if(!n)return{major:0,minor:0};var o=e=>Number(t.replace(n,"$"+e));return to(o(1),o(2))})(e,n)},unknown:eo},oo=(e,t)=>{var n=String(t).toLowerCase();return F(e,(e=>e.search(n)))},ro=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ao=e=>t=>Ye(t,e),io=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ye(e,"edge/")&&Ye(e,"chrome")&&Ye(e,"safari")&&Ye(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ro],search:e=>Ye(e,"chrome")&&!Ye(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ye(e,"msie")||Ye(e,"trident")},{name:"Opera",versionRegexes:[ro,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ao("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ao("firefox")},{name:"Safari",versionRegexes:[ro,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ye(e,"safari")||Ye(e,"mobile/"))&&Ye(e,"applewebkit")}],lo=[{name:"Windows",search:ao("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ye(e,"iphone")||Ye(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ao("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ao("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ao("linux"),versionRegexes:[]},{name:"Solaris",search:ao("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ao("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ao("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],so={browsers:C(io),oses:C(lo)},co="Edge",uo="Chromium",go="Opera",mo="Firefox",po="Safari",fo=e=>{var t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(co),isChromium:o(uo),isIE:o("IE"),isOpera:o(go),isFirefox:o(mo),isSafari:o(po)}},ho=()=>fo({current:void 0,version:no.unknown()}),vo=fo,bo=(C(co),C(uo),C("IE"),C(go),C(mo),C(po),"Windows"),yo="Android",wo="Linux",Co="macOS",Ao="Solaris",xo="FreeBSD",Mo="ChromeOS",ko=e=>{var t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(bo),isiOS:o("iOS"),isAndroid:o(yo),isMacOS:o(Co),isLinux:o(wo),isSolaris:o(Ao),isFreeBSD:o(xo),isChromeOS:o(Mo)}},Eo=()=>ko({current:void 0,version:no.unknown()}),To=ko,Do=(C(bo),C("iOS"),C(yo),C(wo),C(Co),C(Ao),C(xo),C(Mo),e=>window.matchMedia(e).matches),So=vn((()=>((e,t,n)=>{var o=so.browsers(),r=so.oses(),a=t.bind((e=>((e,t)=>K(t.brands,(t=>{var n=t.brand.toLowerCase();return F(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:no.nu(parseInt(t.version,10),0)})))})))(o,e))).orThunk((()=>((e,t)=>oo(e,t).map((e=>{var n=no.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e))).fold(ho,vo),i=((e,t)=>oo(e,t).map((e=>{var n=no.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e).fold(Eo,To),l=((e,t,n,o)=>{var r=e.isiOS()&&!0===/ipad/i.test(n),a=e.isiOS()&&!r,i=e.isiOS()||e.isAndroid(),l=i||o("(pointer:coarse)"),s=r||!a&&i&&o("(min-device-width:768px)"),c=a||i&&!s,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),u=!c&&!s&&!d;return{isiPad:C(r),isiPhone:C(a),isTablet:C(s),isPhone:C(c),isTouch:C(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:C(d),isDesktop:C(u)}})(i,a,e,n);return{browser:a,os:i,deviceType:l}})(navigator.userAgent,y.from(navigator.userAgentData),Do))),Io=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,n=e.grid,o=j(n.columns,A),r=j(n.rows,A);return N(o,(n=>Oo((()=>z(r,(t=>It(e,t,n).filter((e=>e.column===n)).toArray()))),(e=>1===e.colspan&&t(e.element)),(()=>It(e,0,n)))))},Oo=(e,t,n)=>{var o=e();return F(o,t).orThunk((()=>y.from(o[0]).orThunk(n))).map((e=>e.element))},jo=(e,t)=>({left:e,top:t,translate:(n,o)=>jo(e+n,t+o)}),No=jo,Lo=(e,t)=>void 0!==e?e:void 0!==t?t:0,Bo=e=>{var t=e.dom.ownerDocument,n=t.body,o=t.defaultView,r=t.documentElement;if(n===e.dom)return No(n.offsetLeft,n.offsetTop);var a=Lo(null==o?void 0:o.pageYOffset,r.scrollTop),i=Lo(null==o?void 0:o.pageXOffset,r.scrollLeft),l=Lo(r.clientTop,n.clientTop),s=Lo(r.clientLeft,n.clientLeft);return Ro(e).translate(i-s,a-l)},Ro=e=>{var t=e.dom,n=t.ownerDocument.body;return n===t?No(n.offsetLeft,n.offsetTop):Me(e)?(e=>{var t=e.getBoundingClientRect();return No(t.left,t.top)})(t):No(0,0)},Po=(e,t)=>({col:e,x:t}),$o=e=>Bo(e).left+In(e),Ho=e=>Bo(e).left,Fo=(e,t)=>Po(e,Ho(t)),zo=(e,t)=>Po(e,$o(t)),Uo=(e,t,n)=>{if(0===n.length)return[];var o=N(n.slice(1),((t,n)=>t.map((t=>e(n,t))))),r=n[n.length-1].map((e=>t(n.length-1,e)));return o.concat([r])},_o=(ee={delta:A,edge:Ho,positions:e=>Uo(Fo,zo,e)},te={delta:e=>-e,edge:$o,positions:e=>Uo(zo,Fo,e)},e=>"rtl"===(e=>"rtl"===et(e,"direction")?"rtl":"ltr")(e)?te:ee),Qo=e=>_o(e).edge(e),Wo=de("col"),Vo=(e,t,n,o,r,a)=>e.filter(o).fold((()=>a(((e,t)=>{if(t<0||t>=e.length-1)return y.none();var n=e[t].fold((()=>{var n=(e=>{var t=T.call(e,0);return t.reverse(),t})(e.slice(0,t));return K(n,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>y.some({value:e,delta:0}))),o=e[t+1].fold((()=>{var n=e.slice(t+1);return K(n,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>y.some({value:e,delta:1})));return n.bind((e=>o.map((t=>{var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))))})(n,t))),(e=>r(e))),Ko=(e,t,n,o)=>{var r,a=Io(e),i=Nt(e)?(e=>N(jt(e),(e=>y.from(e.element))))(e):a,l=[y.some(Qo(t))].concat(N(((e,t)=>_o(t).positions(e,t))(a,t),(e=>e.map((e=>e.x))))),s=(r=at,e=>!r(e));return N(i,((e,t)=>Vo(e,t,l,s,(e=>{if((e=>{var t=So().browser,n=t.isChromium()||t.isFirefox();return!Wo(e)||n})(e))return n(e);var r=((e,t)=>null!=e?t(e):y.none())(a[t],A);return Vo(r,t,l,s,(e=>o(y.some(Sn(e)))),o)}),o)))},Go=(e,t,n)=>Ko(e,t,$n,(e=>e.getOrThunk(n.minCellWidth))),Yo=(e,t)=>()=>Me(e)?t(e):parseFloat(nt(e,"width").getOr("0")),Jo=e=>Rn(e).fold((()=>(e=>{var t=Yo(e,Sn),n=C(0);return{width:t,pixelWidth:t,getWidths:(t,n)=>Go(t,e,n),getCellDelta:n,singleColumnWidth:C([0]),minCellWidth:n,setElementWidth:w,adjustTableWidth:w,isRelative:!0,label:"none"}})(e)),(t=>{return n=e,o=t,null!==Fn().exec(o)?(e=>{var t=Yo(e,(e=>parseFloat((e=>Nn(e,Sn,On)+"%")(e)))),n=Yo(e,Sn);return{width:t,pixelWidth:n,getWidths:(t,n)=>((e,t,n)=>Ko(e,t,Pn,(e=>e.fold((()=>n.minCellWidth()),(e=>e/n.pixelWidth()*100)))))(t,e,n),getCellDelta:e=>e/n()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>it()/n()*100,setElementWidth:Bn,adjustTableWidth:n=>{var o=t();Bn(e,o+n/100*o)},isRelative:!0,label:"percent"}})(n):(e=>{var t=Yo(e,Sn);return{width:t,pixelWidth:t,getWidths:(t,n)=>Go(t,e,n),getCellDelta:A,singleColumnWidth:(e,t)=>[Math.max(it(),e+t)-e],minCellWidth:it,setElementWidth:Ln,adjustTableWidth:n=>{var o=t()+n;Ln(e,o)},isRelative:!1,label:"pixel"}})(n);var n,o})),qo=(e,t,n,o)=>{n===o?Ke(e,t):_e(e,t,n)},Zo=(e,t,n)=>{V(Ee(e,t)).fold((()=>_t(e,n)),(e=>Ut(e,n)))},Xo=(e,t)=>{var n=[],o=[],r=e=>N(e,(e=>{e.isNew&&n.push(e.element);var t=e.element;return Gt(t),L(e.cells,(e=>{e.isNew&&o.push(e.element),qo(e.element,"colspan",e.colspan,1),qo(e.element,"rowspan",e.rowspan,1),Qt(t,e.element)})),t})),a=e=>z(e,(e=>N(e.cells,(e=>(qo(e.element,"span",e.colspan,1),e.element))))),i=(t,n)=>{var o=((e,t)=>{var n=Ie(e,t).getOrThunk((()=>{var n=X.fromTag(t,fe(e).dom);return"thead"===t?Zo(e,"caption,colgroup",n):"colgroup"===t?Zo(e,"caption",n):Qt(e,n),n}));return Gt(n),n})(e,n),i=("colgroup"===n?a:r)(t);Kt(o,i)},l=(t,n)=>{t.length>0?i(t,n):(t=>{Ie(e,t).each(Yt)})(n)},s=[],c=[],d=[],u=[];return L(t,(e=>{switch(e.section){case"thead":s.push(e);break;case"tbody":c.push(e);break;case"tfoot":d.push(e);break;case"colgroup":u.push(e)}})),l(u,"colgroup"),l(s,"thead"),l(c,"tbody"),l(d,"tfoot"),{newRows:n,newCells:o}},er=(e,t)=>{if(0===e.length)return 0;var n=e[0],o=((e,o)=>{for(var r=0,a=e.length;r<a;r++)if(i=e[r],!t(n.element,i.element))return y.some(r);var i;return y.none()})(e);return o.getOr(e.length)},tr=(e,t)=>{var n=N(e,(e=>N(e.cells,k)));return N(e,((o,r)=>{var a=z(o.cells,((o,a)=>{if(!1===n[r][a]){var i=((e,t,n,o)=>{var r=((e,t)=>e[t])(e,t),a="colgroup"===r.section,i=er(r.cells.slice(n),o),l=a?1:er(((e,t)=>N(e,(e=>Ct(e,t))))(e.slice(t),n),o);return{colspan:i,rowspan:l}})(e,r,a,t);return((e,t,o,r)=>{for(var a=e;a<e+o;a++)for(var i=t;i<t+r;i++)n[a][i]=!0})(r,a,i.rowspan,i.colspan),[(l=o.element,s=i.rowspan,c=i.colspan,d=o.isNew,{element:l,rowspan:s,colspan:c,isNew:d})]}return[];var l,s,c,d}));return{element:o.element,cells:a,section:o.section,isNew:o.isNew}}))},nr=(e,t)=>K(e.all,(e=>F(e.cells,(e=>me(t,e.element))))),or=(e,t,n)=>{var o=(e=>{for(var t=[],n=e=>{t.push(e)},o=0;o<e.length;o++)e[o].each(n);return t})(N(t.selection,(t=>pt(t).bind((t=>nr(e,t))).filter(n))));return q(o.length>0,o)},rr=(e,t,n,o,r)=>(a,i,l,s)=>{var c=Dt(a),d=y.from(null==s?void 0:s.section).getOrThunk(Xn),u=t(c,i).map((t=>{var n,o=((e,t)=>((e,t,n)=>{var o=[];L(e.colgroups,(r=>{for(var a=[],i=0;i<e.grid.columns;i++){var l=Lt(e,i).map((e=>gt(e.element,n,!1))).getOrThunk((()=>gt(t.colGap(),!0,!1)));a.push(l)}o.push(mt(r.element,a,"colgroup",n))}));for(var r=0;r<e.grid.rows;r++){for(var a=[],i=0;i<e.grid.columns;i++){var l=It(e,r,i).map((e=>gt(e.element,n,e.isLocked))).getOrThunk((()=>gt(t.gap(),!0,!1)));a.push(l)}var s=e.all[r],c=mt(s.element,a,s.section,n);o.push(c)}return o})(e,t,!1))(c,l),a=e(o,t,me,r(l),d),i=(e=>{var t=H(xt(e).rows,((e,t)=>(L(t.cells,((t,n)=>{t.isLocked&&(e[n]=!0)})),e)),{}),n=Re(t,((e,t)=>parseInt(t,10)));return _(n)})(a.grid);return{info:t,grid:(n=a.grid,tr(n,me)),cursor:a.cursor,lockedColumns:i}}));return u.bind((e=>{var t=Xo(a,e.grid),r=y.from(null==s?void 0:s.sizing).getOrThunk((()=>Jo(a))),i=y.from(null==s?void 0:s.resize).getOrThunk(Jn);return n(a,e.grid,e.info,{sizing:r,resize:i,section:d}),o(a),Ke(a,Mt),e.lockedColumns.length>0&&_e(a,Mt,e.lockedColumns.join(",")),y.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))},ar=(e,t)=>pt(t.element).bind((t=>nr(e,t))),ir=(e,t)=>or(e,t,E),lr=(e,t)=>U(t,(t=>((e,t)=>nr(e,t).exists((e=>!e.isLocked)))(e,t))),sr=(e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>lr(e,t.cells))),cr=(e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>lr(e,t))),dr=["img","br"],ur=e=>{return(t=e,qt.getOption(t)).filter((e=>0!==e.trim().length||e.indexOf(" ")>-1)).isSome()||I(dr,ne(e));var t},gr={scope:["row","col"]},mr=e=>()=>{var t=X.fromTag("td",e.dom);return Qt(t,X.fromTag("br",e.dom)),t},pr=e=>()=>X.fromTag("col",e.dom),fr=e=>()=>X.fromTag("colgroup",e.dom),hr=e=>()=>X.fromTag("tr",e.dom),vr=(e,t,n)=>{var o=((e,t)=>{var n=((e,t)=>{var n=X.fromTag(t),o=Ge(e);return Qe(n,o),n})(e,t),o=Ce((e=>qn(e,!0))(e));return Kt(n,o),n})(e,t);return Be(n,((e,t)=>{null===e?Ke(o,t):_e(o,t,e)})),o},br=(e,t,n)=>{return(o=e,((e,t)=>{var n=e=>{for(var o=0;o<e.childNodes.length;o++){var r=X.fromDom(e.childNodes[o]);if(t(r))return y.some(r);var a=n(e.childNodes[o]);if(a.isSome())return a}return y.none()};return n(e.dom)})(o,ur)).map((o=>{var r=((e,t,n)=>((e,n,o)=>R(be(e,o),(e=>ue(e,t))))(e,0,n))(o,n.join(","),(t=>me(t,e)));return $(r,((e,t)=>{var n=qn(t,!1);return Ke(n,"contenteditable"),Qt(e,n),n}),t)})).getOr(t);var o},yr=(e,t,n)=>{var o=(e,t)=>{((e,t)=>{var n=e.dom,o=t.dom;Ze(n)&&Ze(o)&&(o.style.cssText=n.style.cssText)})(e.element,t),ot(t,"height"),1!==e.colspan&&ot(t,"width")};return{col:n=>{var r=X.fromTag(ne(n.element),t.dom);return o(n,r),e(n.element,r),r},colgroup:fr(t),row:hr(t),cell:r=>{var a=X.fromTag(ne(r.element),t.dom),i=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),l=i.length>0?br(r.element,a,i):a;return Qt(l,X.fromTag("br")),o(r,a),((e,t)=>{Be(gr,((n,o)=>Ve(e,o).filter((e=>I(n,e))).each((e=>_e(t,o,e)))))})(r.element,a),e(r.element,a),a},replace:vr,colGap:pr(t),gap:mr(t)}},wr=e=>Dt(e).grid,Cr=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Me(e)?e.dom.isContentEditable:(t=e,je(t,"[contenteditable]")).fold(C(n),(e=>"true"===Ar(e)))},Ar=e=>e.dom.contentEditable,xr=(e,t,n,o,r)=>N(e,(e=>{var a=t>0&&t<e.cells.length&&o(At(e,t-1),At(e,t)),i=((e,t,n,o,r,a,i)=>{if("colgroup"!==n&&o)return Ct(e,t);var l=Ct(e,r);return gt(i(l.element,a),!0,!1)})(e,t,e.section,a,n,o,r);return((e,t,n)=>((e,t,n)=>{var o=e.cells,r=o.slice(0,t),a=o.slice(t);return((e,t)=>mt(e.element,t,e.section,e.isNew))(e,r.concat(n).concat(a))})(e,t,[n]))(e,t,i)})),Mr=a({},(e=>{if(!u(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return L(e,((o,r)=>{var a=Ne(o);if(1!==a.length)throw new Error("one and only one name per case");var i=a[0],l=o[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!u(l))throw new Error("case arguments must be an array");t.push(i),n[i]=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=o.length;if(s!==l.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+l.length+" ("+l+"), got "+s);return{fold:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+n.length);return n[r].apply(null,o)},match:e=>{var n=Ne(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!U(t,(e=>I(n,e))))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,o)},log:e=>{console.log(e,{constructors:t,constructor:i,params:o})}}}})),n})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])),kr=(e,t,n)=>{var o=((e,t)=>Nt(e)?((e,t)=>{var n=jt(e);return N(n,((e,n)=>({element:e.element,width:t[n],colspan:e.colspan})))})(e,t):((e,t)=>{var n=(e=>z(e.all,(e=>e.cells)))(e);return N(n,(e=>{var n=((e,t,n)=>{for(var o=0,r=e;r<t;r++)o+=void 0!==n[r]?n[r]:0;return o})(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}}))})(e,t))(e,t);L(o,(e=>{n.setElementWidth(e.element,e.width)}))},Er=e=>H(e,((e,t)=>O(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),Tr=e=>Cr(e,!0),Dr=(e,t,n)=>((e,t)=>({grid:e,cursor:t}))(e,((e,t,n)=>{var o,r,a=xt(e).rows;return y.from(null===(r=null===(o=a[t])||void 0===o?void 0:o.cells[n])||void 0===r?void 0:r.element).filter(Tr).orThunk((()=>(e=>K(e,(e=>K(e.cells,(e=>{var t=e.element;return q(Tr(t),t)})))))(a)))})(e,t,n)),Sr=(e,t,n,o)=>((e,t,n,o,r)=>{var a=St(t),i=o.getWidths(a,o),l=o.pixelWidth(),s=r.calcRedestributedWidths(i,l,n.pixelDelta,o.isRelative),c=s.newSizes,d=s.delta;kr(a,c,o),o.adjustTableWidth(d)})(0,t,n,o.sizing,o.resize),Ir=(e,t)=>{var n=Io(e),o=Er(t);return H(o,((e,t)=>e+n[t.column].map(In).getOr(0)),0)},Or=rr(((e,t,n,o)=>{var r=t.detail,a=r.column,i=r.column,l=xr(e,i,a,n,o.getOrInit);return Dr(l,r.row,i)}),((e,t)=>ar(e,t).filter((e=>!O([e],(e=>0===e.column&&e.isLocked)))).map((t=>({detail:t,pixelDelta:Ir(e,[t])})))),Sr,w,Wn),jr=rr(((e,t,n,o)=>{var r=Er(t.details),a=((e,t)=>z(e,(e=>{var n=e.cells,o=$(t,((e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e),n);return o.length>0?[mt(e.element,o,e.section,e.isNew)]:[]})))(e,N(r,(e=>e.column))),i=a.length>0?a[0].cells.length-1:0;return Dr(a,r[0].row,Math.min(r[0].column,i))}),((e,t)=>((e,t)=>or(e,t,(e=>!e.isLocked)))(e,t).map((t=>({details:t,pixelDelta:-Ir(e,t)})))),Sr,(e=>{0===ft(e).length&&Yt(e)}),Wn),Nr=(e,t)=>{var n=We(e,t);return void 0===n||""===n?[]:n.split(" ")},Lr=e=>void 0!==e.dom.classList,Br=e=>e.dom.textContent,Rr=de("th"),Pr=(e,t)=>e&&t?"sectionCells":e?"section":"cells",$r=e=>{var t=R(e,(e=>Rr(e.element)));return 0===t.length?y.some("td"):t.length===e.length?y.some("th"):y.none()},Hr=e=>{var t=N(e,(e=>(e=>{var t="thead"===e.section,n=G($r(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:Pr(t,n)}:{type:"body"}})(e).type)),n=I(t,"header"),o=I(t,"footer");if(n||o){var r=I(t,"body");return!n||r||o?n||r||!o?y.none():y.some("footer"):y.some("header")}return y.some("body")},Fr={structure:!1,style:!0},zr={structure:!0,style:!1},Ur=(e,t,n)=>({value:t+1}),_r=(e,t,n)=>{for(var o="A".charCodeAt(0),r=[],a=t;a>=0;)r.push(String.fromCharCode(o+a%26)),a=Math.floor(a/26)-1;return{value:r.reverse().join("")}},Qr=e=>e.options.get("advtable_value_series"),Wr=e=>{var t=parseFloat(e);return isNaN(t)?y.none():y.some(t)},Vr=(e,t)=>e<t?-1:e>t?1:0,Kr=(e,t)=>Y(Wr(e),Wr(t),Vr).getOrThunk((()=>((e,t)=>e.localeCompare(t))(e,t))),Gr="data-snooker-locked-cols",Yr=e=>Ve(e,Gr).map((e=>z(e.split(","),(e=>{var t=parseInt(e,10);return isNaN(t)?[]:[t]})))).getOr([]),Jr=(e,t)=>_e(e,Gr,_(t).join(",")),qr=(e,t)=>{var n=Yr(e);I(n,t)||Jr(e,n.concat([t]))},Zr=(e,t)=>{var n=Yr(e);Jr(e,R(n,(e=>t!==e)))},Xr="data-snooker-col-series",ea=e=>Ve(e,Xr),ta=(e,t)=>G(ea(e).map((e=>e.toLowerCase())),t.toLowerCase()),na=e=>((e,t)=>{var n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute("data-snooker-col-series")})(e),oa=(e,t,n,o,r)=>{((e,t)=>{var n=O(Yr(e),(e=>0===e));n&&Zr(e,0),t(),n&&qr(e,1)})(e,(()=>{n.column(0,t.insertColumnBefore,!0,!0),(e=>{var t=Jo(e),n=Dt(e),o=It(n,0,0).bind((e=>{var t=e.element;return En(et(t,"width"),["fixed"])})).map((e=>28-e.value)).getOr(0);((e,t,n,o,r)=>{var a=Dt(e),i=r.getCellDelta(t),l=r.getWidths(a,r),s=0==a.grid.columns-1,c=o.clampTableDelta(l,0,i,r.minCellWidth(),s),d=((e,t,n,o,r)=>{var a=e.slice(0),i=((e,t)=>0===e.length?Mr.none():1===e.length?Mr.only(0):Mr.left(0,1))(e),l=C(N(a,C(0)));return i.fold(l,(e=>o.singleColumnWidth(a[e],n)),((e,t)=>r.calcLeftEdgeDeltas(a,e,t,n,o.minCellWidth(),o.isRelative)),((e,t,i)=>r.calcMiddleDeltas(a,e,t,i,n,o.minCellWidth(),o.isRelative)),((e,t)=>r.calcRightEdgeDeltas(a,e,t,n,o.minCellWidth(),o.isRelative)))})(l,0,c,r,o),u=N(d,((e,t)=>e+l[t]));kr(a,u,r),o.resizeTable(r.adjustTableWidth,c,s)})(e,o,0,Jn(),t)})(e),ra(e,t,n,o,r)}))},ra=(e,t,n,o,r)=>{n.table(e,0,0,t.populateColumn(0,((e,t,n)=>{var o=r.generator(e,t,n);return{raw:o,value:o.value,classes:o.classes,attributes:a(a({contenteditable:"false"},o.attributes),{},{"data-mce-resize":!1===r.resizable?"false":null})}})),!0,!0),((e,t)=>{_e(e,Xr,t)})(e,o),qr(e,0)},aa=e=>{var t=e;return{get:()=>t,set:e=>{t=e}}},ia=e=>vt(Pt(e),Rt(e)),la=(e,t)=>{e.execCommand("mceTableToggleSeries",!1,t)},sa=(e,t,n)=>t.onSetupCellOrRowToggle((()=>((e,t)=>ia(e).exists((e=>qe(t)?!na(e):ta(e,t))))(e,n))),ca=(e,t)=>({type:"togglemenuitem",text:"None",onAction:()=>{(e=>ia(e).bind(ea))(e).each((t=>{la(e,{name:t})}))},onSetup:sa(e,t,"")}),da=(e,t,n,o,r)=>({type:"togglemenuitem",text:n,value:o,icon:r,onAction:()=>la(e,{name:o}),onSetup:sa(e,t,o)}),ua=(e,t,n)=>Re(n,((n,o)=>{var r=y.from(n.title).getOrThunk((()=>{return""===(e=o)?"":e.charAt(0).toUpperCase()+e.substring(1);var e}));return da(e,t,r,o)})),ga=e=>t=>{var n=t.getData();t.close(),e.undoManager.transact((()=>{e.execCommand("mceSortTableAdvanced",!1,n),e.focus(),e.addVisual()}))},ma=e=>{var t={type:"selectbox",name:"sortby",label:"Sort by",items:[{text:"Column",value:"column"},{text:"Row",value:"row"}]},n=aa(y.none()),o=t=>({type:"selectbox",name:"roworcol",label:"column"===t?"Column":"Row",items:"column"===t?(()=>{var t=n.get().getOrDie("state must be present"),o=t.limit?t.finishCol+1-t.startCol:t.columns;return j(o,(n=>{var o=t.limit?t.startCol:0,r=(e=>{for(var t=e,n="";Math.floor(t)>0;)--t,n+=String.fromCharCode("A".charCodeAt(0)+t%26),t/=26;return n.split("").reverse().join("")})(n+o+1);return{text:e.translate(["Column {0}",r]),value:`${n+o}`}}))})():(()=>{var t=n.get().getOrDie("state must be present"),o=t.limit?t.finishRow+1-t.startRow:t.rows;return j(o,(n=>{var o=t.limit?t.startRow:0,r=(n+o+1).toString();return{text:e.translate(["Row {0}",r]),value:`${n+o}`}}))})()}),r=e=>({type:"selectbox",name:"sort",label:"Sort",items:["column"===e?{text:"Column",value:"column"}:{text:"Row",value:"row"},{text:"Selection",value:"selection"},{text:"Table",value:"table"}]}),i={type:"selectbox",name:"order",label:"Order",items:[{text:"Ascending",value:"ascending"},{text:"Descending",value:"descending"}]},l=e=>({type:"panel",items:[{type:"grid",columns:2,items:[t,o(e),r(e),i]}]}),s=e=>({title:"Advanced Sort",size:"normal",body:l(e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"sort",text:"Sort",primary:!0}]}),c=()=>{n.set(y.none())},d=(t,o)=>{if("sortby"===o.name){var r=t.getData(),i=(u=r,g=n.get().getOrDie("state must be present"),"column"===u.sortby?{sortby:"column",roworcol:`${g.startCol}`,sort:"row"===u.sort?"column":u.sort,order:u.order}:{sortby:"row",roworcol:`${g.startRow}`,sort:"column"===u.sort?"row":u.sort,order:u.order}),l=a(a({},s(r.sortby)),{},{onChange:d,onClose:c,onSubmit:ga(e),initialData:i});t.redial(l),t.focus("sortby")}var u,g};fn(Pt(e)).each((t=>{vt(t,Rt(e)).each((o=>{var r=gn(hn(e),o,t),i=t=>{n.set(y.some(t));var o={sortby:"column",roworcol:`${t.startCol}`,sort:"column",order:"ascending"},r=a(a({},s("column")),{},{onChange:d,onClose:c,onSubmit:ga(e),initialData:o});e.windowManager.open(r)},l=wr(o);r.mergable.fold((()=>{Ht(o,t,t).each((e=>{var t=a(a(a({},e),l),{},{limit:!1});i(t)}))}),(e=>{var t=a(a(a({},e.bounds),l),{},{limit:!0});i(t)}))}))}))};tinymce.PluginManager.requireLangPack("advtable","ar,bg_BG,ca,cs,da,de,el,es,eu,fa,fi,fr_FR,he_IL,hi,hr,hu_HU,id,it,ja,kk,ko_KR,ms,nb_NO,nl,pl,pt_BR,pt_PT,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,vi,zh_CN,zh_TW"),tinymce.PluginManager.add("advtable",(e=>{if(((e,n)=>!!e&&-1===((e,n)=>{var o=t(e.major,n.major);if(0!==o)return o;var r=t(e.minor,n.minor);if(0!==r)return r;var a=t(e.patch,n.patch);return 0!==a?a:0})((e=>r((e=>[e.majorVersion,e.minorVersion].join(".").split(".").slice(0,3).join("."))(e)))(e),r("6.0.0")))(tinymce))return console.error("Please use Advanced Tables with TinyMCE 6.0.0 or later."),{};(e=>{(0,e.options.register)("advtable_value_series",{processor:"object",default:{numeric:{title:"Numeric",update:!0,resizable:!1,generator:Ur},alpha:{title:"Alpha",update:!0,resizable:!1,generator:_r}}})})(e);var o=(e=>{var t=(e=>y.from(e.options.get("table_clone_elements")))(e),n=(n,r,i,l)=>function(s,c,d,u){var g=arguments.length>4&&void 0!==arguments[4]&&arguments[4],m=X.fromDom(e.getDoc()),p=yr(i,m,t);return r(s)?n(s,c,p).bind((t=>{L(t.newRows,(t=>{((e,t)=>{e.dispatch("NewRow",{node:t})})(e,t.dom)})),L(t.newCells,(t=>{((e,t)=>{e.dispatch("NewCell",{node:t})})(e,t.dom)}));var n=((t,n,r,a)=>{var i=r.filter((e=>Me(e)&&o(e))).or(n.cursor);return i.fold((()=>{var n=ft(t);return W(n).filter(Me).map((n=>{var o=e.dom.createRng();return o.selectNode(n.dom),a&&(e.model.table.clearSelectedCells(t.dom),e.selection.setRng(o),_e(n,"data-mce-selected","1")),o}))}),(n=>{var o=e.dom.createRng(),r=An(xn,n);return o.setStart(r.element.dom,r.offset),o.setEnd(r.element.dom,r.offset),a&&(e.model.table.clearSelectedCells(t.dom),e.selection.setRng(o)),y.some(o)}))})(s,t,d,u);return Me(s)&&((e=>{Ke(e,"data-mce-style");var t=e=>Ke(e,"data-mce-style");L(ft(e),t),L(ht(e),t),L(bt(e),t)})(s),g||((e,t,n)=>{e.dispatch("TableModified",a(a({},n),{},{table:t}))})(e,s.dom,l)),n.map((e=>({rng:e,effect:l})))})):y.none()},o=e=>Cr(e,!0),r=(e,t,n)=>((e,t)=>({grid:e,cursor:t}))(e,((e,t,n)=>{var r,a,i=xt(e).rows;return y.from(null===(a=null===(r=i[t])||void 0===r?void 0:r.cells[n])||void 0===a?void 0:a.element).filter(o).orThunk((()=>(e=>K(e,(e=>K(e.cells,(e=>{var t=e.element;return q(o(t),t)})))))(i)))})(e,t,n)),i=(e,t,n,o)=>{var r=xt(e),a=r.cols,i=r.rows,l=P(i,(e=>e.section)),s=N(l,(e=>P(e,(e=>{var n=Ct(e,t).element;return ne(n)})))),c=z(s,(e=>z(e,(e=>{var r=Ct(e[0],t).element;return"th"===ne(r)?e:(e=>{var r=N(e,(e=>{var n=Ct(e,t).element;return{row:e,text:y.from(Br(n)).getOr("")}})),a=_(r,((e,t)=>{var r=n(e.text,t.text);return o?r:-1*r}));return N(a,(e=>e.row))})(e)}))));return[...a,...c]},l=(e,t,n,o)=>{var r=xt(e),i=r.cols,l=r.rows,s=l[t].cells,c=N(s,(e=>{var t=e.element;return y.from(Br(t)).getOr("")})),d=de("th"),u=N(l,(e=>{var t=N(e.cells,((e,t)=>({cell:e,column:t,reference:s[t],referenceText:c[t]})));return a(a({},e),{},{zippedCells:t})})),g=N(u,(e=>{var t=P(e.zippedCells,(e=>{var t=e.reference.element;return ne(t)})),r=z(t,(e=>{var t=e[0].reference.element;if(d(t))return N(e,(e=>e.cell));var r=B(e,(e=>e.cell.isLocked)),a=r.pass,i=r.fail,l=_(i,((e,t)=>{var r=n(e.referenceText,t.referenceText);return o?r:-1*r})),s=H(a,((e,t)=>{var n=t.column,o=e.slice(0,n),r=e.slice(n);return o.concat([t]).concat(r)}),l);return N(s,(e=>e.cell))}));return mt(e.element,r,e.section,e.isNew)}));return[...i,...g]},s=i,m=l,p=(e,t,n,o,r)=>{var i=xt(e),l=i.cols,s=i.rows,c=s.slice(0,t),d=[...l,...s.slice(t,n+1)];return{beforeRows:c,afterRows:s.slice(n+1,e.length),selectionGridBefore:d.map((e=>a(a({},e),{},{cells:e.cells.slice(0,o)}))),selectionGrid:d.map((e=>a(a({},e),{},{cells:e.cells.slice(o,r+1)}))),selectionGridAfter:d.map((e=>a(a({},e),{},{cells:e.cells.slice(r+1,e.cells.length)})))}},f=(e,t)=>{var n=N(t,((t,n)=>{var o=e.selectionGridBefore[n].cells,r=e.selectionGridAfter[n].cells;return a(a({},t),{},{cells:o.concat(t.cells).concat(r)})})),o=xt(n),r=o.cols,i=o.rows;return[...r,...e.beforeRows,...i,...e.afterRows]},h=(e,t,n,o,r,a,l,s)=>{var c=p(e,n,o,r,a),d=i(c.selectionGrid,t-r,l,s);return f(c,d)},v=(e,t,n,o,r,a,i,s)=>{var c=p(e,n,o,r,a),d=l(c.selectionGrid,t-n,i,s);return f(c,d)},x=e=>H(e,((e,t)=>O(e,(e=>e.row===t.row))?e:e.concat([t])),[]).sort(((e,t)=>e.row-t.row)),M=e=>H(e,((e,t)=>O(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),k=e=>H(e,((e,t)=>O(e,(e=>me(e.element,t.element)))?e:e.concat([t])),[]),T=e=>{var t=d(e.attributes)?Re(e.attributes,((e,t)=>g(e)?e=>Ke(e,t):n=>_e(n,t,e))):[];return[...t,...((e,t)=>{if(u(e)){for(var n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1})(e.classes,c)?N(e.classes,(e=>t=>((e,t)=>{Lr(e)?e.dom.classList.add(t):((e,t)=>{((e,t,n)=>{var o=Nr(e,t).concat([n]);_e(e,t,o.join(" "))})(e,"class",t)})(e,t)})(t,e))):[],t=>{var n,o=Br(t)||"",r=(n=e.value,b(n)?String(n):c(n)?n:void 0),a=c(r)?r:o;qe(a)?((e,t)=>{var n=fe(e).dom,o=X.fromDom(n.createDocumentFragment()),r=((e,t)=>{var n=(t||document).createElement("div");return n.innerHTML=e,Ce(X.fromDom(n))})("<br>",n);Kt(o,r),Gt(e),Qt(e,o)})(t):((e,t)=>{e.dom.textContent=t})(t,a)}]},D=(e,t,n,o,r,a,i,l)=>{var s;L(t,((t,c)=>{var d,u=t.element,g={sectionType:a(c),cellType:ne(u),getRowType:i(c),getColType:l(c),classes:(d=u,Lr(d)?(e=>{for(var t=e.dom.classList,n=new Array(t.length),o=0;o<t.length;o++){var r=t.item(o);null!==r&&(n[o]=r)}return n})(d):(e=>Nr(e,"class"))(d)),prev:null==s?void 0:s.raw,direction:n},m=e(g,o(c),r(c)),p=T(m);L(p,(e=>e(u))),s=m}))},S=(e,t,n,o,a)=>{var i=h(e,a,0,e.length,a,a,n,o);return r(i,t[0].row,t[0].column)},I=(e,t,n,o,a)=>{var i=x(t),l=M(t),s=h(e,a,i[0].row,i[i.length-1].row,l[0].column,l[l.length-1].column,n,o);return r(s,t[0].row,t[0].column)},j=(e,t,n,o,a)=>{var i=s(e,a,n,o);return r(i,t.row,t.column)},R=(e,t,n,o,a)=>{var i=v(e,a,a,a,0,e[t[0].row].cells.length,n,o);return r(i,t[0].row,t[0].column)},$=(e,t,n,o,a)=>{var i=x(t),l=M(t),s=v(e,a,i[0].row,i[i.length-1].row,l[0].column,l[l.length-1].column,n,o);return r(s,t[0].row,t[0].column)},F=(e,t,n,o,a)=>{var i=m(e,a,n,o);return r(i,t.row,t.column)},U=(e,t,n,o)=>{var a=xt(e).rows,i=N(a,(e=>Ct(e,o))),l=k(i),s=vn((()=>$r(l).getOr("")));return D(n,l,"column",A,C(o),(e=>a[e].section),(e=>vn((()=>{var t=a[e];return Hr([{cells:t.cells,section:t.section}]).getOr("")}))),(e=>s)),r(e,t.row,t.column)},Q=(e,t,n,o)=>{var a=xt(e).rows,i=a[o],l=k(i.cells),s=vn((()=>Hr([{cells:i.cells,section:i.section}]).getOr("")));return D(n,l,"row",C(o),A,(e=>i.section),(e=>s),(e=>vn((()=>{var t=N(a,(t=>Ct(t,e)));return $r(t).getOr("")})))),r(e,t.row,t.column)},V=(e,t,n,o,r)=>(a,i,l)=>{var s=rr(((r,a)=>e(r,a,t,n,o)),r,w,w,Wn);return s(a,i,l)},G=(e,t,n,o)=>(r,a,i)=>{var l=rr(((o,r)=>e(o,r,t,n)),o,w,w,Wn);return l(r,a,i)},Y=n(Or,E,zn,zr),J=n(jr,(t=>0==("table"===ne(Bt(e)))||wr(t).columns>1),w,zr);return{sortColumnRowsAsc:e=>n(V(S,Kr,!0,e,ir),E,w,zr),sortColumnRowsDesc:e=>n(V(S,Kr,!1,e,ir),E,w,zr),sortSelectionRowsAsc:e=>n(V(I,Kr,!0,e,ir),E,w,zr),sortSelectionRowsDesc:e=>n(V(I,Kr,!1,e,ir),E,w,zr),sortTableRowsAsc:e=>n(V(j,Kr,!0,e,ar),E,w,zr),sortTableRowsDesc:e=>n(V(j,Kr,!1,e,ar),E,w,zr),sortRowColumnsAsc:e=>n(V(R,Kr,!0,e,ir),E,w,zr),sortRowColumnsDesc:e=>n(V(R,Kr,!1,e,ir),E,w,zr),sortSelectionColumnsAsc:e=>n(V($,Kr,!0,e,ir),E,w,zr),sortSelectionColumnsDesc:e=>n(V($,Kr,!1,e,ir),E,w,zr),sortTableColumnsAsc:e=>n(V(F,Kr,!0,e,ar),E,w,zr),sortTableColumnsDesc:e=>n(V(F,Kr,!1,e,ar),E,w,zr),insertColumnBefore:Y,deleteColumn:J,populateColumn:(e,t)=>n(G(U,t,e,ar),E,w,Fr),populateRow:(e,t)=>n(G(Q,t,e,ar),E,w,Fr)}})(e),i=(e=>{var t=aa(y.none()),n=aa([]),o=y.none(),r=de("caption"),a=()=>pn(Pt(e),Rt(e)).bind((t=>J(Y(vt(t),pn((e=>X.fromDom(e.selection.getEnd()))(e),Rt(e)).bind(vt),((n,o)=>me(n,o)?r(t)?y.some(un(t)):y.some(gn(hn(e),n,t)):y.none()))))),i=e=>vt(e.element).map((t=>{var n=Dt(t),o=ir(n,e).getOr([]),r=H(o,((e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=n.grid.columns&&(e.onLast=!0)),e)),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:sr(n,e).isSome(),unmergeable:cr(n,e).isSome(),locked:r}})),l=()=>{t.set(vn(a)()),o=t.get().bind(i),L(n.get(),(e=>e()))},s=e=>(e(),n.set(n.get().concat([e])),()=>{n.set(R(n.get(),(t=>t!==e)))}),c=(e,n)=>s((()=>t.get().fold((()=>{e.setEnabled(!1)}),(t=>{e.setEnabled(!n(t))}))));return e.on("NodeChange ExecCommand TableSelectorChange",l),{onSetupTable:e=>c(e,(e=>!1)),onSetupCellOrRow:e=>c(e,(e=>r(e.element))),onSetupColumn:e=>t=>c(t,(t=>r(t.element)||(e=>o.exists((t=>t.locked[e])))(e))),onSetupCellOrRowToggle:e=>n=>((e,n,o)=>s((()=>t.get().fold((()=>{e.setEnabled(!1),e.setActive(!1)}),(t=>{e.setEnabled(!(e=>r(e.element))(t)),e.setActive(o(t))})))))(n,0,e),resetTargets:l,targets:()=>t.get()}})(e),l=(e=>{var t=t=>{e.focus()},n=t=>vt(t,Rt(e)),o=(o,r,a,i,l)=>{fn(Pt(e)).each((e=>{n(e).each((n=>{var s=Dt(n),c=(e,t)=>Ot(s,e,me).map((e=>e[t])),d=o.orThunk((()=>c(e,"row"))),u=r.orThunk((()=>c(e,"column"))),g=J(Y(d,u,((e,t)=>It(s,e,t).map((e=>e.element)))));g.bind((t=>{var o=un(t);return a(n,o,q(i,e),!0,l)})).each(t)}))}))};return{selection:(o,r)=>{fn(Pt(e)).each((a=>{n(a).each((n=>{var i=gn(hn(e),n,a);o(n,i,y.none(),!0,r).each(t)}))}))},row:(e,t,n,r)=>o(y.some(e),y.none(),t,n,r),column:(e,t,n,r)=>o(y.none(),y.some(e),t,n,r),table:(n,o,r,a,i,l)=>{var s=Dt(n),c=It(s,o,r).map((e=>e.element)),d=fn(Pt(e)),u=d.bind((e=>Ot(s,e,me))).isSome(),g=c.bind((e=>{var t=un(e),o=u&&i?d:y.none();return a(n,t,o,u,l)}));g.each(t)}}})(e),s=Qr(e);return((e,t,n,o)=>{var r=e=>"selection"===e,a=e=>"ascending"===e,i=t=>vt(t,Rt(e)),l=()=>fn(Pt(e),Rt(e)).bind((e=>i(e).bind((t=>Ht(t,e,e))))),s=()=>l().map((e=>e.startCol)),d=()=>l().map((e=>e.startRow));e.addCommand("mceSortTableByColumnAsc",(()=>{s().each((e=>{n.selection(t.sortTableRowsAsc(e))}))})),e.addCommand("mceSortTableByColumnDesc",(()=>{s().each((e=>{n.selection(t.sortTableRowsDesc(e))}))})),e.addCommand("mceSortTableByRowAsc",(()=>{d().each((e=>{n.selection(t.sortTableColumnsAsc(e))}))})),e.addCommand("mceSortTableByRowDesc",(()=>{d().each((e=>{n.selection(t.sortTableColumnsDesc(e))}))})),e.addCommand("mceSortTableAdvanced",((e,o)=>(e=>{var o=parseInt(e.roworcol,10);"column"===e.sortby?((e,o)=>{(e=>"column"===e)(e.sort)?a(e.order)?n.selection(t.sortColumnRowsAsc(o)):n.selection(t.sortColumnRowsDesc(o)):r(e.sort)?a(e.order)?n.selection(t.sortSelectionRowsAsc(o)):n.selection(t.sortSelectionRowsDesc(o)):a(e.order)?n.selection(t.sortTableRowsAsc(o)):n.selection(t.sortTableRowsDesc(o))})(e,o):((e,o)=>{(e=>"row"===e)(e.sort)?a(e.order)?n.selection(t.sortRowColumnsAsc(o)):n.selection(t.sortRowColumnsDesc(o)):r(e.sort)?a(e.order)?n.selection(t.sortSelectionColumnsAsc(o)):n.selection(t.sortSelectionColumnsDesc(o)):a(e.order)?n.selection(t.sortTableColumnsAsc(o)):n.selection(t.sortTableColumnsDesc(o))})(e,o)})(o))),e.addCommand("mceAdvancedTableSort",(()=>ma(e))),e.addCommand("mceTableToggleSeries",((r,a)=>{var l=y.from(a.name).filter(c),s=i(Pt(e));Y(l,s,((e,r)=>{ta(r,e)?((e,t,n)=>{Zr(e,0),(e=>{Ke(e,Xr)})(e),n.column(0,t.deleteColumn,!0,!0)})(r,t,n):He(o,e).each((o=>{(na(r)?ra:oa)(r,t,n,e,o)}))}))}))})(e,o,l,s),((e,t,o,r)=>{var a=()=>vt(Pt(e),Rt(e)),i=function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E,l=ea(n),s=l.bind((e=>He(r,e)));Y(l,s,((r,l)=>{1===Dt(n).grid.columns?a().exists((e=>me(n,e)))?e.execCommand("mceTableDelete"):e.undoManager.transact((()=>{Yt(n)})):!0===l.update&&i()&&ra(n,t,o,r,l)}))};e.on("TableModified",(e=>{var t=X.fromDom(e.table);i(t,(()=>!1!==e.structure))})),e.on("PreInit",(()=>{((e,t)=>{var o=e=>{var t=[];return f(e)?t:((e=>"thead"===e.name||"tbody"===e.name||"tfoot"===e.name)(e)?t.push(...o(e.firstChild)):"tr"===e.name&&t.push(e),t.concat(o(e.next)))},r=e=>o(e.firstChild);e.parser.addAttributeFilter(Xr,(e=>{var o,a,i=n(e);try{for(i.s();!(a=i.n()).done;){var l=a.value;if("table"===l.name){var s=l.attr(Xr);if(!1===(null===(o=t[s])||void 0===o?void 0:o.resizable)){var c,d=n(r(l));try{for(d.s();!(c=d.n()).done;){var u=c.value;h(u.firstChild)&&u.firstChild.attr("data-mce-resize","false")}}catch(e){d.e(e)}finally{d.f()}}}}}catch(e){i.e(e)}finally{i.f()}}))})(e,r)})),e.on("init",(()=>{var t=()=>{var t=fn(Pt(e),Rt(e));return e.selection.isCollapsed()&&t.exists((t=>e.dom.isEmpty(t.dom)))};e.on("ExecCommand",(e=>{var n=e.command.toLowerCase();"delete"!==n&&"forwarddelete"!==n||!t()||a().each(i)}),!0),e.on("keyup",(e=>{var n=e.keyCode;8!==n&&46!==n||!t()||a().each(i)}))}))})(e,o,l,s),e.hasPlugin("table")&&(((e,t)=>{var n=(t,n)=>()=>e.execCommand(t,!1,n),o=t.onSetupCellOrRow,r=[{type:"menuitem",text:"Sort table by column ascending",onAction:n("mceSortTableByColumnAsc"),onSetup:o},{type:"menuitem",text:"Sort table by column descending",onAction:n("mceSortTableByColumnDesc"),onSetup:o},{type:"separator"},{type:"menuitem",text:"Advanced sort...",onAction:()=>ma(e),onSetup:o}];e.ui.registry.addNestedMenuItem("advtablesort",{type:"nestedmenuitem",text:"Sort",getSubmenuItems:C(r)});var a=Qr(e);if(1===$e(a)){var i=Ne(a)[0];e.ui.registry.addToggleMenuItem("advtablerownumbering",da(e,t,"Row numbering",i,"table-row-numbering"))}else ze(a)||e.ui.registry.addNestedMenuItem("advtablerownumbering",{type:"nestedmenuitem",text:"Row numbering",icon:"table-row-numbering",getSubmenuItems:()=>{var n=ca(e,t),o=ua(e,t,a);return[n].concat(o)}})})(e,i),((e,t)=>{var n=Qr(e);if(1===$e(n)){var o=Ne(n)[0];e.ui.registry.addToggleButton("advtablerownumbering",{type:"togglebutton",tooltip:"Row numbering",icon:"table-row-numbering",onAction:()=>la(e,{name:o}),onSetup:sa(e,t,o)})}else ze(n)||e.ui.registry.addMenuButton("advtablerownumbering",{type:"menubutton",icon:"table-row-numbering",tooltip:"Row numbering",fetch:o=>{var r=ca(e,t),a=ua(e,t,n);return o([r].concat(a))},onSetup:t.onSetupCellOrRow})})(e,i)),{}}))}()},,function(e,t,n){var o=n(49);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(11)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,'#autocomplete-dropdown span.editor-icon{padding:0}#autocomplete-dropdown span.icon{height:20px;width:20px;background-position:50%;background-repeat:no-repeat}#autocomplete-dropdown .dropdown-insert-link span.icon{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAMFBMVEX///9wcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHAnFTKsAAAAD3RSTlMAESIzRFVmd4iZqrvM3e5GKvWZAAAAWUlEQVQIW2NgQAZWJyA0+++5l8AM3gSG6zDJUyCCeaYCyxUQI/bMY74FQJrxJoPhWQEgQ/bADKmHIJl1AnlvDUCMqwwMAmCdjxnkAsCMvSV3ICKc7zcwYAUAjz0WbHRhn40AAAAASUVORK5CYII=")}#autocomplete-dropdown .dropdown-insert-image span.icon{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gcLBBgu2AWxpAAAAUdJREFUOMuVUzFOw0AQnLlzHhCKVNBQwBPgC8ALEAUKRQQozp1p6JEoaPDZipAgzwAp4ilRygQ+QBGa3KaxE8ckFp7uRrPj2bkzUYK19gTAK4A9VGPive8EZVZE3rz312maflRN93q9G6XUABsSyH9hrZVg2xeiKFo7x3G8xsVxDAAIUAP5UBFBHfGmBKzbepIkw6JhUKd1rfUwT7FMWNW6MeYxDMOLYuu5YRiGZ8aYydYOut3uYaPRGCmlvsvXnK8EYPWQrLVPAFrOuTYA9Pv9kbX2DsAYwHuuc86xaKiy4ReS9yTbxpjzgvhZa/1V1Y0CAJK3S0KpZDabpZnx5Xw+f4iiyG0zYLGYwv8wIPlD8iDnvPdjklF5hUBEpiR3Sx5XIvIpIjskWyLSBHAkItM/K5DsZI2uYpGa5CnJYwD7JJskfzPtGhZ44Nh/W3weYAAAAABJRU5ErkJggg==")}#autocomplete-dropdown .dropdown-insert-macro span.icon{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik0xMyA2LjVhMS41IDEuNSAwIDEwLjAwMSAzLjAwMUExLjUgMS41IDAgMDAxMyA2LjVtLTUgMGExLjUgMS41IDAgMTAuMDAxIDMuMDAxQTEuNSAxLjUgMCAwMDggNi41TTQuNSA4YTEuNSAxLjUgMCAxMS0zLjAwMS0uMDAxQTEuNSAxLjUgMCAwMTQuNSA4IiBpZD0iYSIvPjwvZGVmcz48dXNlIGZpbGw9IiM5N0EwQUYiIHhsaW5rOmhyZWY9IiNhIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=");background-size:20px 20px}#autocomplete-dropdown .insert-create-page-link span.icon{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAADFBMVEX///9wcHBwcHBwcHD6E60rAAAAA3RSTlMAmaps9r97AAAAJ0lEQVQIW2NgQADGC0CC+QMywfj//wUG5v//P4BYD9BlGRiBQqgAAJ+HEATHbgMnAAAAAElFTkSuQmCC")}#autocomplete-dropdown .aui-dropdown ol.top-menu-item{display:none}#autocomplete-dropdown .aui-dropdown h2.top-menu-title{background:#f5f5f5;font-size:14px;font-weight:400;line-height:24px;margin:0;padding:2px 5px;border-bottom:1px solid #ccc;cursor:pointer}#autocomplete-dropdown .aui-dropdown.fabric h2.top-menu-title{display:none}#autocomplete-dropdown .aui-dropdown .hidden-div{position:absolute;top:-10000px}',""])},,,,function(e,t,n){var o=n(54);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(11)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(10)(!1);var o=n(28),r=o(n(55)),a=o(n(56)),i=o(n(57)),l=o(n(58)),s=o(n(59)),c=o(n(60));t.push([e.i,".aui-toolbar .icon.table-align-top{background:url("+r+") 50% no-repeat}.aui-toolbar .icon.table-align-middle{background:url("+a+") 50% no-repeat}.aui-toolbar .icon.table-align-bottom{background:url("+i+") 50% no-repeat}.aui-toolbar .aui-button.active .icon.table-align-top{background:url("+l+") 50% no-repeat}.aui-toolbar .aui-button.active .icon.table-align-middle{background:url("+s+") 50% no-repeat}.aui-toolbar .aui-button.active .icon.table-align-bottom{background:url("+c+") 50% no-repeat}",""])},function(e,t,n){e.exports=n.p+"71d1ac0284b0f6b4af603d062d1b1978.svg"},function(e,t,n){e.exports=n.p+"1241bf53c4c1c7b3b89f40c6998d6f6a.svg"},function(e,t,n){e.exports=n.p+"d0f7da3ee30a5ee2eab33a94a732909c.svg"},function(e,t,n){e.exports=n.p+"3dc0661dc0b27ad9db2d26599f662478.svg"},function(e,t,n){e.exports=n.p+"36825b8cf0d1cb29fb4f86b8da6c8589.svg"},function(e,t,n){e.exports=n.p+"6c6978d8ee656416348ee064ebbfd6bf.svg"},function(e,t,n){var o=n(62);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(11)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,"table.draggable{margin-left:-10px;margin-top:-10px}table.draggable:hover>tbody>tr>td.draggable-column,table.draggable:hover>tbody>tr>td.draggable-row,table.draggable:hover>tbody>tr>td.draggable-table{background-color:#777;border-top:1px solid #777;border-left:1px solid #777}table.draggable:hover>tbody>tr>td.draggable-column,table.draggable:hover>tbody>tr>td.draggable-table{border-right:1px solid #aaa}table.draggable:hover>tbody>tr>td.draggable-row,table.draggable:hover>tbody>tr>td.draggable-table{border-bottom:1px solid #aaa}td.draggable-column,td.draggable-row,td.draggable-table{background-color:initial;border-top:1px solid transparent;border-left:1px solid transparent;cursor:move}td.draggable-column,td.draggable-table{border-right:1px solid transparent}td.draggable-row,td.draggable-table{border-bottom:1px solid transparent}td.draggable-column{height:10px}td.draggable-row{width:10px}.wiki-content img.confluence-embedded-image,.wiki-content img.editor-inline-macro,.wiki-content table.wysiwyg-macro{cursor:move}.wiki-content table.wysiwyg-macro>tbody>tr>td.wysiwyg-macro-body{cursor:text}#move-indicator{font-weight:400!important}",""])},function(e,t,n){var o=n(64);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(11)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,".quick-comment-form #rte-toolbar .insert-files.toolbar-item{padding:0 6px}.quick-comment-form #rte-toolbar .insert-files .toolbar-trigger{margin:0 -6px}#rte-toolbar .insert-files.toolbar-item{padding:0}#rte-toolbar .insert-files .trigger-text{display:none}#rte-toolbar .insert-files .aui-button{padding:0 6px}",""])},function(e,t,n){var o=n(66);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(11)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,'.aui-dialog .wiki-parser-selector{font-size:14px;margin-right:5px}.insert-wiki-markup-panel div,.insert-wiki-markup-panel div form{height:100%;text-align:center}.insert-wiki-markup-panel .spinner{position:absolute;top:50%;left:50%;margin-top:-73px;margin-left:-60px}#insert-wiki-info-title{text-align:left;margin-left:10px}#insert-wiki-markup-form{height:95%}#insert-wiki-markup-form .wiki-title span{box-sizing:border-box;display:-moz-inline-stack;display:inline-block;margin-bottom:10px;max-width:48%;text-align:left;vertical-align:middle;width:48%}#insert-wiki-markup-form .wiki-title span:first-child{margin-right:20px}#insert-wiki-textarea,#insert-wiki-textarea-preview{box-sizing:border-box;display:-moz-inline-stack;display:inline-block;font-size:14px;height:84%;max-width:48%;vertical-align:middle;width:48%;resize:none}#insert-wiki-textarea.originalDefault{height:100%;min-width:100%;width:100%}#insert-wiki-textarea{font-family:Monaco,Consolas,Courier New,"monospace";margin-right:20px}#insert-wiki-textarea-preview{border:1px solid #ccc;border-radius:3px;position:relative}#insert-wiki-textarea-preview iframe{border:0;height:100%;left:0;min-height:100%;overflow:hidden;position:absolute;top:0;width:100%}',""])},function(e,t,n){var o=n(68);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(11)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,"body.ios{min-height:150px}",""])},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},function(e,t,n){t=e.exports=n(10)(!1);var o=n(28),r=o(n(73)),a=o(n(74));t.push([e.i,'html{height:100%}html.insert-wiki-markup-dialog{box-sizing:border-box;height:96%;overflow:auto}html .assistive{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}body.wiki-content{height:100%;min-height:100%}body.previewWiki{box-sizing:border-box;background:#fff;height:100%;overflow:auto;padding:10px}body.resizable{height:auto;margin:0;padding:0}body.fullsize{box-sizing:border-box;border:0;margin:0 10px;padding:10px 0}body.mceContentBody{background:#fff;border:none;text-align:left}.mceContentBody .wysiwyg-macro-body-preformat{border:1px solid #ccc;margin:5px 20px}.mceContentBody .wysiwyg-macro-inline{display:inline}.mceContentBody .user-new-line,.mceContentBody .wysiwyg-macro-body-newline{display:none;line-height:0}img.emoticon{vertical-align:text-bottom;width:16px;height:16px}#autocomplete-container{background-color:#ebecf0;border-radius:3px;padding:1px 0}#autocomplete-container.fabric{color:#0052cc}#autocomplete-container.fabric,#autocomplete-container.fabric #autocomplete-trigger{background-color:initial;border:transparent}#autocomplete-trigger{background-color:#ebecf0;padding:0 2px;border-radius:3px 0 0 3px}#autocomplete-search-text{padding:1px 6px 1px 3px}.macro span.macro-name{border-radius:3px;background-clip:padding-box;background-color:#f0f0f0;padding:4px}.wysiwyg-macro{background-color:#f0f0f0;background-position:0 2px;background-repeat:no-repeat;border:1px solid #ddd}.wiki-content .wysiwyg-macro{padding:24px 2px 2px;width:100%}.wiki-content .wysiwyg-macro-body{background-color:#fff;border:1px solid #ddd;margin:0;padding:10px}.wiki-content .wysiwyg-macro-body>p:first-child{margin-top:0}.wiki-content .wysiwyg-macro-body>p:last-child{margin-bottom:0}.wiki-content .wysiwyg-macro-body>pre{-moz-tab-size:4;tab-size:4;margin:0;white-space:pre-wrap}.wiki-content td .wysiwyg-macro-body{min-width:200px}.wiki-content .confluence-embedded-image{cursor:default;max-width:calc(100% - 4px);margin-left:2px;margin-right:2px;vertical-align:text-bottom}.wiki-content .confluence-embedded-image[height],.wiki-content .confluence-embedded-image[width]{max-width:none}.wiki-content .image-left{float:left;margin:0 10px 10px 0}.wiki-content .image-center{margin-left:auto;margin-right:auto;display:block}.wiki-content .image-right{float:right;margin:0 0 10px 10px}.wiki-content table.wysiwyg-macro{border-collapse:initial}.wiki-content .highlight-marker{background-color:#feeecd}.wiki-content table tbody td.mceSelected,.wiki-content table tbody th.mceSelected.nohighlight{background-color:#edf5ff!important}.wiki-content table tbody td.mceSelected.highlight,.wiki-content table tbody th.mceSelected{background-color:#e0e0e0!important}.wiki-content table tbody td.mceSelected.highlight-blue,.wiki-content table tbody td.mceSelected.info,.wiki-content table tbody th.mceSelected.highlight-blue,.wiki-content table tbody th.mceSelected.info{background-color:#d3e3f7!important}.wiki-content table tbody td.mceSelected.highlight-green,.wiki-content table tbody td.mceSelected.success,.wiki-content table tbody th.mceSelected.highlight-green,.wiki-content table tbody th.mceSelected.success{background-color:#d3f4cc!important}.wiki-content table tbody td.mceSelected.highlight-red,.wiki-content table tbody td.mceSelected.warning,.wiki-content table tbody th.mceSelected.highlight-red,.wiki-content table tbody th.mceSelected.warning{background-color:#f3dada!important}.wiki-content table tbody td.mceSelected.highlight-yellow,.wiki-content table tbody td.mceSelected.note,.wiki-content table tbody th.mceSelected.highlight-yellow,.wiki-content table tbody th.mceSelected.note{background-color:#f6f7ca!important}.wiki-content.show-eol-markup h1:after,.wiki-content.show-eol-markup h2:after,.wiki-content.show-eol-markup h3:after,.wiki-content.show-eol-markup h4:after,.wiki-content.show-eol-markup h5:after,.wiki-content.show-eol-markup h6:after,.wiki-content.show-eol-markup li:after,.wiki-content.show-eol-markup p:after{color:#777;content:" \\00B6"}.wysiwyg-unknown-macro{vertical-align:text-bottom}p+table.wysiwyg-macro,table.wysiwyg-macro+p{margin-top:10px}.editor-inline-macro{background-color:#f0f0f0;border:1px solid #ddd;margin:0 2px;min-height:24px;vertical-align:text-bottom}.editor-inline-macro.with-chrome{background-position:0 0;background-repeat:no-repeat;height:auto;padding:24px 2px 2px}.confluenceTd>.editor-inline-macro,.confluenceTd>.wysiwyg-unknown-macro,.confluenceTh>.editor-inline-macro,.confluenceTh>.wysiwyg-unknown-macro{vertical-align:inherit}.macro-placeholder-icon{background-image:url('+r+");background-position:0 3px;background-repeat:no-repeat}.image-hotswap{background-image:url("+a+");background-position:4px 50%;background-repeat:no-repeat}table.layout,table.layout td.layout-cell{border:1px dotted #ccc}table.confluenceTable{margin-bottom:0}.find-current{background-color:inherit;color:inherit}.find-current[data-searching]{border-radius:5px;background-clip:padding-box;box-shadow:0 2px 2px #ccc;background-color:#ffde00;margin:-2px;padding:2px;position:relative}",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAONJREFUeNpi/P//PwM1ARMDlQHVDWRB5mzbtg3D/9+/f0fhf/v2Dc6OjY1lRFfPCAtDkGHa2toMV69eZTAxMSHKNRs2bGBIS0tjxOlCcXFxsIF8fHzU8fK+ffvANCsrK+UGenl5gZ2+du1acBh8+fKF4cOHD1g1CQgIMPDw8BB2ITIAacClCQY+ffpEvIED4kKiDISls8HrQpjrqJIOYVkN5tWdO3fijE0Q+Pr1K0NjYyM4mdXX1zPidOHjx4/hbHd3d7wuAqndu3cvZl5GBiBbubm5cboKHcBch9PA4V3AAgQYAMuAZaztNwK5AAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs="},function(e,t,n){var o=n(76);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(11)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(10)(!1);var o=n(28)(n(77));t.push([e.i,"#insert-image-dialog.aui-dialog .dialog-panel-body{overflow:hidden;position:relative;padding:10px 10px 0}#insert-image-dialog.aui-dialog .dialog-panel-body .aui-message p{margin-top:0}#insert-image-dialog.aui-dialog .dialog-panel-body .aui-message ul{padding-left:15px;margin:0}#insert-image-dialog.aui-dialog .dialog-panel-body .aui-message ul.one-message{padding-left:0}#insert-image-dialog.aui-dialog .dialog-panel-body .aui-message ul.one-message li{list-style:none}#insert-image-dialog.aui-dialog .dialog-panel-body.web-image-panel{overflow:auto}#insert-image-dialog.aui-dialog .dialog-panel-body .no-files{margin-top:0}#insert-image-dialog.aui-dialog .dialog-panel-body .message-handler{margin-right:10px;margin-bottom:10px}#insert-image-dialog.aui-dialog .aui-progress-indicator,#insert-image-dialog.aui-dialog .aui-progress-indicator .aui-progress-indicator-value{height:4px;border-radius:0}#insert-image-dialog.aui-dialog .scroll-wrapper{position:relative}#insert-image-dialog.aui-dialog .divider{border-top:1px solid #ccc;width:110%;height:1px;margin-left:-10px}#insert-image-dialog.aui-dialog .search-panel-wrapper{height:100%}#upload-attachment form{padding:0}#upload-attachment form .invisible{height:1px;width:1px;opacity:0;z-index:1}#upload-attachment .file-upload-icon{vertical-align:text-bottom}.attach-tip-discovery{position:relative;border-top:1px solid #ccc;padding-top:20px;margin-right:10px;margin-top:10px;margin-bottom:20px;overflow:hidden;color:#707070}.attach-tip-discovery .img{display:block;width:50px;height:50px;float:left;margin-right:15px;background-image:url("+o+');background-repeat:no-repeat;background-size:50px 50px}.attach-tip-discovery .text p{display:inline}.attach-tip-discovery a{text-decoration:none}#attached-files{padding:10px 0}.file-list,.image-list{padding:0;list-style:none;overflow:hidden;margin-top:0}.file-list li,.image-list li{width:23%;cursor:default;float:left;margin:0 10px 8px 0;padding:0;text-align:center}.file-list li .caption,.image-list li .caption{text-overflow:ellipsis;display:block;overflow:hidden;white-space:nowrap;margin:0 auto;font-size:12px}.file-list li .owner-title,.image-list li .owner-title{font-size:10px}.file-list li .image-preview-throbber,.image-list li .image-preview-throbber{text-align:center;padding:0;position:absolute;top:50%;left:50%;margin-top:-10px;margin-left:-10px}.file-list li .file-container,.file-list li .image-container,.image-list li .file-container,.image-list li .image-container{border-radius:3px;background-color:#f5f5f5;border:1px solid #f5f5f5;padding:5px;margin-bottom:5px;position:relative;vertical-align:top;box-sizing:border-box;height:90px}.file-list li .file-container img,.file-list li .image-container img,.image-list li .file-container img,.image-list li .image-container img{width:auto;height:auto;position:relative;top:50%;transform:translateY(-50%);box-shadow:0 1px 3px rgba(0,0,0,.2);max-width:100%;max-height:100%}.file-list li .file-container .thumbnail,.file-list li .image-container .thumbnail,.image-list li .file-container .thumbnail,.image-list li .image-container .thumbnail{position:relative;top:50%;transform:translateY(-50%);background-image:none;display:inline-block}.file-list li .aui-progress-indicator,.image-list li .aui-progress-indicator{position:absolute;top:50%;left:10%;width:80%;z-index:2;transform:translateY(-50%)}.file-list li .overlay,.image-list li .overlay{width:100%;height:100%;display:none;position:absolute;z-index:1;background-color:rgba(0,0,0,.8);top:0;left:0}.file-list li .abs-icon,.image-list li .abs-icon{width:20px;height:20px;line-height:20px;border:1px solid #ccc;box-sizing:border-box;border-radius:3px;position:absolute;outline:none;display:none;cursor:pointer;color:#707070;background-color:#fff;background-repeat:no-repeat;background-position:50%;vertical-align:text-bottom;text-indent:-999em}.file-list li .abs-icon.zoom,.image-list li .abs-icon.zoom{top:5px;right:27px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAeElEQVQoz62Ovw1AYBTEz0pKWqUZPhNI7p4V6CzBPGIBo0g8xReJwuvctb/7A/wuHfTH30CniT2XEAAASzq1hYAGXlqtiiYaumYvrA0bWAMAS+2v5+pyOso4R0ADPae/gN4SL81xw6JTqxcx4NqsspZlCGS/nv+mG6d9RJUXBH/5AAAAAElFTkSuQmCC")}.file-list li .abs-icon.select,.image-list li .abs-icon.select{top:5px;right:5px}.file-list li .abs-icon.cancel,.image-list li .abs-icon.cancel{width:16px;height:16px;line-height:16px;top:5px;right:5px;border:0;color:#fff}.file-list li .abs-icon.select,.image-list li .abs-icon.select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAW0lEQVQYlWP4jwYYSBPYewFV4FhBL4rA+aLaV8gC14srnyKbca+s/AHU0HdT3v3//6Sy5BbMlukFTe9e1RRfhlv7ZUJBU2PhGSR3/JpXUHAUxWH/1u8h1y8gAADgQu+TLTiA3gAAAABJRU5ErkJggg==")}.file-list li .abs-icon.cancel,.image-list li .abs-icon.cancel{display:block;background-color:initial}.file-list li.loading .overlay,.image-list li.loading .overlay{display:block}.file-list li.loading,.image-list li.loading{color:#707070}.file-list li.loading .cancel,.image-list li.loading .cancel{z-index:2}.file-list li.hover,.file-list li:hover,.image-list li.hover,.image-list li:hover{cursor:pointer}.file-list li.hover .select,.file-list li.hover .zoom,.file-list li:hover .select,.file-list li:hover .zoom,.image-list li.hover .select,.image-list li.hover .zoom,.image-list li:hover .select,.image-list li:hover .zoom{display:block}.file-list li.selected .select,.image-list li.selected .select{display:block;background-color:#3572b0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAgUlEQVR4AcXKrw5BcRzG4e803QWcRDRN0CRJMkU3V8BluBFXoEiSizDJFIKZMR7bUfw5v2jeT3nDE3+csZ4QobghVmnQd7NVTYGOi726KAYtJ0dN8QoyC1n+Gg7O2uIdzLGWqdm56opPULHMycbdQHyDUDYDI1EMQsnURCTBs1+ABxXN3umBGxghAAAAAElFTkSuQmCC");border:0}.file-list li.selected.hover .select,.file-list li.selected:hover .select,.image-list li.selected.hover .select,.image-list li.selected:hover .select{background-color:#3572b0}.file-list li.current .file-container,.file-list li.hover .file-container,.file-list li.selected .file-container,.file-list li:hover .file-container,.image-list li.current .file-container,.image-list li.hover .file-container,.image-list li.selected .file-container,.image-list li:hover .file-container{background-color:#ebf2f9;border-color:#ebf2f9}.file-list li.current .caption,.file-list li.hover .caption,.file-list li.selected .caption,.file-list li:hover .caption,.image-list li.current .caption,.image-list li.hover .caption,.image-list li.selected .caption,.image-list li:hover .caption{color:#000}.file-list li.current .file-container,.image-list li.current .file-container{border:1px solid #ccc}.file-list li.last,.file-list li:nth-child(4n),.image-list li.last,.image-list li:nth-child(4n){margin-right:0}ul.image-list li{width:175px}ul.image-list li.image-effect-preview.hover{background-color:#e9e9e9;border:0}ul.image-list li.image-effect-preview .caption{font-size:14px}ul.image-list li.image-effect-preview.selected{background-color:#3572b0;border:0}ul.image-list li.image-effect-preview.selected .caption{color:#fff;font-weight:700;font-size:14px;width:145px}ul.image-list li.image-effect-preview .image-container{margin:0 15px 5px;padding:0;width:145px;height:auto}ul.image-list li.image-effect-preview .image-container img{box-shadow:none;position:static;transform:translate(0)}#image-properties-dialog .image-effects-panel ul.image-list .image-container{height:auto}.svg-icon:before{display:none;content:""}.svg-icon.size-48{width:48px;height:48px}.svg-icon.aui-iconfont-file-image.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OSAxQTMuMDEgMy4wMSAwIDAxNDcgNC4wMXYzOS45OEEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5VjQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMzkuOTh6TTI5LjkgMTkuNTZsLTEuNjgxIDMgLjQwMi0zLjQxNWE1LjY4MyA1LjY4MyAwIDAxLTEuNzc3LTEuMjkzbC0zLjEyNSAxLjQzOCAyLjMzMy0yLjUyNmE1LjYzIDUuNjMgMCAwMS0uNjgtMi4wOTFMMjIgMTRsMy4zNzMtLjY3M2E1LjYzIDUuNjMgMCAwMS42NzktMi4wOUwyMy43MTkgOC43MWwzLjEyNSAxLjQzOGMuNS0uNTM5IDEuMTAyLS45OCAxLjc3Ny0xLjI5M0wyOC4yMiA1LjQ0bDEuNjgyIDNhNS42OTUgNS42OTUgMCAwMTIuMTk4IDBsMS42ODItMy0uNDAyIDMuNDE1YTUuNjgzIDUuNjgzIDAgMDExLjc3NyAxLjI5M2wzLjEyNS0xLjQzOC0yLjMzMyAyLjUyNmE1LjYzIDUuNjMgMCAwMS42OCAyLjA5MUw0MCAxNGwtMy4zNzMuNjczYTUuNjMgNS42MyAwIDAxLS42NzkgMi4wOWwyLjMzMyAyLjUyNy0zLjEyNS0xLjQzOGMtLjUuNTM5LTEuMTAyLjk4LTEuNzc3IDEuMjkzbC40MDIgMy40MTUtMS42ODItM2E1LjY5NSA1LjY5NSAwIDAxLTIuMTk4IDB6TTI2LjMzNCAxNGE0LjY2NyA0LjY2NyAwIDExOS4zMzQgMCA0LjY2NyA0LjY2NyAwIDAxLTkuMzM0IDB6bTEuNDg0IDIwLjY4M0wzMyA0MmwtLjUgMUwxNiAxOS41IDUuNSAzMiA1IDMxbDExLTEzIDExLjE5NSAxNS44MDVMMzUgMjZsOCAxMC0uNSAxLTcuNS05LjUtNy4xODMgNy4xODN6IiBmaWxsPSIjNzE3MTcxIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=")}.svg-icon.aui-iconfont-file-pdf.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQzLjk5IDBINC4wMUE0LjAwOSA0LjAwOSAwIDAwMCA0LjAxdjM5Ljk4QTQuMDA5IDQuMDA5IDAgMDA0LjAxIDQ4aDM5Ljk4QTQuMDA5IDQuMDA5IDAgMDA0OCA0My45OVY0LjAxQTQuMDA5IDQuMDA5IDAgMDA0My45OSAwek00LjAxIDQ3QTMuMDEgMy4wMSAwIDAxMSA0My45OVYxNC45ODVjOS4zODQtLjA3NyAxOS4xMzItMi4zMjUgMjktNi43MTJWNDdINC4wMXpNNDAgNDdoLTRWMTZoMy41MDJjLjI3NCAwIC40OTguMjIxLjQ5OC40OTNWNDd6bS01IDBoLTRWMTJoMy41MDJhLjUuNSAwIDAxLjQ5OC41VjQ3em04Ljk5IDBINDFWMTYuNDkzQzQxIDE1LjY3IDQwLjMyOCAxNSAzOS41MDIgMTVIMzZ2LTIuNWExLjUgMS41IDAgMDAtMS40OTgtMS41SDMxVjYuNzI0bC0uNzA3LjMyMUMyMC4zMTUgMTEuNTgxIDEwLjQ2NCAxMy45MDYgMSAxMy45ODVWNC4wMUEzLjAxIDMuMDEgMCAwMTQuMDEgMWgzOS45OEEzLjAxIDMuMDEgMCAwMTQ3IDQuMDF2MzkuOThBMy4wMSAzLjAxIDAgMDE0My45OSA0N3pNNSAyNGM4LjUtLjUgMTItMSAyMC00di0xYy04IDMtMTIgMy41LTIwIDR2MXptMCA2YzguNS0uNSAxMi0xIDIwLTR2LTFjLTggMy0xMiAzLjUtMjAgNHYxem0wIDZjOC41LS41IDEyLTEgMjAtNHYtMWMtOCAzLTEyIDMuNS0yMCA0djF6bTAgNmM4LjUtLjUgMTItMSAyMC00di0xYy04IDMtMTIgMy41LTIwIDR2MXoiIGZpbGw9IiM3MzZGNkUiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.svg-icon.aui-iconfont-file-txt.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OSAxQTMuMDEgMy4wMSAwIDAxNDcgNC4wMXYzOS45OEEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5VjQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMzkuOTh6TTUgMzF2MWgzOHYtMUg1em0wLTE0djFoMzN2LTFINXptMC03djFoMjh2LTFINXptMCAxNHYxaDI0di0xSDV6bTAgMTR2MWgyOHYtMUg1eiIgZmlsbD0iIzcwNzA3MCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+")}.svg-icon.aui-iconfont-file-doc.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAwOSA0LjAwOSAwIDAwNC4wMSA0OGgzOS45OEE0LjAwOSA0LjAwOSAwIDAwNDggNDMuOTlWNC4wMUE0LjAwOSA0LjAwOSAwIDAwNDMuOTkgMEg0LjAxQTQuMDA5IDQuMDA5IDAgMDAwIDQuMDF6TTQzLjk5IDFBMy4wMSAzLjAxIDAgMDE0NyA0LjAxdjM5Ljk4QTMuMDEgMy4wMSAwIDAxNDMuOTkgNDdINC4wMUEzLjAwOSAzLjAwOSAwIDAxMSA0My45OVY0LjAxQTMuMDEgMy4wMSAwIDAxNC4wMSAxaDM5Ljk4ek01IDM5aDI4di0xSDV2MXptMC03aDMydi0xSDV2MXptMC0yMWgxN3YtMUg1djF6bTAgN2gxNHYtMUg1djF6bTAgN2gxOXYtMUg1djF6bTM2LjAwOC0xNUgyOS45OTJjLTEuMSAwLTEuOTkyLjg5NC0xLjk5MiAxLjk5MnYxMS4wMTZjMCAxLjEwMS44OTQgMS45OTIgMS45OTIgMS45OTJoMTEuMDE2YzEuMSAwIDEuOTkyLS44OTMgMS45OTItMS45OTJWMTEuOTkyYzAtMS4xLS44OTQtMS45OTItMS45OTItMS45OTJ6TTI5Ljk5MiAyNGEuOTkyLjk5MiAwIDAxLS45OTItLjk5MlYyMWwzLTMuNSA1IDYuNWgtNy4wMDh6bTExLjAxNiAwaC0yLjg5MWwtMS4wOTgtMS40MzUgMi40NjUtMi4wNjUgMi40MzMgMi45MDFhLjk5Mi45OTIgMCAwMS0uOTA5LjU5OXpNNDIgMjEuOTJMMzkuNDg0IDE5bC0zLjEzIDIuNjk1TDMyIDE2bC0zIDMuNXYtNy41MDhjMC0uNTQ3LjQ0NS0uOTkyLjk5Mi0uOTkyaDExLjAxNmMuNTQ3IDAgLjk5Mi40NDUuOTkyLjk5MnY5LjkyOHptLTEuNzY0LTkuMTAzbC0xLjk3Ni42MDYtLjc2LTEuOTIzLS43NiAxLjkyMy0xLjk3Ni0uNjA2IDEuMDMgMS43OTQtMS43MDYgMS4xNjggMi4wNDQuMzEyLS4xNTEgMi4wNjNMMzcuNSAxNi43NWwxLjUxOSAxLjQwNC0uMTUxLTIuMDYzIDIuMDQ0LS4zMTItMS43MDYtMS4xNjggMS4wMy0xLjc5NHpNMzcuNSAxNi4zYTEuMyAxLjMgMCAxMTAtMi42IDEuMyAxLjMgMCAwMTAgMi42eiIgZmlsbD0iIzcwNzA3MCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+")}.svg-icon.aui-iconfont-file-xls.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAwOSA0LjAwOSAwIDAwNC4wMSA0OGgzOS45OEE0LjAwOSA0LjAwOSAwIDAwNDggNDMuOTlWNC4wMUE0LjAwOSA0LjAwOSAwIDAwNDMuOTkgMEg0LjAxQTQuMDA5IDQuMDA5IDAgMDAwIDQuMDF6TTQ3IDE2VjQuMDFBMy4wMSAzLjAxIDAgMDA0My45OSAxSDE2djE1aDMxem0wIDF2MTBIMzJWMTdoMTV6bTAgMTF2MTBIMzJWMjhoMTV6bTAgMTF2NC45OUEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDMydi04aDE1em0tMTYgOEgxNnYtOGgxNXY4em0tMTYgMEg0LjAxQTMuMDEgMy4wMSAwIDAxMSA0My45OVYxN2gxNHYzMHpNMSAxNlY0LjAxQTMuMDEgMy4wMSAwIDAxNC4wMSAxSDE1djE1SDF6bTE1IDEyaDE1djEwSDE2VjI4em0wLTExaDE1djEwSDE2VjE3eiIgZmlsbD0iIzcwNzA3MCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+")}.svg-icon.aui-iconfont-file-ppt.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OSAxQTMuMDEgMy4wMSAwIDAxNDcgNC4wMXYzOS45OEEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5VjQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMzkuOTh6TTI4IDEydjFoMTV2LTFIMjh6bTAgNnYxaDE1di0xSDI4em0tMiA2djFoMTd2LTFIMjZ6TTUgMzh2MWgzOHYtMUg1em0wLTd2MWgzOHYtMUg1em0wLTE0LjVhOS41IDkuNSAwIDAwOS41IDkuNSA5LjUgOS41IDAgMDA5LjUtOS41QTkuNSA5LjUgMCAwMDE0LjUgNyA5LjUgOS41IDAgMDA1IDE2LjV6bTEgMGE4LjUgOC41IDAgMDE4LTguNDg1djguMTM4bC03LjYyMyAyLjg1OUE4LjUwOSA4LjUwOSAwIDAxNiAxNi41em04LjUgOC41YTguNTAyIDguNTAyIDAgMDEtNy43NzItNS4wNTJsNy42NDYtMi44NjcgNS43NzMgNS43NzNBOC40NyA4LjQ3IDAgMDExNC41IDI1em02LjM1My0yLjg1M0wxNSAxNi4yOTNWOC4wMTVhOC41IDguNSAwIDAxNS44NTMgMTQuMTMyeiIgZmlsbD0iIzcwNzA3MCIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+")}.svg-icon.aui-iconfont-file-code.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OSAxQTMuMDEgMy4wMSAwIDAxNDcgNC4wMXYzOS45OEEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5VjQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMzkuOTh6TTYgMTcuNWwxMC0xMCAuNSAxLTkgOSA5IDktLjUgMS0xMC0xMHptMzcgMTJsLTEwLTEwLS41IDEgOSA5LTkgOSAuNSAxIDEwLTEwek0xOCA0Mi45NjJoMUwzMCA2aC0xTDE4IDQyLjk2MnoiIGZpbGw9IiM3MDcwNzAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}.svg-icon.aui-iconfont-file-video.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQzLjk5IDBINC4wMUE0LjAwOSA0LjAwOSAwIDAwMCA0LjAxdjM5Ljk4QTQuMDA5IDQuMDA5IDAgMDA0LjAxIDQ4aDM5Ljk4QTQuMDA5IDQuMDA5IDAgMDA0OCA0My45OVY0LjAxQTQuMDA5IDQuMDA5IDAgMDA0My45OSAwek00NyAxMXYzMi45OUEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5TDEuMDMxIDExSDQ3em0tMTIuNzkyLTFoLTUuMzMxbDguODU2LTloNS4zMzFsLTguODU2IDl6bS03IDBoLTUuMzMxbDguODU2LTloNS4zMzFsLTguODU2IDl6bS03IDBoLTUuMzMxbDguODU2LTloNS4zMzFsLTguODU2IDl6bS03IDBINy44NzdsOC44NTYtOWg1LjMzMWwtOC44NTYgOXptLTcgMEgxLjAzMnYtLjI1MUw5LjcyNiAxaDUuMzM4bC04Ljg1NiA5ek0xIDQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMy45OTNMMSA4LjA0OFY0LjAxek00Mi45NzQgMTBMNDcgNS45MzNWMTBoLTQuMDI2em0tNy4wOTcgMGw4Ljc4My04LjkyNUM0NiAxLjM3OSA0NyAyLjU3NyA0NyA0LjEyNkw0MS4xODYgMTBoLTUuMzA5ek0xOSAzOWwxMi0xMC41TDE5IDE5djIwem0xLTE4bDkuNSA3LjVMMjAgMzdWMjF6IiBmaWxsPSIjNzA3MDcwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=")}.svg-icon.aui-iconfont-file-zip.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OSAxQTMuMDEgMy4wMSAwIDAxNDcgNC4wMXYzOS45OEEzLjAxIDMuMDEgMCAwMTQzLjk5IDQ3SDQuMDFBMy4wMSAzLjAxIDAgMDExIDQzLjk5VjQuMDFBMy4wMSAzLjAxIDAgMDE0LjAxIDFoMzkuOTh6TTIwIDMxLjAwMnY4Ljk5QzIwIDQxLjEgMjAuODg3IDQyIDIxLjk5OCA0Mmg0LjAwNEEyLjAwNSAyLjAwNSAwIDAwMjggMzkuOTkxdi04Ljk4OWMwLS41NTMtLjQ1My0xLjAwMi0uOTk3LTEuMDAyaC02LjAwNmMtLjU1IDAtLjk5Ny40NTYtLjk5NyAxLjAwMnpNMjcuMDAzIDMxYy0uMDA2IDAtLjAwMyA4Ljk5MS0uMDAzIDguOTkxIDAgLjU1Ny0uNDUgMS4wMDktLjk5OCAxLjAwOWgtNC4wMDRBLjk5OC45OTggMCAwMTIxIDM5Ljk5MXYtOC45ODlMMjcuMDAzIDMxek0yMiAzNy45OTl2MS4wMDJjMCAuNTUyLjQ0My45OTkgMS4wMS45OTloMS45OGMuNTU4IDAgMS4wMS0uNDQzIDEuMDEtLjk5OXYtMS4wMDJBLjk5OS45OTkgMCAwMDI0Ljk5IDM3aC0xLjk4Yy0uNTU4IDAtMS4wMS40NDMtMS4wMS45OTl6bTIuOTkuMDAxYy4wMTIgMCAuMDEtLjAwMi4wMS0uMDAxdjEuMDAyTDI0Ljk5IDM5aC0xLjk4Yy0uMDEyIDAtLjAxLjAwMi0uMDEuMDAxdi0xLjAwMmwuMDEuMDAxaDEuOTh6TTIwIDZ2MWg1VjZoLTV6bTAtNHYxaDVWMmgtNXptMyA2djFoNVY4aC01em0wLTR2MWg1VjRoLTV6bS0zIDZ2MWg1di0xaC01em0zIDJ2MWg1di0xaC01em0tMyAydjFoNXYtMWgtNXptMyAydjFoNXYtMWgtNXptLTMgMnYxaDV2LTFoLTV6bTAgNHYxaDV2LTFoLTV6bTAgNHYxaDV2LTFoLTV6bTMtNnYxaDV2LTFoLTV6bTAgNHYxaDV2LTFoLTV6bTAgNHYxaDV2LTFoLTV6IiBmaWxsPSIjNzA3MDcwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=")}.svg-icon.aui-iconfont-file-generic.size-48{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgNC4wMXYzOS45OEE0LjAxIDQuMDEgMCAwMDQuMDEgNDhoMzkuOThBNC4wMSA0LjAxIDAgMDA0OCA0My45OVY0LjAxQTQuMDEgNC4wMSAwIDAwNDMuOTkgMEg0LjAxQTQuMDEgNC4wMSAwIDAwMCA0LjAxek00My45OS45OEEzLjAxIDMuMDEgMCAwMTQ3IDMuOTkxdjQwLjAxNmEzLjAxIDMuMDEgMCAwMS0zLjAxIDMuMDEzSDQuMDFBMy4wMSAzLjAxIDAgMDExIDQ0LjAwOFYzLjk5MkEzLjAxIDMuMDEgMCAwMTQuMDEuOTc5aDM5Ljk4ek0xOSAzMC45OTVDMTkgMzQgMjEgMzYgMjQgMzZzNS0yIDUtNVYxMy45ODZjMC0zLjk4Ni0zLTYuOTk3LTcuMDA0LTYuOTk3UzE0Ljk5MiAxMCAxNC45OTIgMTMuOTl2MTguMDA1YzAgNS4wMDUgNCA5IDkuMDA0IDlBOC45NjMgOC45NjMgMCAwMDMzIDMxLjk4MlYxMi45OTRoLTF2MTguOTg4YzAgNC41MTgtMy41IDguMDEzLTguMDA0IDguMDEzcy04LjAwNC0zLjQ5NS04LjAwNC04VjEzLjk5YzAtMy40OSAyLjUtNiA2LjAwNC02QzI1LjUgNy45OSAyOCAxMC41IDI4IDEzLjk4NVYzMWMwIDIuNS0yIDQtNCA0cy00LTEuNS00LTQuMDA0VjIwaC0xdjEwLjk5NnoiIGZpbGw9IiM3MDcwNzAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==")}',""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGEAAABgCAIAAACCOItRAAALGElEQVR4Ae2ai1cTxx7H+7/ee0572qprtUW9gq+T+giicPWktnhFqpeigDwOPkLL44KNiJqLqIiCFPISMOGVTWJIMvfL/s6u2x2g2cck2Xv4HM3ZnVlmdz77m9mdmf2MGVgJjXY2X6iukjapAvi18O/wPgkcrPFcbu+fWs4wN6N3lJm645PE4GkPrLreUS52/6QklC+Ptbz56GJH8qPTkp49VZ6fu/1DgcCwVQb8/t86Wxq+lfR8/n3XkksdZUebJR11v07IzClyoaEWSceJhzE3Ooq1fi1pNI4nmNNkX/bqLNU/L7jO0bz/UxO7McbEEGn1SCpNU7LbHE11qRdfM7jORJGcqN0rEb6pVZc5Wu7TnvfeZ1lWBJnFxcVEYnWDmSJ256BEfNMx6TJH7zs82kOniPube32tho4/MjjLTCCPnHCto4UOr6Tw1TE4MhEOe6ua53Ydbd+t1A8P44le9fv6riOeXOyXzTjyTiy/bTra/C6/62jbqnqerCUedw5vefyuo8yTuioc/FN384mGfnnX0ZZox+/recu2ZNdR6mEzHb+3Z9KOo6ScisZioU3mI5EIfi38w38Qi0XlJB4fhUpxxGb8dHz1r1bfj1rHQ2KQk2uV4SgX+nmPBDyDIYuOmv4TEkYsFkZAldtRcvLSXkww4S98r/O2HEUi4ZSc3NjYyFolnU6jzYbRVHUsLUTL7CjeXS+pHDERSvLA8T85yqZl5hzp7EZIRz6bLuM75GzjZkOrudJMpjxFTxXIXdWfHLFcljlNNs90lubK5YiCCKNf/waT/UckGgkXM7GYL8jdqqMDLWNMDMvJVEiF5TfK4Sg5SXNADS+VA6PDtED0t9q2v5zMz5Ijwe9HBcbmy+so1OFRhvttMd0k7KlNTaDm5kBwLrYJfudfBQOBwGhwIqyurMmZFdGOiDm1/04nV0ruaCVIOq7OULVzmcRieHYyUCftzNGOIG7oqhw35Sixtk5VzWVSzAyhhcWyOaKpNayRjU+Odf9UT61MXWiq8XoRYhpVl9v9CKIXwbHffsRu45J5R1o4RCLzLnEU7ScpGscbGtv7hv87HVqSM4xIxoKdzRRrxP7vvReqpf1Sm2zOkdatzGU3n+jzSKhwRzk5OqE874Gnoy/wOryYzrHtySTeTf7+oOtfvnoE1ymvr2sGpVqJI3p+h2Phio6jjfmx5nOSSk2f9ZOadURVnVeGvsmKdZSb7/FJOr67h5mQ0jmKxROoZ0pOxeMLlelIDl6poc748D7Koud9yRzh+DRVNSOvVaKj1EgjfTr0z3MwBTxDtk+3sPC+u6O9vr7+FDjtrauru3TpUldXFyqzdbddKOQUsFF5jnQDdAqif9teVn3//r3X6z21Dd3d3Yxjo8Coqtl0JfZHmefnJZWa9qkEK5o/FBhHa2vrqR0ZGhraorTQJhuV+g6Zi4feTk7OxvOsGDCJg1ZzUgd2kchUtHTNIAUX3FH6uXPnGhoaaJt2UcLy8nKE3gAqxhG/ll2soCtXrpzkOHv2LCwYHDEOLWvLEuCUhiNldkRfvVAcLTHTDA4OnlD5QUHb1TRpKYyD0jWamprQrxtKwG2ALGyUzVHy00ds3sdpZpaLFy8eV3j06JHWK505c4YSsYG60TZgHFrWwMAAI7gSaIO2cVgZHBU+fX9U1fUhx0yyZf3hRaubz+crxpEhnczyUIGIrJI6oqky4u+1fpmZ45gCrtuQjomkYxyMo5gscO3atdOnT+t3cUA+X8B6Ad6jGCsIdsQSNOtKHL83yXbATCXRLhxxNDs7yxcYDAbJhWpkVaQjMNUr6TjwQ+90qthGhzfmGgUEzg65BOMwm9XR0UGJKBlrs4UcyMdX1kKhP8Q6AtM3MOwwzBD5mosAF12tcPfuXcbx7Nmzah2Mw2wWeiKPx0PpuCtwgVGOsiY+K9oRyLy85ZXM8+rVK7piXDrflVKVHHQE2tvbKb2/vz+eSCxtssgKOeGOiLVxP1Y+zFJbW3tUobe3l3HcvHmTcgHjsJCF2KT0q1evluq5ZiQTeh64c72xfhNfMSCUtPpgAGEo7uHDh846ikajlI57U3pH1mlsbPyHQltbmyHr3bt3SCcYh+NZkYXFcDgMR6n1lbwCza6U3xFEHFHhQ0nLYkBkFl6XVlZW8Pl4TAXvoolE4uPHj+V3BDBwp+tG4yqLIwiCkdg2wF2pHc3MzNy+fftHhZGREdyrp0+fHlaALMPBGJoiHb8MFJ2FdKLILFxDbEfW19dL56inp+cwhz4Rl8t0kEF9Ip9lzZG+r4mqUMvSgguFUzqiDM2QtmkXwYV3UOcd3bp1q+qvQGQx22il7ZCFesKCwRHjiG4PSoBTJx29ePGiSgVTRWhxT548wRDf4Oj69evMNlQsfndwRJWEJlOOPnz4sLCwoO1SCQhJyMKGXUcYfH+nYLDQ19dH6RrMNmgjKBa//Ls7nQIjW30li3Gk75JgBH+olaBXhsOsO6KLw5ASF8r34kjXHGGXiQEl0ykQyFrdMB4pxpEhnczyUIGILCuOvlXgZ4sITNFjGEXH+P1+JgaUTKfAkgFfSVOOgKEN4vGn37Xi6KAChqlsG7CeQcdgZpqJAbMidIqxsTHsol044oh6bkOBqVTKtCOMkuj60HmzrZient7Zo/1O6qCK1t7RAdt3xHRgqECJKNm0o5aWlgMK/EyI3iMdwATw4MEDugCariVwtyM6GIfZLPREaHSUjuZszhG8YCRJV9nZ2bndrUZN8MsEoJ398ePHfJWcckShROlra2vmHAGsO3+jMjExwUoIvNB5sfxtyIrH48460mITPbdpR+Dy5cv7FTCqpNJLA9TQee/fv2/ISiaTzjrKZrOUjtcLK47Q4jBWosvFByHYLU0Q0Rlxav6MeCo55YjPsuKI/l5SKYEmuit0OgQRzs6PRSvOERgdHZVUMGnNRHLv3j060aFDh+AL143G5QJHtNq1T0WcJnSfUENnwScYdN2Y5eCXv6n7YKDYLPGOwI0bN/aqYBv1YU6DlTsqH4v9mPGJEFxzw64sy/pEPqsMjnhNmFF0VhNKwxwIFY5PU8I6qLnZRCtthywHHJGmPSoYkaNcB4OIisVMSPjP4J2I2QYNEEXhV6AjvjIE7rkjQQTjWoF45TVoYrZBA0Sx+OU/7KVTYNTmmCMwPj6OKYuvVexrQglUFGamtPcgXLTmCLtMDCiZToGJJCcdASz+Ya7yKxXsMhtoRWFp3/AGTBVACDAxaDGLgednIh7VmGmjul24cMGObs214TmApxtVgKbBRIBZEToFHojOO6Lqfany5s0bZgl8YUElYE7WkJXJZKgCGO4zAaB7CqugYxLiCGBRgGpoeY0EMUglBAKBLV9ecCcEOVpdXQ0pUJyKcjQ1NfWFguXJti9UqKHxtxo1wS8TAN0AgIYmxBFfSWYe3ED6W0y/0IC5ZMALCaIgFevocxVrYUh/e/78edxVPMtYqYAacoQ4dYcjfIiFy8V7MPrOUgYRbgzOKNxRUoWZB99W4Q8xqYwVxxAoiSaUDzX6IBLpSMCNBfwATdDjjB75rnFESxQl0EQDNDoLv97vAqBmXgXbqI+IIKLyaT2Sc+Q2TdQ3OR5EVDj6QVc64jWhSnghEBRErnTEV0a75wKCyOWOaF4BVXJQE0rggsjljmgKCW/DmiabjU4rCnNGrnfEv+9R3TDXY0e35hpluseR+ephRslmB4c5WfPf1brqSYcNy/ONO/Zr7neE8JlTsDzZNqeChuY2R+YraW1Olv6WW6fddcSFIVrc/7OjsIrNRTS2Pf8DLXWvw5qCl2YAAAAASUVORK5CYII="},function(e,t,n){var o=n(79);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(11)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,'#insert-image-dialog .loading-message,#insert-image-dialog .upload-in-progress,#insert-image-dialog ul.image-list li .loading,#searched-images .loading-message{background-image:url("data:image/gif;base64,R0lGODlhEAAQAPMPALu7u5mZmTMzM93d3REREQAAAHd3d1VVVWZmZqqqqoiIiO7u7kRERCIiIgARAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAPACwAAAAAEAAQAEAEcPDJtyg6dUrFetDTIopMoSyFcxxD1krD8AwCkASDIlPaUDQLR6G1Cy0SgqIkE1IQGMrFAKCcGWSBzwPAnAwarcKQ15MpTMJYd1ZyUDXSDGelBY0qIoBh/ZoYGgELCjoxCRRvIQcGD1kzgSAgAACQDxEAIfkEBQcADwAsAAAAAA8AEAAABF3wyfkMkotOJpscRKJJwtM4ZgGMUtAQQcFNB/wQglUUWSYdD8FgAhiyZqxHAmEwrJKPwAGBeEI/gZFvkmAANYuBT8EQBRKDtFGsQQwAiYVVY8jCJXNMIHN/GJNpIxEAIfkEBQcADwAsAAAAABAADwAABFrwyfmColgiydpaQiY5x9MtZbZUT9Il0wBIhgALjKKEg1IUAw0hJRkEfoXZBIBYLQsXCUAXCGKckoRhK+q2vBiEAtsNGGYAwOcjcioG8MeATAnM4gtrBia3kiMAIfkEBQcADwAsAAAAABAAEAAABFzwySkDvdKsd5g8APYIBuch2CYRQBeiyyApiMwYQeAtFqEapIfqAWiIHiWKrLbYBBIJEYJAcIByAdkFUegKKKHLYDxQDRSW4wSQfYzVQskC0BweAbIm3C23w/UYEQAh+QQFBwAIACwAAAAAEAAOAAAERRDJiYyhWB5ZCs/c1iEEKBleF5DYQQBIIVheNWrFhtUrpWOCySBABAk6hZLlkiEga5IBBiDL9CjUjhSxNSEzXewvappEAAAh+QQFBwAOACwAAAAAEAAQAAAEa9DJ6QCg2K0klZHGkC0GpyiO0ojZgAznQKAUkIhKYBlC1TCSBUABWEwWg4NDwJIMOJQFI7CoIgcDIyZwODAUWKyWEmg0CIgoZiAIYK6UpwQYzFolhELSQRhnEgVKDlBqEw0FFyNrBW4Zjn4RACH5BAUHAA8ALAAAAAAQABAAAARc8Mn5xqBYAhkCz9yVeAEDSsoyPkyCWcuTAFaASMwtDXSGEAfM4oJBJBbIZCyTQCCCSlCCIRAYTpPDcYndPBBcjAHReCxughOhoHhceaDFmkiMOwoXh+u0OAjCEhEAIfkEBQcADgAsAQABAA8ADwAABFnQySEBkEnqWi9A2+ZdyOUspzZQTmI4w6Es9ICGhvBu96aYoSDAQMwENZ+D7ChZlIKLVXPQcOw2hYJCwagqHAxfwdBoBBzf0CA7IBAWgmOicHGjGkCV5nCMAAAh+QQFBwAPACwAAAAAEAAQAAAEXfDJ+daiWN43hgQbNlwdF4TU4nWL4mFWbAGJpAQZHCB4jgUvH2WgKAonA4Oy9mkAMK4ho1DoTRgEhcZREHgagQSC8Qg0EJLA0yYQ1HrBSWPRfhwcPsdXICHnNko5EQAh+QQFBwAOACwAAAEAEAAPAAAEWtDJ6daSg2ppJdha922ZNpTBCE6JAlxUSakOQtwImOyAUPwMUCDgWpwCBJkksHK8JguEgClp1BYNRsKhODgPBklCFjgwAIQtTCNwmB2G9gZgdTCCNeVGoQBFAAAh+QQFBwAPACwAAAEAEAAPAAAEWvDJSd+qeK5RB8fDRRWFspyotAAfQBbfNLCVUSSdKDV89gDAwcFBIBgywMRnkWBgcJWDJCZRIKAPwePIOAADCIkhIAFIyAkDYqD1EZzqR8AJoiMOp6PvTMZEAAAh+QQFBwAPACwAAAEADwAPAAAEWvBJQIa8+ILSspdHkXxS9wxF4Q3LaQbjtbBY4ABZKykCwyie2WBgaBiBuSGrBTh4cDLDg+BJKKBOIMIwTAROsNOEAFBIEZaHTi1APMyPhGF9cb+ljy8pHsNEAAA7");background-repeat:no-repeat}#insert-image-dialog .loading-message,#insert-image-dialog .upload-in-progress,#searched-images .loading-message{background-position:left 50%;height:20px;line-height:20px;padding-left:24px}#insert-image-dialog h2.dialog-title{white-space:normal}#insert-web-image-form fieldset.inline,#search-image-form fieldset.inline{padding:0;margin-right:-10px}#insert-web-image-form,#search-image-form,#upload-attachment{padding:0 0 10px}#attached-files,#attached-images,#searched-images{overflow:auto;margin-right:-10px}#upload-attachment .upfile{margin-left:8px;padding:0}#insert-web-image-form .web-image-input{display:inline}.insert-web-image .image-preview-area{margin-top:0}#insert-web-image-image-url{max-width:420px}.insert-web-image .image-preview-error{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABA0lEQVR42p2QP0tCURiH7zdQRA3u4OJUiyDY4CDtTuEXuXs0JEQ4uDk5C0EuKoEu+SWcg5baLCS7tNTx98IzyMWjXoeHe95/z3vODdzi2kdTvIo30fL1+YbLIhYOfsV5GsFAOL59zsNjBRfij60lEXKbf1E5RvDExl4URYGwXJfc6JCgwqZYhBp2hs5n4odadZ9gzKYu2x1YrUPt2SeosWEtijsEBfGN5HKXYErxweKkAMk9PbOkoE5hJXI+AbUVvfVtwZzkHTECAGptel8cgisSnyJDk+8GRlZ8MdOwxITghoa9ArhlZmzB+/abDjwh+c8+LBgRnMLEBHnxKJYpBpfMFDbGjWcGPFD11gAAAABJRU5ErkJggg==") 60px no-repeat;text-align:center}#insert-image-dialog .image-preview,#insert-web-image-image-url{margin-left:8px}.insert-web-image .image-preview-throbber{text-align:center;padding-top:50px}.insert-web-image .faraway{position:absolute;left:-9999em;top:-9999em}#search-image-form .search-input{display:inline}#search-image-form .search-input .search-image-text{max-width:250px}#search-image-form .aui-button,#search-image-space-select{margin-left:8px}',""])},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,".wiki-content .columnLayout{border-spacing:8px}.wiki-content .cell,.wiki-content .footer,.wiki-content .header{border:2px dashed #ccc;margin:8px;padding:4px 8px}.wiki-content .header,.wiki-content .header .innerCell{margin-bottom:0}.wiki-content .footer,.wiki-content .footer .innerCell{margin-top:0}.wiki-content .innerCell{outline:0;overflow:auto;overflow-y:hidden;height:100%}.section-decorator{display:table-cell;width:14px;overflow:visible}.section-decorator button{border:0;background:transparent;box-shadow:none;padding:7px 0;text-align:center;width:14px;height:20px;color:#aaa}.show-property-panel .icon{width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid #333}.section-decorator .move-section{cursor:move}body.mceContentBody.pl2-contextual{margin:0;padding:0}.wiki-content .contentLayout2 .columnLayout{border-spacing:4px 2px;margin-top:0;margin-bottom:0}.wiki-content .contentLayout2 .cell{border:1px dashed #999;border-radius:5px;padding:0}.wiki-content .contentLayout2 .innerCell{padding:5px;min-height:20px}.wiki-content .contentLayout2>:first-child{margin-top:5px}",""])},function(e,t,n){var o=n(82);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(11)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,"#property-panel.page-layout-2-panel .icon-fat .icon,#rte-toolbar-row-pl2-toolbar .icon-fat{width:20px;height:20px}#property-panel.page-layout-2-panel .icon-fat,#rte-toolbar-row-pl2-toolbar .layouts button{padding-left:6px;padding-right:6px}#property-panel.page-layout-2-panel a.icon-fat span.icon,#property-panel.page-layout-2-panel a span.icon{display:inline}",""])},function(e,t,n){var o=n(84);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(11)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,"#property-panel a.macro-placeholder-property-panel-display-newline-button span.icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvklEQVR42rVTPQuFIBT1p1t7e2EFDrXnVmNb4Ca4BS5BW9AfOA+F+wjfAwfpwuHcDzn3olcGIAv5An3fo+u6L55x27bE5P+cZdkWqVJH6pDMsWxTSsFjmqbAMZIC4zjivm9c14XjOLDvO4wx2LYNwzCkBZqmwXmecM7BWgutNdZ1xTzP8LWkQFVVWJYFUspwQUII1HUd2NeSApxzeJRlCfKLovBxYPa6xe9KsedHLc7TXryzidQpnurvZNm/8QMbqb4yyqv4rAAAAABJRU5ErkJggg==);width:16px;height:16px;display:inline-block}#property-panel a.macro-placeholder-property-panel-display-inline-button span.icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAw0lEQVR42q1TMQqAMBDr0/UBroJiBUEf0E51dRMcxUlwFBcHPxA5IUuLONSDcDmupO01VQCiEC+gtYagrusH5FVVCfdz0FfRQVVR5CmoLtzfnWBf/R7WWhhjIFnAmvlToOs6XNeF8zyx7zvWdcU8zxjHEW3bhgK8NydaFAWO48C2bViWBdM0YRgGOOcgPc7t9RWyLEPf92ia5hEuyxJ5nj+Lpae+IkkSpGkKZnLW6u/gDHzX+c6kP4j/nfjmNJ8HiP6NN81gzxU6QYojAAAAAElFTkSuQmCC);width:16px;height:16px;display:inline-block}#property-panel a.macro-placeholder-property-panel-display-inline-button,#property-panel a.macro-placeholder-property-panel-display-newline-button{padding:0 6px}",""])},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,".editor-inline-macro[data-macro-name=status]{background:transparent;border:0;min-height:16px;margin:0;vertical-align:-4px}",""])},function(e,t,n){var o=n(87);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};n(11)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,"#property-panel a.macro-property-panel-Grey span.icon{background-color:#42526e}#property-panel a.macro-property-panel-Green span.icon{background-color:#00875a}#property-panel a.macro-property-panel-Red span.icon{background-color:#bf2600}#property-panel a.macro-property-panel-Yellow span.icon{background-color:#ff991f}#property-panel a.macro-property-panel-Blue span.icon{background-color:#0052cc}#property-panel a.macro-property-panel-Blue,#property-panel a.macro-property-panel-Brown,#property-panel a.macro-property-panel-Green,#property-panel a.macro-property-panel-Grey,#property-panel a.macro-property-panel-Red,#property-panel a.macro-property-panel-Yellow{padding:6px;display:inline-block}#property-panel a.macro-property-panel-Blue span.icon,#property-panel a.macro-property-panel-Brown span.icon,#property-panel a.macro-property-panel-Green span.icon,#property-panel a.macro-property-panel-Grey span.icon,#property-panel a.macro-property-panel-Red span.icon,#property-panel a.macro-property-panel-Yellow span.icon{display:inline-block;background-image:none;margin:0;border:0;min-width:auto;border-radius:3px;width:16px;height:16px}#property-panel .editable.status-macro-title{margin-right:10px;float:none;text-transform:uppercase;text-decoration:none;width:88px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:11px;padding:0 5px}#property-panel input.editable.status-macro-title{outline:none;height:30px;line-height:20px;vertical-align:bottom;padding-top:2px}",""])},function(e,t,n){(e.exports=n(10)(!1)).push([e.i,".mce-content-body .mce-visual-caret{background-color:#000;background-color:currentColor;position:absolute;display:none}.mce-content-body .mce-visual-caret-hidden{display:none}.mce-content-body [data-mce-caret]{left:-1000px;margin:0;padding:0;position:absolute;right:auto;top:0}.mce-content-body .mce-offscreen-selection{left:-2000000px;max-width:1000000px;position:absolute}.ephox-snooker-resizer-bar{background-color:#22b5fe;opacity:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ephox-snooker-resizer-bar:hover{opacity:1}.ephox-snooker-resizer-cols{cursor:col-resize;width:3px!important}.ephox-snooker-resizer-rows{cursor:default;height:0!important}.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging{opacity:1}table[data-mce-selected]{outline:1px solid #fff}",""])},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},function(e,t,n){e.exports=void 0},,,,,,,,,,function(e,t,n){"use strict";n.r(t);var o=n(6),r=n.n(o),a=n(7),i=n.n(a),l=(n(39),n(41),n(43),n(1)),s=n.n(l),c=n(0),d=n.n(c);function u(){return i.a.Env.browser.isSafari()||i.a.Env.browser.isChromium()}function g(){return c.AJS.Rte}var m=n(3),p=n(4);function f(e){return(e=e&&e.jquery?e[0]:e)?("BR"!==e.tagName&&3!==e.nodeType||(e=e.parentNode),e&&9===e.nodeType&&(e=null),e):null}var h={};h.Rte={HIDDEN_CHAR:"\ufeff",ZERO_WIDTH_WHITESPACE:"&#x200b;",editorId:"wysiwygTextarea",isQuickEdit:!1,getEditor:()=>c.tinymce.activeEditor,getCurrentBaseUrl(){if(!this.currentBaseUrl){var e=c.document.location;this.currentBaseUrl=`${e.protocol}//${e.hostname}${e.port?`:${e.port}`:""}`}return this.currentBaseUrl},showSelection:e=>{g().showElement(c.tinymce.activeEditor.selection.getStart(),e)},isAnyPartShown:e=>{var t=f(e);if(!t)return p.a.error("AJS.Rte.isAnyPartShown: no element to find"),!1;var n=s()(t),o=n.offset().top,r=o+n.outerHeight(),a=s()(g().getEditor().getDoc()).scrollTop(),i=a+s()(g().getEditorFrame()).height();return r>a&&o<i},showElement:(e,t)=>{var n=f(e);if(n){var o=s()(n),r=g().getEditor(),a=s()(r.getDoc()),i=o.offset().top,l=i+o.outerHeight(),c=a.scrollTop(),d=c+s()(g().getEditorFrame()).height(),u=()=>{g().bindScroll("AJS.Rte.showElement",(()=>{g().unbindScroll("AJS.Rte.showElement"),setTimeout(t,1)}))};i<c?(g().scrollTo(i),t&&u()):l>d?(g().scrollTo(Math.min(i,c+l-d)),t&&u()):t&&t()}else p.a.debug("AJS.Rte.showElement: no element to show - skipping")},scrollTo:e=>{var t=g().getEditor();e=Math.ceil(e),s()(t.getDoc()).scrollTop(e)},bindScroll:(e,t)=>{var n=g().getEditor();s()(c.document).add(n.getDoc()).add(n.getWin()).bind(`scroll.${e}`,t)},unbindScroll:e=>{var t=g().getEditor();t?s()(c.document).add(t.getDoc()).add(t.getWin()).unbind(`scroll.${e}`):s()(c.document).unbind(`scroll.${e}`)},getEditorContainer:()=>c.document.getElementById("wysiwyg"),getEditorFrame:()=>c.document.getElementById(`${g().getEditor().id}_ifr`),webResourcePath:"/download/resources/com.atlassian.confluence.tinymceplugin%3Atinymceeditor/",getResourceUrlPrefix(){return this.resourceUrlPrefix||(this.resourceUrlPrefix=this.getCurrentBaseUrl()+m.a.get("editor-plugin-resource-prefix")),this.resourceUrlPrefix},getTinyMceBaseUrl(){return this.absoluteUrl||(this.absoluteUrl=`${this.getResourceUrlPrefix()+this.webResourcePath}tinymcesource/`),this.absoluteUrl},getMinEditorHeight:()=>+m.a.get("min-editor-height"),getTinyMceEditorMinHeight:e=>{e=e||0;var t=g().getMinEditorHeight(),n=0;return t||(Array.prototype.forEach.call(c.document.querySelectorAll("#editor-precursor,#header-precursor,#header"),(e=>{n+=s()(e).outerHeight(!0)})),s()(d.a).height()-n-e)},editorFocus:e=>{if(e&&!e.destroyed){var t,n=(t=e.dom.getRoot(),u()&&!s()(t).parents("body").length&&(t=s()(e.getBody()).find("p:first-child")[0]),t);n?(e.selection.select(n,!0),e.selection.collapse(!0),n.focus()):p.a.error("editorFocus was called with an invalid node"),e.getBody().focus(),e.getWin().focus()}}},h.KEYS={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,META:91};var v=h,b={offset(e){var t=s()(e).offset(),n=c.tinymce.activeEditor.iframeElement,o=s()(n).offset(),r=n.contentWindow.document,a=s()(c.tinymce.activeEditor.getBody()),i=s.a.support.boxModel&&r.documentElement.scrollTop||a.scrollTop(),l=s.a.support.boxModel&&r.documentElement.scrollLeft||a.scrollLeft();return{top:t.top-i+o.top,left:t.left-l+o.left}},getSelectedText(){var e=c.tinymce.activeEditor.selection;return e.getRng().text||e.getSel()&&e.getSel().toString&&e.getSel().toString()||""},setHtml(e){e&&c.tinymce.activeEditor.setContent(e)},getHtml:()=>`${c.tinymce.activeEditor.getContent()}`,isEmpty(){var e=c.tinymce.activeEditor.getContent().replace("&nbsp;","").replace("<br />","");return"<p></p>"===e.trim()||0===e.length},editorHasContentChanged:()=>c.tinymce.activeEditor.isDirty(),editorResetContentChanged(){c.tinymce.activeEditor.setDirty(!1)},getChildIndex(e,t){for(var n=e.childNodes,o=0,r=n.length;o<r;o++)if(n[o]==t)return o;return-1}},y=()=>!!m.a.get("collaborative-content")&&w(),w=()=>{var e=m.a.get("content-type");return"page"===e||"blogpost"===e},C=n(2),A=n(8),x=(n(46),{}),M=e=>{if(!x.hasOwnProperty(e)){var t=d.a.document.querySelector("meta[name=ajs-enabled-dark-features]");if(t){var n=t.content.split(",");x[e]=n.indexOf(e)>-1&&-1===n.indexOf(`${e}.disable`)}}return x[e]},k=n(14),E=n.n(k),T=n(20),D=n.n(T);function S(){return s()("#table-highlight-group").attr("data-highlight-colour")||""}var I={areCellsHeadings(e){var t=e.filter("th").length;return e.length===t},areCellsHighlighted(e){var t=e.filter("td[data-highlight-colour],th[data-highlight-colour]"),n=t.length;return e.length===n&&function(e){var t,n,o=S();for(t=0,n=e.length;t<n;t++)if((e.eq(t).attr("data-highlight-colour")||"")!==o)return!1;return!0}(t)},getSelectedHighlightColour:S},O=e=>{function t(t){var o,r,a=function(t){return e.translate(t)};n(t),I.getSelectedHighlightColour()&&(o=I.getSelectedHighlightColour(),r=a([a("table.cell_background_color"),D.a.colorNames[o.substring(1,o.length)]]),t.attr("data-highlight-colour",o),t.attr("title",r),t.children().attr("title",""),t.addClass(`highlight-${o}`))}function n(e){var t,n,o;for(t=0,n=e.length;t<n;t++)(o=e.eq(t)).attr("data-highlight-colour")&&o.removeAttr("data-highlight-colour"),o.attr("title")&&o.removeAttr("title"),o[0].className=o[0].className.replace(/( |^)highlight-[#\w]+/g,"")}e.on("init",(function(){var o=function(e){return s()(e.selection.getNode()).closest("th.confluenceTh,td.confluenceTd")},r=function(e){var t=s()(e.getBody()).find("th.confluenceTh[data-mce-selected],td.confluenceTd[data-mce-selected]");return t.length?t:o(e)};e.addCommand("confTableRowToggleHeading",(function(){var t=function(e){var t=s()(e.getBody()).find("td[data-mce-selected],th[data-mce-selected]");t.length||(t=s()(e.selection.getNode()));for(var n=t.closest("tr"),o=n.parent(),r=o.is("tbody")?n.parent().parent():o;0!==n.length&&!r.is(".confluenceTable");)n=r.closest("tr"),r=(o=n.parent()).is("tbody")?n.parent().parent():o;return n}(this).children("td,th");return I.areCellsHeadings(t)?e.execCommand("mceTableRowType",!1,{type:"body"}):e.execCommand("mceTableRowType",!1,{type:"header"}),!1})),e.addCommand("confTableColumnToggleHeading",(function(){var t=function(e){var t=s()([]);return e.each((function(){var e=s()(this),n=e.index()+1,o=e.closest("table.confluenceTable").children("tbody").children("tr");t=t.add(o.children().nthCol(n))})),t}(r(this));return I.areCellsHeadings(t)?e.execCommand("mceTableColType",!1,{type:"td"}):e.execCommand("mceTableColType",!1,{type:"th"}),!1})),e.addCommand("confTableSelectionToggleHighlight",(function(e,o){var a=o&&o.alwaysHighlight,i=r(this);return I.areCellsHighlighted(i)&&!a||s()("#table-highlight-group").attr("data-remove-highlight")?n(i):t(i),!1})),e.on("KeyDown",(t=>{!function(t){if(t.altKey&&(38===t.keyCode||40===t.keyCode)){var n=e.selection.getRng(),o=s()(n.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent");if(0!==o.length){e.execCommand(38===t.keyCode?"mceTableInsertRowBefore":"mceTableInsertRowAfter");var r=o.parent()[38===t.keyCode?"prev":"next"]().find("td:first-child")[0],a=s()(r);a.hasClass("numberingColumn")&&(r=a.next()[0]),n&&(n.setStart(r,0),n.setEnd(r,0),e.selection.setRng(n)),t.preventDefault()}}}(t)})),e.on("Click",(function(){var t=o(this);t.hasClass("numberingColumn")&&!t.hasClass("confluenceTh")&&e.execCommand("mceTableMoveCaretToNextCell")})),e.on("KeyDown",(function(t){if((38===t.keyCode||40===t.keyCode)&&(n=e.selection.getNode(),s()(n).parents("table").is(".confluenceTable"))&&o(this).hasClass("numberingColumn"))return e.execCommand("mceTableMoveCaretToNextCell"),t.preventDefault(),!1;var n}),!0)})),e.on("init",(function(){s()(e.getBody()).find(".confluenceTd.numberingColumn").attr("contenteditable","false")}))},j=e=>{e.on("BeforeExecCommand",(t=>{if("mceInsertTable"===t.command&&!t.value){e.execCommand("mceInsertTable",!1,{columns:3,rows:4,options:{headerRows:1}}),t.preventDefault()}}))},N=e=>{var t,n,o=/([+-]?\d*)[nN]([+-]?\d*)/;e.fn.nthCol=function(r){var a,i,l,s,c,d,u,g,m;return l={multiplier:0,offset:0},"even"===(a=r)?a="2n":"odd"===a?a="2n+1":/^\d*$/.test(a)&&(a=`0n+${a}`),null!==(i=o.exec(a))&&(l.multiplier=i[1]-0,l.offset=i[2]-0),n=l,s=this,u=[],g=0,m=[],e.each(s,((e,t)=>{var n=0,o=0,r=t.rowSpan||1,a=t.colSpan||1;for(t.parentNode!==c&&((c=t.parentNode).parentNode!==d&&(d=c.parentNode,u=[]),g=0,void 0===u[c.rowIndex]&&(u[c.rowIndex]=[])),n=0;n<u[c.rowIndex].length+1;n+=1)if(void 0===u[c.rowIndex][n]){g=n;break}for(m[e]=g,n=c.rowIndex;n<c.rowIndex+r;n+=1)for(void 0===u[n]&&(u[n]=[]),o=g;o<g+a;o+=1)u[n][o]=!0})),t=m,e(this).filter((function(e){return o=t[e]-(n.offset-1),0===n.multiplier?0===o:o%n.multiplier==0&&o/n.multiplier>=0;var o}))}};var L=function(){var e,t=c.tinymce.activeEditor;if(this.parent().closest("table.confluenceTable").length)return s()("#table-mode-picker .dropdown-text").text(t.translate("table.responsive")),void s()("#table-mode-picker .aui-dd-parent").addClass("disabled");s()("#table-mode-picker .aui-dd-parent").removeClass("disabled"),(e=this).hasClass("fixed-table")||e.hasClass("fixed-width")?s()("#table-mode-picker .dropdown-text").text(t.translate("table.fixed_width")):s()("#table-mode-picker .dropdown-text").text(t.translate("table.responsive"))},B=e=>{e.on("ObjectResizeStart",(t=>{var n=t.target;"bar-col"===t.origin&&e.dom.is(n,"table")&&(n.style.width||(n.classList.contains("fixed-table")?(n.classList.remove("fixed-table"),n.classList.add("fixed-width")):n.classList.contains("fixed-width")||n.classList.add("relative-table")),function(e){var t=0;e.find(">tbody >tr").each((function(){var e=0;s()(this).find(">th,>td").each((function(){var t=s()(this);t.attr("colspan")?e+=parseInt(t.attr("colspan")):e++})),e>t&&(t=e)}));var n=e.find(">colgroup"),o=n.find("col"),r=o.length;if(r!==t){var a=n.length>0;if(a||(n=s()("<colgroup>")),t>r)for(var i=0;i<t-r;i++){var l=s()("<col>");n.append(l)}else for(var c=0;c<r-t;c++)o.last().remove();a||e.prepend(n)}}(s()(n)))}),!0)},R=e=>{var t=(t,n)=>{var o=e.dom.getParent(e.selection.getNode(),"table.confluenceTable");e.undoManager.transact((()=>{o&&o.classList.contains("fixed-table")&&""===e.dom.getStyle(o,"width")&&e.dom.setStyle(o,"width",`${o.offsetWidth}px`),e.execCommand("mceTableSizingMode",!1,t),o&&(o.classList[n]("fixed-width"),o.classList.remove("relative-table"),o.classList.remove("fixed-table"))})),s()("#table-mode-picker .dropdown-text").text(e.translate("table."+("responsive"===t?"responsive":"fixed_width")))};e.addCommand("mceAutoWidth",(()=>{t("responsive","remove")})),e.addCommand("mceFixedWidth",(()=>{t("fixed","add")}))};var P,H={setup:function(e){(e=>{e.addCommand("JustifyTop",(()=>e.execCommand("mceTableApplyCellStyle",!1,{"vertical-align":"top"}))),e.addCommand("JustifyMiddle",(()=>e.execCommand("mceTableApplyCellStyle",!1,{"vertical-align":"middle"}))),e.addCommand("JustifyBottom",(()=>e.execCommand("mceTableApplyCellStyle",!1,{"vertical-align":"bottom"})))})(e)}};function F(e){Array.from(e.getBody().querySelectorAll(".confluenceTable.fixed-table >tbody >tr >td, .confluenceTable.fixed-table >tbody >tr >th")).forEach((e=>{e.style.width=""}))}function z(){return N(s.a),{init(e){var t;e.on("copy",(()=>{!0===e.selection.isCollapsed()&&e.getBody().querySelectorAll("th[data-mce-selected],td[data-mce-selected]").length>1&&e.selection.select(e.selection.getNode())}),!0),e.on("newcell",(function(e){var t=e.node;"TD"===t.nodeName?(t.classList.add("confluenceTd"),t.classList.remove("confluenceTh")):"TH"===t.nodeName&&(t.classList.add("confluenceTh"),t.classList.remove("confluenceTd"))})),e.on("BeforeExecCommand",(function(t){if(t.command.startsWith("mceTable")){var n=e.selection.getNode().closest("table");if(n&&n.classList.contains("wysiwyg-macro")){var o=n.closest("th.confluenceTh, td.confluenceTd");o?e.selection.setCursorLocation(o):t.preventDefault()}}})),B(t=e),s.a.fn.updateTableModeInToolbar=L,R(t),j(e),O(e),E.a.get("is-dc-license")&&H.setup(e),y()?s()(window).one("rte-collab-ready",(()=>{F(e)})):s()(window).one("rte-ready",(()=>{F(e)}))}}}var U="numbers",_="numberingColumn",Q="data-snooker-col-series",W="data-snooker-locked-cols";function V(e){return"thead"===e.name||"tbody"===e.name||"tfoot"===e.name}function K(e){return function(e){for(var t=[],n=[e];n.length>0;){var o=n.pop();o&&(V(o)?(n.push(o.next),n.push(o.firstChild)):"tr"===o.name?(t.push(o),n.push(o.next)):n.push(o.next))}return t}(e.firstChild)}function G(e){for(var t=[],n=e.firstChild;n;)"td"!==n.name&&"th"!==n.name||t.push(n),n=n.next;return t}function Y(e,t,n){return n.indexOf(e)===t}function J(e,t,n){(e.attr("class")||"").split(" ").some((function(e){return e.toLowerCase()===_.toLowerCase()}))&&(t.isSeriesTable=!0,e.attr("contenteditable","false"),t.isResizable||e.attr("data-mce-resize","false"),t.lockedColumns.push(n))}function q(e){for(var t=P.options.get("advtable_value_series"),n=t?t[U]:void 0,o=!n||!1!==n.resizable,r=0;r<e.length;r++){var a=e[r];if("wysiwyg-macro"===a.attr("class"))void 0===a.attr("data-mce-resize")&&a.attr("data-mce-resize","false");else if(!a.attr(Q)){for(var i={isResizable:o,isSeriesTable:!1,lockedColumns:[]},l=K(a),s=0;s<l.length;s++)for(var c=0,d=G(l[s]),u=0;u<d.length;u++){var g=d[u];J(g,i,c),c+=parseInt(g.attr("colspan"),10)||1}if(i.isSeriesTable&&a.attr(Q,U),i.lockedColumns.length>0){var m=(a.attr(W)||"").split(",").map((function(e){return parseInt(e,10)})).concat(i.lockedColumns).filter(Y).sort();a.attr(W,m.join(","))}}}}function Z(e){return()=>{var t=P.getDoc().querySelectorAll(e);t.length>0&&Array.prototype.forEach.call(t,(e=>{e.setAttribute("data-mce-resize","false")}))}}function X(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ee{constructor(e){X(this,"userAgent",void 0),this.userAgent=e||window.navigator.userAgent}isFirefox(){return-1!==this.userAgent.indexOf("Firefox/")}notFirefox(){return!this.isFirefox()}isMSEdge(){return-1!==this.userAgent.indexOf("Edge/")}notMSEdge(){return!this.isMSEdge()}isIE(){return-1!==this.userAgent.indexOf("MSIE")||-1!==this.userAgent.indexOf("Trident/")||this.isMSEdge()}notIE(){return!this.isIE()}isChrome(){return-1!==this.userAgent.indexOf("Chrome/")}notChrome(){return!this.isChrome()}isSafari(){return-1!==this.userAgent.indexOf("Safari/")&&-1===this.userAgent.indexOf("Chrome/")}notSafari(){return!this.isSafari()}isPhantom(){return-1!==this.userAgent.indexOf("PhantomJS")}notPhantom(){return!this.isPhantom()}version(){if(this.isIE()){var e=this.userAgent.match(/MSIE\s([\d.]+)/)||this.userAgent.match(/rv:([\d.]+)/)||this.userAgent.match(/Edge\/([\d.]+)/);return parseInt(e[1])}return this.isChrome()?parseInt(this.userAgent.match(/Chrome\/([\d.]+)/)[1]):this.isSafari()?parseInt(this.userAgent.match(/Version\/([\d.]+)/)[1]):this.isFirefox()?parseInt(this.userAgent.match(/Firefox\/([\d.]+)/)[1]):0}friendlyName(){return this.isMSEdge()?"MSEdge":this.isIE()?"IE":this.isChrome()?"Chrome":this.isSafari()?"Safari":this.isFirefox()?"Firefox":void 0}}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=`${d.a.location.protocol}//${d.a.location.host}`,ae=["compat3x","atlassiantheme","auiwindowmanager","table","emotions","confluence","macroplaceholder","customtoolbar","insertwikimarkup","propertypanel","keyboardshortcuts","confmonospace","confcharmap","lists","conflist","tasklist","aePaste","aeTable","tablePasteFilter","pagelayoutplugin","iosediting","autoconvert","deletecommand","draggable","confluencesortabletablesplugin","textplaceholders","linkbrowser","insertfiles","tableAnalytics","aetextpattern","persist_scroll_position","confindentation","preserve-paragraph-formatting-on-delete","tableContentWrapper","statusmacro","macroNavigation","advtable","duplication-tags-removal"];function ie(){var e=new ee;return e.isChrome()&&96==e.version()}var le=()=>{var e,t,n={theme:"default"};return((e=new ee).isChrome()&&e.version()<80||e.isFirefox()&&e.version()<80)&&!d.a.QUnit&&0===m.a.get("remote-user").indexOf("testuser")&&(n=ne(ne({},n),{},{object_resizing:!1})),n=ne(ne(ne({},n),(t={table_default_attributes:{class:"confluenceTable"},table_default_styles:{},table_header_type:"cells",table_resize_bars:!0,table_use_colgroups:!0,table_column_resizing:"resizetable",advtable_value_series:{numbers:{update:!0,resizable:!1,generator:function(e){var t=e.prev?e.prev.count:0;if("tbody"===e.sectionType&&"td"===e.cellType){var n=t+1;return{value:n,count:n,classes:[_]}}return{count:t,classes:[_]}}}}},M("editor.table.clone.elements")&&(t.table_clone_elements="strong em b i font h1 h2 h3 h4 h5 h6 p div"),t)),{},{autoresize_min_height:"100%",width:"100%",height:"100%",document_base_url:`${re}${A.a}/`,plugins:ae.join(","),theme_advanced_buttons1:"formatselect,confimage,conf_macro_browser,code,customtoolbar,monospace,searchreplace,linkbrowserbutton",toolbar:!1,menubar:!1,skin:!1,statusbar:!1,table_toolbar:"",contextmenu:!1,selector:"textarea.tinymce-editor",body_class:"aui-theme-default mceContentBody wiki-content",popup_css:!1,content_css:!1,editor_css:!1,custom_undo_redo:!0,custom_undo_redo_levels:20,context_path:A.a,plugin_action_base_path:`${A.a}/plugins/tinymce`,editor_plugin_action_base_path:`${A.a}/plugins/editor/tinymce`,page_id:m.a.get("page-id"),draft_type:null,form_name:m.a.get("form-name"),space_key:encodeURI(m.a.get("space-key")),confluence_popup_width:620,confluence_popup_height:550,editor_id:"wysiwygTextarea",indent:!1,table_tab_navigation:!0,inline_boundaries:!1,indent_use_margin:!0,atlassian:!0,keep_values:!0,convert_urls:!0,relative_urls:!1,remove_script_host:!1,button_tile_map:!0,apply_source_formatting:!1,list_outdent_on_enter:!0,visual:!1,confluence_table_style:"confluenceTable",confluence_table_cell_style:"confluenceTd",confluence_table_heading_style:"confluenceTh",confluence_table_default_rows:4,confluence_table_default_cols:3,confluence_table_default_heading:!0,cleanup:!0,cleanup_on_startup:!0,fix_list_elements:!1,fix_table_elements:!0,valid_elements:"@[id|class|style|title|wysiwyg|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[*],strong/b,em/i,s,u,#p[align|user],-ol[type|compact],-ul[type|compact],li,br,img[imagetext|longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite|markup],-table[*],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope|contenteditable],#th[colspan|rowspan|width|height|align|valign|scope|contenteditable],caption,#div[*],span[*],-code,#pre[*],address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",extended_valid_elements:"img[*],time[class|datetime|contenteditable|onselectstart|unselectable|oncontrolselect]",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img.confluence-embedded-image",classes:"image-left"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img.confluence-embedded-image",classes:"image-center"},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img.confluence-embedded-image",classes:"image-right"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class"]},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"em",remove:"all",preserve_attributes:["class"]},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],removeformat:[{selector:"h1,h2,h3,h4,h5,h6,pre",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0,block:"*"},{selector:"address,article,b,big,blockquote,center,cite,code,date,dd,del,dfn,dl,dt,em,embed,font,footer,header,hgroup,i,ins,kbd,link,menu,nav,object,param,q,s,samp,script,section,small,strike,strong,style,sub,sup,time,tt,u,var",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"table",attributes:["cellpadding","cellspacing","border"],split:!1,expand:!1,deep:!0},{selector:":not(li)",attributes:["style","color","bgcolor","title","lang"],split:!1,expand:!1,deep:!0}]},forced_root_block:"p",allow_unsafe_link_target:!0,paste_remove_styles_if_webkit:!1,automatic_uploads:!1,allow_html_data_urls:!0,browser_spellcheck:!ie(),paste_data_images:!1,pad_empty_with_br:!0,text_patterns:!1,license_key:"T7LKB1E90F6BD64EFD0B5C0E64F8C484DAF8AA4E0BF872BC617DC0C04FFECB00"})},se=!1,ce="",de={},ue={},ge=()=>{if(se){var e=(()=>{for(var e={},t={name:ce,data:e},n=me.getEntriesByType("measure"),o=0;o<n.length;o++){var r=n[o],a=r.name;de[a]&&(e[`${a}.startTime`]=r.startTime,e[`${a}.duration`]=r.duration)}return t})();Object(C.b)("analytics",e),se=!1}};var me=d.a.performance,pe=e=>`${e}.start`,fe=e=>{if(me&&me.mark&&de[e]){se||(se=!0);var t=pe(e);me.mark(t)}},he=e=>{if(me&&me.mark&&de[e]){var t=pe(e);if(0!==me.getEntriesByName(t,"mark").length){var n=(e=>`${e}.end`)(e);me.mark(n),me.measure(e,t,n),ue[e]&&ge()}else p.a.error(`Calling debugTimeEnd for ${e} before debugTime`)}};function ve(e){fe(e),p.a.time(e)}function be(e){he(e),p.a.timeEnd(e)}var ye={createProfileForCommentEditor:function(){return{plugins:["searchreplace","confluenceimagedialog","autocompletemacro","confluencemacrobrowser","confluenceleavecomment","confluencewatch","autoresize"]}},createProfileForPageEditor:function(e){var t=["searchreplace","confluencedrafts","confluenceimagedialog","autocompletemacro","confluencemacrobrowser","flextofullsize","referrer"];return e&&e.versionComment&&t.push("confluenceversioncomment"),e&&e.notifyWatchers&&t.push("confluencenotifywatchers"),{plugins:t}},createProfileForTemplateEditor:function(){return{plugins:["searchreplace","confluenceimagedialog","autocompletemacro","confluencemacrobrowser","confluenceleavetemplate","flextofullsize","templateeditor"]}}},we=function(){return{renderUI:()=>({iframeContainer:c.tinymce.DOM.get("rte"),editorContainer:document.getElementById("wysiwyg")})}},Ce=n(18),Ae=n.n(Ce);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ee=()=>{void 0===c.AJS.Rte&&(c.AJS.Rte=Me({},v.Rte)),void 0===c.AJS.Rte.getEditor&&(c.AJS.Rte=Me(Me({},c.AJS.Rte),v.Rte))};function Te(e){return e.replace(/<ul\s+[^>]*\/(\s*)>/gi,"")}var De={Formatting:".rte-toolbar-group-formatting",Style:".rte-toolbar-group-style",Indentation:".rte-toolbar-group-indentation",Lists:".rte-toolbar-group-lists",Tasks:".rte-toolbar-group-task-lists",Justification:".rte-toolbar-group-justification",Links:".rte-toolbar-group-link",Table:".rte-toolbar-group-table",Insert:".rte-toolbar-group-insert",Undo:".rte-toolbar-group-undo",PageLayouts:"#page-layout-2-group",SearchReplace:".rte-toolbar-group-searchreplace",Help:".rte-toolbar-group-help"},Se=(e,t,n)=>{!1===t&&((e,t)=>{Array.prototype.forEach.call(c.document.getElementById(e).querySelectorAll(t),(e=>{e.style.display="none"}))})(e,n)};function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne,Le=!1,Be={_tinyMceHasInit:!1,_beforeInitCallbacks:[],_tinymcePluginInits:[],_settings:null,isInitComplete:()=>Be._tinyMceHasInit,isEditorActive:()=>!!(Be.isInitComplete()&&i.a&&i.a.activeEditor),onInit:()=>{Be._tinyMceHasInit=!0;var e=r.a.Rte.getEditor();if(e.getBody().classList.add("notranslate"),Object(C.b)("init.rte",{editor:e}),!1!==m.a.get("editor-auto-focus")){var t=document.getElementById("content-title");t&&""===t.value?t.focus():r.a.Rte.editorFocus(e)}else p.a.debug("Bootstrap: editor-auto-focus=false. Do not focus the editor automatically.")},addOnInitCallback:e=>{if("function"!=typeof e)throw new Error(`Attempt made to register an oninit callback that is not a function. Received: ${e}`);Be._tinyMceHasInit?e():Object(C.a)("init.rte",e)},addBeforeInitCallback:e=>{Be._beforeInitCallbacks.push(e)},addTinyMcePluginInit:e=>{Be._tinymcePluginInits.push(e)},preInitialise:e=>{Be._settings=e,Le&&(Le=!1,Be.initialise(Ne))},initialise:e=>{if(ve("confluence.editor.tinymce"),!Be._settings)return p.a.error("Bootstrap:initialise: No settings found. Has preInitialise been called?"),Le=!0,void(Ne=e);e=Oe({},e);var t,n,o,a,l=Oe({},Be._settings);r.a.Rte.isQuickEdit=e.isQuickEdit||!1,p.a.info(`Bootstrap:initialise: Initialising TinyMce version ${i.a.majorVersion}.${i.a.minorVersion}`),Be._beforeInitCallbacks.forEach((e=>{e(l)})),Object(C.b)("rte-pre-resolveplugins");for(var s=0,d=Be._tinymcePluginInits.length;s<d;s++)"function"==typeof Be._tinymcePluginInits[s]&&Be._tinymcePluginInits[s](l);!function(e){void 0===typeof Ae.a&&p.a.error("ERROR: could not find the TinyMCE language pack");var t=new RegExp(`${Ae.a.ctrl_key}\\+`,"g"),n=new RegExp(`${Ae.a.shift_key}\\+`,"g"),o=e=>e.replace(t,"⌘").replace(n,"⇧");for(var r in Ae.a){var a=Ae.a[r];if("object"==typeof a)for(var l in a)i.a.Env.os.isMacOS()&&(a[l]=o(a[l]));i.a.EditorManager.addI18n(`${e}.${r}`,Ae.a[r])}i.a.ScriptLoader.markDone(`${i.a.baseURL}/langs/${e}.js`),i.a.Env.os.isMacOS()&&Array.prototype.forEach.call(document.querySelectorAll("#rte-toolbar .toolbar-item, #rte-toolbar .dropdown-item, #rte-savebar .aui-button"),(e=>{var t=e.getAttribute("title"),n=e.dataset.tooltip;t&&e.setAttribute("title",o(t)),n&&(e.dataset.tooltip=o(n))}))}(l.locale),((e,t)=>{var n;if(!1!==t)for(n in t=t||{})t.hasOwnProperty(n)&&De[n]&&Se(e,t[n],De[n]);else c.document.getElementById(e).style.display="none"})("toolbar",e.toolbar),l.plugins=(t=l.plugins,n="string"==typeof e.plugins?e.plugins.split(","):e.plugins||[],o=e.excludePlugins||[],void 0===t?t:(a="string"==typeof t?t.split(","):t,n.forEach((e=>{a.indexOf(e)<0&&a.push(e)})),(a=a.filter((e=>o.indexOf(e)<0))).join(","))),l.setup=function(t){t.on("PreInit",(()=>{t.dom.loadCSS=function(){};var e=t.getElement();e.value=Te(e.value),function(e){P=e,e.parser.addNodeFilter("table",q),P.serializer.removeAttributeFilter("data-mce-resize"),e.on("SetContent",Z("table.confluenceTable table.confluenceTable:not([data-mce-resize])")),y()&&(Object(C.a)("rte-collab-ready editor-shared-drafts-published editor-shared-drafts-discarded",Z("table.wysiwyg-macro:not([data-mce-resize])")),Object(C.a)("rte-collab-ready",Z("table.confluenceTable table.confluenceTable:not([data-mce-resize])")),Object(C.a)("rte-collab-ready",(()=>{Array.prototype.forEach.call(P.getDoc().querySelectorAll("table.confluenceTable:not([data-snooker-col-series])"),(e=>{var t=e.querySelectorAll(".numberingColumn");t.length&&(e.setAttribute(W,"0"),e.setAttribute(Q,U),Array.prototype.forEach.call(t,(e=>{e.setAttribute("contenteditable","false"),e.setAttribute("data-mce-resize","false")})))}))})))}(t)})),t.on("GetContent",(e=>{"html"===e.format&&"<p><br></p>"===e.content&&(e.content="")})),e&&"function"==typeof e.onInitialise&&e.onInitialise(t),Object.defineProperty(t,"settings",{get(){return console.warn("DEPRECATED - tinymce.activeEditor.settings is deprecated, use tinymce.activeEditor.options instead"),this.options}})},l.init_instance_callback=function(e){var t=y();Ee(),i.a.FocusManager.isEditorUIElement=function(e){for(var t=e,n=!1;t;){if("rte-toolbar"===t.id){n=!0;break}t=t.parentElement}return n};try{var n=l.contentCssTags,o=e.getDoc().querySelectorAll("head");if(void 0===o[0])throw"No editor <head>";o[0].innerHTML=n+o[0].innerHTML}catch(e){}r.a.Rte.BootstrapManager.onInit(e),b.editorResetContentChanged(),r.a.Rte.getEditorFrame().setAttribute("tabindex",100),t&&e.on("AddUndo",(t=>{var n={level:null,lastLevel:null,originalEvent:t};return e.dispatch("change",n)})),be("confluence.editor.tinymce"),Object(C.b)("rte-ready"),t&&Object(C.b)("rte-begin-collab-editing"),w()&&e.getBody().classList.add("page-edit")},i.a.IconManager.add("default",{icons:{}}),i.a.init(l)}},Re=Be;var Pe=()=>{void 0!==c.AJS.Rte?void 0===c.AJS.Rte.Content&&(c.AJS.Rte.Content=b):p.a.error("AJS.Rte is supposed to be defined")};function $e(e){for(var t=e.split("."),n=window[t.shift()];void 0!==n&&t.length;)n=n[t.shift()];return n}function He(e,t,n,o){return"function"==typeof o?s()(e).bind(t,n,o):s()(e).bind(t,n)}function Fe(e,t,n){return s()(e).unbind(t,n)}function ze(e,t,n){return s()(e).trigger(t,n)}var Ue=function(e,t){return"<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?s()(e,t||c.document):s()(`<div>${e}</div>`,t||c.document).contents()},_e=function(e,t){e.is("ul.inline-task-list")?t.each((function(){var e=s()(this);e.attr("data-inline-task-id")||e.attr("data-inline-task-id","")})):t.removeAttr("data-inline-task-id").removeAttr("data-pasted-task")},Qe=function(e){var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return"LI"===t.nodeName&&1===t.childNodes.length&&"BR"===t.firstChild.nodeName},We=function(e,t){if(!t.collapsed||0!=t.startOffset)return!1;var n=s()(t.startContainer).closest("ol, ul",e.getBody());if(0===n.length)return!1;var o=new c.tinymce.dom.TreeWalker(t.startContainer,n[0]).prev(!0);return void 0===o||s()(o).is("li")},Ve=function(e){var t=e.filter("ol,ul").length;return e.length===t},Ke=function(e,t,n){var o=null;return Ge.forEach((r=>{if(r.shouldInsert(e,t,n))return o=r,!1})),o},Ge=[{shouldInsert(e,t,n){var o=Qe(t);return(o=o&&Ve(n))&&n.children("li").length>0},insert(e,t,n){var o=s()(3===t.startContainer.nodeType?t.startContainer.parentNode:t.startContainer),r=n.children();e.undoManager.beforeChange(),e.undoManager.add(),_e(o.parent(),r),o.replaceWith(r),e.selection.select(r.last()[0],!0),e.selection.collapse(),e.undoManager.add()}},{shouldInsert(e,t,n){var o=We(e,t);return(o=o&&Ve(n))&&n.children("li").length>0},insert(e,t,n){var o=s()(t.startContainer).closest("li",e.getBody()),r=n.children();e.undoManager.beforeChange(),e.undoManager.add(),_e(o.parent(),r),o.before(r),e.selection.select(o[0],!0),e.selection.collapse(!0),e.undoManager.add()}},{shouldInsert:(e,t,n)=>function(e,t){if(!t.collapsed)return!1;if(3===t.startContainer.nodeType&&t.startOffset!=t.startContainer.nodeValue.length)return!1;if(1===t.startContainer.nodeType&&t.startOffset!=t.startContainer.childNodes.length)return!1;var n=s()(t.startContainer).closest("ol, ul",e.getBody());if(0===n.length)return!1;var o=new c.tinymce.dom.TreeWalker(t.startContainer,n[0]).next(!0);return void 0===o||s()(o).is("li")}(e,t)&&n.length===n.filter("ol,ul").length&&n.children("li").length>0,insert(e,t,n){var o=s()(t.startContainer).closest("li",e.getBody()),r=n.children();e.undoManager.beforeChange(),e.undoManager.add(),_e(o.parent(),r),o.after(r),e.selection.select(r.last()[0],!0),e.selection.collapse(!1),e.undoManager.add()}},{shouldInsert(e,t,n){var o=n.length>1;return o=(o=(o=o&&!Qe(t))&&We(e,t))&&function(e){var t=e.filter("ol,ul"),n=e[e.length-1];return 1===t.length&&t[0]===n}(n),o},insert(e,t,n){var o=s()(t.startContainer).closest("li",e.getBody());e.undoManager.beforeChange(),e.undoManager.add(),_e(o.parent(),n.children("li"));var r=s()("<li></li>").append(n);o.before(r),e.undoManager.add()}},{shouldInsert:(e,t,n)=>!t.collapsed&&(!!s()(t.commonAncestorContainer).is("table.confluenceTable > tbody, table.confluenceTable > tbody > tr")&&n.is("table:not(.wysiwyg-macro)")),insert(e,t,n){var o=n.children("tbody").length>0?n.children("tbody").children("tr"):n.children("tr"),r=o.children("td, th"),a=s()(".mceSelected",e.getDoc()),i=a.parent();function l(e,t){for(var n=e.shift(),o=t.shift();n&&o;n=e.shift(),o=t.shift())s()(o).html(s()(n).html())}if(e.undoManager.beforeChange(),e.undoManager.add(),1===i.length)l(s.a.makeArray(r),s.a.makeArray(a));else for(var c=s.a.makeArray(o),d=s.a.makeArray(i),u=c.shift(),g=d.shift();u&&g;u=c.shift(),g=d.shift())l(s.a.makeArray(s()(u).children()),s.a.makeArray(s()(g).children()));e.selection.setRng(t),e.undoManager.add()}},{shouldInsert:(e,t)=>s()(t.startContainer).closest("[data-macro-body-type='PLAIN_TEXT']").length>0,insert(e,t,n){n.raw&&e.selection.setContent(n.raw())}},{shouldInsert(e,t,n){var o=s()(t.startContainer).closest("table").length>0,r=1===n.length&&n.is("table.wysiwyg-macro");return o&&r},insert(e,t,n){e.execCommand("mceInsertContent",!1,n[0].outerHTML)}},{shouldInsert(e,t,n){var o=s()(t.startContainer).closest("table").is("table.wysiwyg-macro"),r=1===n.length&&n.is("table.confluenceTable");return o&&r},insert(e,t,n){e.execCommand("mceInsertContent",!1,n[0].outerHTML)}}],Ye={insert:function(e,t,n){var o=e.selection.getRng();if(o){var r,a,i,l=(r=e,a=t.content,i={content:a,format:"html",selection:!0,set:!0},r.dispatch("BeforeSetContent",i),i.content),s=Ue(l,e.getDoc());s.raw=!!n&&function(){return n};var c=Ke(e,o,s);c?(c.insert(e,o,s),e.dispatch("SetContent",{content:l,format:"html",selection:!0,set:!0}),e.addVisual()):(e.selection.isCollapsed()||e.undoManager.ignore((()=>{e.execCommand("mceDelete",!1,null)})),t.wasProcessed=!0,e.execCommand("mceInsertContent",!1,t))}},parse:Ue},Je=function(e){e.parentNode.removeChild(e)},qe=function(e){return function(t){var n=t.classList;n.remove.apply(n,e),""===t.className&&t.removeAttribute("class")}},Ze=function(e,t,n){c.tinymce.util.Tools.each(e.querySelectorAll(t),n)};var Xe={apply:function(e,t){!function(e){var t;Ze(e,"img:not([data-emoticon-name]):not([data-emoji-id]):not([data-hipchat-emoticon]):not(.editor-inline-macro):not(.confluence-embedded-image):not(.template-constiable)",(t=["confluence-embedded-image","confluence-external-resource"],function(e){var n=e.classList;n.add.apply(n,t)}))}(e),function(e){Ze(e,"span.Apple-style-span",qe(["Apple-style-span"]))}(e),function(e){Ze(e,"br.Apple-interchange-newline",Je)}(e),function(e){Ze(e,"meta",Je)}(e),function(e,t){Ze(e,"ul.inline-task-list > li[data-inline-task-id]",(n=>{var o,r,a=n.getAttribute("data-inline-task-id"),i=c.tinymce.util.Tools.grep(t.querySelectorAll(`li[data-inline-task-id="${a}"]`),(r=e,o=function(e){return function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(e,r)},function(e){return!o(e)}));i.length>0&&n.setAttribute("data-inline-task-id","")}))}(e,t),function(e){var t;Ze(e,".mceSelected",qe(["mceSelected"])),Ze(e,"[data-mce-selected]",(t="data-mce-selected",function(e){e.removeAttribute(t)}))}(e),function(e){var t=m.a.get("base-url");Ze(e,`a:not([data-base-url='${t}'])[data-base-url]`,(e=>{for(var n=e.attributes.href?e.attributes.href.value:t;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);e.setAttribute("href",n)}))}(e)}},et=function(e){return s()("<br>").add(e.contents())},tt=function(e){return(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE)&&s.a.trim(e.textContent)},nt=function(e){var t=!1;return e.parent().contents().each((function(){if(tt(this))return this===e[0]&&(t=!0,!1)})),t},ot=function(e){var t=e.attr("style"),n=s()("<p></p>").append(e.contents());t&&n.attr("style",t),e.replaceWith(n)},rt=function(e){var t=e.prev("p");t.length?(t.append(et(e)),e.remove()):nt(e)?ot(e):e.replaceWith(et(e))},at=function(e,t){var n=s()(`<table class="wysiwyg-macro" data-macro-name="${e}" data-macro-body-type="RICH_TEXT"><tbody><tr><td class="wysiwyg-macro-body"></td></tr></tbody></table>`);return n.find(".wysiwyg-macro-body").append(t),n},it=function(e){return!e.text()&&!e.find("img").length},lt=ot,st=[function(e){e.find(".expand-container").replaceWith((function(){var e=s()(this).find(".expand-content").first().contents();return e.length?at("expand",e):s()("")}))},function(e){e.find("span:empty").remove()},function(e){e.find("p + br").remove()},function(e){var t=!1;e.find("div:not(.content-wrapper)").each((function(){var e=s()(this);it(e)?(e.remove(),t=!0):e.find("div, p, pre").length?e.replaceWith(e.contents()):(t?lt(e):rt(e),t=!1)}))}];var ct={repair:function(e){var t=s()("<div></div>").html(e);return st.forEach((e=>{e(t)})),t.html()}},dt=[{repair(e){var t=/(<td.*<\/td>)<br class="Apple-interchange-newline">/.exec(e);return t?`<table class="confluenceTable"><tbody><tr>${t[1]}</tr></tbody></table>`:e}},{repair(e){var t=/(<tr.*<\/tr>)<br class="Apple-interchange-newline">/.exec(e);return t?`<table class="confluenceTable"><tbody>${t[1]}</tbody></table>`:e}}],ut=function(e){return e?(dt.forEach((t=>{e=t.repair(e)})),e):e},gt={apply:function(e){return e=function(e){return ct.repair(e)}(e=ut(e))},repair:ut},mt=(e,t)=>(i.a.util.Tools.each(t,(t=>{e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])})),e),pt=" ",ft=e=>{var t=!1;return e=e.replace(/^[\u00a0 ]+/,""),i.a.util.Tools.each([/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[.)][ \u00a0]/,/^[A-Z]{1,2}[.)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],(n=>{if(n.test(e))return t=!0,!1})),t},ht=(e,t,n,o)=>{var r={},a=e.dom.parseStyle(o);i.a.util.Tools.each(a,((e,a)=>{switch(a){case"mso-list":var i=/\w+ \w+([0-9]+)/i.exec(o);i&&(n._listLevel=parseInt(i[1],10)),/Ignore/i.test(e)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":a="text-align";break;case"vert-align":a="vertical-align";break;case"font-color":case"mso-foreground":a="color";break;case"mso-background":case"mso-highlight":a="background";break;case"font-weight":case"font-style":return void("normal"!==e&&(r[a]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void n.remove()}0!==a.indexOf("mso-comment")?0!==a.indexOf("mso-")&&t&&t[a]&&(r[a]=e):n.remove()})),/(bold)/i.test(r["font-weight"])&&(delete r["font-weight"],n.wrap(new i.a.html.Node("b",1))),/(italic)/i.test(r["font-style"])&&(delete r["font-style"],n.wrap(new i.a.html.Node("i",1)));var l=e.dom.serializeStyle(r,n.name);return l||null},vt=(e,t)=>{var n,o="";o&&(n=i.a.util.Tools.makeMap(o.split(/[, ]/))),t=mt(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,pt],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,(e,t)=>t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(pt):""]]);var r=i.a.html.Schema({valid_elements:"-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody",valid_children:"-li[p]"});i.a.util.Tools.each(r.elements,(e=>{e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))}));var a=i.a.html.DomParser({},r);a.addAttributeFilter("style",(t=>{for(var o,r=t.length;r--;){var a;(o=t[r]).attr("style",ht(e,n,o,o.attr("style"))),"span"!==o.name||!o.parent||null!==(a=o.attributes)&&void 0!==a&&a.length||o.unwrap()}})),a.addAttributeFilter("class",(e=>{for(var t,n,o=e.length;o--;)n=(t=e[o]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)})),a.addNodeFilter("del",(e=>{for(var t=e.length;t--;)e[t].remove()})),a.addNodeFilter("a",(e=>{for(var t,n,o,r=e.length;r--;)if(n=(t=e[r]).attr("href"),o=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||o){if(o&&!/^_?(?:toc|edn|ftn)/i.test(o)){t.unwrap();continue}t.attr({href:n,name:o})}else t.unwrap()}));var l=a.parse(t);return(e=>{for(var t,n,o=1,r=e=>{var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=r(e)}while(e=e.next);return t},a=(e,t)=>{if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!a(e,t))return!1}while(e=e.next);return!0},l=e=>{if(e._listIgnore)e.remove();else if(e=e.firstChild)do{l(e)}while(e=e.next)},s=(e,r,s)=>{var c,d,u,g=e._listLevel||o;(g!==o&&(g<o?t&&(t=null===(c=t.parent)||void 0===c?void 0:c.parent):(n=t,t=null)),t&&t.name===r)?t.append(e):(n=n||t,t=new i.a.html.Node(r,1),s>1&&(null===(u=t)||void 0===u||u.attr("start",""+s)),e.wrap(t));e.name="li",g>o&&n&&(null===(d=n.lastChild)||void 0===d||d.append(t)),o=g,l(e),a(e,/^\u00a0+/),a(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),a(e,/^\u00a0+/)},c=[],d=e.firstChild;null!=d;)if(c.push(d),null!==(d=d.walk()))for(;void 0!==d&&(null===(u=d)||void 0===u?void 0:u.parent)!==e;){var u,g;d=null===(g=d)||void 0===g?void 0:g.walk()}for(var m=0;m<c.length;m++)if("p"===(e=c[m]).name&&e.firstChild){var p=r(e);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(p)){s(e,"ul");continue}if(ft(p)){var f=/([0-9]+)\./.exec(p),h=1;f&&(h=parseInt(f[1],10)),s(e,"ol",h);continue}if(e._listLevel){s(e,"ul",1);continue}t=null}else n=t,t=null})(l),t=i.a.html.Serializer({validate:false},r).serialize(l)},bt=(e,t)=>{var n=(e=>/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs-internal-guid-/.test(e))(t),o=n?((e,t)=>vt(e,t))(e,t):t;return o};function yt(e){var t={repair:gt.repair,parse:Ye.parse},n=null;e.on("PastePreProcess",(n=>{n.content=bt(e,n.content),n.content=gt.apply(n.content),ze(c.document,"prePaste",[t,n])})),e.on("PastePostProcess",(n=>{Xe.apply(n.node,e.getBody()),ze(c.document,"postPaste",[t,n])})),e.on("BeforeExecCommand",(t=>{var o=t.command,r=t.value;"mceInsertContent"===o&&r&&!0===r.paste&&!r.wasProcessed&&(t.preventDefault(),Ye.insert(e,r,n))})),e.on("paste",(e=>{n=null;var t=function(e){return(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(?:\r\n|\r|\n)/g,"<br />")}(e.clipboardData.getData("text/plain"));n=t}),!0)}var wt,Ct=()=>{var e,t=c.tinymce.activeEditor,n=xt();t.focus(!1);var o=t.selection.getRng();e=o&&o.cloneRange&&"function"==typeof o.cloneRange?o.cloneRange():o.duplicate&&o.duplicate()||o,wt={scrollX:n.scrollX,scrollY:n.scrollY,range:e}},At=()=>{var e=c.tinymce.activeEditor.selection,t=c.tinymce.activeEditor.getWin();wt&&(Mt(wt),t.focus(),e.setRng(wt.range)),wt=null},xt=()=>{var e=c.tinymce.DOM.getViewPort(c.tinymce.activeEditor.getWin());return{scrollX:e.x,scrollY:e.y}},Mt=e=>{e&&c.tinymce.activeEditor.getWin().scrollTo(e.scrollX,e.scrollY)},kt={storeBookmark:Ct,restoreBookmark:At,getScroll:xt,restoreScroll:Mt},Et=n(21),Tt=n.n(Et);function Dt(){return{component:function(e){var t=new r.a.Dialog(e);return e=e||{},e=s.a.extend({},{keypressListener:n=>{if(27===n.keyCode)p.a.debug("dialog.js: escape keydown caught"),s()(".aui-dropdown",t.popup.element).is(":visible")||("function"==typeof e.onCancel?e.onCancel():t.hide());else if(13===n.keyCode){if(p.a.debug("dialog.js: enter keydown caught"),!s()(".aui-dropdown",t.popup.element).is(":visible"))"textarea"!=(n.target.nodeName&&n.target.nodeName.toLowerCase())&&"function"==typeof e.onSubmit&&setTimeout(e.onSubmit)}},width:865,height:530},e),c.document.addEventListener("hideLayer",((n,o,r)=>{"popup"==o&&r==t&&"function"==typeof e.onCancel&&e.onCancel()})),t},initialiser:function(e){Object(C.a)("show.dialog",((e,t)=>{var n,o=m.a.get("page-id"),a=m.a.get("space-key"),i=m.a.get("editor-mode"),l=m.a.get("new-page");r.a.EventQueue=r.a.EventQueue||[],r.a.EventQueue.push({name:t.dialog.id,properties:(n={},o&&(n.pageid=o),a&&(n.spacekey=a),i&&(n.editormode=i),l&&(n.newpage=l),n)})})),c.document.addEventListener("showLayer",((t,n,o)=>{c.Confluence.runBinderComponents(),"popup"==n&&o&&(t=>{var n,o=e(t);if(!o.attr("data-lasttab-override")){o.attr("data-tab-default")&&(n=o.attr("data-tab-default"));var r=c.Confluence.storageManager(o.attr("id")),a=r.getItem("last-tab"),i=null!=a?a:n;i&&e(`.page-menu-item:visible:eq(${i}) button`,o).click(),o.attr("data-lasttab-bound")||(e(".page-menu-item",o).each(((t,n)=>{e(n).click((()=>{r.setItem("last-tab",t)}))})),o.attr("data-lasttab-bound","true"))}})(o.element)})),r.a.Dialog.prototype.overrideLastTab=()=>{e(this.popup.element).attr("data-lasttab-override","true")},r.a.Dialog.prototype.addHelpText=(t,n)=>{if(t){var o=t;n&&(o=Tt()(t).fill(n).toString());var r=this.page[this.curpage];r.buttonpanel||r.addButtonPanel();var a=e("<div class='dialog-tip'></div>").html(o);r.buttonpanel.append(a),e("a",a).click((()=>{var e=window.open(this.href,"_blank");return e&&e.focus(),e&&e.opener&&(e.opener=null),!1}))}},r.a.Dialog.prototype.getTitle=()=>e(`#${this.id}.dialog-components:visible h2`).text(),r.a.Dialog.prototype.isVisible=()=>e(`#${this.id}`).is(":visible")}}}var St=56,It=51,Ot=20;function jt(){return{init:e=>{e.on("init",(()=>{e.windowManager=Nt(e)}))},getInfo:()=>({longname:"AUIWindowManager",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Nt(e){var t=new c.tinymce.util.Dispatcher,n=[],o={},r=0,a=e.windowManager,i=(i,s)=>{if(i.title===e.translate("Accessibility Checker"))return a.open(i,s);l(i=i||{}),(s=v(s=s||{})).mce_width=i.width,s.mce_height=i.height,s.mce_auto_focus=i.auto_focus,t.dispatch("open",{t:{},settings:i,params:s});var d=i.height;i.name&&(d+=St),(s.cancelLink||s.buttons)&&(d+=It),d+=2*Ot,i.popup&&(d+=8);var p=i.id||c.tinymce.DOM.uniqueId(),h=(new Dt).component({width:i.width,height:d,id:p,onCancel:()=>{h.hide().remove()}});i.name&&h.addHeader(e.translate(i.name)),u(h,s,p),i.file=i.file||i.url,i.file&&(i.file=i.file),g(h,i,s,p),s.helpLink&&f(h,s.helpLink,s.helpName||"",p),s.hintText&&m(h,s.hintText,p);var b={id:p,settings:i,params:s,dialog:h};return n.push(b),o[p]=b,r++,Ct(),h.show(),null!=h.takeFocus&&h.takeFocus(),p},l=e=>{e.width=parseInt((e.width||400).toString(),10),e.height=parseInt((e.height||250).toString(),10),e.resizable=!1,null==e.popup&&(e.popup=!0),e.popup&&null!=e.content&&(e.popup=!1),e.scrollbars?e.scrollbars="yes":e.scrollbars="no"},u=(t,n,o)=>{if(n.buttons)for(var r=0;r<n.buttons.length;r++){var a=n.buttons[r];t.addButton(e.translate(`${a.label}`),a.action)}n.cancelLink&&t.addCancel(e.translate("auiwindowmanager.cancel"),(()=>c.tinymce.activeEditor.windowManager.close(o)))},g=(e,t,n,o)=>{var r=b(o),a=`panel_${r}`;t.popup?(e.addPanel(a,s()(`<iframe id="${r}" width="100%" height="${t.height}px" frameborder="0" name="auidialogiframe" src="${t.file}" scrolling="${t.scrollbars}"></iframe>`),n.cssClass),e.takeFocus=()=>{s()(`#${r}`).focus()}):(null==t.content?(e.addPanel(a,s()(`<div id="${r}"/>`),n.cssClass),s()(`#${r}`).load(t.file)):e.addPanel(a,s()(`<div id="${r}">${t.content}</div>`),n.cssClass),e.takeFocus=()=>{var e=s()(`#${r}:input`);if(e.length)s()(e[0]).focus();else{var t=s()(`#${r} .button-panel button`);t.length&&s()(t[0]).focus()}}),e.gotoPanel(0,0)},m=(e,t,n)=>{var o=s()("<div></div>").addClass("dialog-tip");o.text(c.tinymce.activeEditor.translate(`${t}`)),s()(`#${n} .dialog-button-panel`).append(o)},f=(e,t,n,o)=>{var r=s()("<div></div>").addClass("dialog-help-link");r.load(`${A.a}/plugins/tinymce/helplink.action`,{linkUrlKey:t,linkNameKey:n||""}),s()(`#${o} .dialog-components .dialog-title`).prepend(r)},h=(e,t)=>{for(var o=0;o<n.length;o++){var r=n[o];r.id!=e&&s()(`${r.id} .dialog-button-panel`).toggle(t)}},v=e=>(e.inline=void 0,e.cssClass||(e.cssClass="tinymce-auidialog"),0!=e.cancelLink&&(e.cancelLink=!0),e),b=e=>`content_${e}`,y=e=>`content_busy_${e}`;return{alert:(e,t,n)=>{if("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."!==e){var o=i({content:`<p>${e}</p>`,width:500,height:160,popup:!1,title:"",buttons:[],body:{type:"panel",items:[]}},{buttons:[{label:"auiwindowmanager.ok",action:function(){c.tinymce.activeEditor.windowManager.toggleOtherDialogs(o,!0),c.tinymce.activeEditor.windowManager.close(o),t&&t.call(n||d.a)}}],cancelLink:!1,cssClass:"tinymce-auidialog-alert"});h(o,!1)}},close:(e,t)=>{var a,i,l="";("string"==typeof e?l=e:t?l=t:(a=n.pop())&&(l=a.id),o[l])?(r--,null===(i=a=o[l])||void 0===i||i.dialog.remove(),o[l]=null,p.a.debug(`Dialog closed, now ${r} dialogs open`),c.tinymce.activeEditor.focus(),At()):p.a.error(`Couldn't find id ${l} in dialogs array so dialog is not closed.`)},confirm:(t,n,o,r)=>{r=r||d.a,null==n||n.call(o||d.a,r.confirm(this._decode(e.translate(t))))},createBusyContentId:y,createContentId:b,createDialogButtons:u,createDialogContent:g,createHelpLink:f,createHintText:m,createInstance:(e,t,n,o,r,a)=>new(c.tinymce.resolve(e))(t,n,o,r,a),initialiseSettings:l,logMCESelection:e=>{var t=c.tinymce.activeEditor.selection;p.a.debug("******************************"),p.a.debug(`Logging TinyMCE selection title:    ${e}`),p.a.debug("Bookmark:"),p.a.debug(t.getBookmark());var n=s()(t.getRng().startContainer).text()||s()(t.getRng().startContainer.parentNode).text();p.a.debug(`Range: ${n}`),p.a.debug(t.getRng())},open:i,openUrl:()=>{var e=()=>{};return{block:e,unblock:e,close:e,sendMessage:e}},resizeBy:()=>{},setBusy:(e,t)=>{var n=o[e],r=`#${y(e)}`,a=`#${b(e)}`,i=s()(a),l=s()(r);if(n)if(t){var d=s()(a);d.hide();var u=d.parent(),g=s()(r,u);g.length||(u.append(s()(`<div id="${r}" class="spinner"></div>`)),g=s()(r,u),c.Raphael.spinner(g[0],50,"#666")),s()(".button-panel button",s()(`#${e}`)).each(((e,t)=>{s()(t).prop("disabled",!0)})),s()(g[0]).show()}else l.length&&l.hide(),s()(".button-panel button",s()(`#${e}`)).each(((e,t)=>{s()(t).prop("disabled",!1)})),i.show()},toggleOtherDialogs:h}}var Lt=n(9),Bt="autocomplete-container",Rt="autocomplete-trigger",Pt="autocomplete-search-text",$t={},Ht=e=>(t,n,o)=>{var r=null!=o&&"object"!=typeof o,a=null!=o?r?` = ${o}`:" >":"";p.a.debug(`${e} - ${t} : ${n||null}${a}`),o&&!r&&p.a.debug(o)},Ft=function e(t,n){var o=Ht("Autocompleter.Control"),r={},a=t.selection,i=a.getRng();if(!i)return null;var l=i.startOffset,d=i.startContainer,u=d.nodeValue,g=n.leadingChar,m=t.getDoc(),p=n.backWords||0,f=n.insertedFromMenu||!1,h=$t[g||"["],v=h&&void 0!==h.preventStartNodes?h.preventStartNodes:"div.code, a[href], img, pre";if(s()(`#${Bt}`,m).length)return o("init","Autocomplete already exists, returning null."),null;r.backWords=p,r.maxResults=n.maxResults||10,null==u&&i.collapsed&&l&&d.childNodes[l-1]&&(l=(u=(d=d.childNodes[l-1]).nodeValue)&&u.length||0);var b="";if(null!=u){b=`${u}`.substring(0,l);for(var y=d.previousSibling;y&&3===y.nodeType;)b=y.nodeValue+b,y=y.previousSibling}var w;if(!p&&b&&!function(e,t){for(var n=0,o=t.length;n<o;n++)if(t[n].test(e))return!0;return!1}(b+g,[/([("'<(\u201c\u2018]\[|[\ufeff\u200b\u2014\s\xa0].)$/,/(\([^!])$/,/(\/\/)$/]))return o("init","Cursor is in wrong word location to start autocomplete, returning null."),null;if(s()(d).closest(v).length)return o("init","Cursor is in wrong node to start autocomplete, returning null."),null;if(c.Confluence.PropertyPanel&&c.Confluence.PropertyPanel.current&&(c.Confluence.PropertyPanel.shouldCreate=!1,c.Confluence.PropertyPanel.destroy()),g||null!=u||(o("init","No text available for suggestion, range is",i),u=""),r.getContainer=function(){return s()(`#${Bt}`,m)},i.collapsed&&p&&u){var C=function(e,t,n){var o,r;function a(e,t,n){!t.global&&(t=new RegExp(t.source,`g${t.ignoreCase?"i":""}${t.multiline?"m":""}`)),null==n?n=e.length:n<0&&(n=0);for(var o,r=e.substring(0,n+1),a=-1,i=0;null!=(o=t.exec(r));)a=o.index,t.lastIndex=++i;return a}for(var i=0;i<n;i++)for(t=a(o=e.nodeValue.substring(0,t),/\s+/,t);-1==t;){if(!(r=e.previousSibling)||3!==r.nodeType){i=n;break}e=r,(o=r.nodeValue)&&(t=a(o,/\s+/,o.length))}return{node:e,offset:t+1}}(d,l,p),A=a.getRng();A&&(A.setStart(C.node,C.offset),A.setEnd(d,l),a.setRng(A))}w=a&&a.getNode()&&a.getNode().classList.contains("placeholder-inline-tasks")?"":a.getContent({format:"text"}).replace("\n",""),o("init","suggestionHtml",w);var x=(e,t,n)=>{var o=c.document.createElement(e);return t&&o.setAttribute("id",t),n&&o.appendChild(c.document.createTextNode(n)),o},M=x("span",Bt);n.classNames&&("string"==typeof n.classNames?M.classList.add(...n.classNames.split(" ")):Array.isArray(n.classNames)&&M.classList.add(...n.classNames)),g&&M.appendChild(x("span",Rt,g));var k=x("span",Pt,c.AJS.Rte.HIDDEN_CHAR);M.appendChild(k),a.setNode(s()(M)[0]);var E=r.getContainer();r.previousSearchText="",r.settings=h,!1===h.cache||h.cacheManager?!1!==h.cache||h.cacheManager||(h.cacheManager={get:s.a.noop,put:s.a.noop}):h.cacheManager=new c.AJS.Confluence.localStorageCacheManager(h.ch);var T=s()(`#${Pt}`,r.getContainer()),D=s()(m.createElement("span")).text(w||c.AJS.Rte.HIDDEN_CHAR);T.empty().append(D),a.select(D[0],!0),a.collapse();var S,I,O=function(e){if(r.onBeforeKey&&!r.onBeforeKey(e,r.text()))return c.tinymce.dom.Event.cancel(e),o("before",`blocked by onBeforeKey: ${e.keyCode}`),!1},j=function(e){var t=a.getRng();if(t){var n=r.getContainer(),i=t.startContainer,l=i.parentNode;3===i.nodeType&&l&&(l=l.parentNode);var s=l?l.parentNode:null,d=s?s.parentNode:null,u=l!==n[0]&&s!==n[0]&&d!==n[0];if(27===e.keyCode||u)o("after","dying because of: "+(u?"outside search span":"escape pressed")),r.die();else if(r.onAfterKey&&!r.onAfterKey(e,r.text()))return c.tinymce.dom.Event.cancel(e),o("after",`blocked by onAfterKey: ${e.keyCode}`),!1}},N=function(e){if(r.onKeyPress&&!r.onKeyPress(e,r.text()))return c.tinymce.dom.Event.cancel(e),o("press",`blocked by onKeyPress: ${e.keyCode}`),!1},L=function(e){r.getContainer()[0]!=e.target.parentNode&&(o("click","Clicked outside of autocomplete, closing."),r.die())};t.on("KeyDown",O,!0),t.on("KeyUp",j,!0),t.on("KeyPress",N,!0),t.on("Click",L,!0),r.word="",n.keepAlias?o("init","No suggestion based on previous or selected text"):r.word=w,c.AJS.Rte.showElement(E[0]),S=c.tinymce.DOM.getPos(E[0]),I=E.height(),r.left=S.x,r.top=S.y+I,r.text=function(e){var t=s()(`#${Pt}`,r.getContainer());return null!=e?(t.text(e),this):(e=c.AJS.escapeEntities(t.text())).replace(c.AJS.Rte.HIDDEN_CHAR,"")},r.plainText=function(e){var t=s()(`#${Pt}`,r.getContainer());return null!=e?(t.text(e),this):(e=t.text()).replace(c.AJS.Rte.HIDDEN_CHAR,"")};var B=function(t,n){var o=r.getContainer();return e.replaceWithTextAndGetRange(o,t,n)};return r.replaceWithSelectedSearchText=function(){var e=r.text();return o("replaceWithSelectedSearchText",e),B(e,!1),e},r.die=function(e){if(r.dying)o("die","Already dying, returning.");else{if(r.dying=!0,c.Confluence.PropertyPanel&&(c.Confluence.PropertyPanel.shouldCreate=!0),r.getContainer().length){o("die","Tearing down autocomplete, cleaning up autocompleter");var a=(e||n.backWords||f?"":r.settings.ch)+r.text();i=B(a,!0)}setTimeout((()=>{o("die","Removing autocomplete-control keyboard listeners."),t.off("KeyDown",O),t.off("KeyUp",j),t.off("Click",L),t.off("KeyPress",N)}),1),c.AJS.Rte.unbindScroll("autocomplete"),s()(c.document).unbind("click.autocomplete-outside"),this.onDeath&&this.onDeath()}},c.AJS.Rte.bindScroll("autocomplete",(()=>{o("scrolling:"),c.AJS.Rte.isAnyPartShown(E)?r.onScroll():r.die()})),s()(c.document).bind("click.autocomplete-outside",(e=>{var t=e.srcElement&&"rte-insert-date"===e.srcElement.id;s()(e.target).closest("#autocomplete-dropdown, .aui-datepicker-dialog, .ui-datepicker-header").length||t||r.die()})),c.AJS.Rte.getEditor().on("BeforeExecCommand",(e=>{"mceConfSavePage"==e.command&&r.die()})),r.update=function(e){Ct(),B("",!0),this.settings.update(this,e)},r.removeSpan=function(){r.getContainer().remove()},r};Ft.removeOrphanedControl=function(){var e=s()(c.AJS.Rte.getEditor().getDoc()),t=e.find(`#${Bt}`);if(!t.length)return null;var n=e.find(`#${Rt}`).text(),o=e.find(`#${Pt}`).text();return Ft.replaceWithTextAndGetRange(t,o,!1),{leadingChar:n,content:o}},Ft.replaceWithTextAndGetRange=function(e,t,n){if(e.length){t=t||"",n=n||!t;var o=c.AJS.Rte.getEditor();if(o){var r=e[0].parentNode,a=c.AJS.Rte.Content.getChildIndex(r,e[0]),i=n?1:0,l=o.selection.getRng();return l.setStart(r,a+i),l.setEnd(r,a+1),e.before(t||c.AJS.Rte.HIDDEN_CHAR).remove(),o.selection.setRng(l),l}}else p.a.error("replaceWithTextAndGetRange Error: attempting to replace a non-existent element")};var zt=function(e){return e.replace(/[&"'<>`]/g,(e=>{var t={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;","`":"&#96;"};return"string"==typeof t[e]?t[e]:"&quot;"}))},Ut=(e,t)=>{var n,o;if(e&&e.length&&e[0]){for(var r=[],a=0,i=e.length;a<i;a++){var l=e[a];l&&r.push(l.replace(/[.*+?|()[\]{}\\]/g,"\\$"))}n=new RegExp(`(${r.join("|")})`,"gi"),o=Tt()(t||"<strong>{highlight}</strong>").fill({highlight:"$1"}).toString()}return{highlight:(e,t)=>e?(t||(e=Tt.a.escape(e)),n?e.replace(n,o):e):e,safeHighlight(e){if(!e)return e;var t,r;if(n&&o){var a=o.split("$1");t=a[0],r=a[1],e=e.replace(n,"@@@hl@@@$1@@@endhl@@@")}return zt(e).replace(/@@@hl@@@/gi,t).replace(/@@@endhl@@@/gi,r)}}},_t=function e(t){if(!(this instanceof e))return new e(t);this.cache={},this.cacheStack=[],this.cacheSize=t||30};_t.prototype.get=function(e){var t=this.cache[e];if(t){var n=this.cacheStack[this.cacheStack.length-1][0]+1;return t.weight=n,this.cacheStack.push([n,e]),t.value}},_t.prototype.put=function(e,t){var n,o,r,a=this.cacheStack.length?this.cacheStack[this.cacheStack.length-1][0]+1:0;for(this.cache[e]={weight:a,value:t},this.cacheStack.push([a,e]);this.cacheStack.length>this.cacheSize;)o=(n=this.cacheStack.shift())[0],r=n[1],o===this.cache[r].weight&&delete this.cache[r]},_t.prototype.clear=function(){this.cache={},this.cacheStack=[]};var Qt=_t,Wt=function(e,t){var n=e.options;n.ajsDropDownOptions=n.ajsDropDownOptions||{};var o,r=(n.ajsDropDownOptions.Highlighter||Ut)(t.queryTokens||[t.query]);n.ajsDropDownOptions.alignment||(n.ajsDropDownOptions.alignment="left"),n.ajsDropDownOptions.selectionHandler=n.ajsDropDownOptions.selectionHandler||Vt,(o=e.dd)&&(o.hide(),o.$.remove());var a=e.dd=c.AJS.dropDown(t.matrix,n.ajsDropDownOptions)[0];if(n.ajsDropDownOptions.className&&a.$.addClass(n.ajsDropDownOptions.className),a.$.find("li a:not(.dropdown-prevent-highlight) span").each((function(){var e=s()(this);e.html(r.safeHighlight(e.text()))})),a.$.hasClass("fabric")){var i=a.$.find(".insert-mentions-dropdown-option");i.length===t.matrix[1].length&&t.matrix[1].forEach(((e,t)=>{var n=r.safeHighlight(e.username);if(n){e.lozenge&&(n+=` &middot; ${e.lozenge}`);var o=s()("<span>").addClass("dropdown-lozenge").html(n);i.eq(t).append(o)}}))}return n.dropdownPlacement?n.dropdownPlacement(a.$):(p.a.debug("No dropdownPlacement function specified. Appending dropdown to the body."),s()("body").append(a.$)),function(e){var t=e.$.closest(".aui-dd-parent").width();t||(e.$.width("25em"),t=e.$.width()),s()("a span:not(.icon)",e.$).each((function(){var e=s()(this),n=c.document.createElement("var");n.innerHTML="&#8230;";var o=s()(n),r=o.width(),a=!1;e.wrapInner(s()("<em>")),s()("em",e).each((function(){var e=s()(this);if(e.show(),this.offsetLeft+this.offsetWidth+r>t-20){for(var n=this.childNodes,o=!1,i=n.length-1;i>=0;i--){var l=n[i],c=1,d=3===l.nodeType?"nodeValue":"innerHTML",u=l[d];do{if(!(c<=u.length))break;l[d]=u.substr(0,u.length-c++)}while(this.offsetLeft+this.offsetWidth+r>t-20);if(c<=u.length){o=!0;break}}o?a=!0:e.hide()}})),a&&(e.append(o),this.elpss=o)}))}(a),function(e){s()("a span:not(.icon)",e.$).each((function(){var e,t=s()(this);try{var n=t.data("properties");e=n?n.spaceName:null}catch(e){p.a.error("Problem getting space name: ",e.message)}var o=t.text();e&&(o+=` (${s()("<i></i>").html(e).text()})`),t.attr("title",o)}))}(a),n.dropdownPostprocess&&n.dropdownPostprocess(a.$),a.show(e._effect),"function"==typeof n.onShow&&n.onShow.call(a,a.$),a},Vt=function(e,t){if("click"!=e.type){var n=s()("a",t).first(),o=n.attr("href");if("keydown"===e.type&&(e.metaKey||e.ctrlKey)&&13===e.which){var r=d.a.open(o,"_blank");r&&r.opener&&(r.opener=null)}else n.click(),c.document.location=o;e.preventDefault()}};function Kt(e,t){this._effect="appear",this._timer=null,this.id=e,this.options=t,this.inactive=!1,this.busy=!1,this.cacheManager=Qt()}Kt.prototype.clearCache=function(){this.cacheManager.clear()},Kt.prototype.change=function(e,t,n){var o=this;if(e!=o._value){o._value=e,o.busy=!1,d.a.clearTimeout(o._timer);var r=o.options.minLengthForGetData||2,a=new RegExp(`\\S{${r},}`);if(t||a.test(e)){var i=o.cacheManager.get(e);if(i)Wt(o,i);else{o.busy=!0;var l=function(){o.options.getDataAndRunCallback.call(o,e,(function(){o.show.apply(this,arguments),n&&n(e)}))};0===o.options.dropDownDelay?l():o._timer=d.a.setTimeout((()=>{l()}),o.options.dropDownDelay||200)}}else o.dd&&o.dd.hide(),n&&n(e)}},Kt.prototype.hide=function(){this.dd&&this.dd.hide()},Kt.prototype.remove=function(){var e=this.dd;e&&(this.hide(),e.$.remove()),this.inactive=!0,this.options.onDeath&&this.options.onDeath()},Kt.prototype.show=function(e,t,n){if(this.inactive)p.a.error("Quick search abandoned before server response received, ignoring. ",this);else{var o={matrix:e,query:t,queryTokens:n};this.cacheManager.put(t,o),Wt(this,o),this.busy=!1}};var Gt,Yt;Ht("Autocompleter.Manager");var Jt=function(e){var t="confluence.autocomplete-plugin",n=$t[e.leadingChar];if(e=s.a.extend({minLengthForGetData:n.minLengthForGetData,displayHandler:n.displayHandler,Highlighter:n.Highlighter,classNames:n.autocompleteClassNames},e),!(Gt=Ft(c.AJS.Rte.getEditor(),e)))return!1;function o(e){return s.a.data(e,"properties")}Object(C.b)("synchrony.stop",{id:t});var r,a=s()(c.window).width(),i=function(e){var t,n,o=s()("#autocomplete-dropdown"),i=Gt.getContainer();o.length||(o=s()("<div></div>").addClass("aui-dd-parent quick-nav-drop-down").attr("id","autocomplete-dropdown").appendTo("body"));var l=c.AJS.Position.spaceAboveBelow(c.AJS.Rte.getEditorFrame(),i);e.find("ol:has(a.menu-header)").addClass("top-menu-item"),e.find("ol:empty").hide(),o.append(e);var d=s()("#autocomplete-dropdown .autocomplete").find("ol:has(a.menu-header)"),u=d.find("a").text();0===s()("#titleForSR").length&&(d.before(`<h2 id='titleForSR' class='top-menu-title'>${u}</h2>`),d.attr("tabindex","-1")),s()("#autocomplete-dropdown .autocomplete ol:not(.top-menu-item)").attr("role","listbox").attr("aria-controls","forSR").attr("tabindex","0");var g=s()("#autocomplete-dropdown .autocomplete ol:not(.top-menu-item) li");g.attr("role","presentation"),g.find("img").attr("role","none"),g.find("a").attr("role","option");var m=g.length;0===s()("#forSR").length&&s()("<div></div>").addClass("hidden-div").attr("aria-atomic","true").attr("role","region").attr("aria-live","polite").attr("id","forSR").text(c.AJS.format("{0,choice,0#{0}\u00a0r\u00e9sultat disponible|1#{0}\u00a0r\u00e9sultat disponible|1\u003c{0}\u00a0r\u00e9sultats disponibles} pour {1}",m,u)).appendTo(".autocomplete");var p=c.AJS.Rte.Content.offset(i),f=Math.max(o.width()+p.left-a+10,0),h=p.left-f-0,v=e.outerHeight(!0),b=v+10;r&&(function(e,t){return 1==r?e.above>=t:e.below>=t}(l,b)||(r=null)),r||(r=function(e,t){return e.below>=t?2:e.above>=t?1:e.below>e.above?2:1}(l,b)),(n=o.find(".autocomplete-dropdown-arrow")).length||(n=s()("<div>").addClass("autocomplete-dropdown-arrow").addClass(Gt.settings.autocompleteClassNames)),1===r?(n.addClass("autocomplete-dropdown-bottom-arrow").css({top:v-1}),t=p.top-v-10):(n.removeClass("autocomplete-dropdown-bottom-arrow").css("top",""),t=p.top+i.height()+10),n.css({left:f}).appendTo(o),o.css({position:"absolute",top:t,left:h})};Yt=(e=>new Kt("inputdriven-dropdown",e))({onShow(e){Object(C.b)("rte-autocomplete-on-show",{triggerChar:Gt.settings.ch});var t=c.AJS.Rte.getEditorFrame();t&&t.shim&&t.shim.hide(),e.find("a.menu-header").unbind().click((e=>{e.preventDefault(),Gt.die()})),this.reset(),Gt.settings.selectFirstItem&&e.find("a:not('.menu-header')").length&&c.AJS.dropDown.current.moveDown(),Gt.settings.onShow&&Gt.settings.onShow()},dropdownPlacement:i,onDeath(){s()("#autocomplete-dropdown").remove(),Gt.settings.onDeath&&Gt.settings.onDeath()},ajsDropDownOptions:{selectionHandler:function(e,t){e.preventDefault();var n=o(t[0]);n&&"function"==typeof n.callback?n.callback(Gt):"menu-header"!==n.className&&Gt.update(n),Gt.die()},moveHandler:function(e,t){var n=c.AJS.dropDown.current;e&&e.find("a").is(".menu-header")&&("up"==t?n.moveUp():n.moveDown())},className:`autocomplete ${Gt.settings.dropDownClassName}`,displayHandler:e.displayHandler,Highlighter:e.Highlighter},getDataAndRunCallback(e){Gt&&Gt.settings.getDataAndRunCallback&&Gt.settings.getDataAndRunCallback(Gt,e,((t,n,o,r)=>{Gt.settings.getHeaderText&&t.unshift([{className:"menu-header dropdown-prevent-highlight",href:"#",name:Gt.settings.getHeaderText(Gt,e)}]),t.push(Gt.settings.getAdditionalLinks(Gt,e,o)),Yt&&Yt.show(t,n,r||[n])}))},dropDownDelay:Gt.settings.dropDownDelay,minLengthForGetData:Gt.settings.minLengthForGetData}),Gt.onBeforeKey=function(e,t){return 40===e.keyCode||38===e.keyCode||13===e.keyCode?(c.tinymce.dom.Event.cancel(e),!1):8===e.keyCode&&1===(null==t?void 0:t.length)?(e.preventDefault(),null===(n=Gt)||void 0===n||n.text(""),Zt(),!1):!(27===e.keyCode||9===e.keyCode||8===e.keyCode&&!t)||(this.die(8===e.keyCode),!1);var n},Gt.onKeyPress=function(e){var t,n=String.fromCharCode(e.which);if(13===e.keyCode)return c.tinymce.dom.Event.cancel(e),!1;this.settings.endChars.includes(n)&&(null===(t=Gt)||void 0===t||t.die());return!0};var l=e.minLengthForGetData||2,d=new RegExp(`\\S{${l},}`);Gt.onAfterKey=function(e,t){if(40===e.keyCode||38===e.keyCode||13===e.keyCode){var n=c.AJS.dropDown.current;if(!n)return!1;if(-1==n.getFocusIndex()&&13===e.keyCode)return qt(),!0;e.which||(e.which=e.keyCode),n.moveFocus(e);var o=s()("#forSR");return o.length>0&&o.text(`${n.links.closest("li.active")[0].outerText}`),!1}var r=8===e.keyCode&&!t||u(t);return(r||d.test(t))&&Yt&&Yt.change(t,r),!0};var u=function(e){return/[\u4E00-\u9FFF]/gi.test(e)};return Gt.onDeath=function(){Yt&&(Yt.remove(),Yt.closing=!0),Object(C.b)("synchrony.start",{id:t})},Gt.onScroll=function(){Yt&&Yt.dd&&i(Yt.dd.$)},Gt.getCurrentItem=function(){if(!Yt||!Yt.dd)return null;var e=Yt.dd,t=e.getFocusIndex();return t<0?null:o(e.links[t])},Yt&&Yt.change(Gt.text(),!0),!0},qt=function(){var e;null===(e=Gt)||void 0===e||e.die(),Gt=null},Zt=function(){var e=Ft.removeOrphanedControl();e&&Xt.shortcutFired(e.leadingChar)},Xt={getInputDrivenDropdown:()=>Yt,triggerListener(e){if(!e.metaKey){Yt&&Yt.closing&&(Yt=null);var t=String.fromCharCode(e.which);!Yt&&t in $t&&Jt({leadingChar:t})&&c.tinymce.dom.Event.cancel(e)}},shortcutFired(e,t){var n=t?0:1;return Yt&&Yt.closing&&(Yt=null),Yt&&(n=t?0:Gt.backWords+1,qt()),Jt({leadingChar:e,backWords:n})},reattach:Zt,die:()=>{var e,t;null===(e=Gt)||void 0===e||e.text(""),null===(t=Gt)||void 0===t||t.removeSpan(),qt()},getAutocompletePlaceholder:()=>{var e=c.tinymce.activeEditor;return e?e.dom.get(Bt):null},repositionDropdown:()=>{var e;null===(e=Gt)||void 0===e||e.onScroll()}},en=n(24),tn=n.n(en),nn=(e,t)=>{$t[e]=t},on=(e,t,n)=>`<a href="#" class="${t||""}"><span class="icon ${n||""}"></span><span>${e}</span></a>`,rn=function(e,t,n,o,r){var a;if(e.statusMessage)a=[[{html:e.statusMessage,className:"error"}]];else{var i=t?tn.a.REST.makeRestMatrixFromSearchData(e):tn.a.REST.makeRestMatrixFromData(e,o);a=tn.a.REST.convertFromRest(i)}n(a,t,(function(e,t){r&&"function"==typeof r&&r(a,e,t)}))},an=(e,t,n,o,r,a,i)=>{var l,c=t(o),d=e.settings.cacheManager,u=d.get(o);c?((l=s.a.ajax({type:"GET",url:c,data:n(e,o),dataType:"json",global:!1,timeout:5e3})).done((e=>{d.put(o,e)})),u?rn(u,o,r,a,i):(l.done((e=>{rn(e,o,r,a,i)})),l.fail(((e,t)=>{"timeout"==t&&rn({statusMessage:"Timeout",query:o},o,r,a)})))):r([],o)};n(48);function ln(e){e.on("PostRender",(()=>{p.a.info("Autocomplete enabled, adding keyPress listener"),e.on("keypress",Xt.triggerListener,!0),Object(C.b)("ready-editor-autocomplete")})),e.on("Undo",Xt.reattach),e.on("Redo",Xt.reattach)}"object"!=typeof d.a.Confluence&&(p.a.error("Confluence is supposed to be defined"),d.a.Confluence={}),void 0===d.a.Confluence.Editor&&(p.a.error("Confluence.Editor is supposed to be defined"),d.a.Confluence.Editor={}),d.a.Confluence.Editor.Autocompleter={Settings:$t,log:Ht,Util:{dropdownLink:on,getRestData:an},Control:Ft,Manager:Xt},Object(Lt.a)("confluence-editor/tinymce3/plugins/autocomplete/autocomplete-manager",(()=>Xt)),Object(Lt.a)("confluence-editor/tinymce3/plugins/autocomplete/autocomplete-settings",(()=>({Settings:$t,log:Ht})));var sn=n(29),cn=n(5),dn=e=>e?`${A.a}/rest/prototype/1/search.json`:m.a.get("remote-user")?`${A.a}/rest/prototype/1/session/history.json`:null,un=(e,t)=>{var n={"max-results":e.maxResults};return t&&(n.query=Object(sn.unescapeEntities)(t),n.search="name",n.preferredSpaceKey=m.a.get("space-key")),n},gn=()=>nn("[",{ch:"[",cache:!1,endChars:["]"],dropDownClassName:"autocomplete-links",selectFirstItem:!0,getHeaderText:()=>Object(cn.a)("editor.autocomplete.links.header.text"),getAdditionalLinks(e,t,n){var o;if(t){var r=Object(cn.a)("editor.autocomplete.links.dialog.search");o=c.AJS.format(r,t)}else o=Object(cn.a)("editor.autocomplete.links.dialog.search.no.text");var a=c.Confluence.Editor.LinkBrowser,i=[{className:"search-for",name:o,href:"#",callback(e){e.replaceWithSelectedSearchText();var t=a.open({panelKey:a.SEARCH_PANEL});t.doSearch(t.getLocationPresenter().getRawLinkText())}},{className:"dropdown-insert-link",html:on(Object(cn.a)("editor.autocomplete.links.web.link"),"dropdown-prevent-highlight","editor-icon"),callback(e){e.replaceWithSelectedSearchText(),a.open({panelKey:a.WEBLINK_PANEL})}}];return n&&n(t,i),i},getDataAndRunCallback(e,t,n){an(e,dn,un,t,n,"content",(function(e,t,n){var o;t&&(e.length<2||("page"!==(o=e[1][0].restObj).type||o.space.key!=m.a.get("space-key")||o.title.toLowerCase()!==t.toLowerCase()))&&n.push({className:"insert-create-page-link",html:on(Object(cn.a)("editor.autocomplete.links.create.link"),"dropdown-prevent-highlight","editor-icon"),callback(e){var n=Object(sn.unescapeEntities)(t),o=c.Confluence.Link.createLinkToNewPage(n,m.a.get("space-key"));e.update(o)}})}))},update(e,t){t.restObj&&(t=c.Confluence.Link.fromREST(t.restObj)),t&&t.insert()}});function mn(e){e.addCommand("mceConfAutocompleteLink",(()=>(Xt.shortcutFired("["),!1))),e.addShortcut("meta+shift+k",e.translate("AutoCompleteLink"),"mceConfAutocompleteLink"),gn()}var pn=n(17),fn=n.n(pn);function hn(){var e=m.a.get("content-id");return+e||(e=m.a.get("page-id")),+e||(e="0"),e}var vn=0,bn={updateNode(e,t){var n=c.tinymce.activeEditor,o=s()(e,n.getDoc()),r="confluence.update-node-"+vn++;Object(C.b)("synchrony.stop",{id:r});var a=bn.prepareNodeForUpdate(o);return bn.replaceNode(o,t).fail(a).always((()=>{Object(C.b)("synchrony.start",{id:r})})).promise()},storeNodeState(e,t){for(var n,o={},r=0,a=t.length;r<a;r++)n=t[r],o[n]=e.attr(n);return()=>{for(var t in o)e.attr(t,o[t])}},prepareNodeForUpdate(e){var t;return e.is("img")&&(t=bn.storeNodeState(e,["width","height","src","class"]),e.addClass("image-hotswap").attr({src:`${A.a}/images/border/spacer.gif`,width:e.attr("width"),height:e.attr("height")})),t},replaceNode(e,t){var n=bn.getDoc(),o=s()(t,n),r=s()(e,n),a="confluence.replace-node-"+vn++;return Object(C.b)("synchrony.stop",{id:a}),s.a.Deferred((function(){var e=this;o.is("img")?(o[0].onload=function(){p.a.debug("replaceNode: new node's src has been loaded by the browser."),this.onload=null,e.resolve(this)},c.tinymce.Env.browser.isOpera()&&(o[0].src=o.attr("src")),n.createDocumentFragment().appendChild(o[0])):(o.is("table.wysiwyg-macro")&&o.attr("data-mce-resize","false"),e.resolve(o[0]))})).always((()=>{Object(C.b)("synchrony.start",{id:a})})).done((e=>{r.replaceWith(e)})).promise()},replaceSelection(e){var t=c.tinymce.activeEditor,n=t.selection.getRng(),o=t.getDoc().createRange(),r=s()(e).clone(!0,!1)[0];n.deleteContents(),3===n.startContainer.nodeType&&""===n.startContainer.nodeValue&&(n.startContainer.nodeValue=g().HIDDEN_CHAR),n.insertNode(r);var a=t.getDoc().createTextNode(g().HIDDEN_CHAR);t.dom.insertAfter(a,r);var i=a;return o.setStartBefore(i),o.setEndAfter(i),o.collapse(!1),t.selection.setRng(o),r},normalize(e){var t,n,o=c.tinymce.activeEditor,r=o.selection.getRng(),a=null,i=[];if(e&&e.childNodes){if(u()?a=r:c.tinymce.Env.browser.isFirefox()&&r&&(a=r.cloneRange(),((t={startIndex:Array.from(e.childNodes).indexOf(r.startContainer),startOffset:a.startOffset,endIndex:Array.from(e.childNodes).indexOf(r.endContainer),endOffset:a.endOffset}).startIndex>-1||t.endIndex>-1)&&(i=function(e){var t=[],n=0;return Array.prototype.forEach.call(e.childNodes,((e,o)=>{var r={},a=t[o-1]||{};r.isTextNode=3===e.nodeType,r.textNodesBefore=(r.isTextNode&&a.isTextNode?1:0)+~~a.textNodesBefore,r.precedingTextLength=n,n=r.isTextNode&&e.nodeValue?n+e.nodeValue.length:0,t.push(r)})),t}(e))),e.normalize(),c.tinymce.Env.browser.isFirefox()&&a){if(n=i[t.startIndex]){var l=t.startIndex-n.textNodesBefore,s=t.startOffset+n.precedingTextLength;a.setStart(e.childNodes[l],s)}if(n=i[t.endIndex]){var d=t.endIndex-n.textNodesBefore,g=t.endOffset+n.precedingTextLength;a.setEnd(e.childNodes[d],g)}}a&&o.selection.setRng(a)}},getDoc:()=>c.tinymce.Env.browser.isFirefox()||c.tinymce.Env.browser.isOpera()?document:c.tinymce.activeEditor.getDoc(),isolateSelectedRange(){var e=c.tinymce.activeEditor,t=bn.getDoc(),n=e.selection,o=n.getRng();if(o){var r,a=o.startContainer,i=o.startOffset,l=o.endContainer,d=o.endOffset;if(o.collapsed)return o;a===l&&(r=d-i);var u=m(a,i);u&&o.setStartBefore(u),a!==o.startContainer&&(d=r||d);var g=m(l,d,!0);return g&&o.setEndAfter(g),n.setRng(o),o}function m(n,o,r){var a,i=e.dom.getParent(n,e.dom.isBlock);i||(i=e.getBody());var l=function(e,n,o,r){var a,i,l=null,c=null,d=r?"nextSibling":"previousSibling";if(!(a=0===n)&&r&&(a=3===e.nodeType?n===e.length:n===e.childNodes.length),a)for(l=e[d],c=e;null===l;){if(c===o)return;if(c.parentNode===o)break;l=(c=c.parentNode)[d]}else 3===e.nodeType?(i=e.data,e.data=i.slice(n),l=t.createTextNode(i.slice(0,n)),c=e,s()(l).insertBefore(c),r&&(i=c,c=l,l=i)):l=(c=e.childNodes[n-(r?1:0)])[d];return[c,l]}(n,o,i,r);return a=l?l[1]?function(e,t,n,o){for(var r,a,i,l;t!==n&&t.parentNode!==n;){if(r=(a=t.parentNode).cloneNode(!1),o)for(s()(r).insertAfter(a),i=e;i;)l=i.nextSibling,r.appendChild(i),i=l;else for(s()(r).insertBefore(a),i=a.firstChild;i!==t;)l=i.nextSibling,r.appendChild(i),i=l;e=r,t=a}return t}(l[1],l[0],i,r):l[0]:void 0,a}}},yn=bn;function wn(e){return s()(e).hasClass("wysiwyg-macro")}function Cn(e,t){var n;if(e.macro&&e.contentId)n={type:"POST",url:`${A.a}/rest/tinymce/1/macro/placeholder`,contentType:"application/json; charset=utf-8",data:JSON.stringify(e),dataType:"text"};else{if(!e.url||!e.type)throw new Error(`illegal argument received: ${e}`);n=e}var o,a=s.a.Deferred(),i=c.tinymce.activeEditor;if(!t){var l=`macro-${(new Date).getTime()}`;o=i.dom.create("span",{id:l}),i.selection.setNode(o),t=o=i.dom.select(`#${l}`)[0],a.fail((()=>{s()(o).remove()}))}return s.a.extend(n,{timeout:this.DEFAULT_INSERT_MACRO_TIMEOUT}),p.a.debug(`Insert macro timeout = ${n.timeout}`),r.a.Editor.UI.setButtonsState(!1),s.a.ajax(n).done((function(e){var n,o=e;"<"!==o[0]&&(o=document.createTextNode(o)),(n=t)&&n.parentNode?yn.updateNode(t,o).done((e=>{a.resolve(e,o)})).fail(a.reject):(p.a.error("The node to be replaced has been already deleted from the document"),a.rejectWith(this,Array.from(arguments)))})).fail((function(e,t,n){p.a.error(`Macro placeholder request failed ${t} : '${n}'`),a.rejectWith(this,Array.from(arguments))})),a.done(((e,t)=>{r.a.Editor.UI.setButtonsState(!0),wn(e)&&/P|H\d/.test(e.parentNode.nodeName)&&i.dom.split(e.parentNode,e),function(e){var t=c.tinymce.activeEditor,n=t.getDoc(),o=t.selection.getRng();if(wn(e)){s()("p, pre",e).each(((e,t)=>{0===t.childNodes.length&&t.appendChild(n.createElement("br"))}));var r=t.dom.select(".wysiwyg-macro-body",e)[0].firstChild;r?(o.setStart(r,0),o.setEnd(r,0)):p.a.debug("focusMacroNode: couldn't find anything to focus, cap'n!")}else o.setStartAfter(e),o.setEndAfter(e);t.selection.setRng(o)}(e),i.nodeChanged(),g().showElement(e),i.dispatch("SetContent",{content:t,format:"html",selection:!0,set:!0}),c.tinymce.activeEditor.undoManager.add(),Object(C.b)("macro-browser.macro-inserted")})).fail((()=>{r.a.Editor.UI.setButtonsState(!0)})),a.promise()}var An={DEFAULT_INSERT_MACRO_TIMEOUT:E.a.get("macro-placeholder-timeout"),insertMacro:Cn,isInMacro:e=>s()(e).closest(".wysiwyg-macro").length>0,updateMacro:(e,t,n,o)=>Cn({contentId:hn(),macro:{name:n,params:e,body:t||""}},o)},xn=An;var Mn={storedRange:null,bookmark:null,editedMacroDiv:null,editedMacro:null,getCurrentNode:()=>s()(c.tinymce.activeEditor.selection.getNode()),isMacroDiv:e=>s()(e).hasClass("wysiwyg-macro"),isMacroTag(e){var t=s()(e);return t.hasClass("wysiwyg-macro")||t.hasClass("editor-inline-macro")},isBodylessMacro:e=>s()(e).hasClass("editor-inline-macro"),isMacroWithBody:e=>s()(e).hasClass("wysiwyg-macro"),isMacroStartTag:e=>s()(e).hasClass("wysiwyg-macro-starttag"),isMacroEndTag:e=>s()(e).hasClass("wysiwyg-macro-endtag"),isMacroBody:e=>s()(e).hasClass("wysiwyg-macro-body"),hasMacroBody:e=>"true"==s()(e).attr("macrohasbody"),getNestingMacros(e){var t=s()(e||Mn.getCurrentNode()),n=[];return t.parents(".wysiwyg-macro").each(((e,t)=>{n.push(s()(t).attr("data-macro-name"))})),n},logMCESelection(e){var t=c.tinymce.activeEditor.selection;p.a.debug("******************************"),p.a.debug(`Logging TinyMCE selection title: ${e}`),p.a.debug("Bookmark:"),p.a.debug(t.getBookmark());var n=s()(t.getRng().startContainer).text()||s()(t.getRng().startContainer.parentNode).text();p.a.debug(`Range: ${n}`),p.a.debug(t.getRng())},getSelectedMacro(){var e=Mn.getCurrentNode();return p.a.debug(`getSelectedMacro: $selectionNode=${e[0]}`),Mn.isMacroDiv(e)?e:xn.isInMacro(e)},openMacro(e){r.a.MacroBrowser.open({selectedMacro:e,onComplete:Mn.macroBrowserComplete,onCancel:Mn.macroBrowserCancel})},editMacro(e){var t=s()(e);Mn.editedMacroDiv=t[0];var n=c.tinymce.activeEditor.serializer.serialize(t.clone()[0],{forced_root_block:!1});c.tinymce.activeEditor.selection.select(t[0]),Ct(),s.a.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:`${A.a}/rest/tinymce/1/macro/definition`,data:JSON.stringify({contentId:hn(),macroHtml:n}),dataType:"text",success(e){Mn.openMacro(JSON.parse(e))}})},macroBrowserToolbarButtonClicked(e){var t=c.tinymce.activeEditor,n=Mn.getCurrentNode();Ct();var o=s.a.extend({presetMacroName:null,nestingMacros:Mn.getNestingMacros(n),onComplete:Mn.macroBrowserComplete,onCancel:Mn.macroBrowserCancel,mode:"insert",selectedHtml:"",selectedText:""},e);if((!e||e&&!e.ignoreEditorSelection)&&(o.selectedHtml=t.selection.getContent(),o.selectedText=t.selection.getContent({format:"text"})),"function"!=typeof r.a.MacroBrowser.Model.addMacro)return r.a.MacroBrowser.open(o);var a=o.presetMacroMetadata&&o.presetMacroMetadata.macroName||o.presetMacroName,i=r.a.MacroBrowser.getMacroMetadata(a);i?(o.presetMacroMetadata=o.presetMacroMetadata||i,r.a.MacroBrowser.open(o)):r.a.MacroBrowser.Rest.fetchMacroMetadataDetails({id:o.presetMacroName,successCallback:e=>{e&&e.details?(r.a.MacroBrowser.Model.addMacro(e.details),o.presetMacroMetadata=r.a.MacroBrowser.getMacroMetadata(o.presetMacroName),Object(C.a)("reset.complete",(function e(){r.a.MacroBrowser.open(o),Object(C.c)("reset.complete",e)})),Object(C.b)("reset.rte")):r.a.MacroBrowser.open(o)},errorCallback:e=>{p.a.error("AJS.MacroBrowser.Rest.fetchMacroMetadataDetails ERROR",e)}})},macroBrowserComplete(e){var t={contentId:m.a.get("content-id")||"0",macro:{name:e.name,params:e.params,defaultParameterValue:e.defaultParameterValue,body:e.bodyHtml}};At(),Mn.editedMacroDiv?(xn.insertMacro(t,Mn.editedMacroDiv),delete Mn.editedMacroDiv):xn.insertMacro(t)},macroBrowserCancel(){At(),Mn.editedMacroDiv=null,Mn.editedMacro=null}},kn=Mn;function En(){function e(e){s()("#autocomplete-dropdown .top-menu-item").spin(e)}function t(e,t){var n=t.presetMacroMetadata;e.replaceWithSelectedSearchText(),n?fn.a.hasRequiredParameters(n)||n.alwaysShowConfig?kn.macroBrowserToolbarButtonClicked(t):(Ct(),xn.insertMacro({contentId:m.a.get("content-id")||"0",macro:{name:n.macroName,body:""}})):kn.macroBrowserToolbarButtonClicked(t)}function n(e){if(e.hidden&&!fn.a.isHiddenMacroShown(e))return null;var n={className:`autocomplete-macro-${e.macroName}`,callback(n){t(n,{ignoreEditorSelection:!0,presetMacroMetadata:e})}};return e.icon?(n.name=e.title,n.href="#",n.icon=(e.icon.relative?m.a.get("static-resource-url-prefix"):"")+e.icon.location):n.html=on(e.title),n}nn("{",{ch:"{",cache:!1,endChars:["}",":","{"],dropDownClassName:"autocomplete-macros",dropDownDelay:0,selectFirstItem:!0,getHeaderText:()=>Object(cn.a)("editor.autocomplete.macros.header.text"),getAdditionalLinks:()=>[{className:"dropdown-insert-macro",html:on(Object(cn.a)("editor.autocomplete.macros.dialog.browse"),"dropdown-prevent-highlight","editor-icon"),callback(e){var n=e.text();t(e,{searchText:n})}}],getDataAndRunCallback(t,o,a){var i=fn.a.getMetadataPromise(),l=this,c=arguments;function d(){var r;r=o?function(e){for(var o=[],r=fn.a.searchSummaries(e,{keywordsField:"keywordsNoDesc"}),a=0,i=r.length;a<i;a++){var l=n(r[a]);if(l&&o.push(l)==t.maxResults)break}return o}(o):function(e){var t=[];return s()("#macro-insert-list li").each(((o,r)=>{var a=s()(r),i=e.find((e=>e.macroName===a.attr("data-macro-name")));if(i){var l=n(i);l&&t.push(l)}})),t}(fn.a.metadataList),e(!1),a([r],o)}function u(e){e.preventDefault(),e.stopPropagation(),Object(C.b)("analytics",{name:"autocomplete-macrobrowser.load-retry"}),fn.a.reset(),fn.a.preLoadMacro(),l.getDataAndRunCallback.apply(l,c)}l.alreadyBinded||(l.alreadyBinded=!0,i.always((()=>{d(),l.alreadyBinded=!1})),i.fail((()=>{Object(C.b)("analytics",{name:"autocomplete-macrobrowser.fail-to-load"}),r.a.messages.warning("#autocomplete-dropdown ol:nth(1)",{title:Object(cn.a)("editor.autocomplete.macros.error.load.header"),body:`<p><a id="macro-retry-link" href="#">${Object(cn.a)("editor.autocomplete.macros.error.load.retrylink")}</a></p>`}),s()("#macro-retry-link").click(u),s()("#autocomplete-dropdown ol").eq(1).show()}))),"pending"===i.state()&&(a([],o),e(!0))},update(){throw new Error("All items in the Macro Autocomplete dropdown must have a callback function")}})}function Tn(){return{init(){En()},getInfo:()=>({longname:"Auto Complete Macro",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}var Dn=()=>{Object(C.a)("init.rte",(()=>{Object(C.a)("rte-autocomplete-on-show",((e,t)=>{"!"===t.triggerChar&&Object(C.b)("analytics",{name:"confluence.editor.autocomplete.trigger",data:{type:"media"}})})),Object(C.a)("rte-autocomplete-on-insert",((e,t)=>{"!"===t.triggerChar&&(e=>{if(e&&e.name){var t={extension:e.name.split(".").pop(),type:"media"};Object(C.b)("analytics",{name:"confluence.editor.autocomplete.insert",data:t})}})(t.selectedFile)}))})),Object(C.a)("rte-destroyed",(()=>{Object(C.c)("rte-autocomplete-on-insert"),Object(C.c)("rte-autocomplete-on-show")}))},Sn=n(35),In=n.n(Sn),On=n(22),jn=n.n(On);function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ln(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bn=e=>{var t=m.a.get("content-id");return e?`${A.a}/rest/prototype/1/search.json`:+t?`${A.a}/rest/prototype/1/content/${t}/attachments.json`:null},Rn=(e,t)=>{var n=c.AJS.MacroBrowser.getMacroMetadata("view-file")?[]:["image","word","excel","pdf","powerpoint","multimedia"];return t?{type:"attachment",attachmentType:n,search:"name","max-results":e.maxResults,query:t}:{attachmentType:n,"max-results":e.maxResults}},Pn=()=>nn("!",{ch:"!",cache:!1,endChars:["!"],dropDownClassName:"autocomplete-media",selectFirstItem:!0,getHeaderText:()=>c.AJS.MacroBrowser.getMacroMetadata("view-file")?Object(cn.a)("editor.autocomplete.file.header.text"):Object(cn.a)("editor.autocomplete.media.header.text"),getAdditionalLinks(){var e=Object(cn.a)("editor.autocomplete.media.files.dialog.browse");return[{className:"dropdown-insert-image",html:on(e,"dropdown-prevent-highlight","editor-icon"),callback(e){e.replaceWithSelectedSearchText(),c.Confluence.Editor.defaultInsertImageDialog()}},{className:"dropdown-insert-macro",html:on(Object(cn.a)("editor.autocomplete.media.macros.dialog.browse"),"dropdown-prevent-highlight","editor-icon"),callback(e){e.replaceWithSelectedSearchText(),c.tinymce.confluence.macrobrowser.macroBrowserToolbarButtonClicked({selectedCategory:"media"})}}]},getDataAndRunCallback(e,t,n){an(e,Bn,Rn,t,n,"attachment")},update(e,t){Object(C.b)("rte-autocomplete-on-insert",{triggerChar:"!",selectedFile:t});var n=t.restObj,o=c.AJS.REST.wikiLink(n),r=n&&n.title||t.name;if("Image"==n.niceType){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){Ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({filename:r,contentId:t.ownerId||n.ownerId},o.params);c.tinymce.confluence.ImageUtils.insertFromProperties(a)}else{var i=!!c.AJS.MacroBrowser.getMacroMetadata("view-file"),l=n.contentType,s="VANILLA"!==m.a.get("confluence-flavour");if(i&&(s&&!(l&&"application/x-shockwave-flash"===l)||l&&("audio/mp3"===l||"video/mp4"===l)||"Multimedia"!==n.niceType)){var d={name:r,page:n.parentTitle,space:n.space?n.space.key:"",date:n.datePath,ownerId:n.ownerId};jn.a.insertFilePlaceholder(d)}else this._insertFile(r,t,o)}},_insertFile(e,t,n){var o;switch(t.restObj.niceType){case"PDF Document":o="viewpdf";break;case"Word Document":o="viewdoc";break;case"Excel Spreadsheet":o="viewxls";break;case"PowerPoint Presentation":o="viewppt";break;case"Multimedia":o="multimedia"}var r={page:n.destination.substring(0,n.destination.indexOf("^")),name:e};In.a.get("viewdoc").beforeParamsRetrieved(r),r.page||delete r.page;var a={contentId:m.a.get("content-id")||"0",macro:{name:o,params:r,body:""}};c.tinymce.confluence.MacroUtils.insertMacro(a)}});function $n(e){e.addCommand("mceConfAutocompleteImage",(()=>(Xt.shortcutFired("!"),!1))),e.addShortcut("meta+shift+m",e.translate("AutoCompleteImage"),"mceConfAutocompleteImage"),Pn(),Dn()}function Hn(e,t,n){"cl.ly"==e.host?s.a.get(`${A.a}/rest/autoconvert/1.0/cloudappembed?resource=${e.path.substr(1)}`,(e=>{var o;if(e)switch(e.item_type){case"image":o=zt(e.content_url),n(s()(`<img class="confluence-embedded-image confluence-external-resource" src="${o}" data-image-src="${o}"/>`)[0]);break;case"bookmark":t.text(e.name),t.attr("href",zt(e.redirect_url)),n(t)}else n()})):n()}function Fn(){var e=this,t=function(e,t){return t.anchor&&0!==t.anchor.indexOf("comment-")?`${e}#${t.anchor.substring(t.anchor.indexOf("-")+1)}`:e},n=function(n,r,a){if(o(n)){var i=function(e){return A.a?e.path.substring(A.a.length+1):e.path.substring(1)}(n),l=decodeURIComponent(i).split("/"),d="";n.queryKey=n.queryKey||{},n.queryKey.focusedCommentId?(d=`$${n.queryKey.focusedCommentId}`,d=t(d,n)):n.queryKey.pageId?(d=`$${n.queryKey.pageId}`,d=t(d,n)):"display"===l[0]?d=function(e,n,o){return 2===o.length&&0===o[1].indexOf("~")?n=o[1]:3===o.length?(n=`${o[1]}:${o[2].replace(/\+/g," ")}`,n=t(n,e)):4===o.length&&"status"===o[1]?n=`$${o[3]}`:6===o.length&&(n=`${o[1]}:/${o[2]}/${o[3]}/${o[4]}/${o[5].replace(/\+/g," ")}`,n=t(n,e)),n}(n,d,l):"spaces"===l[0]?d=(d=(d=e.spaViewPageLinkHandler(l))||e.spaBlogPostLinkHandler(l))?t(d,n):function(e,n,o){return 2!==o.length&&3!==o.length||-1!==o[1].indexOf(".action")||(n=`${o[1]}:`,n=t(n,e)),n}(n,d,l):"users"===l[0]?d=function(e,t,n){return 2===n.length&&"viewuserprofile.action"==n[1]?t=`~${e.queryKey.username}`:2===n.length&&"viewmyprofile.action"==n[1]&&(t=`~${m.a.get("remote-user")}`),t}(n,d,l):"pages"===l[0]&&"viewpage.action"===l[1]&&n.queryKey&&n.queryKey.spaceKey&&n.queryKey.title&&(d=`${n.queryKey.spaceKey}:${n.queryKey.title.replace(/\+/g," ")}`),d?(d=`[${d}]`,c.tinymce.plugins.Autoconvert.getHtmlFromWikiMarkup(d,(e=>{a(s()(e).children()[0])}),(()=>{a()}))):a()}else a()},o=function(e){var t=!0;return t=t&&e.authority===c.document.location.host,t=t&&(!A.a||0===e.path.indexOf(A.a)),t};this.init=function(){c.tinymce.plugins.Autoconvert.autoConvert.addHandler(n)}}Fn.prototype.spaViewPageLinkHandler=function(e){var t="spaces"===e[0]&&"pages"===e[2],n="edit"===e[3]?e[4]:e[3];if(t&&n)return`$${n}`},Fn.prototype.spaBlogPostLinkHandler=function(e){var t="spaces"===e[0]&&"blog"===e[2],n=e[1],o=e[3],r=e[4],a=e[5],i=e[6],l=e[7];if(t&&n&&o&&r&&a&&i&&l)return`${n}:/${o}/${r}/${a}/${l.replace(/\+/g," ")}`};function zn(){c.tinymce.plugins.Autoconvert.autoConvert.addHandler((function(e,t,n){if(e.host.match(/google.*/)&&"/url"===e.path&&e.queryKey&&e.queryKey.url){var o=decodeURIComponent(e.queryKey.url);(t=s()(t)).attr("href",o),t.attr("data-mce-href",o),t.text(o),n(t)}else n()}))}var Un={issueKeyOnlyRegEx:/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+$)/,singleTicketXMLEx:/\/jira\.issueviews:issue-xml\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)\//,issueKeyWithinRegex:/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)(?:\?|#)/,jqlRegEx:/jqlQuery=([^&]+)/,jqlRegExAlternateFormat:/jql=([^&]+)/,_getMatchedServerFromLink(e,t){var n=null;for(var o in t)if(t.hasOwnProperty(o)){var r=t[o],a=r.url;if("/"!==r.url[r.url.length-1]&&(a+="/"),0===e.indexOf(a)){n=r;break}}return n},pasteHandler(e,t,n){var o=r.a.Editor.JiraConnector.servers;if(!o)return n(),null;var a=r.a.Editor.JiraAnalytics,i={},l=Un._getMatchedServerFromLink(e.source,o),s=null;if(l){var d="",u=Un.jqlRegEx.exec(e.source)||Un.jqlRegExAlternateFormat.exec(e.source),g=r.a.JQLHelper.isFilterUrl(e.source),m=Un.issueKeyOnlyRegEx.exec(e.source)||Un.issueKeyWithinRegex.exec(e.source);if(m?(d=m[2],a&&(i.type=a.linkTypes.jql)):(m=Un.singleTicketXMLEx.exec(e.source))&&(d=m[1],a&&(i.type=a.linkTypes.xml)),u)i.is_single_issue=!1,i.type=r.a.JQLHelper.checkQueryType(e.source),s={name:"jira",params:{server:l.name,serverId:l.id,jqlQuery:decodeURIComponent(u[1].replace(/\+/g,"%20"))}};else if(g){var p=e.source;i.is_single_issue=!1,i.type=r.a.JQLHelper.checkQueryType(p),s={name:"jira",params:{server:l.name,serverId:l.id,jqlQuery:r.a.JQLHelper.getFilterFromFilterUrl(p)}}}else d&&(i.is_single_issue=!0,s={name:"jira",params:{server:l.name,serverId:l.id,key:d}})}s?(c.tinymce.plugins.Autoconvert.convertMacroToDom(s,n,n),a&&a.triggerPasteEvent(i)):n()}};var _n=function(){var e=[],t=function(e){return e.indexOf("%s")>=0?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace("%s","(.*)"):`${e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(.*)`};c.tinymce.plugins.Autoconvert.autoConvert.addHandler((function(t,n,o){if(t.source===n.text()){for(var r=0;r<e.length;r++){var a=e[r],i=t.source.match(a.regex);if(i){var l=i[1];if(a.defaultAlias){var c=a.defaultAlias.replace(/%s/,l);return void o(s()(n).text(c))}return void o(s()(n).text(l))}}o()}else o()})),setTimeout((()=>{s.a.ajax({url:`${A.a}/rest/autoconvert/latest/shortcutlinkconfigurations`,type:"GET",dataType:"json",success(n){e=n.configurations;for(var o=0;o<e.length;o++){var r=e[o];try{r.regex=new RegExp(t(r.expandedValue))}catch(e){p.a.error(`Failed to generated regex for ${r}`)}}},error(e){p.a.error(`Failed to load shortcut link configurations ${e.statusText}`)}})}),0)},Qn={pasteHandler(e,t,n){"www.skitch.com"===e.host||"skitch.com"===e.host?s.a.get(`${A.a}/rest/autoconvert/1.0/skitchembed?url=${e.source}`,(e=>{e&&e.url?n(s()(`<img class="confluence-embedded-image confluence-external-resource" src="${e.url}" data-image-src="${e.url}"/>`)[0]):n()})):n()}},Wn=/^\/(.*?)\/status\/([^/]+\/?$)/,Vn=/^\/(.*?)\/statuses\/([^/]+\/?$)/,Kn=(e,t,n)=>{var o,r,a;e.host.match(/^twitter.com/)?((o=decodeURI(e.path).match(Wn))?r=`${e.protocol}://twitter.com/${o[1]}/status/${o[2]}`:(o=decodeURI(e.path).match(Vn))&&(r=`${e.protocol}://twitter.com/${o[1]}/statuses/${o[2]}`),r?(a={name:"widget",params:{url:r}},c.tinymce.plugins.Autoconvert.convertMacroToDom(a,n,n)):n()):n()};function Gn(){var e=[/youtube-nocookie.com\/embed\/?/,/youtube.com\/watch\?/,/vimeo.com\/[0-9]+/,/[^.]\.wufoo\.com\/(?:forms|reports)/];c.tinymce.plugins.Autoconvert.autoConvert.addHandler((function(t,n,o){for(var r=decodeURI(t.source),a=0;a<e.length;a++)if(r.match(e[a])){var i={name:"widget",params:{url:r}};return void c.tinymce.plugins.Autoconvert.convertMacroToDom(i,o,o)}o()}))}function Yn(){c.tinymce.plugins.Autoconvert.autoConvert.addHandler(((e,t,n)=>{if(e.host.match(".*youtu.be.*")){var o=`http://youtube.com/watch?v=${e.path.substr(1)}`;n(s()(t).attr("href",o).text(o))}else n()}))}function Jn(){var e;Object(C.a)("init.rte",(()=>{c.tinymce.plugins.Autoconvert.autoConvert.addHandler(Hn)})),e=new Fn,Object(C.a)("init.rte",e.init),Object(C.a)("init.rte",zn),Object(C.a)("init.rte",_n),Object(C.a)("init.rte",(()=>{c.tinymce.plugins.Autoconvert.autoConvert.addHandler(Qn.pasteHandler)})),Object(C.a)("init.rte",Gn),Object(C.a)("init.rte",Yn),Object(C.a)("init.rte",(()=>{c.tinymce.plugins.Autoconvert.autoConvert.addHandler(Un.pasteHandler)})),Object(C.a)("init.rte",(()=>c.tinymce.plugins.Autoconvert.autoConvert.addHandler(Kn)))}var qn,Zn,Xn,eo='img[src^="data:image"]:not(.editor-inline-macro)',to='img[src^="blob:"]:not(.editor-inline-macro)',no=!1,oo=()=>{c.AJS&&c.AJS.Rte&&c.AJS.Rte.BootstrapManager?c.AJS.Rte.BootstrapManager.addOnInitCallback((()=>{var e=c.tinymce.activeEditor;e?e.on("Paste",(e=>{ro(e),c.tinymce.dom.Event.cancel(e)})):p.a.error("Could not getEditor from adapter")})):p.a.error("Could not initialize pasteHandler on Confluence.Editor")},ro=e=>{if(e.clipboardData&&e.clipboardData.items.length){no||(c.Confluence.Uploader.bind("FileUploaded",so),c.Confluence.Uploader.bind("UploadComplete",co),no=!0),qn=[],Zn=0;var t=Array.from(e.clipboardData.types);p.a.debug("clipboardData types: ",t),p.a.debug("clipboardData files: ",e.clipboardData.files),p.a.debug("clipboardData text/plain: ",e.clipboardData.getData("text/plain")),p.a.debug("clipboardData text/html: ",e.clipboardData.getData("text/html")),p.a.debug("clipboardData text/rtf: ",e.clipboardData.getData("text/rtf")),p.a.debug("clipboardData image/svg+xml: ",e.clipboardData.getData("image/svg+xml"));var n="Files"===t.toString()||t.sort().toString()===["image/svg+xml","Files"].sort().toString(),o=t.sort().toString()===["text/plain","Files"].sort().toString()||t.sort().toString()===["text/html","text/plain","Files"].sort().toString();Array.from(e.clipboardData.items).forEach(((t,o)=>{if(p.a.debug("clipboardData.items item.kind",t.kind),p.a.debug("clipboardData.items item.type",t.type),p.a.debug("clipboardData.items item",t),n&&"file"===t.kind){var r=t.getAsFile();r&&ao(r,o)}else if(!n&&"string"===t.kind&&"text/html"===t.type){var a=e.clipboardData.getData("text/html");(new DOMParser).parseFromString(a,"text/html").querySelectorAll(eo).forEach(((e,t)=>{io(e,t)}))}})),o&&setTimeout((()=>{e.currentTarget&&e.currentTarget.querySelectorAll(eo).forEach(((e,t)=>{io(e,t)}))}))}},ao=(e,t)=>{var n=lo(e,e.size,t);c.Confluence.Uploader.upload([n])},io=(e,t)=>{try{var n=e.getAttribute("src"),o=decodeURI(n).split(",")[1].split(" ").join("").replace(/\r?\n|\r/g,""),r=atob(o).length;c.Confluence.Uploader.upload([lo(o,r,t,"base64")])}catch(t){c.Confluence.EditorNotification.notify("warning",c.tinymce.activeEditor.translate("base64image.warning")),e.remove(),p.a.error("Fail to decode: ",e.getAttribute("src")),p.a.error(t)}},lo=(e,t,n,o)=>{var r=new Date,a=r.getMonth()+1,i=n?`-${n}`:"";return{fileName:`image-${r.getFullYear()}-${a}-${r.getDate()}_${r.getHours()}-${r.getMinutes()}-${r.getSeconds()}${i}.png`,fileSize:t,slice:(t,n)=>e.slice(t,t+n),getAsBinary:()=>e,getData:()=>e,encoding:o}},so=(e,t,n)=>{qn.length||(qn=c.tinymce.activeEditor.getDoc().querySelectorAll(to)),qn.length&&(qn[Zn].outerHTML=JSON.parse(n.response).htmlForEditor,Zn++)},co=()=>{c.tinymce.activeEditor.getDoc().querySelectorAll(to).forEach((e=>e.remove()))};function uo(e){return s()("<div>").append(e.cloneNode(!0)).html()}function go(e){var t,n;if(!e||!e.collapsed)throw new Error("range is null or not collapsed");if(t=e.startContainer,n=e.startOffset,1===t.nodeType&&n>0){if(3!==(t=t.childNodes[e.startOffset-1]).nodeType)return"";n=t.nodeValue.length}else if(3!==t.nodeType)return"";for(var o=t.nodeValue.substring(0,n),r=t.previousSibling;r&&3===r.nodeType;r=r.previousSibling)o=r.nodeValue+o;return o}function mo(e,t,n,o,r){return{handles(t){var n=t.selection.getRng();if(!n||!n.collapsed)return!1;var r=n.commonAncestorContainer||{};return!s()(r).closest("pre,.text-placeholder").length&&((!o||!s()(r).closest(o).length)&&e.test(go(n)))},execute(o,a,i){var l,d=1,u=po(a);if(32===u?o.execCommand("mceInsertContent",!1,"&nbsp;"):o.execCommand("mceInsertContent",!1,String.fromCharCode(u)),o.undoManager.transact((()=>{var n=o.selection.getRng();if(n){"|"==(l=go(n))[l.length-1]&&(l+=" ",d=0);var a=e.exec(l.substring(0,l.length-1));if(!r||r(a)){var i=function(e,t,n){var o,r;if(t){3!==t.nodeType&&(n=(t=t.childNodes[n-1]).length);for(var a=t,i=n;a&&3===a.nodeType;a=a.previousSibling){if(-1==i&&(i=a.nodeValue.length),i>e)return{container:a,offset:i-e};if(i==e){for(r=0,o=a.parentNode;a=a.previousSibling;)r++;return{container:o,offset:r}}e-=i,i=-1}return null}}(a[1].length+d,n.commonAncestorContainer,n.startOffset);n.setStart(i.container,i.offset);var c=s()(n.commonAncestorContainer);o.selection.setRng(n),c.closest(".wysiwyg-macro-body").length&&n.toString()==c.text()?(c[0].innerHTML="<br>",o.selection.select(c[0].childNodes[0]),o.selection.collapse(!0)):o.execCommand("delete",!1,{}),t(a,o.selection.getRng()),Xn=o.selection.getRng()}}})),n)return i.preventDefault(),i.stopPropagation(),c.tinymce.dom.Event.cancel(a),Xn&&g().showElement(Xn.startContainer),!1}}}function po(e){return e.which}function fo(){this.handlers={}}fo.prototype={registerHandler(e,t){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},executeHandlers(e,t,n,o){var r=!0;return s.a.each(this.handlers[e]||[],((e,a)=>{if(a.handles(t))return r=a.execute(t,n,o),!1})),r}};var ho=new fo,vo=function e(t,n){if(!m.a.get("remote-user")||!m.a.get("confluence.prefs.editor.disable.autoformat")){var o=n.editor;s.a.each({"*":"bold",_:"italic","~":"subscript","^":"superscript","+":"underline","-":"strikethrough","`":"monospace"},((e,t)=>{var n=new RegExp(`(?:[\\s\\xA0\\u200b\\uFEFF]+|^)(\\${e}(?=[^\\s${e}])([^${e}]*?[^\\s]))$`);ho.registerHandler(e.charCodeAt(0),mo(n,(e=>{b(t,e[2])}),!0))})),o.formatter.register("code",{inline:"code"}),ho.registerHandler("}".charCodeAt(0),mo(/(?:[\s\xA0\u200b]+|^)({{(?=[^\s])([^}]*?[^\s])})$/,(e=>{b("code",e[2])}),!0));for(var r=1;r<=6;r++)(e=>{ho.registerHandler(" ".charCodeAt(0),mo(new RegExp(`^\\u200b?(h${e}\\.)$`),(()=>{o.execCommand("formatBlock",!1,`h${e}`)}),!0))})(r);ho.registerHandler(" ".charCodeAt(0),mo(/^\u200b?(bq\.)$/,(()=>{o.execCommand("formatBlock",!1,"blockquote")}),!0));var a=mo(/^\u200b?(----)$/,(()=>{o.execCommand("mceInsertContent",!1,"<hr />")}),!0);ho.registerHandler(" ".charCodeAt(0),a),ho.registerHandler(13,a),ho.registerHandler(" ".charCodeAt(0),mo(/^\u200b?(#)$/,(()=>{o.execCommand("InsertOrderedList")}),!0)),ho.registerHandler(" ".charCodeAt(0),mo(/^\u200b?(\*)$/,(()=>{o.execCommand("InsertUnorderedList")}),!0)),ho.registerHandler(" ".charCodeAt(0),mo(/^\u200b?(1\.)$/,(()=>{o.execCommand("InsertOrderedList")}),!0)),ho.registerHandler(" ".charCodeAt(0),mo(/^\u200b?(-)$/,(()=>{var e=o.dom;o.execCommand("InsertUnorderedList");var t=e.getParent(o.selection.getNode(),"OL,UL");t&&(e.setStyles(t,{listStyleType:"square"}),t.removeAttribute("data-mce-style"))}),!0)),Object(C.b)("confluence.editor.registerHandlers",{handlerManager:ho,createHandler:mo,ed:o});var i=mo(/((<--?>)([^\s-]*))$/,(e=>{o.execCommand("mceInsertContent",!1,"↔"+e[3])}),!1);ho.registerHandler(" ".charCodeAt(0),i),ho.registerHandler(13,i);var l=mo(/((--?>)([^\s-]*))$/,(e=>{o.execCommand("mceInsertContent",!1,"→"+e[3])}),!1);ho.registerHandler(" ".charCodeAt(0),l),ho.registerHandler(13,l);var d=mo(/((<--?)([^\s-]*))$/,(e=>{o.execCommand("mceInsertContent",!1,"←"+e[3])}),!1);ho.registerHandler(" ".charCodeAt(0),d),ho.registerHandler(13,d),ho.registerHandler(" ".charCodeAt(0),mo(/[^-]*[\s](---?)$/,(e=>{var t=2===e[1].length?"–":"—";o.execCommand("mceInsertContent",!1,t)}),!1));var u=mo(/(([^\s-]+)(---?)([^\s-]+))$/,(e=>{var t=2===e[3].length?"–":"—";o.execCommand("mceInsertContent",!1,e[2]+t+e[4])}),!1);ho.registerHandler(" ".charCodeAt(0),u),ho.registerHandler(13,u),ho.registerHandler(13,mo(/(^\u200b?\|\|\s*(?:[^|]*\s?\|\|\s?)+$)/,(e=>{var t='<table class="confluenceTable"><tr>',n="",r=!0,a=s()(e[1].slice(2,-2).split("||")).map((function(e){return e=s.a.trim(this),r=r&&""===e,e}));r&&(a[0]=Object(cn.a)("editor.autoformat.sampletext.firstcell"));for(var i=0,l=a.length;i<l;i++)t+=`<th class="confluenceTh">${a[i]}</th>`,n+=`<td class="confluenceTd">${g().ZERO_WIDTH_WHITESPACE}</td>`;t+=`</tr><tr>${n}</tr></table>`,o.execCommand("mceInsertContent",!1,t),o.selection.select(s()(o.selection.getRng().commonAncestorContainer).parents("table").find(r?"th":"td")[0].childNodes[0]),s()(o.selection.getRng().startContainer).parent().closest('[contenteditable="true"]').focus()}),!0)),ho.registerHandler(13,mo(/(^\u200b?\|\s?(?:[^|]*\s?\|\s?)+$)/,(e=>{var t='<table class="confluenceTable"><tr>',n=!0,r=s()(e[1].slice(1,-1).split("|")).map((function(e){return e=s.a.trim(this),n=n&&""==e,e}));n&&(r[0]=Object(cn.a)("editor.autoformat.sampletext.firstcell"));for(var a=0,i=r.length;a<i;a++)t+=`<td class="confluenceTd">${r[a]}</td>`;t+="</tr></table>",o.execCommand("mceInsertContent",!1,t),n&&o.selection.select(s()(o.selection.getRng().commonAncestorContainer).parents("table").find("td")[0].childNodes[0]),s()(o.selection.getRng().startContainer).parent().closest('[contenteditable="true"]').focus()}),!0));var p=mo(/\b(((https?|ftp):\/\/|(www\.))[\w.$\-_+!*'(),/?:@=&%#~;[\]]+)$/,(e=>{var t=e[3]?e[1]:`http://${e[1]}`,n=o.dom.create("a",{href:t});n.appendChild(c.document.createTextNode(e[1])),o.execCommand("mceInsertContent",!1,uo(n)),o.getDoc().execCommand("unlink",!1,{})}),!1,"a");ho.registerHandler(" ".charCodeAt(0),p),ho.registerHandler(13,p);var f=mo(/\b((([a-z]|\d|[!#$%&'*+\-/=?^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#$%&'*+\-/=?^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)$/i,(e=>{var t=o.dom.create("a",{href:`mailto:${e[1]}`});t.appendChild(c.document.createTextNode(e[1])),o.execCommand("mceInsertContent",!1,uo(t)),o.getDoc().execCommand("unlink",!1,{})}),!1,"a");ho.registerHandler(" ".charCodeAt(0),f),ho.registerHandler(13,f);var h=function(e,t){var n=mo(e,(()=>{o.execCommand("mceInsertContent",!1,t)}),!1);ho.registerHandler(" ".charCodeAt(0),n),ho.registerHandler(13,n)};h(/(?:\b|^)(jira|JIRA)$/,"Jira"),h(/(?:\b|^)(bitbucket)$/,"Bitbucket"),h(/(?:\b|^)(atlassian)$/,"Atlassian"),h(/(?:\b|^)(hipchat)$/,"Hipchat"),h(/(?:\b|^)(statuspage)$/,"Statuspage"),h(/(?:\b|^)(sourcetree)$/,"Sourcetree"),h(/(?:\b|^)(trello)$/,"Trello");var v={"]":e.regularExpressions._REGEXES.WIKI_LINK,"}":e.regularExpressions._REGEXES.WIKI_MACRO,"!":e.regularExpressions._REGEXES.WIKI_EMBED};s.a.each(v,((e,t)=>{ho.registerHandler(e.charCodeAt(0),mo(t,(t=>{var n=t[1]+e,r={type:"POST",contentType:"application/json; charset=utf-8",url:`${m.a.get("context-path")}/rest/tinymce/1/wikixhtmlconverter`,data:JSON.stringify({wiki:n,entityId:m.a.get("content-id"),spaceKey:m.a.get("space-key"),contextType:m.a.get("content-type"),suppressFirstParagraph:!0}),dataType:"text",timeout:5e3};"}"==e?c.tinymce.confluence.MacroUtils.insertMacro(r):"!"==e?s.a.ajax(r).done((e=>{!n===e?c.tinymce.confluence.ImageUtils.insertImagePlaceholder(e):o.execCommand("mceInsertContent",!1,e)})):s.a.ajax(r).done((e=>{o.execCommand("mceInsertContent",!1,e)}))}),!0))})),ho.registerHandler("`".charCodeAt(0),mo(/(``)$/,(()=>{var e={contentId:m.a.get("content-id"),macro:{name:"code",body:""}};c.tinymce.confluence.MacroUtils.insertMacro(e)}),!0)),o.on("KeyPress",(e=>ho.executeHandlers(po(e),o,e,t))),o.on("KeyDown",(e=>{if(13===po(e))return ho.executeHandlers(13,o,e,t)}),!0),o.on("Remove",(()=>{ho.handlers={}}));return{getHandlerCount:()=>Object.keys(ho.handlers).length}}function b(e,t){var n=o.formatter.get(e)[0],r=o.dom.create(n.inline,{style:n.styles,class:n.classes});r.appendChild(c.document.createTextNode(t)),o.execCommand("mceInsertContent",!1,`${uo(r)}&nbsp;`)}};vo.regularExpressions={_REGEXES:{WIKI_MACRO:/(?:\s|^)(\{[^{^}]+)$/,WIKI_LINK:/(?:\s|^)(\[[^[^\]]+)$/,WIKI_EMBED:/(?:\s|^)(![^!]{5,})$/}};function bo(){return{init(e){e.on("Init",(()=>{e.getBody().classList.add("resizable")}));var t=0;if(!e.options.get("fullscreen_is_enabled")){var n=parseInt(e.options.get("autoresize_min_height")||`${e.getElement().offsetHeight}`),o=parseInt(e.options.get("autoresize_max_height")||"0");e.on("Change SetContent Paste KeyUp Init",r),e.addCommand("mceAutoResize",r)}function r(a){var i=e.getDoc(),l=i.body,d=i.documentElement,g=c.tinymce.DOM,m=n,p=a===Object(a)&&a.forceExec||!1,f=s()(i).height();if(f>n&&(m=f),o&&f>o?(m=o,l.style.overflowY="auto",d.style.overflowY="auto"):(l.style.overflowY="hidden",d.style.overflowY="hidden",l.scrollTop=0),p||m!==t){var h=m-t;g.setStyle(document.querySelectorAll("div.tox-tinymce")[0],"height",`${m}px`),g.setStyle(g.get(`${e.id}_ifr`),"height",`${m}px`),t=m,u()&&h<0&&r()}return!0}},getInfo:()=>({longname:"Auto Resize",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function yo(){var e;function t(){var t=s()("#breadcrumbs");t.detach(),!t.find(".edited-page-title").length&&e.length&&t.append(e),s()("#editor-precursor .cell").prepend(t)}if("comment"!==m.a.get("content-type")){var n=s()("#quickedit-breadcrumbs");n.length>0&&(s()("#breadcrumbs").detach(),n.attr("id","breadcrumbs"),s()("#breadcrumb-section").append(n)),e=s()(".edited-page-title").parent().detach(),t(),He(c.document,"mode-changed",((n,o)=>{var r;"preview"===o?(r=s()("#breadcrumbs").detach(),e.detach(),s()("#breadcrumb-section").append(r)):"richtext"===o&&t()}))}}function wo(){c.tinymce.activeEditor.getBody().style.height="auto"}function Co(){window.location.href=`${A.a}/login.action?os_destination=${window.location.pathname.replace(A.a,"")}`}var Ao=n(30),xo=n.n(Ao);function Mo(e){return this.message=e.message,this.statusCode=e["status-code"],this.stack=(new Error).stack,this}Mo.prototype=new Error;var ko=Mo;function Eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function To(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(n),!0).forEach((function(t){Do(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Do(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var So=(e,t)=>e.replace(/:([a-zA-Z]+)\?*/g,((e,n)=>{var o=t[n];return"string"==typeof o&&-1===o.indexOf("=")?encodeURIComponent(decodeURIComponent(o)):o.toString()}));function Io(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o=>{if(o instanceof ko){if(401===o.statusCode)return e.onUnauthorized&&e.onUnauthorized(),t(o);var r=n[o.statusCode];return r?r(o,t):t(o)}if(o instanceof TypeError)return t(o);throw o}}function Oo(e,t,n){var o=t.body,r=t.callback,a=t.headers,i=t.method,l=t.extraConfig,s=t.responseTransformer,c=o,d=a["Content-Type"];return d||delete a["Content-Type"],d&&-1!==d.indexOf("application/x-www-form-urlencoded")?c=xo.a.stringify(o):"application/json"===d&&(c=JSON.stringify(o)),fetch(e,{headers:a,credentials:"include",method:i,body:c}).then((e=>{if(!e.ok){var t=e.status;return e.text().then((e=>{throw new ko({message:e,"status-code":t})}))}return l&&l.ignoreResponseJson?null:204!==e.status?e.json():e})).then((t=>{if(t&&t["status-code"])throw new ko(t);return r(null,s?s(t,e,n.contextPath,o):t)})).catch(Io(n,r))}var jo,No=(jo={endpoint:null,contextPath:null,onUnauthorized:null,extraHeaders:{}},{configure(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};jo=To(To({},jo),e)},getConfig:()=>jo,getFullPath(e,t){var n=jo.contextPath+e;return t?So(n,t):n},getExternalServicePath(e,t){if("function"!=typeof e)throw"getExternalServicePath expects path to be a function so it can be lazy evaluated";var n=e();return So(n,t)},get(e,t){var n=t.callback,o=t.headers,r=t.responseTransformer;return Oo(e,{callback:n,headers:To(To({Accept:"application/json","Content-Type":"application/json"},jo.extraHeaders),o),method:"GET",responseTransformer:r},jo)},post(e,t){var n=t.body,o=t.callback,r=t.headers,a=t.extraConfig,i=t.responseTransformer;return Oo(e,{body:n,callback:o,headers:To(To({"Content-Type":"application/x-www-form-urlencoded"},jo.extraHeaders),r),method:"POST",extraConfig:a,responseTransformer:i},jo)},put(e,t){var n=t.body,o=t.callback,r=t.headers,a=t.responseTransformer;return Oo(e,{body:n,callback:o,headers:To(To({Accept:"application/json","Content-Type":"application/json"},jo.extraHeaders),r),method:"PUT",responseTransformer:a},jo)},delete(e,t){var n=t.callback,o=t.headers,r=t.extraConfig,a=t.responseTransformer;return Oo(e,{callback:n,headers:To(To({Accept:"application/json","Content-Type":"application/json"},jo.extraHeaders),o),method:"DELETE",extraConfig:r,responseTransformer:a},jo)},postLegacyResource(e,t){var n=t.body,o=t.callback,r=t.headers,a=t.responseTransformer;return fetch(e,{headers:To(To({"Content-Type":"application/x-www-form-urlencoded"},jo.extraHeaders),r),credentials:"include",method:"POST",body:"string"==typeof n?n:xo.a.stringify(n)}).then((e=>{if(!e.ok)return new Error(`Request failed with ${e.status}`);var t=e.headers.get("content-type");return t&&-1===t.indexOf("text/html")&&-1===t.indexOf("text/plain")?e.json():e.text()})).then((t=>t instanceof Error?o(t):o(null,a?a(t,e,jo.contextPath,n):t))).catch(Io(jo,o))},fetch:(e,t)=>fetch(e,t)}),Lo={configure(e){No.configure(e)},getPluginCodeLanguages(e){var t=No.getFullPath("/plugins/newcode/getlanguages.action");No.get(t,{callback:e})},getWikiConfluenceToXhtml(e,t){var n=No.getFullPath("/rest/tinymce/1/wikixhtmlconverter");No.postLegacyResource(n,{body:e,callback:t,headers:{Accept:"text/plain, */*","Content-Type":"application/json; charset=utf-8"}})},getWikiMarkdownToXhtml(e,t){var n=No.getFullPath("/rest/tinymce/1/markdownxhtmlconverter");No.postLegacyResource(n,{body:e,callback:t,headers:{Accept:"text/plain, */*","Content-Type":"application/json; charset=utf-8"}})}};Lo.configure({endpoint:`${window.location.protocol}//${window.location.host}`+A.a,contextPath:A.a,onUnauthorized:Co});var Bo=Lo,Ro={fields:{string:{language:(e,t)=>{var n,o=s()(c.Confluence.Templates.MacroBrowser.macroParameterSelect()),r=s()("select",o);return null==t&&(t={}),t.setValue=e=>{if(0==r.find(`option[value='${e}']`).length){var t=s()("<option/>");t.val(e),t.text(e),r.append(t)}},n=r,Bo.getPluginCodeLanguages(((e,t)=>{if(e)p.a.error("Error when fetching code macro languages",e);else if(t.length){var o=n.val();n.empty(),n.append(s()("<option/>").attr("value","")),t.forEach((e=>{var t=s()("<option />");t.val(e.aliases[0]),t.text(e.friendlyName),n.append(t)})),n.val(o)}else p.a.error("Configured code macro languages result was not in the expected format.")})),new c.AJS.MacroBrowser.Field(o,r,t)}}}};function Po(){return{init(e){e.on("beforeExecCommand",(t=>{if("Indent"===t.command||"Outdent"===t.command){var n=e.selection.getNode(),o=n.nodeName.toLowerCase();if("li"!==o&&"body"!==o){var r=parseInt(e.dom.getStyle(n,"margin-left",!1)||"0",10)+parseInt(e.dom.getStyle(n,"padding-left",!1)||"0",10);if(0!==r){var a=e.options.get("indentation"),i=/[a-z%]+/i.exec(a);e.dom.setStyle(n,"padding-left",""),e.dom.setStyle(n,"margin-left",r+i[0])}}}}))},getInfo:()=>({longname:"Confluence Indentation",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function $o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ho(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fo(e){return()=>({getMetadata:()=>function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(n),!0).forEach((function(t){Ho(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:"Confluence Editor Plugin",url:"http://www.atlassian.com"},e)})}var zo=n(34);function Uo(e){return e.addCommand("confCharmap",(()=>(Promise.all([n.e("vendors~charmap-open-dialog"),n.e("charmap-open-dialog")]).then(n.bind(null,208)).then((t=>{(0,t.default)(e);var n;n=new CustomEvent(zo.a.DIALOG_CONTROL,{detail:{isOpen:!0}}),window.dispatchEvent(n)})),!1))),Fo({name:"Confluence Charmap Plugin"})}function _o(){return{init:e=>{e.editorCommands.addCommands({outdent:function(){var t=e.selection,n=e.dom;function o(t){var o=n.getParent(t,n.isBlock);return o&&parseInt(e.dom.getStyle(o,"margin-left",!1)||"0",10)+parseInt(e.dom.getStyle(o,"padding-left",!1)||"0",10)>0}return o(t.getStart())||o(t.getEnd())||e.queryCommandState("InsertOrderedList")||e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertInlineTaskList")}},"state")}}}function Qo(){return{init(e){e.addCommand("mceConfUnlink",((t,n)=>{var o=e.selection,r=n||o.getNode(),a=s()(r);if("A"!==r.nodeName){var i=a.closest("a");if(!i.length)return!1;r=i[0],a=i}var l=a.attr("href");l||(l="#",a.attr("href",l));var d,u;if(!a.attr("data-linked-resource-id")&&c.Confluence.Link.isExternalLink(l)&&a.text()==(null!=(u=/(.*)[/]$/.exec(d=l))?u[1]:d)){var g=e.dom.create("span",{class:"nolink"},l);e.dom.replace(g,r,!1)}else o.select(r),a.removeClass("createlink unresolved"),e.execCommand("UnLink");return!1})),e.ui.registry.addButton("confimage",{text:"confluence.confimage_desc",onAction:function(){e.execCommand("mceConfimage")}}),e.ui.registry.addButton("conf_macro_browser",{text:"confluence.conf_macro_browser_desc",onAction:function(){e.execCommand("mceConfMacroBrowser")}})},getInfo:()=>({longname:"Confluence TinyMCE Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Wo(){return{init:e=>{var t,n=c.Confluence.Editor.Drafts,o=c.Confluence.Editor;function r(){var e,t,n;e=m.a.get("draft-id"),t=m.a.get("draft-share-id"),0!==parseInt(e)&&d.a.history&&d.a.history.replaceState&&d.a.history.replaceState(null,"",`${A.a}/pages/resumedraft.action?draftId=${e}&draftShareId=${t}&${n=d.a.location.search,void 0===n?"":("?"===n.charAt(0)&&(n=n.substr(1)),n.split("&").filter((e=>0===e.indexOf("username=")||0===e.indexOf("userFullName=")||0===e.indexOf("accessType=")||0===e.indexOf("grantAccess=")||0===e.indexOf("qunit-test=")||0===e.indexOf("src."))).join("&"))}`),o.UI.cancelButton.attr("data-tooltip",Object(cn.a)("editor.shared.draft.done.desc")),o.UI.cancelButton.on("click",(()=>{Object(C.b)("analytics",{name:"confluence.editor.done.button.clicked"}),Object(C.b)("analytics",{name:"confluence.editor.close",data:{source:"closeButton",contentId:m.a.get("content-id"),currentVersion:m.a.get("page-version")||"null"}})}))}function a(){if(!m.a.get("has-collaborated")&&c.AJS.Rte.Content.editorHasContentChanged()){m.a.set("has-collaborated",!0);var e=m.a.get("remote-user-key"),t=m.a.get("content-id");s.a.ajax({type:"PUT",url:`${A.a}/rest/experimental/relation/user/${e}/collaborator/toContent/${t}?targetStatus=draft`,error(){m.a.set("has-collaborated",!1),p.a.error("Unable to store current user as a collaborator")}}),s.a.ajax({type:"DELETE",url:`${A.a}/rest/experimental/relation/touched/from/user/current/to/content/${t}?targetStatus=current`}),s.a.ajax({type:"PUT",url:`${A.a}/rest/experimental/relation/user/${e}/touched/toContent/${t}?targetStatus=draft`,error(){m.a.set("has-collaborated",!1),p.a.error("Unable to store touch relation for current user")}})}}e.on("Init",(()=>{Object(C.a)("editor.local.change",a)})),e.on("Remove",(()=>{Object(C.c)("editor.local.change",a)})),Object(C.a)("rte-ready",(()=>{p.a.debug("confluence drafts plugin initialisation"),s()("#draft-status").show(),n.bindUnloadMessage(),o.UI.cancelButton.click((()=>{m.a.getBoolean("shared-drafts")||n.save({skipErrorHandler:!0})})),m.a.getBoolean("shared-drafts")&&r(),t=d.a.setInterval(n.save,+m.a.get("draft-save-interval")||3e4)})),Object(C.a)("rte-destroyed",(()=>{p.a.info("confluence drafts plugin tear down"),clearInterval(t)}))},getInfo:()=>({longname:"Confluence Drafts",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Vo(){return{init:e=>{e.addCommand("confMonospace",(()=>(e.formatter.toggle("monospace",void 0),!1))),e.on("Init",(()=>{e.formatter.register({monospace:{inline:"code"}}),e.editorCommands.addCommands({confMonospace:function(){return e.formatter.match("monospace")}},"state")})),e.ui.registry.addButton("monospace",{cmd:"confMonospace",text:"monospace",onAction:function(){e.execCommand("confMonospace")}})},getInfo:()=>({longname:"Monospace Formatting",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}var Ko=!0;function Go(e){return e&&3===e.nodeType&&0===e.nodeValue.length}var Yo={isCursorAtStartOf(e,t){return t.collapsed&&this.isRangeAtStartOf(e,t)},isRangeAtStartOf(e,t){if(!t||!t.startContainer)throw new Error(`range is invalid. received: ${t}`);if(!e||!e.nodeType)throw new Error(`context is invalid. received: ${e}`);var n,o=t.startContainer;if(3===o.nodeType){if(0!==t.startOffset)return!1;n=o}else if(void 0===(n=o.childNodes[t.startOffset])&&o.childNodes.length>0)return!1;var r,a=new c.tinymce.dom.TreeWalker(n,e);do{r=a.prev(Ko)}while(Go(r));return void 0===r},isCursorAtEndOf(e,t){return t.collapsed&&this.isRangeAtEndOf(e,t)},isRangeAtEndOf(e,t){if(!t||!t.endContainer)throw new Error(`range is invalid. received: ${t}`);if(!e||!e.nodeType)throw new Error(`container is invalid. received: ${e}`);var n,o=t.endContainer;if(3===o.nodeType){if(t.endOffset!=o.nodeValue.length)return!1;n=o}else n=o.childNodes[0===t.endOffset?t.endOffset:t.endOffset-1];var r,a=new c.tinymce.dom.TreeWalker(n,e);do{r=a.next(Ko)}while(Go(r));return void 0===r||"BR"===r.nodeName&&void 0===a.next(Ko)},setCursorAtStartOfContents(e){if(!e)throw new Error("element is required.");if(1!==e.nodeType&&3!==e.nodeType)throw new Error(`invalid argument: expected a DOM element or text node, got: ${e}`);var t=c.tinymce.activeEditor,n=t.dom.createRng();["br","img"].includes(e.nodeName.toLowerCase())?(n.setStartBefore(e),n.setEndBefore(e),t.selection.setRng(n)):(t.selection.select(e,!0),t.selection.collapse(!0))},isCursorAtEnd(e,t){var n=e.selection.getSel();if(!n||!n.isCollapsed)return!1;var o=t.endContainer;if(3==o.nodeType)return o.wholeText.length==t.endOffset;var r=o.childNodes[t.endOffset];return s()(r).is(":last-child")}},Jo=Yo;function qo(e,t){var n=e.selection.getSel();if(!n||!n.isCollapsed)return!1;var o,r=t.startContainer;return 3==r.nodeType?!r.previousSibling&&0===t.startOffset&&function(e){if(0==s()(e).closest("td").length)return!0;for(var t=e.parentNode;t&&"td"!=t.nodeName.toLowerCase();){if(s()(t).prevAll().contents().filter((function(){return 3==this.nodeType})).length)return!1;t=t.parentNode}return!0}(r):s()(r).is("p:first-child")?0===t.startOffset:s()(r).is(".wysiwyg-macro-body")?1==t.startOffset&&(3==(o=t.startContainer.childNodes[0]).nodeType&&"\n"==o.nodeValue):void 0}function Zo(e,t,n){var o=e.dom.create("p",{},'<br data-mce-bogus="1" />');n?t.after(o):t.before(o),e.selection.select(o,!0),e.selection.collapse()}function Xo(){var e=c.tinymce.activeEditor;c.tinymce.Env.browser.isFirefox()&&e.on("KeyPress",(t=>{if(t.charCode==c.tinymce.util.VK.SPACE){var n=e.selection.getNode(),o=s()(n).closest("a"),r=e.selection.getRng();o.length&&Jo.isCursorAtEnd(e,e.selection.getRng())&&(r.setStartAfter(o[0]),r.setEndAfter(o[0]),e.selection.setRng(r),e.selection.collapse())}})),e.on("KeyPress",(t=>{if(13==t.keyCode&&!t.shiftKey){var n=e.selection.getNode(),o=s()(n).closest("pre");if(o.length&&!c.tinymce.confluence.MacroUtils.isInMacro(o)&&Jo.isCursorAtEnd(e,e.selection.getRng()))return Zo(e,o,!0),c.tinymce.dom.Event.cancel(t);var a=s()(n).closest("blockquote");if(a.length){var i=s()(n).closest("p");if(i.is(":first-child")&&qo(e,e.selection.getRng()))return Zo(e,a,!1),c.tinymce.dom.Event.cancel(t);if(i.is(":last-child")&&function(e){var t=e.contents();if(!t.length)return!0;if(1==t.length){if(t.is("br"))return!0;if("&nbsp;"==t.html()||160==t.text().charCodeAt(0))return!0;if(3==t[0].nodeType&&t[0].nodeValue==r.a.Rte.HIDDEN_CHAR)return!0}return!1}(i))return e.dom.remove(i[0],!1),Zo(e,a,!0),c.tinymce.dom.Event.cancel(t)}}return!0}),!0)}var er,tr,nr,or,rr,ar,ir,lr,sr,cr,dr,ur;function gr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mr,pr,fr,hr,vr,br=4,yr=4,wr=15,Cr=20,Ar=25,xr=17,Mr=20,kr=0,Er=!1;function Tr(){er=s()(c.document),nr=s()("#insert-table-dropdown"),or=s()("#rte-button-insert-table"),rr=nr.find(".aui-dd-parent"),ar=s()("#table-picker-container"),(ir=ar.find(".table-picker-box").attr("tabindex",0).attr("role","application")).focusin($r),ir.focusout(Hr),lr=ar.find(".picker-cell"),sr=ar.find(".picker-heading"),cr=ar.find(".picker-selected-cell"),dr=ar.find(".picker-selected-heading"),ur=ir.find(".desc"),tr=s()("<div></div>").attr("id","table-picker-backdrop").addClass("hidden").appendTo(nr),or.click((e=>{var t;e.preventDefault(),Er||(Ct(),Dr(),vr=!0,Ir(1,1),t=s()(c.tinymce.activeEditor.getDoc()),er.bind("mousemove.atlassian-table-picker",Nr),er.bind("keydown.atlassian-table-picker",Rr),er.bind("keyup.atlassian-table-picker",Rr),t.bind("keydown.atlassian-table-picker",Rr),t.bind("keyup.atlassian-table-picker",Rr),tr.removeClass("hidden"),ar.removeClass("hidden"),rr.addClass("active"),or.focus())})),tr.click(Fr),cr.click(Lr),dr.click(Lr)}var Dr=function(){ar.css({top:s()("#insert-table-dropdown").outerHeight(!0)}),Dr=function(){}};function Sr(){var e;ar.hasClass("hidden")||(e=s()(c.tinymce.activeEditor.getDoc()),er.unbind(".atlassian-table-picker"),e.unbind(".atlassian-table-picker"),ar.addClass("hidden"),tr.addClass("hidden"),rr.removeClass("active"))}function Ir(e,t){p.a.debug(`setSize(${[e,t]})`),e==fr&&t==hr||(e=Math.max(1,Math.min(wr,e)),t=Math.max(1,Math.min(Cr,t)),mr=Math.max(br,e),pr=Math.max(yr,t),fr=e,hr=t,ir.width(mr*Ar+1),ir.height(pr*xr+Mr),jr(lr,mr,pr),jr(cr,fr,hr),jr(sr,mr,1),jr(dr,fr,1),Or(),ur.text(`${fr} x ${hr}`))}function Or(){sr.toggleClass("hidden",!vr),dr.toggleClass("hidden",!vr)}function jr(e,t,n){e.width(Ar*t+1),e.height(xr*n+1)}function Nr(e){var t,n=lr.offset(),o=n.top-er.scrollTop(),r=n.left-er.scrollLeft(),a=o+lr.outerHeight(!0)+kr,i=a-xr-kr,l=r+lr.outerWidth(!0)+kr,s=l-Ar-kr,c=e.clientY,d=e.clientX,u=mr,g=pr;p.a.debug(`[mouseX,spLeft,spRightShrink,spRightGrow][mouseY,spTop,spBottomShrink,spBottomGrow] = ${[d,r,s,l]}/${[c,o,i,a]}`),d>l?(u+=t=~~((d-l)/Ar+1),p.a.debug(`grow: xdelta = ${t}`)):d<s&&(u+=t=~~((d-s)/Ar-1),p.a.debug(`shrink: xdelta = ${t}`)),c>a?(g+=t=~~((c-a)/xr+1),p.a.debug(`grow: ydelta = ${t}`)):c<i&&(g+=t=~~((c-i)/xr-1),p.a.debug(`shrink: ydelta = ${t}`)),Ir(u,g)}function Lr(e){var t=function(e){var t=~~(e.offsetX||e.originalEvent.layerX),n=~~(e.offsetY||e.originalEvent.layerY),o=1+~~(t/Ar),r=1+~~(n/xr);return o<1||o>wr||r<1||r>Cr?null:{width:o,height:r}}(e);e.preventDefault(),Br(t)}function Br(e){if(p.a.debug(`insertTable: size = ${e&&[e.width,e.height]}`),e){Sr();var t={columns:e.width,rows:e.height,options:{headerRows:vr?1:0}};c.tinymce.activeEditor.execCommand("mceInsertTable",!1,t)}}function Rr(e){var t;p.a.debug(`key: ${e.charCode}/${e.keyCode}/${e.shiftKey}`),0===e.charCode&&(t=!e.shiftKey,p.a.debug(`enableHeading(${t})`),t!=vr&&(vr=t,Or())),27===e.keyCode&&Sr()}function Pr(e){p.a.debug(`key: ${e.charCode}/${e.key}/${e.shiftKey}`),"ArrowLeft"===e.key&&(e.preventDefault(),e.stopPropagation(),Ir(fr-1,hr)),"ArrowUp"===e.key&&(e.preventDefault(),e.stopPropagation(),Ir(fr,hr-1)),"ArrowRight"===e.key&&(e.preventDefault(),e.stopPropagation(),Ir(fr+1,hr)),"ArrowDown"===e.key&&(e.preventDefault(),e.stopPropagation(),Ir(fr,hr+1)),"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),Br({width:fr,height:hr}))}function $r(){var e=s()(c.tinymce.activeEditor.getDoc());er.bind("keydown.atlassian-table-picker",Pr),e.bind("keydown.atlassian-table-picker",Pr)}function Hr(){var e=s()(c.tinymce.activeEditor.getDoc());er.unbind(".atlassian-table-picker",Pr),e.unbind(".atlassian-table-picker",Pr)}function Fr(){Sr()}class zr{constructor(){gr(this,"onPickerClick",Lr),gr(this,"removePopup",Sr)}}Object(Lt.a)("confluence-editor/table-picker",(()=>new zr));var Ur,_r,Qr,Wr,Vr,Kr,Gr,Yr,Jr,qr,Zr=n(25),Xr=n(12),ea="editor-preview-iframe",ta=M("editor.ajax.save")&&!M("editor.ajax.save.disable")&&""!==m.a.get("remote-user"),na=[],oa=[],ra=[],aa=!1,ia=1,la=!1,sa=null,ca=e=>{c.Confluence.Editor.UI.setButtonState(e,c.Confluence.Editor.UI.saveButton),c.Confluence.Editor.UI.setButtonState(e,c.Confluence.Editor.UI.previewButton),c.Confluence.Editor.UI.setButtonState(e,c.Confluence.Editor.UI.cancelButton),s()("#rte-show-changes").length>0&&c.Confluence.Editor.UI.setButtonState(e,s()("#rte-show-changes")),s()("#rte-show-revert").length>0&&c.Confluence.Editor.UI.setButtonState(e,s()("#rte-show-revert"))},da=e=>{var t=(e=e||{}).messageKey||"editor-error-message",n=e.message||Object(cn.a)("editor.generic.refresh"),o={title:e.title,type:"error",message:n};e.close&&s.a.extend(o,{close:e.close}),Xr.a.handleMessage(t,o,(()=>{e.disablePublish&&ca(!1)}))},ua=()=>"limited"===m.a.get("edit-mode"),ga=e=>{var t=!0;Xr.a.closeMessages(["offline-before-save-error"]);for(var n=0;n<oa.length&&(!1===oa[n](e)&&(t=!1),!e.isImmediatePropagationStopped());n++);if(e.isPropagationStopped())return!1;t&&!e.isDefaultPrevented()?(e.preventDefault(),pa(e).done(ha).fail(ma)):e.preventDefault()},ma=e=>{var t=e||{};da({messageKey:t.messageKey||"offline-before-save-error",message:t.disablePublish?Object(cn.a)("editor.generic.refresh"):Object(cn.a)("editor.offline.before.save.error"),disablePublish:t.disablePublish}),e&&Object(C.b)("analytics",{name:"editor.save.error."+e.origin+"."+e.cause}),c.Confluence.Editor.UI.toggleSavebarBusy(!1),c.Confluence.Editor.Drafts.bindUnloadMessage()},pa=e=>{var t=s.a.Deferred();return t.resolve(e),t.promise()},fa=()=>{var e=()=>{la=!0,s()(c.Confluence.Editor.getCurrentForm()).submit(),Object(C.b)("analytics",{name:"confluence.editor.close",data:{source:"publishButton"}})},t=c.Confluence.Editor.Drafts.getDraftSavingPromise();t?t.always(e):e()},ha=fa,va=function(){for(var e=0;e<na.length;e++)c.Confluence.Editor.UI.cancelButton.click(na[e]);for(var t=s()(c.Confluence.Editor.getCurrentForm()),n=0;n<ra.length;n++)t.submit(ra[n]);Object(C.c)("init.rte",this)},ba=(e,t,n,o)=>{o.push(n),r.a.Rte&&r.a.Rte.BootstrapManager&&r.a.Rte.BootstrapManager.isInitComplete()?e.bind(t,n):aa||(aa=!0,s.a.bind("init.rte",va))},ya=(e,t,n)=>{var o,a,i=null,l=n.pop();for(null!==r.a&&void 0!==r.a&&null!==(o=r.a.Rte)&&void 0!==o&&null!==(a=o.BootstrapManager)&&void 0!==a&&a.isInitComplete()&&(i=(e,t,n)=>{e.unbind(t,n)});l;){var s;null===(s=i)||void 0===s||s(e,t,l),l=n.pop()}},wa=()=>{var e=m.a.getBoolean("shared-drafts"),t=["page","blogpost"].includes(m.a.get("content-type")),n="0"!==r.a.params.pageId;return t&&(n||e)},Ca=e=>{s()("#editpageform").find("input[name='atl_token']").val(e),m.a.set("atl-token",e),m.a.set("atlassian-token",e),s()("#atlassian-token").attr("content",e)},Aa=()=>{var e,t,n;return null==c.tinymce.activeEditor?(p.a.debug("Confluence.Editor: editorHasContentChanged - No active editor present. Returning false."),!1):null===r.a||void 0===r.a||null===(e=r.a.Rte)||void 0===e||null===(t=e.Content)||void 0===t||null===(n=t.editorHasContentChanged)||void 0===n?void 0:n.call(t)},xa=(Gr=e=>{_r!==e&&(_r&&_r.clear(),e.start(c.Confluence.Editor.heartbeat),_r=e)},Yr=m.a.getNumber("heartbeat-interval")||3e4,Jr={start:e=>{p.a.debug("Changing heartbeat to the normal scheduler"),Qr=setInterval(e,Yr)},clear:()=>{clearInterval(Qr)}},Kr=Math.max(Yr/5,5e3),qr={start:e=>{p.a.debug("Changing heartbeat to the recovery scheduler"),Vr=0;var t=()=>{e();var n=Kr*Math.pow(2,Vr);Wr=setTimeout(t,Math.min(n,3e5)),Vr++};Wr=setTimeout(t,Kr)},clear:()=>{clearTimeout(Wr)}},{normal:()=>Gr(Jr),recovery:()=>Gr(qr),reset:()=>{var e;null===(e=_r)||void 0===e||e.clear(),(_r=Jr).start(c.Confluence.Editor.heartbeat)},cleanup:()=>{var e,t;_r&&(_r.clear(),_r=null),null===(e=Ur)||void 0===e||null===(t=e.abort)||void 0===t||t.call(e)}}),Ma=e=>{Object(Zr.setVisible)("#wysiwyg",e),s()(".toolbar-group-preview").toggleClass("assistive",!e),s()(".toolbar-group-edit").toggleClass("assistive",e),s()("#main").toggleClass("active-richtext",e)},ka=e=>{if("comment"!==m.a.get("content-type")){var t=s()("#content-title");t.hasClass("placeholded")?(s()("#preview-title-text").text(""),s()("#title-text").text("")):(s()("#preview-title-text").text(t.val()),s()("#title-text").text(t.val()))}Object(Zr.setVisible)("#preview",e),s()(".toolbar-group-preview").toggleClass("assistive",e),s()(".toolbar-group-edit").toggleClass("assistive",!e),s()("#main").toggleClass("active-preview",e),s()("#full-height-container").length&&s()("#full-height-container").toggleClass("active-preview",e)},Ea=e=>{p.a.debug("Set mode: "+e),e===c.Confluence.Editor.MODE_RICHTEXT?(Ma(!0),ka(!1)):e===c.Confluence.Editor.MODE_PREVIEW&&(ka(!0),Ma(!1),c.Confluence.Editor.UI.spinner.removeClass("aui-icon-wait")),setTimeout((()=>{var e=s()(".toolbar-group-preview");e.height(0),e.height(),e.height("auto")}),1),sa=e,s()(c.document).trigger("mode-changed",[e])},Ta=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(p.a.debug("Change mode: "+e),Sa()&&!r.a.Rte.BootstrapManager.isInitComplete())return!1;if(sa===e)return!1;var n=sa;if(Object(C.b)("rte-changeMode",e),e===c.Confluence.Editor.MODE_PREVIEW){var o=c.tinymce.activeEditor;c.tinymce.Env.browser.isFirefox()&&n===c.Confluence.Editor.MODE_RICHTEXT&&!c.Confluence.Editor.bookmark&&(c.Confluence.Editor.bookmark=c.tinymce.activeEditor.selection.getBookmark()),sa=e;var a={contentId:c.Confluence.getContentId(),contentType:m.a.get("content-type"),spaceKey:m.a.get("space-key"),xHtml:o.getContent(),outputType:c.Confluence.Editor.PREVIEW_OUTPUT_TYPE};r.a.safe.ajax({type:"POST",url:A.a+"/pages/rendercontent.action",data:a,success:Da,timeout:2e4,error:()=>{var e;Object(C.b)("rte-preview-action-selected"),Object(C.b)("rte.preview.error",{status:0}),Xr.a.closeMessages(["server-offline"]),da({messageKey:"server-offline",message:Object(cn.a)("editor.offline.preview.error"),disablePublish:!1}),c.Confluence.Editor.currentEditMode=n,null===(e=t.errorCallback)||void 0===e||e.call(t)}}).always((()=>{m.a.getBoolean("shared-drafts")&&["page","blogpost"].includes(m.a.get("content-type"))&&c.Confluence.Editor.Drafts.save({skipErrorHandler:!0})}))}else Ea(e);if(e===c.Confluence.Editor.MODE_RICHTEXT&&s()(c.document).trigger("resize.resizeplugin"),n===c.Confluence.Editor.MODE_PREVIEW){var i=c.document.getElementById(ea);if(i){var l=i.contentDocument||i.contentWindow.document;l.removeChild(l.documentElement),s()(i).remove()}}return!1},Da=e=>{var t;Object(C.b)("rte-preview-action-selected"),s()("#preview-error").remove(),c.tinymce.activeEditor.setProgressState(!0);var n=s()("#previewArea"),o=s()(`<iframe id="${ea}" src="about:blank" scrolling="yes" frameborder="0"></iframe>`);n.html(o);var r=o[0].contentDocument||(null===(t=o[0].contentWindow)||void 0===t?void 0:t.document);null==r||r.open(),null==r||r.write(e),null==r||r.close()},Sa=()=>sa===c.Confluence.Editor.MODE_RICHTEXT,Ia=()=>{var e=c.tinymce.activeEditor.getBody();switch(m.a.get("content-type")){case"template":e.setAttribute("aria-label",Object(cn.a)("template.content.ariaLabel"));break;case"page":e.setAttribute("aria-label",Object(cn.a)("page.content.ariaLabel"));break;case"blogpost":e.setAttribute("aria-label",Object(cn.a)("blogpost.content.ariaLabel"));break;case"comment":e.setAttribute("aria-label",Object(cn.a)("quick.comment.label.message"));break;default:e.setAttribute("aria-label",Object(cn.a)("content.ariaLabel"))}p.a.debug("Set aria-label to editor")},Oa={bookmark:"",MODE_RICHTEXT:"richtext",MODE_PREVIEW:"preview",PREVIEW_OUTPUT_TYPE:"PREVIEW",currentEditMode:sa,contentHasChangedSinceLastSave:false,sourceInitialValue:!1,isPublishing:e=>(void 0!==e&&(la=e),la),isLimitedModeEnabled:ua,overrideBeforeSave:e=>{pa=e},overrideSave:e=>{ha=e},restoreDefaultSave:()=>{ha=fa},getNumConcurrentEditors:()=>ia,addCancelHandler:e=>ba(c.Confluence.Editor.UI.cancelButton,"click",e,na),addSaveHandler:e=>oa.push(e),addSubmitHandler:e=>ba(s()(c.Confluence.Editor.getCurrentForm()),"submit",e,ra),removeAllCancelHandlers:()=>ya(c.Confluence.Editor.UI.cancelButton,"click",na),removeAllSaveHandlers:()=>ya(c.Confluence.Editor.UI.saveButton,"click",oa),removeAllSubmitHandlers:()=>ya(s()(c.Confluence.Editor.getCurrentForm()),"submit",ra),hasContentChanged:()=>!!Sa()&&Aa(),isEmpty:()=>!s()(c.tinymce.activeEditor.getContent()).text().trim(),getCurrentTitle:()=>{var e;return null===(e=s()("#content-title"))||void 0===e?void 0:e.val()},contentFormSubmit:()=>(!ua()&&c.Confluence.Editor.Drafts.isSharedDraftsEnabled()||c.Confluence.Editor.Drafts.unBindUnloadMessage(),s()(".editable-title #content-title").prop("disabled",!0),!0),metadataSyncRequired:wa,heartbeat:()=>{var e={dataType:"json",contentId:m.a.get("content-id"),draftType:m.a.get("content-type"),spaceKey:r.a.params.spaceKey,contributorsHash:m.a.get("contributors-hash")};Ur=r.a.safe.post(A.a+"/json/startheartbeatactivity.action",e,(e=>{if(!wa()&&e)return Ca(e.atlToken),m.a.set("shared-drafts","legacy"!==e.editMode),void Object(C.b)("rte.heartbeat",e);if(!(null!=e&&e.atlToken&&e.activityResponses instanceof Array))return Object(C.b)("rte.heartbeat-error","Invalid server response"),p.a.error("Unexpected server response for heartbeat:"),void p.a.error(e);m.a.set("contributors-hash",e.contributorsHash),m.a.set("shared-drafts","legacy"!==e.editMode);var t=e.activityResponses;if(Ca(e.atlToken),c.Confluence.Editor.heartbeatType.normal(),Object(C.b)("rte.heartbeat",t),(ia=(t.length||0)+1)>1){var n=ta?0===s()("#reliable-other-users-span").length?s()("<span id='reliable-other-users-span'></span>"):s()("#reliable-other-users-span"):s()("#other-users-span");n.empty();for(var o=0;o<ia-1;++o){o>0&&n.append(", ");var a=t[o];n.append(s()("<a></a>").attr("href",A.a+"/display/~"+encodeURIComponent(a.userName)).text(a.fullName)),null!=a.lastEditMessage&&n.append(" ").append(s()("<span></span>").addClass("smalltext").text(a.lastEditMessage))}ta&&(Xr.a.isDisplayed(["heartBeat"])||""===n.html().trim()||Xr.a.handleMessage("heartBeat",{type:"info",message:Object(cn.a)("heartbeat.page.edited.info","<span id='reliable-other-users-span'>"+n.html()+"</span>")})),s()("#heartbeat-div").hasClass("hidden")&&r.a.Confluence.Analytics.publish("rte.notification.concurrent-editing",{numEditors:ia,pageId:r.a.params.pageId,draftType:r.a.params.draftType})}ta&&ia<=1&&Xr.a.closeMessages(["heartBeat"]),Object(Zr.setVisible)("#heartbeat-div",ia>1),s()(c.document).trigger("resize.resizeplugin"),Object(C.b)("editor-heartbeat",e),(e=>{var t;if(e!==m.a.get("edit-mode")){if("collaborative"===e&&"limited"!==m.a.get("edit-mode"))return;m.a.set("edit-mode",e),t="collaborative"===e?Object(cn.a)("editor.collaborative.mode.enabled"):Object(cn.a)("editor.collaborative.mode.disabled"),da({messageKey:"edit-mode-transition",message:t,disablePublish:!0})}})(e.editMode)}),"json").fail(((e,t,n)=>{(e.status>=500||0===e.status)&&c.Confluence.Editor.heartbeatType.recovery(),403===e.status||401===e.status?p.a.error("Heartbeat error: Unauthorized"):405===e.status?p.a.error("Heartbeat error: Method not allowed"):(p.a.error("Server error on heartbeat request:"),p.a.error(n)),Object(C.b)("rte.heartbeat-error",e)}))},heartbeatType:xa,disableFrame:e=>{s()("form",e).each((function(){s()(this).unbind(),this.onsubmit=()=>!1})),s()("a",e).each((function(){var e=s()(this),t=e.attr("href");e.unbind(),t&&"#"!==t.charAt(0)&&(e.attr("target","_top"),e.bind("click",(t=>{t.preventDefault(),e.blur()})))})),s()("input, img",e).each((function(){s()(this).unbind()}))},previewFrameOnload:(e,t)=>{c.Confluence.Editor.setMode(c.Confluence.Editor.MODE_PREVIEW),c.tinymce.activeEditor.setProgressState(!1),c.Confluence.Editor.disableFrame(e),s()(".tipsy").remove();var n=s()("#main",e)[0];if("comment"!==m.a.get("content-type")&&0===s()(n).find("#main-header").length){var o=s()("#title-heading"),r=o.attr("class");s()(n).prepend(`<div id="preview-header"><div id="title-heading" class="${r||""}">${(null==o?void 0:o.html())||""}</div></div>`)}if(s()(c.tinymce.activeEditor.getBody()).hasClass("resizable")){var a,i=s()(t||"#previewArea iframe"),l=0,d=0,u=i.height();n&&function e(){if(s()("#editor-preview-iframe").length){var t=s()(n).outerHeight(!0);l!==t?(t!==i.height()&&i.height(0).height(Math.max(t,u)),l=t,d=0):d++,d<500&&(a=setTimeout(e,500))}}(),s()(c.document).one("mode-changed.resize-editor",(function(e,t){t!==c.Confluence.Editor.MODE_PREVIEW&&a&&clearTimeout(a)}))}},showPreview:ka,setMode:Ea,getContentId:()=>c.Confluence.getContentId(),addErrorMessage:(e,t,n)=>{var o=s()("#"+e),a=n?"#any-messages":"#editor-messages";o.length?o.empty():o=s()("<div></div>").attr("id",e).appendTo(a),r.a.messages.error(o,{closeable:!0,body:t})},inRichTextMode:Sa,isNewPage:()=>s()("#createpageform, #createpagetemplate").length>0,onInit:()=>{c.Confluence.Editor.setMode(c.Confluence.Editor.MODE_RICHTEXT),c.tinymce.activeEditor.on("click",(()=>{var e=c.Confluence.Editor.UI.postingDatePicker;null==e||e.hide()}))},getCurrentForm:()=>c.tinymce.activeEditor.formElement,setToolBarInactive:e=>s()("#rte-toolbar").toggleClass("disabled",e),isVisible:()=>s()("#wysiwyg:visible").length>0||s()("#preview:visible").length>0,setAriaLabelByContentType:Ia},ja=e=>{e.fn.tipsy.autoBounds2=function(t,n){return function(){var o={},r=e(document).scrollTop()+t,a=e(document).scrollLeft()+t,i=e(this);return n.length>1?(o.ns=n[0],o.ew=n[1]):"e"==n[0]||"w"==n[0]?o.ew=n[0]:o.ns=n[0],i.offset().top<r&&(o.ns="n"),i.offset().left<a&&(o.ew="w"),e(window).width()+e(document).scrollLeft()-(i.offset().left+i.width())<t&&(o.ew="e"),e(window).height()+e(document).scrollTop()-(i.offset().top+i.height())<t&&(o.ns="s"),o.ns?o.ns+(o.ew?o.ew:""):o.ew}}};function Na(){s()(".tipsy").remove()}function La(){var e=/\+/g;setTimeout((()=>{s()("#rte-savebar .aui-button[title]").each((function(){var t=s()(this),n=t.attr("title");if(t.removeAttr("title"),i.a.Env.os.isMacOS()){var o=n.indexOf("(");o>=0&&(n=n.substr(0,o)+n.substr(o).replace(e,""))}t.attr("data-tooltip",n)}))}),0)}function Ba(e,t,n){if("dropdown"===t&&(s()(".tipsy").remove(),n&&n.trigger&&n.trigger.jquery)){var o=n.trigger.data("tipsy");o&&(o.hoverState="out")}}function Ra(){var e=c.Confluence.Editor,t="disabled",n=!1;function o(e){var t=()=>{e&&e.hide()};He(c.document,"showLayer",((n,o,r)=>{if("dropdown"==o&&r==e){var a=c.tinymce.activeEditor;a.on("Click",t),a.on("KeyUp",t)}})),He(c.document,"hideLayer",((n,o,r)=>{if("dropdown"==o&&r==e){var a=c.tinymce.activeEditor;a.off("Click",t),a.off("KeyUp",t)}}))}function r(e){e.addCallback("show",(()=>{e.$.parents(".disabled").length&&e.hide()}))}function a(e,o){if(!n){var r=f(o);s()(`#${r}`).removeClass(t)}}function i(e,n){var o=f(n);s()(`#${o}`).addClass(t)}function l(e,o){o?e.closest(".aui-button").prop(t,!0).attr("aria-disabled","true").toggleClass(t,o):n||e.closest(".aui-button").prop(t,!1).removeAttr("aria-disabled").toggleClass(t,o)}function u(e,o,r,a){var i=!!n||e,l=!!n||o,c=!!n||r,d=s()("#toolbar"),u=d.find(".toolbar-item"),g=s()("#insert-menu, #more-menu"),m=s()("#insert-menu, #color-picker-control"),p=s()("#format-dropdown"),f=a||function(){return!0};u.toggleClass(t,i),g.toggleClass(t,i),m.toggleClass(t,i),p.toggleClass(t,!!l),i?(Er=!0,nr.addClass("disabled")):(Er=!1,nr.removeClass("disabled"),or.attr("data-tooltip",Object(cn.a)("tinymce.tablepicker.insert_table_title"))),void 0!==c&&d.find("button, input").filter(f).toggleClass(t,c).prop(t,c)}var g,m=()=>e=>{var n,o,r=e.element,a=(n=r,o=s()(n).closest("PRE,BLOCKQUOTE,.text-placeholder"),e=>o.is(e)),i=a("BLOCKQUOTE"),l=a("PRE"),c=a(".text-placeholder");if(l)u(!0,s()(r).parents("table").is("[data-macro-body-type='PLAIN_TEXT']"));else if(c)u(!0);else if(i){u(!1),s()("#rte-button-justifyleft, #rte-button-justifycenter, #rte-button-justifyright").toggleClass(t,!0)}else u(!1)};function f(e){var t="default";return e&&e.id&&(t=e.id),`rte-toolbar-row-${t}`}function h(e){return s()(`#${e}`).length>0}function v(e,t){var n=t.animate;null==n&&(n=!0);var o=function(){s()(this).remove(),ze(c.document,"resize.resizeplugin"),t.onHide&&t.onHide()};clearTimeout(g),g=d.a.setTimeout((()=>{var e=f(t),r=s()(`#${e}`);n?r.slideUp(400,o):(r.hide(),o.call(r))}),100)}function b(e,t){if(!n){var o=f(t),r=t.animate;if(null==r&&(r=!0),h(o))s()(`#${o}:hidden`).slideDown(400,(()=>{p.a.debug("Prevented toolbar deferred display race condition")}));else{var a=s()("<div></div>").addClass("toolbar-split toolbar-split-row toolbar-contextual");a.attr("id",o),t.editorAdjacent&&a.addClass("editor-adjacent");for(var i=t.topToolbar?s()("#rte-toolbar.aui-toolbar:visible"):s()("#savebar-container .aui-toolbar:visible"),l=0,u=t.buttons.length;l<u;l++){var m=t.buttons[l];a.append(m.render())}if(a.css({display:"none"}),t.editorAdjacent)i.append(a);else{var v=s()(".editor-adjacent",i).filter(":first");v.length?v.before(a):i.append(a)}a.find(".toolbar-dropdown").each((function(){y(this)}));var b=()=>{ze(c.document,"resize.resizeplugin"),ze(c.document,"shown.contextToolbar"),t.onVisible&&t.onVisible()};clearTimeout(g),g=d.a.setTimeout((()=>{r?a.slideDown(400,b):(a.show(),b())}),100)}}}function y(e){var t=s()(e),a=t.dropDown("Standard",{alignment:t.data("dropdown-alignment")||"left"})[0];t.find(".dropdown-item").click((function(e){!function(e){if(!n){var t=e.attr("data-macro-name"),o=e.attr("data-command"),r=e.attr("data-format"),a=e.attr("data-control-id"),i=c.tinymce.activeEditor;t&&kn.macroBrowserToolbarButtonClicked({presetMacroName:t}),o&&i.execCommand(o,!1),r&&i.plugins.atlassiantheme.controlHandlers.formatselect.click.dispatch(r),a&&i.plugins.atlassiantheme.controlHandlers.buttons.click.dispatch(a.toLowerCase())}}(s()(this)),a.hide(),e.preventDefault()})),r(a),o(a)}return{init(t){var n,l;y("#format-dropdown"),y("#more-menu .aui-dd-parent"),y("#insert-menu .aui-dd-parent"),s()("#pagelayout-menu").length&&y("#pagelayout-menu .aui-dd-parent"),s()("#template-menu").length&&y("#template-menu .aui-dd-parent"),function(){var e=s()("#color-picker-control");if(e.length){var t=e.find(".aui-dd-parent"),n=s()("#rte-button-color"),a=n.find(".selected-color"),i=t.dropDown("Standard",{alignment:"left"})[0],l=n.attr("data-color");a.css("background-color",`#${l}`),e.delegate("a[data-color]","click",(function(e){var t=s()(this),o=t.attr("data-color");e.preventDefault(),t.closest(".disabled").length||(c.tinymce.execCommand("ForeColor",!1,`#${o}`),n.attr("data-color",o),a.css("background-color",`#${o}`))})),r(i),o(i)}}(),Tr(),(n=s()("#rte-button-source-mode")).click((()=>{n.hasClass("active")?Ta(e.MODE_RICHTEXT):Ta(e.MODE_SOURCE)})),l=t,ze(c.document,"initContextToolbars.Toolbar",l),He(c.document,"createContextToolbarRow.Toolbar",b),He(c.document,"removeContextToolbarRow.Toolbar",v),He(c.document,"enableContextToolbarRow.Toolbar",a),He(c.document,"disableContextToolbarRow.Toolbar",i);var d=s()("#format-dropdown"),u=d.find("span.dropdown-text");t.on("BeforeExecCommand",(e=>{var n=e.command,o=e.value;if(s.a.each(["pre","blockquote"],(function(){"FormatBlock"==n&&o==this&&(t.formatter.remove("alignleft"),t.formatter.remove("aligncenter"),t.formatter.remove("alignright"))})),s()(t.selection.getNode()).closest("pre,.text-placeholder").length)for(var r=["Bold","Italic","Underline","Strikethrough","InsertUnorderedList","InsertOrderedList","InsertInlineTaskList","InsertInlineTaskListNoToggle","superscript","subscript","mceConfMacroBrowser","mceConfimage","mceConfAttachments","mceEmotion","InsertWikiMarkup","mceConflink","mceInsertTable","mceConfAutocompleteLink"],a=r.length,i=0;i<a;i++)n==r[i]&&e.preventDefault();if("FormatBlock"==n&&"pre"==o&&(t.undoManager.add(),t.execCommand("removeFormat")),"FormatBlock"==n&&"p"==o){var l=d.find(".dropdown-item[data-format='blockquote']").text();u.text()==l&&t.execCommand("FormatBlock",!1,"blockquote")}})),t.on("ExecCommand",(e=>{var t=e.command,n=e.value;if("FormatBlock"==t){var o=d.find(`.dropdown-item[data-format='${n}']`);o.length||(o=d.find(".dropdown-item[data-format='p']")),u.text(o.text())}})),t.on("NodeChange",m()),t.on("init",(()=>{p.a.debug("customtoolbar: ed.onInit function");var e={};s()(".aui-toolbar").find("[data-control-id]").each(((n,o)=>{var r=s()(o),a=r.attr("data-control-id");a&&("formatselect"==a?t.plugins.atlassiantheme.controlHandlers[a].state.add((e=>{if("p"==e){var n=t.selection.getNode();s()(n).closest("p").parent().is("blockquote")&&(e="blockquote")}var o=d.find(`.dropdown-item[data-format='${e}']`).text();o&&u.text(o)})):e[a.toLowerCase()]=r)}));var n=t.plugins.atlassiantheme.controlHandlers.buttons;n.state.add(((t,n,o)=>{var r=e[t];if(r){var a=r.find(".icon-check"),i=r.closest(".toolbar-item");a.length?a.toggleClass("hidden",!o):i.toggleClass(n,o)}})),s()(".aui-toolbar").delegate(".toolbar-item","click",(function(e){var t=s()(this);if(t.hasClass("disabled"))e.preventDefault();else{var o=t.children(".toolbar-trigger[data-control-id]").attr("data-control-id");o&&(n.click.dispatch(o.toLowerCase()),e.preventDefault())}})),s.a.support.shrinkWrapBlocks=!1,p.a.debug("customtoolbar: finished ed.onInit function"),function(){p.a.debug("Enabling Chunky Tooltip for the editor"),ja(s.a);var e={live:!0,gravity:"n",title:function(){return s()(this).attr("data-tooltip")||""},delayIn:250,delayOut:0},t=s.a.fn.tipsy.autoBounds2(50,"n"),n=s.a.fn.tipsy.autoBounds2(50,"w"),o=s.a.extend({},e,{gravity:t}),r=s.a.extend({},e,{gravity:n}),a=s.a.extend({},e,{gravity:"se"});s()("#rte-toolbar [data-tooltip]:not(.dropdown-item)").tooltip(o),s()("#rte-toolbar .dropdown-item[data-tooltip]").tooltip(r),s()("#rte-savebar [data-tooltip]").tooltip(a),s()("#editor-precursor [data-tooltip]").tooltip(o),s()("#property-panel [data-tooltip]").tooltip(o),He(c.document,"showLayer",Ba),He(c.document,"hideLayer",Ba),Object(C.a)("created.property-panel",Na),Object(C.a)("destroyed.property-panel",Na),Object(C.a)("register-contexts.keyboardshortcuts",La)}()})),t.on("Remove",(()=>{Fe(c.document,"showLayer",Ba),Fe(c.document,"hideLayer",Ba),Object(C.c)("created.property-panel",Na),Object(C.c)("destroyed.property-panel",Na),Object(C.c)("register-contexts.keyboardshortcuts",La)}))},toggleToolbarButton:l,disableToolbarButton:function(e){l(s()(`.${e.replace(".","")}`),!0)},enableToolbarButton:function(e){n||l(s()(`.${e.replace(".","")}`),!1)},focusToolbarButton:function(e){n||s()(`.${e.replace(".","")}`).closest(".aui-button").focus()},isToolbarRowEnabled:function(e){var n=f({id:e});return h(n)&&!s()(`#${n}`).hasClass(t)},getToolbarRow:function(e){var t=f({id:e}),n=s()(`#${t}`);return n.length?n[0]:null},isToolbarButtonEnabled:function(e){return!s()(`.${e.replace(".","")}`).closest(".aui-button").prop(t)},bindDropdownMenu:y,toggleToolbarButtons:u,disableToolbar:function(e){n=!!e},getInfo:()=>({longname:"customtoolbar",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.0"})}}var Pa=function(){var e={Button:function(e){var t=e.text,n=e.tooltip,o=e.triggerText,r=e.iconClass,a=e.click,i=!!e.disabled,l=e.id;this.render=()=>{var e=s()('<button type="button"></button>').addClass("aui-button aui-button-subtle").attr("data-tooltip",n||t);if(l&&e.attr("id",l),i&&e.prop("disabled",!0).attr("aria-disabled","true"),e.click((t=>{e.prop("disabled")||a(t)})),r){var c=s()("<span />");c.addClass(`icon ${r}`),c.text(t),e.append(c)}if(o){var d=s()("<span />");d.addClass("trigger-text"),d.text(o),e.append(d)}return e[0]}},DropDownButton:function(e){var t,n=e.id,o=e.tooltip,r=e.text||"",a=e.iconClass,i=!!e.disabled,l=e.dropDownContent;this.render=function(){var e=s()("<div></div>").addClass("toolbar-item").addClass("toolbar-dropdown").attr("data-tooltip",o);e.attr("id",n);var c=s()("<div/>").addClass("aui-dd-parent"),d=s()("<a href='#'></a>");if(d.addClass("toolbar-trigger").addClass("aui-dd-trigger").addClass("aui-button"),r&&d.append(`<span class="dropdown-text">${r}</span>`),i&&(e.addClass("disabled"),d.addClass("disabled")),a){var u=s()("<span />");u.addClass(`icon ${a}`),u.text(r),d.append(u)}var g=s()("<span/>");return g.addClass("icon").addClass("icon-dropdown"),d.append(g),t=s()("<div/>").addClass("hidden").addClass("aui-dropdown"),l&&t.append(l),c.append(d),c.append(t),e.append(c),e[0]}},TextButton:function(e){var t=e.text,n=e.textClass,o=e.click,r=!!e.disabled,a=e.tooltip;this.render=()=>{var e=s()('<button type="button"></button>').addClass("aui-button aui-button-subtle").addClass(n).text(t);return a&&e.attr("data-tooltip",a),r&&e.prop("disabled",!0).attr("aria-disabled","true"),e.click((t=>{e.prop("disabled")||o(t)})),e[0]}},TextBox:function(e){var t=e.id,n=e.text,o=e.name,r=e.keydown,a=e.cssClass;this.render=function(){var e=s()("<div></div>").addClass("toolbar-item");e.append(s()(`<label for="${t}">${n}</label>`));var i=s()(`<input id="${t}" type="text" name="${o}" class="${a} text" autocomplete="off">`);return i.keydown((e=>{r(e)})),e.append(i),e[0]}},Group:function(e,t){var n=e;this.render=function(){var e=s()("<div></div>");e.addClass("aui-buttons"),t&&(t.id&&e.attr("id",t.id),t.groupClass&&e.addClass(t.groupClass));for(var o=0,r=n.length;o<r;o++)e.append(n[o].render());return e[0]}}};return e.SplitGroup=function(e,t){var n=e,o=t&&t.dropDownOptions||{};this.render=function(){var e=s()("<div></div>");e.addClass("aui-buttons"),t&&(t.id&&e.attr("id",t.id),t.groupClass&&e.addClass(t.groupClass));for(var r=0,a=n.length;r<a;r++)e.append(n[r].render());return e.append(function(){var e=o.id,t=o.disabled,n=o.dropDownContent,r=o.title,a=o.alignment,i=s()("<div></div>").addClass("toolbar-item").addClass("toolbar-dropdown").addClass("toolbar-splitbutton");e&&i.attr("id",e),r&&i.attr({"data-tooltip":r}),a&&i.data("dropdown-alignment",a);var l=s()("<div/>").addClass("aui-dd-parent"),c=s()("<a href='#'></a>");c.addClass("toolbar-trigger aui-dd-trigger aui-button"),t&&(i.addClass("disabled"),c.addClass("disabled"));var d=s()("<span/>");d.addClass("icon").addClass("icon-dropdown"),c.append(d);var u=s()("<div/>").addClass("hidden").addClass("aui-dropdown");return n&&u.append(n),l.append(c),l.append(u),i.append(l),i[0]}()),t&&t.postProcess&&t.postProcess(e),e[0]}},d.a.Confluence.Editor.Toolbar={},d.a.Confluence.Editor.Toolbar.Components=e,e},$a=[];var Ha={top:"table-align-top",middle:"table-align-middle",bottom:"table-align-bottom"},Fa="JustifyTop",za="top",Ua=Ha.top,_a=(e,t)=>{var n=Object.values(Ha).map((e=>document.querySelector(`#${e}`))),o=!1;return null==n||n.forEach((n=>{if(n)return n.id===(null==t?void 0:t.id)?n.classList.contains("active")?(n.classList.remove("active"),e.execCommand(Fa)):(o=!0,void(n.id!==Ua&&n.classList.add("active"))):n.classList.remove("active")})),o},Qa=(n(53),()=>({initContextToolbars(){var e,t,n=c.tinymce.activeEditor,o=Pa(),r="aui-icon aui-icon-small aui-iconfont-",a=c.AJS.storageManager("atlassian.editor","tables"),i=e=>{var t=n.translate(e),o=`${e}_shortcut`,r=n.translate(o);return r&&r!==o&&(t+=` (${r})`),t},l={Buttons:[new o.Group([new o.Button({text:i("table.row_before_desc"),iconClass:`${r}insert-row-before`,click(){c.tinymce.execCommand("mceTableInsertRowBefore",!1,"")}}),new o.Button({text:i("table.row_after_desc"),iconClass:`${r}insert-row-after`,click(){c.tinymce.execCommand("mceTableInsertRowAfter",!1,"")}}),new o.Button({text:i("table.delete_row_desc"),iconClass:`${r}remove-row`,click(){c.tinymce.execCommand("mceTableDeleteRow",!1,"")}})]),new o.Group([new o.Button({text:i("table.cut_row_desc"),iconClass:`${r}cut-table-row`,click(){c.tinymce.execCommand("mceTableCutRow",!1,""),n.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-row")}}),new o.Button({text:i("table.copy_row_desc"),iconClass:`${r}copy-table-row`,click(){c.tinymce.execCommand("mceTableCopyRow",!1,""),n.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-row")}}),new o.Button({text:i("table.paste_row_before_desc"),iconClass:`${r}paste-table-row`,click(){c.tinymce.execCommand("mceTablePasteRowBefore",!1,"")},disabled:!a.doesContain("copied")})]),new o.Group([new o.Button({text:i("table.col_before_desc"),iconClass:`${r}insert-column-before`,click(){c.tinymce.execCommand("mceTableInsertColBefore",!1,"")}}),new o.Button({text:i("table.col_after_desc"),iconClass:`${r}insert-column-after`,click(){c.tinymce.execCommand("mceTableInsertColAfter",!1,"")}}),new o.Button({text:i("table.delete_col_desc"),iconClass:`${r}remove-column`,click(){c.tinymce.execCommand("mceTableDeleteCol",!1,"")}})]),new o.Group([new o.Button({text:i("table.merge_cells_desc"),iconClass:`${r}merge-table-cells`,click(){c.tinymce.execCommand("mceTableMergeCells",!1,"")}}),new o.Button({text:i("table.split_cells_desc"),iconClass:`${r}split-merged-table-cells`,click(){c.tinymce.execCommand("mceTableSplitCells",!1,"")}})]),new o.Group([new o.Button({text:i("table.row_highlight"),iconClass:`${r}heading-row`,click(){c.tinymce.execCommand("confTableRowToggleHeading",!1),c.tinymce.execCommand("mceTableUpdateNumberingCol",!1)}}),new o.Button({text:i("table.col_highlight"),iconClass:`${r}heading-column`,click(){c.tinymce.execCommand("confTableColumnToggleHeading",!1)}}),new o.Button({text:i("table.numbering_column_desc"),iconClass:"aui-icon aui-icon-small aui-iconfont-insert-numbered-column",id:"insert-numbering-column",click(){n.execCommand("mceTableToggleSeries",!1,{name:"numbers"})}})]),new o.SplitGroup([new o.Button({text:i("table.selection_highlight"),iconClass:`${r}paint-bucket`,click(){c.tinymce.execCommand("confTableSelectionToggleHighlight",!1)}})],{id:"table-highlight-group",dropDownOptions:{id:"table-highlight-colour",dropDownContent:(e=s()("<ul/>").addClass("table-highlight-picker"),s.a.each(D.a.colorValues,((t,n)=>{var o=s()("<li/>"),r=s()("<a href='#'></a>"),a=D.a.colorNames[n];"clear"===n?r.addClass("remove-highlight").attr("data-remove-highlight","true"):r.addClass(`highlight-#${n}`).attr("data-highlight-colour",`#${n}`),r.attr("title",a),r.attr("aria-label",a),r.tooltip(),o.append(r),e.append(o)})),e),alignment:"left"},postProcess(e){e.attr("data-highlight-colour","grey"),e.addClass("highlight-grey");var t=s()("<span>&nbsp;</span>");t.addClass("highlight-indicator"),e.find(".icon.aui-iconfont-paint-bucket").after(t)}}),new o.Group([new o.Button({text:i("table.del"),iconClass:`${r}remove-table`,click(){c.tinymce.execCommand("mceTableDelete",!1,"")}})])],Events:$a};E.a.get("is-dc-license")&&((e,t,n)=>{var o=(t,n)=>{_a(e,t.currentTarget)&&(null==n||n())},r=new n.Group([new n.Button({id:Ha.top,text:Object(cn.a)("aetable.align.top"),iconClass:Ha.top,click(t){o(t,(()=>e.execCommand("JustifyTop")))}}),new n.Button({id:Ha.middle,text:Object(cn.a)("aetable.align.middle"),iconClass:Ha.middle,click(t){o(t,(()=>e.execCommand("JustifyMiddle")))}}),new n.Button({id:Ha.bottom,text:Object(cn.a)("aetable.align.bottom"),iconClass:Ha.bottom,click(t){o(t,(()=>e.execCommand("JustifyBottom")))}})]);t.Buttons.splice(4,0,r)})(n,l,o);var d,u,g=e=>{function t(e,t){return parseInt(e.attr(t),10)}return e.filter((function(){var e=s()(this);return t(e,"rowspan")>1||t(e,"colspan")>1})).length>=1};function m(e){var t=s()(this),o=s()("#table-highlight-group"),r=o.attr("data-highlight-colour"),a=o.attr("data-remove-highlight");r&&(o.removeClass(`highlight-${r}`),o.removeAttr("data-highlight-colour")),o.removeClass("remove-highlight"),a&&o.removeAttr("data-remove-highlight");var i=t.attr("data-highlight-colour");i&&(o.addClass(`highlight-${i}`),o.attr("data-highlight-colour",i)),t.attr("data-remove-highlight")&&(o.addClass("remove-highlight"),o.attr("data-remove-highlight","true")),n.focus(!1),n.execCommand("confTableSelectionToggleHighlight",!1,{alwaysHighlight:!0}),e.preventDefault()}return n.on("NodeChange",(e=>{var o,r=e.element,a=s()("body"),i=!a.hasClass("no-tools")||a.hasClass("no-tools-toolbars-visible");t||null==r.parentNode||"BODY"===r.nodeName||(t=!0,o=r,s()(o).closest("table:not(.wysiwyg-macro)").length?(ze(c.document,"createContextToolbarRow.Toolbar",{buttons:l.Buttons,topToolbar:!0,animate:i}),ze(c.document,"enableContextToolbarRow.Toolbar",{id:"default"}),(e=>{s.a.fn.updateTableModeInToolbar&&s()(e).closest("table").updateTableModeInToolbar()})(r),(e=>{var t=s()(e).closest("td,th"),o=s()(".mceSelected",t.closest("table"));g(t.add(o))?n.plugins.customtoolbar.enableToolbarButton("aui-iconfont-table-split"):n.plugins.customtoolbar.disableToolbarButton("aui-iconfont-table-split")})(r),(e=>{s()(e).closest("table").find(".numberingColumn").length>0?s()("#insert-numbering-column").addClass("active"):s()("#insert-numbering-column").removeClass("active")})(r),E.a.get("is-dc-license")&&((e,t)=>{_a(t,null);var n,o=e.closest("td,th"),r=null==o?void 0:o.style.verticalAlign;if(r!==za)null===(n=document.querySelector(`#${Ha[r]}`))||void 0===n||n.classList.add("active")})(r,n)):ze(c.document,"disableContextToolbarRow.Toolbar",{animate:i}),t=!1)})),n.on("Undo",(()=>{n.nodeChanged()})),n.initialized?s()(c.document).on("click","#table-highlight-colour .aui-dropdown a",m):n.on("init",(()=>{s()(c.document).on("click","#table-highlight-colour .aui-dropdown a",m)})),n.on("Remove",(()=>{s()(c.document).off("click","#table-highlight-colour .aui-dropdown a",m)})),l.Buttons.splice(0,0,new o.Group([new o.DropDownButton({id:"table-mode-picker",text:i("table.responsive"),dropDownContent:(d=s()("<ul/>").addClass("table-mode-list"),u=[{name:i("table.responsive"),mceCmd:"mceAutoWidth",tooltip:i("table.responsive_tooltip")},{name:i("table.fixed_width"),mceCmd:"mceFixedWidth",tooltip:i("table.fixed_width_tooltip")}],s.a.each(u,((e,t)=>{var n=s()("<li/>").addClass("dropdown-item").attr("data-tooltip",t.tooltip),o=s()(`<a href="#">${t.name}</a>`).addClass("item-link");n.on("click",(()=>{c.tinymce.execCommand(t.mceCmd,!1,"")})),d.append(n.append(o))})),d)})])),l.Buttons.splice(3,0,new o.Group([new o.Button({text:i("table.col_cut_desc"),iconClass:`${r}cut-table-column`,click(){c.tinymce.execCommand("mceTableCutCol",!1,""),n.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-column")}}),new o.Button({text:i("table.col_copy_desc"),iconClass:`${r}copy-table-column`,click(){c.tinymce.execCommand("mceTableCopyCol",!1,""),n.plugins.customtoolbar.enableToolbarButton("aui-iconfont-paste-table-column")}}),new o.Button({text:i("table.col_paste_desc"),iconClass:`${r}paste-table-column`,click(){c.tinymce.execCommand("mceTablePasteColBefore",!1,"")},disabled:!a.doesContain("copied")})])),l}}));function Wa(){return{init(e){e.addCommand("mceDelete",((t,n)=>(function(){if(u()){var t=e.selection.getRng();if(!t||t.collapsed)return!1;var n=s()(t.startContainer).closest(".wysiwyg-macro-body",e.getBody())[0];if(n&&Jo.isRangeAtStartOf(n,t)&&Jo.isRangeAtEndOf(n,t)){var o=s()(n.firstChild).is("pre")?"pre":"p",r=s()(`<${o}><br data-mce-bogus="1"></${o}>`)[0];return s()(n).html(r),e.selection.select(r,!0),!0}}return!1}()||e.getDoc().execCommand("Delete",t),!1)))},getInfo:()=>({longname:"Delete Command Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}n(61);var Va=function(){var e,t,n,o,r,a,i,l,d,m,f,h,v,b=c.Confluence.PropertyPanel,y="img",w=10,A=[800,800,400,400,400,300,300,300,300,300,300,300,300,300,300,200,200,200,200,200,200,200,200,200,200,200,200,200,200,200,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],x="confluence.draggable-plugin";var M="div.innerCell,div.cell",k="body",E="p,h1,h2,h3,h4,h5,h6,blockquote,li,td,th,img",T="li,td,th",D="p,h1,h2,h3,h4,h5,h6,blockquote",S="li,td,th";function I(t){var r=!!o.children(".contentLayout,.contentLayout2").length;function a(){return n.find("#move-indicator")}function i(e){return"move-indicator"===e.attr("id")}function l(e){return r?e.is(M):e.is(k)}function c(e,t,o){if(e.is("img")){var r=function(e,t){var o=e.offset(),r=t+n.scrollLeft();return r-o.left}(e,t);return r<e.width()/2}return d(e,o)<e.height()/2}function d(e,t){var o=e.offset();return t+n.scrollTop()-o.top}return{positionNear:function(e,r){var u=function(e,r){var u=s()(n[0].elementFromPoint(e,r)),g=!0;if(function(e){if(e.is(E)&&!i(e))return(!e.is("td.wysiwyg-macro-body")||"PLAIN_TEXT"!==e.closest("table").attr("data-macro-body-type"))&&!(e.is("img")&&!t.is("img"));return!1}(u))return{target:u,before:c(u,e,r)};if(l(u)){if(function(e,t){return d(e.children().first(),t)<0}(u=function(e){if(e.is("div.cell"))return e.children("div.innerCell").first();return e}(u),r))u=u.children().first();else if(function(e,t){return function(e,t){var n=d(e,t),o=e.height();return n-o}(e.children().last(),t)>0}(u,r))u=u.children().last(),g=!1;else{if(m=u,a().length>0&&a().parent(m).length>0)return null;u=function(e){var n=t.parent(E);n.length||(n=e.find(E).last());n.length||(n=o.find(E).last());return n}(u),g=!1}return{target:u,before:g}}var m;return null}(e,r);u&&function(e,t){if(i(e))return;var n=a();if(e.is(T)&&e.find(n).length)return;n.length?n.detach():n=s()('<span id="move-indicator">|</span>');e=function(e){if(e.is(T)){var t=e.children().first();t.is(D)&&(e=t)}return e}(e),e.is("img")?e.is(S)?t?e.prepend(n):e.append(n):t?e.before(n):e.after(n):e.prepend(n)}(u.target,u.before)},replaceWith:function(t){var n=a();n.length?(t.is(y)&&l(n.parent())&&(t=s()("<p></p>").append(t)),n.replaceWith(t),e.dom.isBlock(t[0])&&t.parent().is("p")&&t.unwrap(),g().showElement(t),e.selection.select(t[0]),e.selection.collapse(!0)):(p.a.debug("No cursor - abort drop"),e.undoManager.undo())},destroy:function(){var e=a();e.length&&e.remove()}}}function O(t){if(1===t.which&&t.target===t.currentTarget)if(d)B(t);else{d=s()(t.target),e.selection.select(t.target),t.preventDefault(),n.bind({"mousemove.moveable-zone":L,"mouseup.moveable-zone":B,"keydown.moveable-zone":j,"mouseover.moveable-zone":N});var o,c=d.offset();i=t.pageX,l=t.pageY,r=c.top-l,a=c.left-i,f=!0,m=(o=d).attr("style")||"",d=o}}function j(t){27===t.keyCode&&(h.cancelScrolling(),n.unbind(".moveable-zone"),e.undoManager.undo(),e.selection.select(d[0]),e.selection.collapse(!1),d=null)}function N(){n.find(".mceSelected").removeClass("mceSelected")}function L(n){if(f){if(function(e){var t=Math.abs(i-e.pageX),n=Math.abs(l-e.pageY);return t<w&&n<w}(n))return;Ct(),e.undoManager.beforeChange(),e.undoManager.typing=!0,e.undoManager.add(),Object(C.b)("synchrony.stop",{id:x}),(s=e.selection.getSel())&&s.removeAllRanges&&s.removeAllRanges(),d.css({position:"absolute",width:d.css("width"),"max-width":"50%"}),b.current&&b.destroy(),d.detach(),o.append(d),v=I(d),f=!1}var s;n.preventDefault(),d.hide(),function(e,n){var o=A.length;if((n=Math.max(n,0))<o)return void h.scrollUp(A[n]);var r=t.height(),a=Math.max(0,r-n);if(a<o)return void h.scrollDown(A[a]);h.cancelScrolling()}(n.clientX,n.clientY),v.positionNear(n.clientX,n.clientY);var c=Math.min(n.pageY+r,h.scrollHeight()-d.outerHeight()),u=n.pageX+a;d.css({top:c,left:u,opacity:.5}),d.show()}function B(t){n.unbind(".moveable-zone"),h.cancelScrolling(),f?d=null:(t.preventDefault(),d.detach(),d.attr("style",m),v.replaceWith(d),v.destroy(),d=null,v=null,N(),e.undoManager.add(),Object(C.b)("synchrony.start",{id:x}))}return{init(r){e=r,r.on("Init",(()=>{var e,a,i;t=s()(r.getWin()),n=s()(r.getDoc()),o=s()(r.getBody()),e=u()?o:n.find("html"),a=e,i=0,h={scrollUp(e){if(i!==-e){i=-e;var t=a.scrollTop()/e*1e3;a.stop(!1,!1),a.animate({scrollTop:0},{duration:t})}},scrollDown(e){if(i!==e){var t=a[0].scrollHeight,n=(t-a.scrollTop())/e*1e3;a.stop(!1,!1),a.animate({scrollTop:t},{duration:n})}},cancelScrolling(){a.stop(!0,!1)},scrollHeight:()=>a[0].scrollHeight},n.delegate("img.confluence-embedded-image,img.editor-inline-macro,table.wysiwyg-macro",{mousedown:O})}))},getInfo:()=>({longname:"Draggable objects (images, tables, placeholders) around the document via drag and drop",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}},Ka=["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],Ga=e=>{var t=e.name,n=e.type,o=e.value;return"#text"!==t||3!==n||""!==(null==o?void 0:o.trim())},Ya=(e,t)=>e&&t.includes(e.name)&&1===e.children().filter(Ga).length;function Ja(e){var t=()=>{var t=Array.from(new Set(["span",...Object.keys(e.schema.getTextInlineElements()).map((e=>e.toLowerCase()))]));if(t.some((t=>e.getBody().querySelector(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return e+` > ${e}`.repeat(t-1)}(t,5))))){var n=e.getContent(),o=e.parser.parse(n),r=t.flatMap((e=>o.getAll(e))),a=t=>{var n;return e.dom.parseStyle(null!==(n=t.attr("style"))&&void 0!==n?n:"")},l=e=>{var n=(o,r)=>{var l,s,c,d,u=Object.keys(r),g=a(o),m=Object.keys(g).filter((e=>!u.includes(e))),p=o.parent;s=e,d=null!==(c=[...(l=o).attributes||[],...s.attributes||[]])&&void 0!==c?c:[],l.name.toLowerCase()===s.name.toLowerCase()&&(null==d?void 0:d.every((e=>e.name.startsWith("data-mce")||"style"===e.name||l.attr(e.name)===s.attr(e.name))))&&((e=>!!(Ka.every((t=>!e[t]))&&e.color&&e["text-decoration"]&&"none"!==e["text-decoration"]))(g)?Ya(p,t)&&n(p,r):(m.forEach((e=>r[e]=g[e])),Ya(p,t)?(o.unwrap(),n(p,r)):o.attr("style",i.a.html.Styles().serialize(r))))},o=a(e);Ya(e.parent,t)&&n(e.parent,o)};r.forEach((e=>l(e))),e.setContent(o),console.debug("Duplication tags removal plugin has finished processing")}};e.on("PreInit",(()=>{y()?Object(C.a)("rte-collab-ready",(()=>{setTimeout((()=>{1===document.querySelectorAll("#avatar-list .avatar-item.active").length&&t()}),1e3)})):(Object(C.a)("rte-ready",t),e.on("Remove",(()=>{Object(C.c)("rte-ready",t)})))}))}function qa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Za{constructor(e){qa(this,"value",void 0),qa(this,"toJSON",void 0),this.value=e,this.valueOf=this.toString=this.toJSON=()=>this.value}}var Xa,ei=e=>new Za(e),ti={},ni=0,oi=e=>{ni=e.isCollapsed()?0:e.getContent().length},ri=function(e,t){if(e&&(ti[e]?ti[e]++:ti[e]=1,t)){var n=`${e}Size`;ti[n]?ti[n]+=t:ti[n]=t}},ai=function e(){ti.pageID=m.a.get("page-id"),ti.editorVersion=ei("18.5.46"),Object(C.b)("analytics",{name:"confluence.editor.action",data:ti}),ti={},Object(c.clearTimeout)(Xa),Xa=Object(c.setTimeout)(e,6e4)},ii={Bold:"bold",confCharmap:"insert.symbol",confMonospace:"monospace",confTableRowToggleHeading:"table.row.toggle.heading",confTableColumnToggleHeading:"table.column.toggle.heading",confTableSelectionToggleHighlight:"table.selection.toggle.highlight",ForeColor:"foreground.color",FormatBlock:"format.block",Indent:"indent",InsertHorizontalRule:"insert.horizontal.rule",InsertOrderedList:"insert.ordered.list",InsertUnorderedList:"insert.unordered.list",InsertWikiMarkup:"insert.wiki.markup",Italic:"italic",JustifyBottom:"justify.bottom",JustifyCenter:"justify.center",JustifyLeft:"justify.left",JustifyMiddle:"justify.middle",JustifyRight:"justify.right",JustifyTop:"justify.top",mceConfimage:"insert.files.images",mceConflink:"insert.link",mceConfMacroBrowser:"open.other.macros.browser",mceEmotion:"insert.emoticon",mceTableCopyRow:"table.copy.row",mceTableCutRow:"table.cut.row",mceTableDelete:"table.delete",mceTableDeleteCol:"table.delete.column",mceTableDeleteRow:"table.delete.row",mceTableInsertColAfter:"table.insert.column.after",mceTableInsertColBefore:"table.insert.column.before",mceTableInsertRowAfter:"table.insert.row.after",mceTableInsertRowBefore:"table.insert.row.before",mceTableMergeCells:"table.merge.cells",mceTablePasteRowBefore:"table.paste.row.before",mceTableSplitCells:"table.split.cells",mcePageLayoutsToolbar:"page.layouts.toolbar.toggle",mcePageLayoutAddSection:"page.layouts.toolbar.add.section",mcePageLayoutRemoveSection:"page.layouts.toolbar.remove.section",mcePageLayoutMoveSectionDown:"page.layouts.toolbar.movedown.section",mcePageLayoutMoveSectionUp:"page.layouts.toolbar.moveup.section",mcePageLayoutChangeSection:"page.layouts.toolbar.change.section",mceConfShortcutDialog:"open.help.dialog",mceSearchReplaceToolbar:"search.replace.toolbar.toggle",mceConfSearchClose:"search.replace.toolbar.close",mceConfSearch:"search",mceConfReplace:"replace",mceConfReplaceAll:"replace.all",Outdent:"outdent",Redo:"redo",Strikethrough:"strikethrough",subscript:"subscript",superscript:"superscript",Underline:"underline",Undo:"undo",InsertInlineTaskList:"insert.inline.tasklist",InsertInlineTaskListNoToggle:"insert.inline.tasklist.no.toggle"};function li(){return{init(e,t){e.addCommand("mceEmotion",(()=>(e.windowManager.open({file:`${c.tinymce.settings.editor_plugin_action_base_path}/emotions.action`,width:190,height:125,inline:1,id:"insert-emoticon-dialog",name:"emotions_dlg.title"},{plugin_url:t}),!1))),e.ui.registry.addButton("emotions",{text:"emotions.emotions_desc",onAction:function(){e.execCommand("mceEmotion")}}),e.on("Click",(t=>{var n,o=t.target;if("IMG"===o.nodeName&&o.classList.contains("emoticon")){if(n=e.selection.getRng())(t.offsetX||t.layerX-o.x)<o.width/2?(n.setStartBefore(o),n.setEndBefore(o)):(n.setStartAfter(o),n.setEndAfter(o)),e.selection.setRng(n);return e.selection.collapse(),c.tinymce.dom.Event.cancel(t)}}))},getInfo:()=>({longname:"Emotions",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/emotions",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function si(){return{init(e){e.on("Init",(()=>{s()(e.getBody()).addClass("fullsize")}))},getInfo:()=>({longname:"flex editor to full size plugin",description:"adjusts height of editor so it always occupies the right space in between the toolbars",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}}var ci=n(26),di=n.n(ci),ui=[],gi=[],mi=(e,t)=>{var n=new c.Confluence.Editor.FileDialog.FileDialogView({submitCallback:e,cancelCallback:t,beforeShowListeners:ui,panelComponents:gi});return n.render(),n},pi=e=>{var t=c.Confluence.Link.fromREST(e.attributes);t.attrs["data-linked-resource-container-id"]=e.get("ownerId"),t.attrs.href=e.get("downloadUrl"),t.insert()},fi=e=>{var t;jn.a.insertFilePlaceholder({name:e.get("fileName"),page:e.get("parentTitle"),space:(null===(t=e.get("space"))||void 0===t?void 0:t.key)||"",date:e.get("datePath"),ownerId:e.get("ownerId")})},hi={beforeShowListeners:ui,panelComponent:gi,sizeToFit:function(){return null==this||this.each((function(){var e=this,t=s()(this).parent(),n=t.height();t.children().each((function(){this!==e&&s()(this).is(":visible")&&(n-=s()(this).outerHeight())}));var o=s()(this).outerHeight()-s()(this).height();s()(this).css("height",Math.max(0,n-o)+"px")})),this},defaultInsertImageDialog:()=>{Ct(),mi((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.contentId,o=e.selectItems;if(At(),t)c.tinymce.confluence.ImageUtils.insertFromProperties({url:t,filename:t,contentId:n});else{var a=!0,i=(null==o?void 0:o.length)>1;null==o||o.forEach((e=>{e.isImage()?c.tinymce.confluence.ImageUtils.insertFromProperties({filename:e.getFileName(),contentId:e.get("ownerId")},i):(a=!1,r.a.MacroBrowser.getMacroMetadata("view-file")?fi(e):pi(e))})),null===di.a||void 0===di.a||di.a.triggerEvent("confluence.insert-files-dialog.insert",o,a)}}),(()=>At()))},findPanelComponentById:e=>{for(var t=c.Confluence.Editor.ImageDialog.panelComponent,n=0;n<t.length;n++)if(t[n].id===e)return t[n]},insertImageDialog:mi,_insertLinkToEditor:pi,_insertFilePlaceholderToEditor:fi};function vi(e){return e.on("init",(function(){e.addCommand("mceConfimage",hi.defaultInsertImageDialog)})),{getMetadata:function(){return{name:"Confluence Image Dialog"}}}}function bi(e,t,n){n&&n.node&&s()(".inline-comment-marker",n.node).contents().unwrap()}n(63);function yi(){return{init(e){e.ui.registry.addButton("confluence-insert-files",{text:Object(cn.a)("tinymce.confluence.files"),tooltip:`${Object(cn.a)("tinymce.confluence.conf_file_desc")} (${e.translate("toolbar.insert_files_shortcut_tooltip")})`,className:"insert-files",icon:"aui-icon aui-icon-small aui-iconfont-image",locationGroup:"rte-toolbar-group-files",weight:0,onAction:function(){e.execCommand("mceConfimage")}})},getInfo:()=>({longname:"Insert Files",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.0"})}}var wi="object"==typeof window?window.localStorage:{},Ci=function(e,t){var n=`${e}.${m.a.get("remote-user")||""}.${t}`,o=!1,r=/\d+#/,a=function(e){if(!o)return null;var t,a=wi.getItem(`${n}.${e}`);return a&&(t=r.exec(a))&&(a=a.replace(t[0],""),+new Date>Number(t[0].replace("#","")))?(wi.removeItem(`${n}.${e}`),null):a};try{o=Object.keys(wi).length}catch(e){p.a.error("Browser does not support localStorage, Confluence.storageManager will not work.")}return{getItem:a,getAllItems:function(){if(!o)return null;var e={};for(var t in wi)if(wi.hasOwnProperty(t)&&t.indexOf(`${n}.`)>-1){var r=t.split(`${n}.`)[1];e[r]=a(r)}return e},doesContain:e=>!!a(e),getItemAsBoolean(e){var t=a(e);return"false"!==t&&("true"===t||!!t)},setItem(e,t,r){var a;o&&(t=((a=1e3*(r||0))?+new Date+a+"#":"")+t,wi.setItem(`${n}.${e}`,t))},setItemQuietly(e,t,n){try{this.setItem(e,t,n)}catch(n){p.a.error(`Unable to write to localStorage. key: ${e}, value: ${t}, cause: ${n}`)}},removeItem(e){o&&wi.removeItem(`${n}.${e}`)}}}("confluence","userSettings");function Ai(e,t){return t?`${e}.${t.replace(/\./g,"-")}`:e}var xi={get:function(e,t,n){var o=Ai(e,t),r=Ci.getItem(o);return null!==r?JSON.parse(r):void 0!==n?n:null},set:function(e,t,n,o){var r=Ai(e,t);if(o===n)Ci.removeItem(r);else{Ci.setItem(r,JSON.stringify(o),2592e3)}}},Mi=(n(65),"insert-wiki-markup-dialog.parser"),ki="global",Ei="CONFLUENCE",Ti={HELP_REST_API:`${A.a}/plugins/tinymce/helplink.action`,WIKI:{CONFLUENCE:{api:Bo.getWikiConfluenceToXhtml,val:"CONFLUENCE",label:"confluence.conf_wikimarkup_confluence_label",helpLink:"help.insert.wiki.markup",restApi:"/rest/tinymce/1/wikixhtmlconverter"},MARKDOWN:{api:Bo.getWikiMarkdownToXhtml,val:"MARKDOWN",label:"confluence.conf_wikimarkup_markdown_label",helpLink:"help.insert.wiki.markup.markdown",restApi:"/rest/tinymce/1/markdownxhtmlconverter"}}},Di={dialog:{id:"insert-wiki-markup-dialog",content:"",width:980,height:500,popup:!1,name:"confluence.conf_wikimarkup_desc"},markupEditId:"insert-wiki-textarea",previewAreaId:"insert-wiki-textarea-preview",selectionMenuId:"wiki-parser-selection-tool",serverRequestTimer:300,entityId:"",spaceKey:""},Si=null,Ii=()=>{var e=xi.get(Mi,ki,Ei);return Ti.WIKI[e]},Oi=(e,t)=>{var n=s()(((e,t,n)=>`\n    <span class="wiki-parser-selector">\n        <form action="#" method="post" id="d" class="aui">\n            <select class="select medium-field" id="wiki-parser-selection-tool" name="wiki-parser-selection-tool" title="wiki parser selector">\n                <option value="${t.val}">${e(t.label)}</option>\n                ${Object.keys(n).filter((e=>n[e].val!==t.val)).map((t=>`<option value="${n[t].val}">${e(n[t].label)}</option>`))}\n            </select>\n        </form>\n    </span>\n`)(e,t,Ti.WIKI));return s()("#insert-wiki-insert-title").append(n),s()(`#${Di.selectionMenuId}`)},ji=()=>{var e=s()(`#${Di.selectionMenuId}`);return e.length?e.val():Ii().val},Ni=e=>{var t={wiki:(e=e||{}).textToConvert,entityId:Di.entityId,spaceKey:Di.spaceKey};e.api(JSON.stringify(t),((t,n)=>{if(t)return p.a.error("Error when fetching XHTML",t),void e.errorCallback(t);e.successCallback(n)}))},Li=()=>{var e=s()(`#${Di.markupEditId}`).val();s.a.trim(e)?Ni({api:Ti.WIKI[ji()].api,textToConvert:e,successCallback:e=>{Si.html(e)},errorCallback:()=>{Si.html(Ri(e))}}):Si.html(e)},Bi=()=>{var e,t,n,o=ji();xi.set(Mi,ki,Ei,o),e=o,t=s()(`#${Di.dialog.id}`).find(".dialog-help-link"),n=Ti.WIKI[e].helpLink,t.load(Ti.HELP_REST_API,{linkUrlKey:n}),Li()};function Ri(e){if("string"!=typeof e)return"";var t={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;","`":"&#96;"};return e.replace(/[&"'<>`]/g,(e=>"string"==typeof t[e]?t[e]:"&quot;"))}function Pi(){return{init:(e,t)=>{var n;Object(C.a)("rte-ready",(()=>{Di.entityId=m.a.get("content-id"),Di.spaceKey=m.a.get("space-key")})),Di.dialog.content=`\n    <p id="insert-wiki-info-title">${(n=e=>Object(cn.a)(e))("tinymce.confluence.conf_wikimarkup_info_title")}</p>\n    <form action="#" method="post" id="insert-wiki-markup-form" class="aui">\n        <h3 class="wiki-title">\n            <span id="insert-wiki-insert-title">${n("tinymce.confluence.conf_wikimarkup.insert.label")}</span>\n            <span id="insert-wiki-preview-title">${n("tinymce.confluence.conf_wikimarkup_preview_label")}</span>\n        </h3>\n        <textarea class="monospaceInput textarea" id="insert-wiki-textarea" name="wikitext"></textarea>\x3c!--\n            --\x3e<div class="example-container" id="insert-wiki-textarea-preview"></div>\n    </form>\n`;var o=t=>{var n,o,r,a=Di.dialog.id,i=ji();e.windowManager.setBusy(a,!1),c.tinymce.EditorManager.activeEditor.windowManager.close(a),Object(C.b)("analytics",{name:`insert-wiki-markup-dialog.${i}`}),"MARKDOWN"===i&&(n=t,(o=s()(n)).find("img").addClass("confluence-embedded-image"),t=s()("<div>").append(o.clone()).html()),e.execCommand("mceInsertContent",!1,t),r=e,c.tinymce.each(r.dom.select("p > p"),(e=>{try{e.parentNode&&r.dom.split(e.parentNode,e)}catch(e){p.a.error("insertwikimarkup - splitParas()",e)}}))},r=(t,n,o)=>{e.windowManager.setBusy(Di.dialog.id,!1);var r=((e,t)=>`\n        <p class="warning">\n            ${e}\n        </p>\n        <p class="exception-report">\n            <span class="exceptionMessage">\n                ${t}\n            </span>\n        </p>\n`)(e.translate("confluence.conf_wikimarkup_conversion_errors"),"timeout"===n?e.translate("confluence.conf_wikimarkup_timeout"):`${Ri(n||t.message)} : ${Ri(o)}`);c.tinymce.EditorManager.activeEditor.windowManager.alert(r)};e.addCommand("InsertWikiMarkup",(()=>{var n,a=Ii();return e.windowManager.open(Di.dialog,{buttons:[{label:"confluence.conf_insert_button_title",action:()=>{e.windowManager.setBusy(Di.dialog.id,!0),Ni({api:Ti.WIKI[ji()].api,successCallback:o,errorCallback:r,textToConvert:s()(`#${Di.markupEditId}`).val(),setBusy:!0})}}],plugin_url:t,helpLink:a.helpLink,hintText:"confluence.conf_wikimarkup_hint",cssClass:"insert-wiki-markup-panel"}),(e=>{var t=s()("#wysiwygTextarea_ifr").contents().find("head").html(),n=s()("<iframe tabindex='-1' id='insert-wiki-markup-preview' />");s()(`#${e}`).append(n);var o=n.contents(),r=o[0];r.open(),r.write('\n    <!DOCTYPE html>\n    <html class="insert-wiki-markup-dialog">\n        <head>\n        </head>\n        <body class="wiki-content previewWiki">\n        </body>\n    </html>\n'),r.close(),o.find("head").html(t),Si=o.find("body")})(Di.previewAreaId),Oi((t=>e.translate(t)),a).on("change",Bi),s()(`#${Di.markupEditId}`).on("keydown",(function(){clearTimeout(n),n=d.a.setTimeout(Li,Di.serverRequestTimer)})),!1})),e.ui.registry.addButton("insertwikimarkup",{text:"confluence.conf_wikimarkup_desc",onAction:function(){e.execCommand("InsertWikiMarkup")}})},getInfo:()=>({longname:"InsertWikiMarkip",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com/",version:"1.1"})}}n(67);function $i(){return{init(e){c.tinymce.Env.os.isiOS()&&setTimeout((()=>{s()(e.getBody()).addClass("ios")}),0)},getInfo:()=>({longname:"iOS Comments Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Hi(){return{init(e){var t=c.Confluence.Editor;function n(){if(t.UI.isFormEnabled()&&e.isDirty()&&!t.isEmpty())return e.translate("unsaved.comment.lost")}e.on("Init",(()=>{Object(C.a)("beforeunload",n)})),e.on("Remove",(()=>{Object(C.c)("beforeunload",n)}))},getInfo:()=>({longname:"Confluence Leave Comment",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Fi(){return{init(e){var t=c.Confluence.Editor;function n(){if(t.UI.isFormEnabled()&&e.isDirty()&&!t.isEmpty())return e.translate("unsaved.template.lost")}e.on("Init",(()=>{Object(C.a)("beforeunload",n)})),e.on("Remove",(()=>{Object(C.c)("beforeunload",n)}))},getInfo:()=>({longname:"Confluence Leave Template",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function zi(){var e=c.Confluence.Editor.LinkBrowser;return{init:t=>{t.ui.registry.addButton("linkbrowserbutton",{text:"confluence.conflink_desc",className:"mce_conflink",onAction:function(){t.execCommand("mceConflink")}}),t.addCommand("mceConflink",(()=>(e.open({bookmarkManager:kt}),!1))),t.addCommand("mceConfAttachments",(()=>(e.open({panelKey:e.ATTACHMENTS_PANEL,bookmarkManager:kt}),!1)))},getInfo:()=>({longname:"Confluence Link Browser",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Ui(){return{init(e){var t=e.options.get("atl_macro_class")||"wysiwyg-macro",n="td.wysiwyg-macro-body",o=function(e){return 3===e.nodeType},r=function(t,n){return e.dom.getParent(t,n)},a=function(e){return o(e)?e.length:e.childNodes.length},i=function(e){return r(e,"table."+t)},l=function(e){return null!==i(e)},s=function(e,t){return e.bottom<=t.top&&e.top<t.bottom},d=function(e,t){return e.top>=t.bottom&&e.bottom>t.top},u=function(e,t){var n=e.childNodes;if(0===n.length)return{node:e,offset:t};if(t<n.length)return{node:n[t],offset:0};var o=n[n.length-1];return"img"===e.nodeName.toLowerCase()?{node:o,offset:1}:{node:o,offset:a(o)}},g=function(t){if(function(e){return 1===e.nodeType}(t))return c.tinymce.toArray(t.getClientRects());if(o(t)){var n=e.dom.createRng();return n.selectNode(t),c.tinymce.toArray(n.getClientRects())}return[]},m=function(t,n){return function(t,n){var r=e.selection.getRng();if(r){var a=u(1===t?r.startContainer:r.endContainer,1===t?r.startOffset:r.endOffset),i=a.node;if(o(i)&&a.offset>0){var l=i.splitText(a.offset),s=n(1===t?i:l);return 0===l.length&&e.dom.remove(l),s}return n(i)}}(n,(function(e){var o=function(e,t,n,o){var r,a=new c.tinymce.dom.TreeWalker(e,t),i=1===n?a.prev:a.next,l=1===n?s:d,u=e,m=0,p=[];do{var f=g(u).filter((function(e){return 0!==e.height&&0!==e.width}));if(0!==f.length&&(1===n&&f.reverse(),f.forEach((function(e){if(0!==e.height&&0!==e.width){r&&l(e,r)&&m++;var t=p[m];p[m]=t?t.concat([e]):[e],r=e}})),o(p)))return p}while(u=i());return p}(e,t,n,(function(e){return e.length>1}));return o.length<=1}))},p=function(t,n){var o=e.selection.getRng();if(o){var r=1===n?o.startContainer:o.endContainer,i=1===n?o.startOffset:o.endOffset;return(1===n&&i<=0||-1===n&&i>=a(r))&&function(e,t,n){for(var o,r=u(n?t.startContainer:t.endContainer,n?t.startOffset:t.endOffset),i={node:e,offset:n?0:a(e)};!o||i.node!==o.node;){if(r.node===i.node&&r.offset===i.offset)return!0;o=i,i=u(i.node,i.offset)}return!1}(t,o,1===n)}};e.on("init",(function(){e.on("keydown",(function(t){var o,r,s=e.selection.getRng(),d=function(e){return(e.keyCode===c.tinymce.util.VK.LEFT||e.keyCode===c.tinymce.util.VK.RIGHT)&&e.shiftKey}(t),g=function(e){return(e.keyCode===c.tinymce.util.VK.UP||e.keyCode===c.tinymce.util.VK.DOWN)&&e.shiftKey}(t);if((d||g)&&s&&function(e){return l(e.startContainer)&&l(e.endContainer)}(s)){var f=(o=s.startContainer,r=i(o),e.dom.select("th,td",r)[0]),h=t.keyCode===c.tinymce.util.VK.UP||t.keyCode===c.tinymce.util.VK.LEFT?1:-1,v=g&&m(f,h),b=d&&p(f,h);(v||b)&&(!function(t,n){var o=e.selection.getRng();if(o){var r=o.cloneRange(),i=u(t,n?0:a(t));n?r.setStart(i.node,i.offset):r.setEnd(i.node,i.offset),e.selection.setRng(r,!n)}}(f,1===h),t.preventDefault(),t.stopImmediatePropagation())}if(t.keyCode===c.tinymce.util.VK.ENTER||t.keyCode===c.tinymce.util.VK.BACKSPACE||t.keyCode===c.tinymce.util.VK.DELETE){if(!s||s.collapsed)return;e.getDoc().querySelectorAll(`${n}[data-mce-selected]`).forEach((e=>{e.removeAttribute("data-mce-selected")}))}}),!0),e.on("mouseup",(function(t){if(3===t.detail){var o=e.selection.getRng();if(o){var a=r(o.startContainer,n),i=r(o.endContainer,n);if(a===i)return;if(null!==a&&!a.contains(o.endContainer)&&a.lastChild){var l=e.dom.createRng();l.setStart(o.startContainer,o.startOffset),l.setEndAfter(a.lastChild),e.selection.setRng(l,!0)}if(null!==i&&!i.contains(o.startContainer)&&i.firstChild){var s=e.dom.createRng();s.setStartBefore(i.firstChild),s.setEnd(o.endContainer,o.endOffset),e.selection.setRng(s,!0)}}}}))}))},getInfo:()=>({longname:"Macro Navigation",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function _i(){return{init(e){e.on("Init",(()=>{e.addCommand("mceConfMacroBrowser",c.tinymce.confluence.macrobrowser.macroBrowserToolbarButtonClicked)}))},getInfo:()=>({longname:"Confluence Macro Browser",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Qi(){var e=c.tinymce.util.VK;return{init(t){var n=this;function o(e){t.on("KeyDown",e),c.tinymce.Env.browser.isFirefox()&&(t.on("KeyPress",e),t.on("KeyUp",e))}function r(e,t){return e&&1===e.childNodes.length&&s()(e).is(t)&&s()(e.firstChild).is("br")}function a(e){if(!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;if(!t||!t.parentNode)return!1;for(;t&&!s()(t).is(".wysiwyg-macro-body");){if(t.previousSibling||t.nextSibling)return!1;t=t.parentNode}return!0}t.on("Init",(()=>{t.on("SetContent",(e=>{e.selection&&c.tinymce.each(t.dom.select("p > .wysiwyg-macro"),(e=>{var n=t.dom.getParent(e.parentNode,"p");try{t.dom.split(n,e)}catch(e){}}))}))})),t.on("SetContent",(()=>{c.tinymce.each(t.dom.select('.wysiwyg-macro[data-macro-body-type="PLAIN_TEXT"] .wysiwyg-macro-body'),(e=>{t.dom.select("pre",e).length||t.dom.setHTML(e,"<pre><br /></pre>")}))})),t.on("KeyDown",(n=>{var o=t.selection,r=[e.BACKSPACE,e.DELETE,e.ENTER,e.ESCAPE];if(-1==s.a.inArray(n.keyCode,r)&&!function(t){var n=!1;return 0===t.charCode&&(n=-1!=s.a.inArray(t.keyCode,[e.SHIFT,e.CTRL,e.ALT,e.META])),n}(n)&&!o.isCollapsed()&&!(n.ctrlKey||n.metaKey||!c.tinymce.Env.os.isMacOS()&&n.altKey)){var a=o.getNode();if(kn.isMacroWithBody(a)){var i=s()(".wysiwyg-macro-body",a);i.length>0&&(p.a.debug("MacroPlaceholderPlugin: Adjusting text selection to only include macro's body."),o.select(i[0],!0))}}})),t.on("DblClick",(e=>{var t=s()(e.target),n=t.closest("[data-macro-name]");if(n.length){if(p.a.debug("Double-click triggered inside a macro."),n.attr("data-macro-body-type")&&t.closest(".wysiwyg-macro-body").length)return void p.a.debug("Double-click was inside bodied macro content. Skipping.");kn.editMacro(n),c.Confluence.PropertyPanel&&c.Confluence.PropertyPanel.current&&c.Confluence.PropertyPanel.destroy()}})),t.addCommand("mceConfRemoveMacro",(e=>{s()(e).remove()})),n._isCursorInMostNestedElement=a,function(){function e(e){if(!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return t&&t.previousSibling&&!t.nextSibling&&r(t,"p, pre")}(u()||c.tinymce.Env.browser.isFirefox())&&o((n=>{var o=t.selection.getRng();if(46===n.keyCode&&o&&e(o))return c.tinymce.dom.Event.cancel(n)})),n._isCursorInLastParagraphOrPre=e}(),u()&&o((e=>{if(8!==e.keyCode&&46!==e.keyCode)return!0;var n=t.selection.getRng();if(!n)return!0;var o=3===n.startContainer.nodeType?n.startContainer.parentNode:n.startContainer;return!(function(e){if(!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return a(e)&&t&&1===t.childNodes.length&&s()(t.firstChild).is("br")}(n)&&(8!==e.keyCode||!s()(o).is("li")))||c.tinymce.dom.Event.cancel(e)})),function(){function e(e){if(!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer;return t&&0===e.startOffset&&s()(t).is(".wysiwyg-macro-body > ul > li")&&1===t.childNodes.length&&s()(t.firstChild).is("br")}u()&&o((n=>{var o=t.selection.getRng();return 8!==n.keyCode||!o||(!e(o)||(t.execCommand("Outdent"),c.tinymce.dom.Event.cancel(n)))})),n._isCursorInsideMacroPlacholderInsideListItemContainingSoloBr=e}(),function(){function e(e){var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=s()(t);return 0===e.startOffset&&r(t,"p, pre")&&n.parent().is("td.wysiwyg-macro-body")&&t&&!t.previousSibling&&t.nextSibling&&r(t.nextSibling,"p, pre")}u()&&o((n=>{var o=t.selection.getRng();if(46!==n.keyCode||!o)return!0;var r=3===o.startContainer.nodeType?o.startContainer.parentNode:o.startContainer,a=s()(r);if(e(o)){var i=r.nextSibling;return a.remove(),t.selection.select(i,!0),c.tinymce.dom.Event.cancel(n)}})),n._isCursorInFirstParagraphWhenThereAreTwoEmptyParagraphs=e}(),function(){function e(e){var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=s()(t);return 0===e.startOffset&&r(t,"p, pre")&&n.parent().is("td.wysiwyg-macro-body")&&t&&!t.nextSibling&&t.previousSibling&&!t.previousSibling.previousSibling&&r(t.previousSibling,"p, pre")}u()&&o((n=>{var o=t.selection.getRng();if(8!==n.keyCode||!o)return!0;var r=3===o.startContainer.nodeType?o.startContainer.parentNode:o.startContainer,a=s()(r);if(e(o)){var i=r.previousSibling;return a.remove(),t.selection.select(i,!0),c.tinymce.dom.Event.cancel(n)}})),n._isCursorInSecondParagraphWhenThereAreTwoEmptyParagraphs=e}(),function(){function e(e){if(!e||!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=s()(t);return!(!t||e.startOffset>0)&&(yn.normalize(t),t&&0===e.startOffset&&r(t,"p, pre")&&n.parent().is("td.wysiwyg-macro-body")&&!t.previousSibling&&!t.nextSibling)}(u()||c.tinymce.Env.browser.isFirefox())&&o((n=>8!==n.keyCode&&46!==n.keyCode||(e(t.selection.getRng())?c.tinymce.dom.Event.cancel(n):void 0))),n._isCursorInSoloParagraphOrPreInsidePlaceholder=e}(),function(){function e(e){return e&&e.parentNode&&"BR"===e.nodeName&&e===e.parentNode.lastChild}function r(t){if(!t.collapsed)return!1;var n=t.startContainer;return n&&0===t.startOffset&&3===n.nodeType&&a(t)&&1===n.nodeValue.length&&!n.previousSibling&&(!n.nextSibling||e(n.nextSibling))}function i(t){if(!t.collapsed)return!1;var n=t.startContainer;return n&&1===t.startOffset&&3===n.nodeType&&a(t)&&1===n.nodeValue.length&&!n.previousSibling&&(!n.nextSibling||e(n.nextSibling))}function l(e){if(!e.collapsed)return!1;var t=e.startContainer;return t&&0===e.startOffset&&1===t.nodeType&&1===t.childNodes.length&&a(e)&&!t.previousSibling&&!t.nextSibling}function d(e){if(!e.collapsed)return!1;var t=e.startContainer;return t&&1===e.startOffset&&1===t.nodeType&&1===t.childNodes.length&&a(e)&&!t.previousSibling&&!t.nextSibling}(u()||c.tinymce.Env.browser.isFirefox())&&o((e=>{if(8!==e.keyCode&&46!==e.keyCode)return!0;var n=t.selection.getRng();if(!n)return!0;var o=3===n.startContainer.nodeType?n.startContainer.parentNode:n.startContainer;return!s()(o).closest(".wysiwyg-macro-body").size()||(yn.normalize(o),!(46===e.keyCode&&(r(n)||l(n))||8===e.keyCode&&(i(n)||d(n)))||(o.lastChild&&!s()(o.lastChild).is("br")&&s()(o).append("<br/>"),s()(o.firstChild).remove(),t.selection.select(o,!0),c.tinymce.dom.Event.cancel(e)))})),n._isCursorBehindOnlyCharacterInNestedElement=r,n._isCursorAfterOnlyCharacterInNestedElement=i,n._isCursorBehindOnlyChildInNestedElement=l,n._isCursorAfterOnlyChildInNestedElement=d}(),function(){function e(e){if(e.collapsed)return!1;return 0===e.startOffset&&r(e.startContainer,(function(e){return!e.previousSibling}))&&function(e,t){if(!e)return!1;return 3===e.nodeType?t===e.nodeValue.length:1===e.nodeType&&(1===e.childNodes.length&&s()(e.firstChild).is("br")?0===t:t===e.childNodes.length)}(e.endContainer,e.endOffset)&&r(e.endContainer,(function(e){return!e.nextSibling}))}function r(e,t){if(!e)return!1;if(s()(e).is(".wysiwyg-macro-body"))return!0;do{if(!t(e))return!1;e=e.parentNode}while(e&&!s()(e).is(".wysiwyg-macro-body"));return!0}u()&&o((n=>{if(8!==n.keyCode&&46!==n.keyCode)return!0;var o=t.selection.getRng();if(o&&e(o)){var r=s()(o.startContainer).closest(".wysiwyg-macro-body");if(r.length>0){var a,i=s()(r[0].firstChild).is("pre");return t.undoManager.add(),r.empty(),a=i?s()("<pre><br/></pre>").appendTo(r):s()("<p><br/></p>").appendTo(r),t.selection.select(a[0],!0),c.tinymce.dom.Event.cancel(n)}}return!0})),n._isMacroBodySelected=e}(),function(){function e(e){if(!e||!e.collapsed)return!1;var t=3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer,n=s()(t);return 0===e.startOffset&&r(t,"p")&&n.next().is("table")}u()&&o((n=>{if(46===n.keyCode&&e(t.selection.getRng()))return c.tinymce.dom.Event.cancel(n)})),n._isCursorInEmptyParagraphPrecedingPlaceholder=e}(),function(){function r(e){return!e||s()(e.parentNode).is(".wysiwyg-macro td")?null:s()(e.parentNode).is("p")?e.parentNode:r(e.parentNode)}function a(e){return e?3===e.nodeType?e:a(e.firstChild)||a(e.nextSibling):null}function i(e){return e&&"PRE"!==e.nodeName&&"TD"!==e.nodeName?"BR"===e.nodeName?e:i(e.previousSibling)||i(e.parentNode):null}function l(e){var t,n;return s()(e.commonAncestorContainer).closest(".wysiwyg-macro td").length>0&&(i(e.startContainer)||(t=a(r(e.startContainer)))),(n=s()(e.commonAncestorContainer).closest(".wysiwyg-macro td > pre")).length>0&&(i(e.startContainer)||(t=a(n[0]))),t&&(e=e.cloneRange()).setStart(t,0),e}u()&&c.tinymce.Env.os.isMacOS()&&o((n=>{var o=t.selection.getRng();if(o&&(n.metaKey||n.ctrlKey)&&n.shiftKey&&n.keyCode===e.LEFT){var r=l(o);if(r!==o)return t.selection.setRng(r),c.tinymce.dom.Event.cancel(n)}})),n._selectTillStart=l}(),t.on("KeyDown",(e=>{if(e.keyCode===c.tinymce.util.VK.TAB){var n=t.selection.getRng();if(n){var o=3===n.startContainer.nodeType?n.startContainer.parentNode:n.startContainer;if(s()(o).is(".wysiwyg-macro-body > pre")){t.undoManager.beforeChange(),t.undoManager.add();var r=t.getDoc().createTextNode("\t");return n.insertNode(r),t.selection.setCursorLocation(r,1),t.undoManager.add(),c.tinymce.dom.Event.cancel(e)}}}}),!0)},getInfo:()=>({longname:"Macro Place Holder plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}}function Wi(){return{init:e=>{e.on("init",(()=>{var e={contentId:m.a.get("content-id")},t=s()("#rte-savebar-tinymce-plugin-point");t.append(`\n    <span class="minor-edit toolbar-item">\n        <input id="notifyWatchers" name="notifyWatchers" value="true" type="checkbox" checked>\n        <label for="notifyWatchers">\n          <span>${(e=>Object(cn.a)(e))("editor.minor.edit")}</span>\n        </label>\n    </span>\n`);var n=t[0].querySelector('input[id="notifyWatchers"]'),o=xi.get("notifyWatchers",e.contentId,!0);null!==o&&(n.checked=o),He(n,"change",(()=>{xi.set("notifyWatchers",e.contentId,!0,n.checked)}))}))},getInfo:()=>({longname:"Confluence Notify Watchers",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Vi(){var e=function(e){this.fileTypes=e};e.prototype.beforeParamsSet=function(e){if(!e.page&&!e.date&&!e.space){var t=m.a.get("content-type");"page"==t||"blogpost"==t?e.page=c.document.getElementById("content-title").value:"comment"==t&&(e.page=m.a.get("page-title"))}if(e.date){var n=e.date.split("/");e.page=["",n[2],n[0],n[1],e.page].join("/")}return e.space&&(e.page=`${e.space}:${e.page}`),e},e.prototype.beforeParamsRetrieved=function(e){if(e.page){var t=e.page.split(":");t.length>1&&(e.space=t[0],e.page=t[1]);var n=e.page.split("/");n.length>1&&(e.date=[n[2],n[3],n[1]].join("/"),e.page=n[4]);var o=m.a.get("content-type");(("page"==o||"blogpost"==o)&&e.page==c.document.getElementById("content-title").value||"comment"==o&&e.page==m.a.get("page-title"))&&delete e.page}return e},e.prototype.fields={attachment:function(e){var t={fileTypes:this.fileTypes},n=c.AJS.MacroBrowser.ParameterFields.attachment(e,t);return n.dependencyUpdated=function(e,t){p.a.debug(`attachment:dependencyUpdated called: ${e}, ${t}`);var n,o,r=(n={},o=t.split(":",2),n.spaceKey=2==o.length&&o[0]||m.a.get("space-key"),n.title=o[o.length-1],0==n.title.indexOf("/")&&(n.postingDay=n.title.substr(1,10),n.title=n.title.substr(12)),n.title==c.document.getElementById("content-title").value&&(n.title=""),n.title||(m.a.get("new-page")?n.draftId=m.a.get("content-id"):n.pageId=m.a.get("page-id")),n);this.getData(r)},n},spacekey:function(e){return c.AJS.MacroBrowser.ParameterFields._hidden(e,{})},date:function(e){return c.AJS.MacroBrowser.ParameterFields._hidden(e,{})},"confluence-content":function(e){return c.AJS.MacroBrowser.ParameterFields["confluence-content"](e,{dependencies:["name"]})}},c.AJS.MacroBrowser.Macros.viewdoc=new e(["doc","docx"]),c.AJS.MacroBrowser.Macros.viewpdf=new e(["pdf"]),c.AJS.MacroBrowser.Macros.viewxls=new e(["xls","xlsx"]),c.AJS.MacroBrowser.Macros.viewppt=new e(["ppt","pptx"]),c.AJS.MacroBrowser.Macros.viewfile={updateSelectedMacro(e){var t=e.params[""]||e.params.name;if(t){var n=t.lastIndexOf(".");if(n>0){var o=t.substring(n+1);o&&("doc"==o&&"docx"==o&&(e.name="viewdoc"),"pdf"==o&&(e.name="viewpdf"),"ppt"==o&&"pptx"==o&&(e.name="viewppt"),"xls"==o&&"xlsx"==o&&(e.name="viewxls"))}}}}}n(69),n(70),n(71);var Ki,Gi=n(16),Yi=n.n(Gi),Ji=(e,t,n,o)=>{var r=s()("#rte-button-restrictions"),a=r.find(".icon"),i="aui-iconfont-locked aui-iconfont-unlocked icon-red",l="",c="";if(e||t){var d=e?"aui-iconfont-locked icon-red":"aui-iconfont-unlocked icon-red";a.removeClass(i).addClass(d),l=Object(cn.a)("page.restrictions.apply"),c=Object(cn.a)("editor.restrictions.icon.editor-restricted")}else a.removeClass(i).addClass("aui-iconfont-unlocked"),n?(l=Object(cn.a)("page.restrictions.apply"),c=Object(cn.a)("editor.restrictions.icon.editor-restricted")):(l=Object(cn.a)("page.restrictions.none"),c=Object(cn.a)("editor.restrictions.icon.editor-unrestricted"));r.attr("data-tooltip",l),r.attr("aria-label",c),r.data("explicit-restrictions",e),r.data("inherited-restrictions",t),r.data("restrictionsHash",o)},qi=(e,t)=>{if(void 0!==t.restrictionsHash){var n=s()("#rte-button-restrictions");if(n.data("restrictionsHash")!==t.restrictionsHash)if(s()("#update-page-restrictions-dialog").is(":visible")&&r.a.PagePermissions.updateRestrictionsDialog)r.a.PagePermissions.updateRestrictionsDialog(),n.data("restrictionsHash",t.restrictionsHash);else{var o=""!==t.restrictionsHash,a=t.hasViewRestrictions,i=!!n.data("inherited-restrictions");Ji(a,i,o,t.restrictionsHash)}}},Zi=()=>{Object(C.a)("editor-heartbeat",qi);Object(C.a)("edit-page-restrictions-updated",((e,t)=>{Ji(t.hasExplicitRestrictions,t.hasInheritedRestrictions,t.hasAnyExplicitRestrictions,t.restrictionsHash)}))},Xi=n(27),el=n.n(Xi),tl=n(15),nl=n(19),ol=n(13),rl=()=>{var e,t,n=()=>m.a.get("new-page"),o={spinner:s()("#rte-spinner"),saveButton:(e="#rte-button-publish",t=Object(ol.saveButton)({contentType:m.a.get("content-type"),sharedDraftsEnabled:m.a.getBoolean("shared-drafts"),isNewPage:n()}),s()(e).replaceWith(t),s()(e)),overwriteButton:s()("#rte-button-overwrite"),editButton:s()("#rte-button-edit"),previewButton:s()("#rte-button-preview"),cancelButton:s()("#rte-button-cancel"),versionCommentInput:s()("#versionComment"),watchPageCheckbox:s()("#watchPage"),watchPageToolbarGroup:s()(".toolbar-group-watch-page")};o.buttons=[o.saveButton,o.overwriteButton,o.editButton,o.previewButton,o.cancelButton];var a=!1,i=(e,t)=>{if(t=t||o.buttons)for(var n=0;n<t.length;n++)l(e,t[n])},l=(e,t)=>{t&&(e?(t.removeAttr("aria-disabled"),t.removeClass("disabled"),t.is("button")&&t.removeAttr("disabled")):(t.attr("aria-disabled","true"),t.addClass("disabled"),t.is("button")&&t.attr("disabled","disabled")))},d=e=>e.length&&"true"!==e.attr("aria-disabled"),u=()=>n()?"":Object(cn.a)("edit.name")+" - ";return Object(C.a)("editor-shared-drafts-published",(()=>{var e,t=null===(e=/\(.+\)/g.exec(o.saveButton.data("tooltip")))||void 0===e?void 0:e[0];o.saveButton.text(Object(ol.saveButtonText)({contentType:m.a.get("content-type"),sharedDraftsEnabled:m.a.getBoolean("shared-drafts"),isNewPage:n()})).attr("title",Object(ol.saveButtonTitle)({contentType:m.a.get("content-type"),sharedDraftsEnabled:m.a.getBoolean("shared-drafts"),isNewPage:n()})+t).tooltip({gravity:"s"})})),Object(C.a)("synchrony.history.evicted",(()=>{a=!0,l(!1,o.versionCommentInput),(()=>{try{r.a.Rte.getEditor().plugins.customtoolbar.disableToolbar(!0),r.a.Rte.getEditor().plugins.customtoolbar.toggleToolbarButtons(!0,!0,!0)}catch(e){}try{r.a.Rte.getEditor().mode.set("readonly")}catch(e){}try{r.a.Rte.getEditor().plugins.pagelayoutplugin.disableContent()}catch(e){}try{s()("input#content-title").attr("disabled","true")}catch(e){}})()})),o.setButtonsState=i,o.setButtonState=l,o.isButtonEnabled=d,o.registerFormButton=(e,t)=>{var n;o[e]=t,null===(n=o.buttons)||void 0===n||n.push(t)},o.postingDatePicker=null,o.isFormEnabled=()=>{if(o.buttons)for(var e=0;e<o.buttons.length;e++){var t;if(d(null===(t=o.buttons)||void 0===t?void 0:t[e]))return!0}return!1},o.toggleSavebarBusy=e=>{if(!0!==a)if(e){var t;if(null==o||null===(t=o.isFormEnabled)||void 0===t||!t.call(o))return!1;o.spinner.addClass("aui-icon-wait"),i(!1)}else o.spinner.removeClass("aui-icon-wait"),i(!0);return!0},o.init=function(){nl.a.init(),c.Confluence.Editor.addSaveHandler((e=>{var t,n;null!=o&&null!==(t=o.isButtonEnabled)&&void 0!==t&&t.call(o,o.saveButton)?(null==o||null===(n=o.toggleSavebarBusy)||void 0===n||n.call(o,!0),Object(C.b)("confluence.editor.on.save")):(e.stopImmediatePropagation(),e.preventDefault())})),Object(C.b)("rte.init.ui"),c.Confluence.Editor.isNewPage()&&s()("#content-title").focus().select(),c.Confluence.Editor.addCancelHandler((e=>{var t,n;(c.Confluence.Editor.getNumConcurrentEditors()>1&&r.a.Confluence.Analytics.publish("rte.notification.concurrent-editing.cancel",{numEditors:c.Confluence.Editor.getNumConcurrentEditors(),pageId:r.a.params.pageId,draftType:r.a.params.draftType}),m.a.getBoolean("shared-drafts")&&["page","blogpost"].includes(m.a.get("content-type")))&&(null!=o&&null!==(t=o.isButtonEnabled)&&void 0!==t&&t.call(o,o.cancelButton)?null==o||null===(n=o.toggleSavebarBusy)||void 0===n||n.call(o,!0):(e.stopImmediatePropagation(),e.preventDefault()));nl.a.process(e)})),"comment"===m.a.get("content-type")&&c.Confluence.Editor.addSaveHandler((()=>{var e;if(r.a.Rte.Content.isEmpty())return Object(tl.notify)("warning",Object(cn.a)("content.empty")),null==o||null===(e=o.toggleSavebarBusy)||void 0===e||e.call(o,!1),!1})),["comment","template"].includes(m.a.get("content-type"))&&c.Confluence.Editor.addCancelHandler((e=>{var t;if(null!=o&&null!==(t=o.isFormEnabled)&&void 0!==t&&t.call(o)&&c.Confluence.Editor.hasContentChanged()&&!c.Confluence.Editor.isEmpty()){var n="comment"===m.a.get("content-type")?Object(cn.a)("unsaved.comment.lost"):Object(cn.a)("unsaved.template.lost");if(!window.confirm(n))return e.stopImmediatePropagation(),!1}})),o.versionCommentInput.on("keypress",(e=>{"Enter"===e.key&&nl.a.process(e)})),c.Confluence.Editor.addSaveHandler((()=>{c.Confluence.Editor.getNumConcurrentEditors()>1&&r.a.Confluence.Analytics.publish("rte.notification.concurrent-editing.save",{numEditors:c.Confluence.Editor.getNumConcurrentEditors(),pageId:r.a.params.pageId,draftType:r.a.params.draftType})})),c.Confluence.Editor.addSubmitHandler((e=>c.Confluence.Editor.contentFormSubmit(e))),c.Confluence.Editor.currentEditMode=c.Confluence.Editor.MODE_RICHTEXT,o.editButton.click((e=>{var t;null!=o&&null!==(t=o.isFormEnabled)&&void 0!==t&&t.call(o)&&(Ta(c.Confluence.Editor.MODE_RICHTEXT),setTimeout((()=>{r.a.Rte.getEditor().focus(),c.tinymce.Env.browser.isFirefox()&&c.Confluence.Editor.bookmark&&r.a.Rte.getEditor().selection.moveToBookmark(c.Confluence.Editor.bookmark)}),0),a||el.a.enableElement(o.cancelButton)),e.preventDefault()}));var e=()=>{s()("#rte-ellipsis-menu").is(":visible")&&s()("#rte-button-ellipsis").trigger("aui-button-invoke")};o.previewButton.click((t=>{var n;t.preventDefault(),a||null!=o&&null!==(n=o.isFormEnabled)&&void 0!==n&&n.call(o)&&c.Confluence.Editor.currentEditMode!==c.Confluence.Editor.MODE_PREVIEW&&(e(),i(!1),o.spinner.addClass("aui-icon-wait"),c.tinymce.Env.browser.isFirefox()&&!c.Confluence.Editor.bookmark&&(c.Confluence.Editor.bookmark=c.tinymce.activeEditor.selection.getBookmark()),Ta(c.Confluence.Editor.MODE_PREVIEW,{errorCallback:()=>{i(!0),o.spinner.removeClass("aui-icon-wait")}}),["comment","template"].includes(m.a.get("content-type"))?el.a.disableElement(o.cancelButton):el.a.enableElement(o.cancelButton))})),s()("#rte-button-labels").bind("updateLabel",(()=>{var e=+m.a.get("num-labels")||0,t=Object(cn.a)("editor.labels.zero");1===e?t=Object(cn.a)("editor.labels.singular",e):e>1&&(t=Object(cn.a)("editor.labels.plural",e)),s()("#rte-button-labels").attr("data-tooltip",t)})),s()("#draft-status-lozenge").length&&s()("#draft-status-lozenge").tooltip();var t=s()("#PostingDate");if(t.length){var n,d,g=new Date;t.attr("max",`${g.getFullYear()}-${(g.getMonth()+1).toString().padStart(2,"0")}-${g.getDate().toString().padStart(2,"0")}`),o.postingDatePicker=t.datePicker({overrideBrowserDefault:!0}),null==o||null===(n=o.postingDatePicker)||void 0===n||null===(d=n.hide)||void 0===d||d.call(n)}s()("#wysiwygTextarea_parent .mceProgress, #wysiwygTextarea_parent .mceBlocker").on("click",(()=>{r.a.Rte.getEditor().focus()})),s()(window).bind("render-content-loaded",((e,t)=>{var n,r=s()("#previewArea iframe");r.contents().find("body")[0]==t&&(c.Confluence.Editor.previewFrameOnload(t,r),n=!0,[o.saveButton,o.overwriteButton,o.editButton,o.previewButton].forEach((e=>{l(n,e)})),r.focus(),window.focus(),s()(document).trigger("iframeAppended",r))})),m.a.get("heartbeat")&&(c.Confluence.Editor.heartbeat(),c.Confluence.Editor.heartbeatType.normal(),Object(C.a)("rte-destroyed",c.Confluence.Editor.heartbeatType.cleanup)),Object(C.a)("watchpage.pageoperation",(()=>{var e;null==o||null===(e=o.toggleWatchPage)||void 0===e||e.call(o,!1)})),Object(C.a)("unwatchpage.pageoperation",(()=>{var e;null==o||null===(e=o.toggleWatchPage)||void 0===e||e.call(o,!0)})),m.a.get("new-page")&&"inlinecommentform"===m.a.get("form-name")&&(document.title=Object(cn.a)("edit.name")+document.title);var p=document.title;m.a.get("new-page")&&s.a.trim(s()("input#content-title").val())&&(document.title=u()+s()("input#content-title").val()+" - "+m.a.get("space-name")+" - "+m.a.get("site-title")),s()("input#content-title").on("change input",(function(){if("template"!==m.a.get("content-type")){var e=u();this.value.trim()?document.title=e+this.value+" - "+m.a.get("space-name")+" - "+m.a.get("site-title"):document.title=p}})),s()("body",s()("#wysiwygTextarea_ifr").contents()).click(e),Object(C.b)("init.rte-control")},o.toggleWatchPage=e=>{e&&"comment"===m.a.get("content-type")?(o.watchPageToolbarGroup.show(),o.watchPageCheckbox.length&&(o.watchPageCheckbox[0].checked=!1)):o.watchPageToolbarGroup.hide()},o},al=n(36),il=()=>{var e,t;if(null!==c.Confluence&&void 0!==c.Confluence&&null!==(e=c.Confluence.Editor)&&void 0!==e&&null!==(t=e.ImageDialog)&&void 0!==t&&t.panelComponent){var n=c.Confluence.Editor.FileDialog||{},o=n.eventListener,r=n.ExternalPanelView,a=n.SearchPanelView,i=n.AttachmentsPanelView,l=(c.Confluence.Editor.ImageDialog||{}).panelComponent;if("template"!==m.a.get("content-type")){var s=new i({eventListener:o});l.push(s)}l.push(new r),l.push(new a)}},ll=(n(75),n(78),()=>{Object(C.a)("rte-ready",(()=>{var e,t;null===Yi.a||void 0===Yi.a||null===(e=Yi.a.unuse)||void 0===e||e.call(Yi.a),null===Yi.a||void 0===Yi.a||null===(t=Yi.a.use)||void 0===t||t.call(Yi.a)})),Object(C.a)("rte-ready",(()=>{m.a.getBoolean("collaborative-content")||s()('meta[name="ajs-collaborative-editor-status"]').attr("content","off"),c.Confluence.Editor.UI.saveButton.bind("click",ga),Ia()})),Object(C.a)("editor.error.message",((e,t)=>{da(t)})),Object(C.a)("dismiss.editor.error.message",((e,t)=>{Xr.a.closeMessages([t.messageKey]),t.enablePublish&&ca(!0)})),c.Confluence.Editor=s.a.extend(c.Confluence.Editor||{},Oa,r.a.Editor),r.a.toInit((e=>{e(c.document).ajaxError(((e,t)=>{if(405===t.status)try{var n=JSON.parse(t.responseText).reason;void 0!==n&&"READ_ONLY"===n&&(p.a.info("*** READ_ONLY mode detected ***"),Object(C.b)("rte.heartbeat-error",t))}catch(e){p.a.error("Cannot parse xhr.responseText: "+e)}})),Object(C.a)("init.rte",c.Confluence.Editor.onInit)})),r.a.Editor=c.Confluence.Editor,Object(C.a)("init.rte",(()=>{var e,t=rl();c.Confluence.Editor.UI=t,null==t||null===(e=t.init)||void 0===e||e.call(t)})),s.a.fn.sizeToFit=hi.sizeToFit,c.Confluence.Editor.ImageDialog=hi,c.Confluence.Editor.defaultInsertImageDialog=hi.defaultInsertImageDialog,c.Confluence.Editor.insertImageDialog=hi.insertImageDialog,Object(al.a)().then(il),r.a.PagePermissions=r.a.PagePermissions||{},s.a.extend(r.a.PagePermissions,{updateEditPageRestrictions:Ji}),r.a.toInit(Zi)}),sl=n(31),cl=n.n(sl),dl=e=>{var t=e.type;return`<div class="cell ${t}" data-type="${t}"><div class="innerCell"></div></div>`},ul=()=>`<div class="contentLayout2"><div class="columnLayout single" data-layout="single">${dl({type:"normal"})}</div></div>`,gl={name:"pagelayout-none",columns:0},ml=e=>{var t=s()(e.getBody()),n=(e,t)=>{t.attr("contenteditable","false");s()(".innerCell",e).each((function(){var e=s()(this);e.attr("contenteditable","true"),e.children().length||e.append("<p><br /></p>")}))},o=e=>{for(var t=s()(".cell, .header, .footer",e),n=0;n<t.length;n++){var o=s()(t[n]),r=o.html();s()(".innerCell",o).length||(o.removeAttr("contenteditable"),o.html('<div class="innerCell">'+r+"</div>"))}},r=()=>{var r=s()(".contentLayout",t);r.length?(o(r),n(r,t),e.undoManager.add()):t.attr("contenteditable","true")};r();var a=e=>{var t=(e.jquery?e:s()(e)).attr("data-atlassian-layout");return t?JSON.parse(t):gl},i=e=>!(e.header||e.footer||e.columns),l=e=>{var t=e.jquery?e:s()(e);if(t.length)for(var n=t[0].childNodes,o=0;o<n.length;o++){var r=n[o];if("P"!==r.nodeName||1!==r.childNodes.length||"BR"!==r.firstChild.nodeName)return t.html()}return""},c=e=>{s()(".header",e).length||e.prepend('<div class="header"><div class="innerCell"></div></div>')},d=e=>{var t=s()(".header",e),n=m(e),o=l(s()(".innerCell",t));n.length?(n.prepend(o),t.remove()):t.replaceWith(o)},u=e=>{s()(".footer",e).length||e.append('<div class="footer"><div class="innerCell"></div></div>')},g=e=>{var t=s()(".footer",e),n=p(e),o=l(s()(".innerCell",t));n.length?(n.append(o),t.remove()):t.replaceWith(o)},m=e=>s()(".columnLayout > .cell:first-child .innerCell",e),p=e=>s()(".columnLayout > .cell:last-child .innerCell",e),f=e=>s()(".columnLayout",e).append('<div class="cell"><div class="innerCell"></div></div>'),h=e=>{var t="";s()(".columnLayout > .cell",e).each((function(){t+=l(s()(".innerCell",this))})),s()(".columnLayout",e).replaceWith(t)},v=(e,t)=>{var n=l(e);t.append(n),e.parent().remove()},b=(e,t)=>{var n,o=(e=>s()(".columnLayout > .cell",e).length)(t),r=e.name,a=e.columns;if(0===o)for(n=t.html(),t.html('<div class="columnLayout"></div>');o!==a.length;)f(t),o++;var i=r.substring(r.indexOf("-")+1);if(i=i.substring(0,Math.max(0,i.indexOf("-"))||void 0),s()(".columnLayout",t).attr("class","columnLayout "+i+"Columns"),a)for(s()(".columnLayout > .cell",t).each((function(e,t){void 0!==a[e]&&s()(t).attr("class","cell "+a[e])}));o!==a.length;)o<a.length?(f(t),o++):(v(s()(".columnLayout .cell:nth-child("+o+") .innerCell",t),s()(".columnLayout > .cell:nth-child("+(o-1)+") .innerCell",t)),o--);else h(t);n&&m(t).html(n)},y=(e,t)=>{e.empty().append(t)},w=(e,t)=>x('<div class="contentLayout"></div>',e).html(t.html()),A=e=>{var t=e.selection,n=t.getRng(),o=s()('[contenteditable="true"]',e.getBody());if(o.length){e.focus(),o[0].focus();var r=o.children()[0];n.setStart(r,0),n.setEnd(r,0),t.setRng(n)}else e.focus()},x=(e,t)=>{var n=t.dom.create("div");return n.innerHTML=e,s()(n).children()};return{setup:r,getLayout:()=>{var e=s()(".contentLayout",t);return e.length&&e.attr("data-atlassian-layout")?JSON.parse(e.attr("data-atlassian-layout")):gl},body:t,needsContentEditableBody:i,getLayoutOptions:a,setLayout:r=>{var l,m=s()(".contentLayout",t);a(m).name!==r.name&&(Object(C.b)("analyticsEvent",{name:"PageLayoutEvent.pageLayoutChanged",data:{name:r.name}}),l=1===m.length?m.clone():w(e,t),o(l),b(r,l),r.header?c(l):d(l),r.footer?u(l):g(l),i(r)?(l=l.contents().unwrap(),t.attr("contenteditable","true"),m=""):(n(l,t),l.attr("data-atlassian-layout",JSON.stringify(r)),m=l),y(t,l),A(e))},DEFAULT_LAYOUT:gl}};!function(e){e.normal="normal",e.aside="aside",e.sidebars="sidebars"}(Ki||(Ki={}));var pl=[{id:"single",icon:"1col",name:Object(cn.a)("page-layout-2.layout.single"),cells:[{type:Ki.normal}]},{id:"two-equal",icon:"2col",name:Object(cn.a)("page-layout-2.layout.two-equal"),cells:[{type:Ki.normal},{type:Ki.normal}]},{id:"two-left-sidebar",icon:"2col-right",name:Object(cn.a)("page-layout-2.layout.two-left-sidebar"),cells:[{type:Ki.aside},{type:Ki.normal}]},{id:"two-right-sidebar",icon:"2col-left",name:Object(cn.a)("page-layout-2.layout.two-right-sidebar"),cells:[{type:Ki.normal},{type:Ki.aside}]},{id:"three-equal",icon:"3col",name:Object(cn.a)("page-layout-2.layout.three-equal"),cells:[{type:Ki.normal},{type:Ki.normal},{type:Ki.normal}]},{id:"three-with-sidebars",icon:"3col-center",name:Object(cn.a)("page-layout-2.layout.three-with-sidebars"),cells:[{type:Ki.sidebars},{type:Ki.normal},{type:Ki.sidebars}]}],fl=e=>pl.find((t=>t.id===e)),hl="editor.page-layout.",vl=e=>{var t=s()(e.getBody()),n=(e,t)=>{t.attr("contenteditable","false");s()(".innerCell",e).each((function(){var e=s()(this);e.attr("contenteditable","true"),e.children().length||e.append("<p><br /></p>")}))},o=e=>{e.find("> p").each((function(){""===this.id.trim()&&0===this.classList.length&&s()(this).remove()}))},a=e=>{e.find(".contentLayout2 .cell").filter((function(){return s()(this).find(".innerCell").length>1})).each((function(e,t){for(var n=s()(t).find(".innerCell"),o=n[0],r=1;r<n.length;r++){var a=s()(n[r]);s()(o).append(a.children()),a.remove()}}))},l=()=>{var r=t.find(".contentLayout2");r.length?(n(r,t),o(t),a(t),e.undoManager.add()):t.attr("contenteditable","true")};l();var c=(e,t,o)=>{var r=e.find(".cell"),a=r.length,i=s()(),l=t.cells.length,c=[],d=[];e.attr("class","columnLayout"),e.addClass(t.id),e.attr("data-layout",t.id);for(var u=0;u<a;u++){var m=r.eq(u).detach();c.push(g(m.children(".innerCell")))}for(var p=0;p<l;p++)i=i.add(dl({type:t.cells[p].type||""}));if(a<=l)d=c;else{d=c.slice(0,l);for(var f=l;f<a;f++)d[l-1]+=c[f]}e.prepend(i);for(var h=0;h<l;h++)i.eq(h).find(".innerCell").html(d[h]);n(e,o)},d=()=>{if(!u()){var o=s()(ul()),r=o.find(".innerCell"),a=t.children().detach();r.append(a),t.append(o),n(o,t),p(e)}},u=()=>!!s()(i.a.activeEditor.getBody()).find("div.contentLayout2").length,g=e=>{var t=s()(e);if(t.length)for(var n=t[0].childNodes,o=0;o<n.length;o++){var r=n[o];if("P"!==r.nodeName||1!==r.childNodes.length||!r.firstChild||"BR"!==r.firstChild.nodeName)return t.html()}return""},m=(e,t,n)=>{var o=s()(t.selection.getRng().startContainer).closest(".columnLayout");return!o.length&&n&&(o=e.find(".columnLayout").last()),o},p=e=>{var t=e.selection,n=t.getRng(),o=s()('[contenteditable="true"]',e.getBody());if(o.length){e.focus(),o[0].focus();var r=o.children()[0];n.setStart(r,0),n.setEnd(r,0),t.setRng(n)}else e.focus()},f=(e,t)=>{var n=e.selection,o=n.getRng(),a=t.find('[contenteditable="true"]').first(),i=a.children();if(i.length){e.focus(),a[0].focus();var l=i[0];o.setStart(l,0),o.setEnd(l,0),n.setRng(o),r.a.Rte.showElement(l)}else e.focus()};return{setup:l,body:t,editor:e,Layouts:pl,getLayout:fl,needsContentEditableBody:()=>!u(),findNearestLayoutSection:e=>{var t=i.a.activeEditor,n=s()(t.getBody());return m(n,t,e)},createInitialLayoutIfNone:d,addSection:n=>{var o=s()(`<div class="columnLayout single" data-layout="single">${dl({type:"normal"})}</div>`),r=n||m(t,e,!0);if(r.length){var a=fl(r.attr("data-layout"));e.undoManager.ignore((()=>{c(o,a,t),r.after(o)})),f(e,o),Object(C.b)(hl+"add-section",{section:o})}else d()},removeSection:n=>{if(u()){var o,r,a=n||m(t,e,!0),i=a.next(),l=a.prev();if(i.length)o=i,a.remove();else if(l.length)o=l,a.remove();else{a.closest(".contentLayout2").remove();var c=t.find(".contentLayout2").find(".columnLayout").first();c.length?o=c:(e.getBody().setAttribute("contenteditable","true"),e.setContent("<p></p>"),p(e),(r=s()("#rte-button-pagelayout-2")).hasClass("active")&&r.click())}o&&o.length&&f(e,o),Object(C.b)(hl+"remove-section",{})}},changeSection:(n,o)=>{u()||d();var r=o||m(t,e,!1);if(r.length){var a=fl(r.attr("data-layout"));e.undoManager.ignore((()=>{c(r,n,t)})),f(e,r),Object(C.b)(hl+"change-layout",{section:r,originalLayout:a,currentLayout:n})}},moveSectionDown:n=>{if(u()){var o=n||m(t,e,!0),r=o.next();r.length&&(o.detach(),r.after(o),f(e,o)),Object(C.b)(hl+"move-section-down",{section:o})}},moveSectionUp:n=>{if(u()){var o=n||m(t,e,!0),r=o.prev();r.length&&(o.detach(),r.before(o),f(e,o)),Object(C.b)(hl+"move-section-up",{section:o})}}}};function bl(e){var t,n=ml(e),o=vl(e);if("comment"!==m.a.get("content-type")){var a=e=>{var t=s()("#pagelayout-menu"),n=s()(".icon-check",t),o=n.not(".hidden"),r=n.siblings("."+e.name).siblings();o.addClass("hidden"),r.removeClass("hidden")},i=e=>{var t=s()(e.getBody());return!t.children(".contentLayout").length&&(t.children(".contentLayout2").length,!0)},l=()=>{c.tinymce.Env.browser.isFirefox()&&setTimeout((()=>{e.focus(),e.dom.getRoot().focus()}),1)},d=r=>{var c=s()("#pagelayout-menu").parent(),d=s()("#page-layout-2-group");r&&r.selection||(i(e)?(c.addClass("hidden"),d.removeClass("hidden"),t=vl(e),o&&o.needsContentEditableBody()&&s()(e.getBody()).attr("contenteditable","true")):(c.removeClass("hidden"),d.addClass("hidden"),t=ml(e),n.needsContentEditableBody(t.getLayout())?t.body.attr("contenteditable","true"):l(),a(t.getLayout())))};return e.on("init",(()=>{e.undoManager.clear(),e.undoManager.add(),d(),Object(C.a)("editor.remote.change editor.local.change",(()=>{e.undoManager.ignore((()=>{t.setup()}))})),Object(C.a)("rte-ready",(()=>{var t=s()('[contenteditable="true"]',e.getBody()),n=!1!==m.a.get("editor-auto-focus");t.attr("contenteditable","false"),t.attr("contenteditable","true"),n&&r.a.Rte.editorFocus(e)})),i(e)&&e.on("Undo",(()=>{o.needsContentEditableBody()&&t.body.attr("contenteditable","true"),l()})),cl.a.use()})),s()("#pagelayout-menu").delegate("li.dropdown-item a","click",(function(){e.execCommand("mcePageLayout",!1,n.getLayoutOptions(this))})),e.on("Remove",(()=>{cl.a.unuse()})),e.on("SetContent",d),e.on("click",(t=>{var n=s()(t.target);if((n.is("div.cell")&&n.children(".innerCell").focus(),u()&&(t.target===e.getBody()||t.target===e.getBody().parentNode))&&n.find(".innerCell").length){e.execCommand("selectAll");var o=t.target!==e.getBody();e.selection.collapse(o)}})),e.on("keyup",(t=>{var n=t.keyCode;if(8!==n&&46!==n)return!0;var o=e.selection.getRng().startContainer;if(s()(o).closest(".contentLayout,.contentLayout2",e.getBody()).length){var r=s()(o).closest(".innerCell");if(r&&r.length&&e.dom.isEmpty(r.clone()[0])){r.html('<p><br data-mce-bogus="1"></p>'),t.preventDefault();var a=r[0].firstElementChild&&r[0].firstElementChild.firstChild;a&&e.selection.select(a,!0),e.selection.collapse(!0)}}})),e.addCommand("mcePageLayoutInitialize",(()=>{e.undoManager.add(),t.createInitialLayoutIfNone()})),e.addCommand("mcePageLayout",((n,o)=>{e.undoManager.add(),t.setLayout(o),a(t.getLayout())})),e.addCommand("mcePageLayoutAddSection",((n,o)=>{e.undoManager.add(),t.addSection&&t.addSection(o&&o.section)})),e.addCommand("mcePageLayoutChangeSection",((n,o)=>{e.undoManager.add(),t.changeSection&&t.changeSection(o&&o.layout,o&&o.section)})),e.addCommand("mcePageLayoutRemoveSection",((n,o)=>{e.undoManager.add(),t.removeSection&&t.removeSection(o&&o.section)})),e.addCommand("mcePageLayoutMoveSectionUp",((n,o)=>{e.undoManager.add(),t.moveSectionUp&&t.moveSectionUp(o&&o.section)})),e.addCommand("mcePageLayoutMoveSectionDown",((n,o)=>{e.undoManager.add(),t.moveSectionDown&&t.moveSectionDown(o&&o.section)})),{Layouts:o&&o.Layouts,getLayout:o&&o.getLayout,execCommand:t=>{if("selectAll"===t){var n=e.getBody();if("true"==e.dom.getAttrib(n,"contenteditable"))return!1;var o=e.dom.select(".innerCell",n),r=o[0],a=o[o.length-1],i=e.dom.createRng();return i.setStart(r,0),i.setEnd(a,a.childNodes.length),e.selection.setRng(i),!0}return!1},disableContent:()=>{e.dom.setAttribs(e.dom.select("div.innerCell"),{contenteditable:!1}),e.dom.setStyle(e.dom.select(".wiki-content .contentLayout2"),"user-select","auto")},getInfo:()=>({longname:"Page Layout Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"})}}}var yl=()=>{"comment"!==m.a.get("content-type")&&He(document,"initContextToolbars.Toolbar",(()=>{return c.Confluence.Editor.PageLayoutToolbar=(e=c.tinymce.activeEditor,t=vl(e),n=e=>{var n=(e=e||t.findNearestLayoutSection()).attr("data-layout"),o=s()("#rte-toolbar-row-pl2-toolbar").find(".layouts button"),r=o.find(".pl2-layout-"+n).closest(".aui-button");r.hasClass("active")||(o.filter(".active").removeClass("active"),r.addClass("active"))},{initContextToolbars:()=>{var o=s()(document),r=s()("#page-layout-2"),a=s()("#rte-button-pagelayout-2"),i="pl2-toolbar";e.addCommand("mcePageLayoutsToolbar",(()=>{a.hasClass("active")?o.trigger("removeContextToolbarRow.Toolbar",{id:i,animate:!0}):(o.trigger("createContextToolbarRow.Toolbar",{id:i,buttons:c.Confluence.Editor.PageLayoutToolbar.Buttons,topToolbar:!0,animate:!0}),n(),e.execCommand("mcePageLayoutInitialize")),a.toggleClass("active")})),a.click((t=>{t.preventDefault(),r.hasClass("disabled")||e.execCommand("mcePageLayoutsToolbar",!1,null)})),e.on("NodeChange",(e=>{var t=s()(e.element).closest(".columnLayout");n(t)}));for(var l=t.Layouts,d=[],u=t=>{d.push(new c.Confluence.Editor.Toolbar.Components.Button({text:t.name,iconClass:"aui-icon aui-icon-small aui-iconfont-layout-"+t.icon+"-large",click:()=>{e.execCommand("mcePageLayoutChangeSection",!1,{layout:t})}}))},g=0;g<l.length;g++)u(l[g]);return{Buttons:[new c.Confluence.Editor.Toolbar.Components.Group([new c.Confluence.Editor.Toolbar.Components.Button({triggerText:Object(cn.a)("page-layout-2.add-section"),id:"add-layout-section",tooltip:Object(cn.a)("page-layout-2.add-section.tooltip"),iconClass:"aui-icon aui-icon-small aui-iconfont-add",click:()=>e.execCommand("mcePageLayoutAddSection")}),new c.Confluence.Editor.Toolbar.Components.Button({triggerText:Object(cn.a)("page-layout-2.remove-section"),id:"remove-layout-section",tooltip:Object(cn.a)("page-layout-2.remove-section.tooltip"),iconClass:"aui-icon aui-icon-small aui-iconfont-delete",click:()=>e.execCommand("mcePageLayoutRemoveSection")})]),new c.Confluence.Editor.Toolbar.Components.Group([new c.Confluence.Editor.Toolbar.Components.Button({triggerText:Object(cn.a)("page-layout-2.move-section-up"),id:"move-up-layout-section",tooltip:Object(cn.a)("page-layout-2.move-section-up.tooltip"),iconClass:"aui-icon aui-icon-small aui-iconfont-up",click:()=>e.execCommand("mcePageLayoutMoveSectionUp")}),new c.Confluence.Editor.Toolbar.Components.Button({triggerText:Object(cn.a)("page-layout-2.move-section-down"),id:"move-down-layout-section",tooltip:Object(cn.a)("page-layout-2.move-section-down.tooltip"),iconClass:"aui-icon aui-icon-small aui-iconfont-down",click:()=>e.execCommand("mcePageLayoutMoveSectionDown")})]),new c.Confluence.Editor.Toolbar.Components.Group(d,{id:"pagelayout2-toolbar",text:Object(cn.a)("page-layout-2.layout.group"),groupClass:"layouts"}),new c.Confluence.Editor.Toolbar.Components.Group([new c.Confluence.Editor.Toolbar.Components.Button({text:Object(cn.a)("page-layout-2.close"),iconClass:"aui-icon aui-icon-small aui-iconfont-close-dialog",click:()=>e.execCommand("mcePageLayoutsToolbar",!1,null)})],{groupClass:"close"})],Events:[]}}}).initContextToolbars();var e,t,n}))};n(81);function wl(e){for(var t=e.offsetTop;e.offsetParent;)t+=(e=e.offsetParent).offsetTop;return t}function Cl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Al=new class{constructor(e,t){Cl(this,"_namespace",void 0),Cl(this,"_sessionStorageSupported",void 0);var n=m.a.get("remote-user")||"";this._namespace=`${e}.${n}.${t}`,this._sessionStorageSupported=!!c.sessionStorage}getItem(e){return this._sessionStorageSupported?c.sessionStorage.getItem(`${this._namespace}.${e}`):(p.a.warn("Browser does not support sessionStorage, Confluence.storageManager will not work."),null)}doesContain(e){return!!this.getItem(e)}setItem(e,t){if(this._sessionStorageSupported)try{c.sessionStorage.setItem(`${this._namespace}.${e}`,t)}catch(n){p.a.error(`Unable to write to sessionStorage. key: ${e}, value: ${t}, cause: ${n}`)}else p.a.warn("Browser does not support sessionStorage, Confluence.storageManager will not work.")}removeItem(e){this._sessionStorageSupported?c.sessionStorage.removeItem(`${this._namespace}.${e}`):p.a.warn("Browser does not support sessionStorage, Confluence.storageManager will not work.")}}("atlassian","frontend"),xl="editor-persit-scroll-position",Ml="main-content",kl=e=>{var t=[];return Array.from(e).forEach(((e,n)=>{(function(e,t){var n=t?t.documentElement:c.document.documentElement;if(e&&n){var o=e.getBoundingClientRect(),r=o.top,a=o.bottom,i=n.offsetHeight;return 0<=r&&r<i||0<=a&&a<=i||r<=0&&0<=a&&a>=i}})(e)&&t.push({targetElementIndex:n,visibleBlockEl:e})})),t},El=e=>{var t=kl(e),n=null;return t.some((e=>!!function(e,t){var n=t?t.documentElement:c.document.documentElement;if(e&&n){var o=e.getBoundingClientRect().top,r=n.offsetHeight;return 0<=o&&o<r}}(e.visibleBlockEl)&&(n=e,!0))),!n&&t.length>0?t[0]:n||{targetElementIndex:-1,visibleBlockEl:null}};function Tl(e,t){if(!e||0===t)return null;var n={targetElementIndex:-1,offsetBetweenTargetAndCurrentScroll:0,columnLayoutPosition:{columnIndex:-1,rowIndex:-1}};if((e=>{if(!e)return!1;var t=e.children[0];return t&&t.classList.contains("contentLayout2")})(e)){var o=e.children[0].children,r=El(o),a=r.targetElementIndex,i=r.visibleBlockEl;if(i){var l=(e=>{var t={targetElementIndexInColumn:-1,columnIndex:-1,visibleBlockEl:null};return Array.from(e).some(((e,n)=>{var o=El(e.children),r=o.visibleBlockEl,a=o.targetElementIndex;return!!r&&(t.columnIndex=n,t.targetElementIndexInColumn=a,t.visibleBlockEl=r,!0)})),t})(i.getElementsByClassName("innerCell")),s=l.columnIndex,c=l.targetElementIndexInColumn,d=l.visibleBlockEl;d&&(n.targetElementIndex=c,n.offsetBetweenTargetAndCurrentScroll=t-wl(d),n.columnLayoutPosition={rowIndex:a,columnIndex:s})}}else{var u=El(e.children),g=u.targetElementIndex,m=u.visibleBlockEl;m&&(n.targetElementIndex=g,n.offsetBetweenTargetAndCurrentScroll=t-wl(m),delete n.columnLayoutPosition)}return-1!==n.targetElementIndex?n:null}var Dl=e=>{var t=e.contentId,n=e.isInViewPage,o=e.docObject,r=void 0===o?c.document:o,a=e.winObject,i=void 0===a?d.a:a,l=Tl(n?r.getElementById(Ml):r.body,i.pageYOffset);l&&(l.contentId=t,l.isInViewPage=n,Al.setItem(xl,JSON.stringify(l)))},Sl=e=>{var t=e.contentId,n=e.isInViewPage,o=e.docObject,r=void 0===o?c.document:o,a=e.winObject,i=void 0===a?d.a:a,l=Al.getItem(xl);try{l=JSON.parse(l)}catch(e){p.a.error("Can not parse JSON string of `savedViewPoistionData`: ",l)}finally{Al.removeItem(xl)}if(l&&l.contentId===t&&l.isInViewPage!==n){var s;s=n?r.getElementById(Ml):r.body;var u,g=l.columnLayoutPosition;if(g){var m=s.children[0].children[g.rowIndex].getElementsByClassName("innerCell")[g.columnIndex];u=m&&m.children[l.targetElementIndex]}else u=s.children[l.targetElementIndex];if(u){var f=wl(u)+l.offsetBetweenTargetAndCurrentScroll;setTimeout((()=>i.scrollTo(0,f)),1)}}};function Il(e){e.getDoc()&&e.getWin()&&Dl({contentId:hn(),isInViewPage:!1,docObject:e.getDoc(),winObject:e.getWin()})}function Ol(){return{init:e=>{var t=m.a.get("content-type");"page"!==t&&"blogpost"!==t||(Object(C.a)("rte-collab-ready",(()=>{!function(e){e.getDoc()&&e.getWin()&&Sl({contentId:hn(),isInViewPage:!1,docObject:e.getDoc(),winObject:e.getWin()})}(e)})),Object(C.a)("rte-ready",(()=>{c.Confluence.Editor.UI.cancelButton.click((()=>Il(e))),c.Confluence.Editor.UI.saveButton.click((()=>Il(e)))})))},getInfo:()=>({longname:"Persist scroll position for transition between view page and edit page",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}var jl,Nl=[],Ll={};function Bl(e){var t=`<span class="text-placeholder">${jl}</span>`,n=s()("<div></div>").append(t);e&&n.find(".text-placeholder").html(e),c.tinymce.activeEditor.execCommand("mceInsertContent",!1,{content:n.html(),preserve_zwsp:!0})}function Rl(e){var t=c.tinymce.activeEditor,n=s()(t.getBody()),o=e&&e.parentElement,r=t.dom.create("span",{id:"placeholder-cursor"},"&nbsp;");o&&e&&o.replaceChild(r,e);var a=n.find("#placeholder-cursor")[0];t.selection.select(a.firstChild),t.dom.replace(document.createElement("br"),a)}function Pl(){return Nl}function $l(e){return Ll[e]}jl=u()?"\ufeff{$caret}<br>":"\ufeff{$caret}";var Hl={insertTextPlaceHolder:Bl,removePlaceholder:Rl,addPlaceholderType:function(e){e&&e.type?(Nl.push(e),Ll[e.type]=e):p.a.error("PlaceHolderRegister : unable to register new place holder type !")},getPlaceholderTypes:Pl,getPlaceholderType:$l};function Fl(){return{name:"textplaceholder",canHandleElement:e=>e.hasClass("text-placeholder"),handle(e){if("click"===e.e.type||"mouseup"===e.e.type){var t,n=Pl(),o=e.containerEl,r=o.getAttribute("data-placeholder-type"),a=[],i=u("default",Object(cn.a)("property.panel.textplaceholder.display.default"),Object(cn.a)("property.panel.textplaceholder.display.default.tooltip"));i.selected=!r,a.push(i);for(var l=0,d=n.length;l<d;l++)t=n[l],a.push(u(t.type,t.label,t.tooltip));a.push(null),a.push({className:"text-placeholder-property-panel-remove-button",text:Object(cn.a)("property.panel.textplaceholder.remove"),click(){c.Confluence.PropertyPanel.destroy(),Rl(o)}}),c.Confluence.PropertyPanel.createFromButtonModel("textplaceholder",o,a,{anchorIframe:g().getEditorFrame()})}function u(e,t,n){return{className:`text-placeholder-property-panel-type-item text-placeholder-property-panel-type-${e}`,text:t,tooltip:n,selected:r===e,click(){!function(e){"default"===e?o.removeAttribute("data-placeholder-type"):o.setAttribute("data-placeholder-type",e);var t=s()(`.text-placeholder-property-panel-type-${e}`);t.parent().find(".text-placeholder-property-panel-type-item").removeClass("selected"),t.addClass("selected")}(e)}}}}}}function zl(){var e={click:!1,keypress:!0},t=c.tinymce.VK,n=c.tinymce.dom.Event,o="template"===m.a.get("content-type");function r(e){s()("#rte-button-insert-placeholder").click((e=>{e.preventDefault(),Bl()})),e.on("KeyDown",(t=>{if(13===t.keyCode&&!t.shiftKey){var n=e.selection.getNode(),o=s()(n).closest(".text-placeholder"),r=e.selection.getRng();if(o.length&&r&&Jo.isCursorAtEnd(e,r))return Zo(e,o,!0),c.tinymce.dom.Event.cancel(t)}}),!0)}var a={UL:!0,OL:!0,LI:!0,TABLE:!0,TBODY:!0};function i(e){return!a[e.nodeName]}function l(o){function r(){var e=u();e&&o.selection.select(e)}function a(e){e.off("KeyDown",l),e.off("KeyPress",d),e.off("Click",d)}function l(e){var r=u();return e.keyCode===t.LEFT||e.keyCode===t.UP?(function(e,t){for(var n,o=t&&t.previousSibling;t&&!o;)o=(t=t.parentNode).previousSibling;if(o){for(n=o;!i(n)&&n.lastChild;)n=n.lastChild;e.selection.select(n.lastChild||n),e.selection.collapse(!1),e.selection.normalize()}}(o,r),n.cancel(e)):e.keyCode===t.RIGHT||e.keyCode===t.DOWN?(function(e,t){for(var n,o=t&&t.nextSibling;t&&!o;)o=(t=t.parentNode).nextSibling;if(o){for(n=o;!i(n)&&n.firstChild;)n=n.firstChild;e.selection.select(n.firstChild||n),e.selection.collapse(!0),e.selection.normalize()}}(o,r),n.cancel(e)):e.keyCode===t.BACKSPACE||e.keyCode===t.DELETE?(Rl(r),n.cancel(e)):void 0}function d(t){if(!c.tinymce.Env.browser.isFirefox()||t.isChar||"keypress"!==t.type){var n,o,r,a=u();if(a){var i=a.getAttribute("data-placeholder-type");n=i,o=t.type,r=n&&$l(n),s.a.extend({},e,r&&r.activation)[o]&&(Rl(a),Object(C.b)("editor.text-placeholder.activated",{placeholderType:i||"",triggerEvent:t}))}}}function u(){var e=s()(o.getBody()).find(".text-placeholder.selected");return e.length?e[0]:(a(o),null)}o.on("NodeChange",(function(e){var t=e.element,n=s()(t).closest(".text-placeholder");s()(o.getBody()).find(".text-placeholder.selected").not(n).removeClass("selected"),n.length?(n.hasClass("selected")||(n.addClass("selected"),function(e){e.on("KeyDown",l,!0),e.on("KeyPress",d,!0),e.on("Click",d,!0)}(o)),setTimeout(r,0)):a(o)}),!0)}return{init(e){e.on("init",(()=>{(o?r:l)(e),function(e){s()(e.getDoc()).find("head").append('<style type="text/css">.wiki-content .text-placeholder { display: inline-block; }</style>')}(e)}))},getInfo:()=>({longname:"Text Placeholder Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"})}}function Ul(e){return e.parentNode&&e.parentNode.childNodes||[]}function _l(e){var t=Ul(e);return function(e){var t=!0,n=/TABLE|TH|TD/;return(t=(t=!n.test(e.nodeName))&&e.previousSibling?!n.test(e.previousSibling.nodeName):t)&&e.nextSibling?!n.test(e.nextSibling.nodeName):t}(e)&&(function(e){var t=function(e){return e&&e.innerHTML&&(e.innerHTML.replace(/\uFEFF|\u200B/g,"")||"&nbsp;")}(e);return/^&nbsp;$/.test(t)}(e)||t.length>1&&"BR"==t[0].nodeName)}function Ql(e,t){e.dom.remove(t)}function Wl(e){return e.on("KeyDown",(t=>{!function(e,t){var n,o,r=c.tinymce.VK,a=r.BACKSPACE,i=r.DELETE,l=e.selection.getNode(),s=l.nextSibling;if(e.selection.isCollapsed()&&l!=e.dom.getRoot())if(t.keyCode===a){if(n=e.selection,(o=n.getRng())&&0===o.startOffset){var d=l.previousSibling;d&&_l(d)&&(Ql(e,d),c.tinymce.dom.Event.cancel(t))}}else if(t.keyCode==i){if(Ul(l).length<=1||l.childNodes.length>1)return;s&&_l(l)&&(Ql(e,l),c.tinymce.dom.Event.cancel(t),function(e,t){var n=e.selection,o=n.getRng();e.focus(!1),t.focus(),o&&(o.setStart(t,0),o.setEnd(t,0),n.setRng(o))}(e,s))}}(e,t)})),{getMetadata:()=>({name:"Preserve paragraph formatting when deleting empty line",author:"Atlassian",url:"http://www.atlassian.com"})}}n(83);function Vl(){var e=c.Confluence.PropertyPanel,t=[];return Object(C.a)("add-handler.property-panel",((e,n)=>{n&&t.push(n)})),{init:n=>{var o=()=>!!e.current,r=(r,a)=>{var i={focusedEl:a,focusedNodeName:a.nodeName&&a.nodeName.toLowerCase(),ed:n,e:s.a.extend({},r)},l=(e=>{if(e.is("img"))return e[0];var t=e.closest("a,table,.wysiwyg-macro,.editor-inline-macro,.text-placeholder");return t.length?t[0]:""})(s()(a)),d=!!s()(a).closest("table:not(.wysiwyg-macro,.editor-inline-macro)").length,u=!!s()(".toolbar-contextual").length;if(i.containerEl=l,Object(C.b)("user-blurred-rte-element",i),l&&!(e=>"click"==e.type&&(e.which?3===e.which:e.button?2==e.button:void 0))(r)&&!o()&&e.shouldCreate)for(var g=0,m=t.length;g<m;g++)if(t[g].canHandleElement(s()(l))){if(u||!d)return t[g].handle(i);(e=>{He(c.document,"shown.contextToolbar",(()=>{e.handle(i)}))})(t[g])}};function a(e,t){r(e,t.elem)}function i(t,n){o()&&(!n.containerEl||e.current.hasAnchorChanged(n.containerEl)?e.destroy():Object(C.b)("same-anchor.property-panel"))}function l(){setTimeout((()=>{g().bindScroll("property-panel",(()=>{e.destroy()}))}),0),s()(n.getDoc()).bind("keydown.property-panel.escape",(t=>{27===t.keyCode&&o()&&e.destroy()}))}function d(){g().unbindScroll("property-panel"),s()(n.getDoc()).unbind("keydown.property-panel.escape")}n.on("Click",(e=>{r(e,e.target)})),n.on("KeyDown",(t=>{if(27!==t.keyCode){if(t.target.classList.contains("editor-inline-macro")){if(13===t.keyCode)return t.target.click(),void t.preventDefault();if(37===t.keyCode||38===t.keyCode||39===t.keyCode||40===t.keyCode)return t.target.blur(),void t.preventDefault()}if(o()&&"Tab"===t.key&&function(e){if(!e)return!1;if(e.classList.contains("editor-inline-macro"))return!0;return e.children.length&&!!n.selection.getNode().querySelector(".editor-inline-macro")}(n.selection.getNode()))return e.current.panel.find(".aui-button:first-child").focus(),void t.preventDefault();r(t,n.selection.getNode())}}),!0),n.on("ContextMenu",(()=>{e.destroy()})),Object(C.a)("trigger.property-panel",a),Object(C.a)("user-blurred-rte-element",i),Object(C.a)("created.property-panel",l),Object(C.a)("destroyed.property-panel",d),n.on("Remove",(()=>{Object(C.c)("trigger.property-panel",a),Object(C.c)("user-blurred-rte-element",i),Object(C.c)("created.property-panel",l),Object(C.c)("destroyed.property-panel",d)}))},getInfo:()=>({longname:"Image, Link and Macro Property Panels",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Kl(){return{init(e){e.on("Init",(()=>{var e=s()("#createpageform"),t=e.find("#originalReferrer");e.length&&!t.val()&&document.referrer&&t.val(document.referrer)}))},getInfo:()=>({longname:"Confluence Cancel Return Url",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}var Gl,Yl,Jl,ql="searchreplace",Zl=(Gl=function(){function e(t){var n=[];if(t.nodeType===Node.TEXT_NODE)n.push(t);else for(var o=t.childNodes,r=0,a=o.length;r<a;++r)n.push.apply(n,e(o[r]));return n}function t(e){return e.nodeValue.toLowerCase()}return{search(n,o,r,a,i){var l=n.getSel(),s=e(a);o=o.replace(/\s/g,"").toLowerCase();var c=s.map(t).join("");r=function(e,t,n){var o=e.getRng();if(o&&o.endContainer.nodeValue){var r=n.indexOf(o.endContainer.nodeValue.toLowerCase(),t)+o.endOffset;t=t!==r&&-1!==t?r:t}return t}(n,r,c);var d,u,g,m,p,f=(d=c,u=o,g=r,(p=(m=i)?d.lastIndexOf(u,g-1):d.indexOf(u,g))<0&&!m?p=d.indexOf(u):0===p&&0===g&&m&&(p=d.lastIndexOf(u)),p);if(f<0)return[!1,f];var h=function(e,t,n){for(var o,r,a,i,l=0,s=0;s<t.length;s++){if(t[s].nodeType===Node.TEXT_NODE){var c=e+n.length;!r&&t[s].length+l>=c&&(r=t[s],i=c-l),!o&&t[s].length+l>e&&(o=t[s],a=e-l),l+=t[s].length}if(o&&r)return{startNode:o,startIndex:a,endNode:r,endIndex:i}}}(f,s,o),v=document.createRange();return v.setStart(h.startNode,h.startIndex),v.setEnd(h.endNode,h.endIndex),l&&l.removeAllRanges(),l&&l.addRange(v),v.startContainer.parentNode&&v.startContainer.parentNode.scrollIntoView(),[!0,f]}}}(),Yl=i.a.Env.browser.isEdge,(Jl=function e(t){var n=t,o=null,r=null,a=null,i=null,l=null,s={initialised:!1,find:function(e,t,n){var r=o.getFindInput().val(),i=a.findText(r,!0,e);i&&t?t():!i&&n&&n()},replace:function(e,t){var n=o.getFindInput(),r=o.getReplaceInput(),i="";r&&(i=r.val());var l=a.replaceText(n.val(),i,!0);l&&e?e():!l&&t&&t()},replaceAll:function(e,t){var n=o.getFindInput(),r=o.getReplaceInput(),i="";r&&(i=r.val());var l=a.replaceAll(n.val(),i);l&&e?e():!l&&t&&t()},focus:function(){o.focusFindTextBox()},isVisible:function(){return null!=o},init:function(){o=e.UI(n,i,l),(r=new e.MarkManager).addListener(o),a=null,a=new e.impl(o,r),o.getFindInput().focus()},onVisible:function(e){if(null!=e&&e.length>0){var t=o.getFindInput(),n=t.val();t.val(n+e)}o.onVisible()},onHide:function(){i=o.getFindInput().val(),l=o.getReplaceInput().val(),a.destroy(),a=null,o.destroy(),o=null,r.destroy(),r=null},_clearSavedValues:function(){i=null,l=null}};return s}).utils={moveCursorToEnd(e){if(i.a.Env.browser.isFirefox()){var t=s()(e).val().length;e.setSelectionRange(t,t)}},createTextRange:(e,t)=>e.selection?e.selection.createRange():t.getBody().createTextRange()},Jl.impl=function(e,t){var n=i.a.html.Writer(),o=t,r=-1,a=function e(t,n,a){if(!t)return!1;var l=i.a.activeEditor,s=l.selection,c=l.getWin();function d(){return l.undoManager.ignore((()=>{o.markCurrentlySelectedRange()})),!0}function u(){return l.undoManager.ignore((()=>{o.removeCurrentMark(!0),l.selection.isCollapsed()||l.selection.collapse()})),!1}if(o.isCursorAtCurrentMark()&&l.undoManager.ignore((()=>{s=o.selectCurrentMark()})),s.isCollapsed()||s.collapse(a),i.a.Env.browser.isFirefox())return c.find(t,!1,a)?d():n?(s.select(l.getBody(),!1),s.collapse(!a),e(t,!1,a)):u();if(!Yl())return c.find(t,!1,a,!0,!1,!1,!1)?d():u();var g=Gl.search(s,t,r,l.getBody(),a);return r=g[1],g[0]?d():void 0},l=function(e){var t=i.a.activeEditor;n.text(e,!1),t.selection.setContent(n.getContent(),{format:"raw"}),n.reset(),t.selection.collapse(!0)},s={};return s.findText=a,s.replaceText=function(e,t,n){var r=i.a.activeEditor;return o.hasCurrentMark()?(r.undoManager.transact((()=>{var e=o.replaceCurrentMark(t);e&&r.selection.select(e)})),a(e,n)):a(e,n)},s.replaceAll=function(e,t){var n=i.a.activeEditor,r=0;return n.undoManager.transact((()=>{var a=n.selection,i=n.getWin();if(o.removeCurrentMark(!1),n.execCommand("selectAll"),n.selection.collapse(!0),Yl())for(var s=-1;;){var c=Gl.search(a,e,s,n.getBody(),!1);if(!c[0])break;s=c[1],l(t),r++}else for(;i.find(e,!1,!1,!1,!1,!1,!1);)l(t),r++;if(0===r)tl.notify("info",n.translate("searchreplace_dlg.notfound"));else if(1===r)tl.notify("success",n.translate("searchreplace_dlg.allreplacedsingular"));else if(r>1){var d=n.translate("searchreplace_dlg.allreplacedplural");tl.notify("success",d.replace("{0}",`${r}`))}})),r},s.destroy=function(){o=null,n=null},s},Jl.UI=function(e,t,n){var o=null,r=Jl.utils.moveCursorToEnd;i.a.activeEditor&&i.a.activeEditor.plugins&&i.a.activeEditor.plugins.customtoolbar&&(o=i.a.activeEditor.plugins.customtoolbar.getToolbarRow(e));var a,l,c,d,u=function(){return s()(".toolbar-find-input",o)},g=function(){return s()(".toolbar-replace-input",o)},m=function(e){if("input"===e.type||"propertychange"===e.type){var t=u(),n="string"==typeof t.val()&&t.val().length>0;f(n),h(n)}},p=function(){var e=u();y(e&&e.val())},f=function(e){var t=i.a.activeEditor;e?(t.plugins.customtoolbar.enableToolbarButton("search-toolbar-find-next-button"),t.plugins.customtoolbar.enableToolbarButton("search-toolbar-find-previous-button")):(t.plugins.customtoolbar.disableToolbarButton("search-toolbar-find-next-button"),t.plugins.customtoolbar.disableToolbarButton("search-toolbar-find-previous-button"))},h=function(e){var t=u();v().toggleClass("default-action",e&&t.val().length>0)},v=function(){return s()(".search-toolbar-find-next-button",o).closest(".aui-button")},b=function(e){var t=i.a.activeEditor.plugins.customtoolbar,n="search-toolbar-replace-button";e?t.enableToolbarButton(n):t.disableToolbarButton(n)},y=function(e){var t=i.a.activeEditor.plugins.customtoolbar,n="search-toolbar-replaceall-button";e?t.enableToolbarButton(n):t.disableToolbarButton(n)},w={};return w.getFindInput=u,w.getReplaceInput=g,w.focusFindTextBox=function(){top.focus(),u().focus()},w.onVisible=function(){var e=u();e.focus(),e.val().length>0&&(r(e[0]),f(!0),y(!0))},w.destroy=function(){},w.marked=function(){b(!0)},w.markRemoved=function(){b(!1)},a=t,l=n,c=u(),d=!1,a&&a.length&&(c.val(a),d=!0),l&&l.length&&g().val(l),function(){function e(e,t){e&&e.bind("input",t)}var t=u();e(t,m),e(t,p),s()(o).focusin((()=>{h(!0)})).focusout((()=>{h(!1)})),t.focus((()=>{h(!0)}))}(),f(d),y(d),b(!1),w},Jl.MarkManager=function(){var e=null,t=i.a.html.Writer(),n=null,o=[],r=function(){c()},a=function(){if(!e)return null;var t=i.a.activeEditor;return t.selection.select(e[0]),t.selection},l=function(t){f(),(d(e,t)||n&&i.a.activeEditor.selection.getRng().toString()==n)&&(e=null,n=null,s.a.each(o,((e,t)=>{t.markRemoved()})))},c=function(){f(),s()("mark",i.a.activeEditor.getDoc()).each(((e,t)=>{d(s()(t),!1)})),e=null,n=null,s.a.each(o,((e,t)=>{t.markRemoved()}))},d=function(e,t){var n=i.a.activeEditor,o=n.selection.getRng();if(!e)return!1;var r=function(e,t){if(e.intersectsNode)return e.intersectsNode(t);var o=n.getDoc().createRange();return o.selectNodeContents(t),!(e.compareBoundaryPoints(Range.START_TO_END,o)<=0||e.compareBoundaryPoints(Range.END_TO_START,o)>=0)}(o,e[0]),a=null,l=null;if(e.contents().each(((t,n)=>{e.before(n),a||(a=n),l=n})),r||t){var s=n.selection.getRng();s.setStartBefore(a),s.setEndAfter(l),t||s.collapse(!1),n.selection.setRng(s)}return e.remove(),!0},u=function(){return!!e||(n?i.a.activeEditor.selection.getRng().toString()==n:void 0)},g=function(){c()},m=function(){f(),s.a.each(o,((e,t)=>{t.markRemoved()}))},p=function(e){var t=i.a.activeEditor;t.on("Change",r),t.on("BeforeSetContent",r),e&&(t.on("Click",m),t.on("DblClick",m))},f=function(){var e=i.a.activeEditor;e.off("Change",r),e.off("BeforeSetContent",r),e.off("Click",m),e.off("DblClick",m)},h={markCurrentlySelectedRange:function(){var t=i.a.activeEditor;if(e){var r=t.selection.getBookmark();l(!1),t.selection.moveToBookmark(r)}n=null;var c=t.selection.getRng();if(e=s()('<mark data-searching class="find-current"></mark>',t.getDoc()),c)try{c.surroundContents(e[0]),p(!1)}catch(t){1==t.code&&(n=c.toString(),e=null,p(!0))}if(s.a.each(o,((e,t)=>{t.marked()})),!n){var d=a();d&&d.collapse()}}};return h.removeCurrentMark=l,h.removeAllMarks=c,h.selectCurrentMark=a,h.isCursorAtCurrentMark=function(){if(!e)return!1;var t=i.a.activeEditor.selection;t.isCollapsed()||t.collapse();var n=t.getRng();if(n){if(3===n.startContainer.nodeType)return n.startContainer.parentNode&&n.startContainer.parentNode.normalize(),n.startContainer.nextSibling===e[0]||n.startContainer.previousSibling===e[0];if(1===n.startContainer.nodeType){var o=n.startContainer.childNodes,r=n.startOffset;return r>0&&o[r-1]===e[0]||r+1<o.length&&o[r+1]===e[0]}}},h.hasCurrentMark=u,h.replaceCurrentMark=function(n){if(function(n){if(e||!u())return!1;var o=i.a.activeEditor;return o.undoManager.transact((()=>{t.text(n,!1),o.selection.setContent(t.getContent(),{format:"raw"}),t.reset()})),o.undoManager.ignore((()=>{l(!1)})),!0}(n))return null;if(!e)return null;var o=i.a.activeEditor,r=[];o.undoManager.ignore((()=>{e.contents().each(((e,t)=>{r.push(t)})),l(!1)}));var a=void 0;return o.undoManager.transact((()=>{a=s()(r[0]).before(o.getDoc().createTextNode(n))[0].previousSibling;for(var e=r.length-1;e>=0;e--)s()(r[e]).remove()})),a},h.addListener=function(e){o.push(e)},h.destroy=function(){l(!0),i.a.activeEditor.off("BeforeGetContent",g)},i.a.activeEditor.on("BeforeGetContent",g),h},Jl(ql));function Xl(e){var t=c.Confluence.Editor,n=null,o=!1,r=function(e){e.preventDefault(),e.stopPropagation()},a=function(e){r(e);var t=e.which;t||(t=e.charCode?e.charCode:e.keyCode),t<48||n.push(t)},l=function(e){var t=s()("#rte-button-searchreplace a");t.length&&(e?t.unbind("click",!1):t.bind("click",!1))},d=function(){if(!o){o=!0;var d=s()("#rte-button-searchreplace"),u=!d.hasClass("active"),g=s()("body"),m=!g.hasClass("no-tools")||g.hasClass("no-tools-toolbars-visible");u?(d.addClass("active"),s()(c.document).trigger("createContextToolbarRow.Toolbar",{id:ql,buttons:t.searchToolbar.Buttons,topToolbar:!0,editorAdjacent:!0,animate:m,onVisible(){var t=function(){e.off("KeyDown",a),e.off("KeyPress",r),e.off("KeyUp",r);for(var t,o="",i=0;i<n.length;i++)o+=(t=n[i])>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t);return o.toLowerCase()}();Zl.onVisible(t),l(!0),o=!1,Zl.initialised=!0}}).trigger("enableContextToolbarRow.Toolbar"),n=[],e.on("KeyDown",a),e.on("KeyPress",r),e.on("KeyUp",r),Zl.init(),l(!1)):(d.removeClass("active"),Zl.onHide(),s()(c.document).trigger("removeContextToolbarRow.Toolbar",{id:ql,animate:m,onHide(){s()(c.document).trigger("contextToolbarRowRemoved.Toolbar"),l(!0),o=!1,Zl.initialised=!1}}),l(!1),i.a.Env.browser.isFirefox()||frames.wysiwygTextarea_ifr.focus(),e.focus())}};return{init(e){e.addCommand("mceSearchReplaceToolbar",(()=>(e.undoManager.ignore((()=>{d()})),!1))),e.addCommand("mceConfSearch",((t,n)=>!!Zl&&((n=n||{}).backwards&&!e.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-previous-button")?(Zl.focus(),!1):n.backwards||e.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-find-next-button")?(Zl.find(n.backwards,n.onFound,n.onNotFound),!1):(Zl.focus(),!1)))),e.addCommand("mceConfReplaceAll",((t,n)=>!!Zl&&(n=n||{},!!e.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-replaceall-button")&&(Zl.replaceAll(n.onReplaced,n.onNotReplaced),!1)))),e.addCommand("mceConfSearchClose",(()=>!!Zl&&(e.undoManager.ignore((()=>{e.execCommand("mceSearchReplaceToolbar",!1,null)})),!1))),e.ui.registry.addButton("searchreplace",{text:"searchreplace.search_desc",onAction:function(){e.execCommand("mceSearchReplaceToolbar")}}),e.shortcuts.add("meta+f","searchreplace.search_desc",(()=>{Zl&&Zl.isVisible()?Zl.focus():e.undoManager.ignore((()=>{e.execCommand("mceSearchReplaceToolbar",!1,!1)}))}))},getInfo:()=>({longname:"Search/Replace",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:`${i.a.majorVersion}.${i.a.minorVersion}`})}}Object(Lt.a)("confluence-editor/search-manager",(()=>Zl));var es=function(){He(c.document,"initContextToolbars.Toolbar",((e,t)=>{var n;c.Confluence.Editor.searchToolbar=(n=c.Confluence.Editor,{initContextToolbars(e,t){var o=function(e){if(c.tinymce.Env.browser.isFirefox()){var t=s()(e).val().length;e.setSelectionRange(t,t)}},r=function(e){var t;null===(t=top)||void 0===t||t.focus(),c.tinymce.activeEditor.plugins.customtoolbar.focusToolbarButton(e)},a=function(){var e;null===(e=top)||void 0===e||e.focus();var t=s()("#search-toolbar-find-text");t.focus(),o(t[0])},i=function(){var e;null===(e=top)||void 0===e||e.focus();var t=s()("#search-toolbar-replace-text");t.focus(),o(t[0])},l=function(){if(c.tinymce.Env.browser.isFirefox()){var e=c.tinymce.activeEditor;e.focus(),e.selection.select(e.getBody()),e.selection.collapse(!1),e.focus()}},d=new n.Toolbar.Components.TextBox({id:"search-toolbar-find-text",text:t.translate("searchreplace_dlg.findlabel"),name:"find",keydown:function(e){if((e.ctrlKey||c.tinymce.Env.os.isMacOS()&&e.metaKey)&&70===e.which)e.preventDefault();else if(13===e.which){e.preventDefault();var t={backwards:!1,onFound:a,onNotFound:a};c.tinymce.activeEditor.undoManager.ignore((()=>{c.tinymce.activeEditor.execCommand("mceConfSearch",!1,t)}))}else 27===e.which&&(e.preventDefault(),c.tinymce.activeEditor.undoManager.ignore((()=>{c.tinymce.activeEditor.execCommand("mceSearchReplaceToolbar",!1,!1)})))},cssClass:"toolbar-find-input"}),u=new n.Toolbar.Components.TextBox({id:"search-toolbar-replace-text",text:t.translate("searchreplace_dlg.replacelabel"),name:"replace",keydown:function(e){if((e.ctrlKey||c.tinymce.Env.os.isMacOS()&&e.metaKey)&&70===e.which)e.preventDefault();else if(13===e.which){e.preventDefault();var t=c.tinymce.activeEditor.undoManager.ignore((()=>{c.tinymce.activeEditor.execCommand("mceConfSearch",!1,{backwards:!1,onFound:i,onNotFound:a})}));f(i,a,t)}else 27===e.which&&(e.preventDefault(),c.tinymce.activeEditor.undoManager.ignore((()=>{c.tinymce.activeEditor.execCommand("mceSearchReplaceToolbar",!1,!1)})))},cssClass:"toolbar-replace-input"}),g=new n.Toolbar.Components.TextButton({text:t.translate("searchreplace_dlg.findprevious"),click(){var e={backwards:!0,onFound(){var e;null===(e=top)||void 0===e||e.focus(),r("search-toolbar-find-previous-button")},onNotFound:a};t.undoManager.ignore((()=>{t.execCommand("mceConfSearch",!1,e)}))},textClass:"search-toolbar-find-previous-button"}),m=new n.Toolbar.Components.TextButton({text:t.translate("searchreplace_dlg.findnext"),click(){var e={backwards:!1,onFound(){var e;null===(e=top)||void 0===e||e.focus(),r("search-toolbar-find-next-button")},onNotFound:a};t.undoManager.ignore((()=>{t.execCommand("mceConfSearch",!1,e)}))},textClass:"search-toolbar-find-next-button"}),p=new n.Toolbar.Components.TextButton({text:t.translate("searchreplace_dlg.replace"),click(){f((()=>{var e;null===(e=top)||void 0===e||e.focus(),r("search-toolbar-replace-button")}),a)},textClass:"search-toolbar-replace-button"}),f=(e,t,n)=>{Zl&&(c.tinymce.activeEditor.plugins.customtoolbar.isToolbarButtonEnabled("search-toolbar-replace-button")?Zl.replace(e,t):n&&n())},h=new n.Toolbar.Components.TextButton({text:t.translate("searchreplace_dlg.replaceall"),click(){var e={onReplaced:l,onNotReplaced:a};t.undoManager.transact((()=>{t.execCommand("mceConfReplaceAll",!1,e)}))},textClass:"search-toolbar-replaceall-button"}),v=new n.Toolbar.Components.Button({text:t.translate("searchreplace_dlg.close"),iconClass:"icon aui-icon aui-icon-small aui-iconfont-close-dialog",click(){t.undoManager.ignore((()=>{t.execCommand("mceConfSearchClose",!1,null)}))}});return{Buttons:[new n.Toolbar.Components.Group([v],{groupClass:"close"}),new n.Toolbar.Components.Group([d,u],{groupClass:"no-separator"}),new n.Toolbar.Components.Group([g,m]),new n.Toolbar.Components.Group([p,h])]}}}).initContextToolbars(e,t)}))};function ts(){return{init:e=>{var t=e=>{s()(".tablesorter",e.node).each(((e,t)=>{var n,o,r=s()(t).find("thead");1===r.length&&"THEAD"===(r=r[0]).nodeName&&1===r.childNodes.length&&(o=r.removeChild(r.childNodes[0]),n=s()(t).find("tbody")[0],t.removeChild(r),n.insertBefore(o,n.childNodes[0]))}))};e.on("PastePostProcess",t),e.on("remove",(()=>{e.off("PastePostProcess",t)}))},getInfo:()=>({longname:"ConfluenceSortableTablesPlugin",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"})}}var ns,os,rs,as,is=n(32),ls=n.n(is),ss=(n(86),"macro-placeholder-property-panel-edit-button"),cs="status-macro-title first last editable",ds=13,us=27,gs="status",ms=["Grey","Red","Yellow","Green","Blue"],ps=ms[0];function fs(){hs();var e=c.Confluence.MacroParameterSerializer.deserialize(s()(os).attr("data-macro-parameters")),t=!1,n=!1;return e&&rs&&(t=e.title!==rs.title,n=e.colour!==rs.colour),t||n}function hs(){if(as){var e=bs(rs)==as.val(),t=""===as.val();e||t?delete rs.title:rs.title=as.val()}}function vs(){if(ns&&ns.state&&"pending"===ns.state())p.a.debug("Macro update already in progress.");else{hs();var e={contentId:c.Confluence.Editor.getContentId(),macro:{name:gs,params:rs,defaultParameterValue:"",body:""}};(ns=c.tinymce.confluence.MacroUtils.insertMacro(e,os)).done((e=>{var t;t=os=e,c.tinymce.activeEditor.selection.select(t),Ct(),c.tinymce.activeEditor.selection.collapse()})).fail((e=>{p.a.error(`Failed to load status macro - ${e}`)}))}}function bs(e){return e.colour||e.color||ps}function ys(){var e=s()("<input/>");return e.attr("class",cs),e.keyup((e=>e.keyCode!==ds||(c.Confluence.PropertyPanel.destroy(),!1))),e.keydown((e=>e.keyCode!==us||(as=null,!0))),e}function ws(e){(as=ys()).val(e.find("span.panel-button-text").text()),e.replaceWith(as),as.select().focus()}function Cs(e){var t=function(e){for(var t=0;t<e.length;t++)if(e[t].className.indexOf(ss)>-1)return e[t];return null}(e),n=function(e){kn.editMacro(e)};t&&(t.click=function(){c.Confluence.PropertyPanel.destroy(),fs()?ns.always(n):n(os)})}function As(e){e.on("init",(()=>{ls.a.use()})),e.on("Remove",(()=>{ls.a.unuse()}))}var xs="stickyTableHeaders",Ms=0,ks={fixedOffset:0,leftOffset:0,marginTop:0,objDocument:d.a.document,objHead:"head",objWindow:d.a,scrollableArea:d.a,cacheHeaderHeight:!1};function Es(e,t){var n=this;n.$el=s()(e),n.el=e,n.id=Ms++,n.$el.bind("destroyed",s.a.proxy(n.teardown,n)),n.$clonedHeader=null,n.$originalHeader=null,n.cachedHeaderHeight=null,n.isSticky=!1,n.hasBeenSticky=!1,n.leftOffset=null,n.topOffset=null,n.init=function(){n.setOptions(t),n.$el.each((function(){var e=s()(this);e.css("padding",0),n.$originalHeader=s()("thead:first",this),n.$clonedHeader=n.$originalHeader.clone(),e.trigger(`clonedHeader.${xs}`,[n.$clonedHeader]),n.$clonedHeader.addClass("tableFloatingHeader"),n.$clonedHeader.css("display","none"),n.$originalHeader.addClass("tableFloatingHeaderOriginal"),n.$originalHeader.after(n.$clonedHeader),n.$printStyle=s()('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),n.$head.append(n.$printStyle)})),n.updateWidth(),n.toggleHeaders(),n.bind()},n.destroy=function(){n.$el.unbind("destroyed",n.teardown),n.teardown()},n.teardown=function(){n.isSticky&&n.$originalHeader.css("position","static"),s.a.removeData(n.el,`plugin_${xs}`),n.unbind(),n.$clonedHeader.remove(),n.$originalHeader.removeClass("tableFloatingHeaderOriginal"),n.$originalHeader.css("visibility","visible"),n.$printStyle.remove(),n.el=null,n.$el=null},n.bind=function(){n.$scrollableArea.on(`scroll.${xs}`,n.toggleHeaders),n.isWindowScrolling||(n.$window.on(`scroll.${xs}${n.id}`,n.setPositionValues),n.$window.on(`resize.${xs}${n.id}`,n.toggleHeaders)),n.$scrollableArea.on(`resize.${xs}`,n.toggleHeaders),n.$scrollableArea.on(`resize.${xs}`,n.updateWidth)},n.unbind=function(){n.$scrollableArea.off(`.${xs}`,n.toggleHeaders),n.isWindowScrolling||(n.$window.off(`.${xs}${n.id}`,n.setPositionValues),n.$window.off(`.${xs}${n.id}`,n.toggleHeaders)),n.$scrollableArea.off(`.${xs}`,n.updateWidth)},n.debounce=function(e,t){var n=null;return function(){var o=this,r=arguments;clearTimeout(n),n=setTimeout((()=>{e.apply(o,r)}),t)}},n.toggleHeaders=n.debounce((()=>{n.$el&&n.$el.each((function(){var e,t=s()(this),o=n.isWindowScrolling?isNaN(n.options.fixedOffset)?n.options.fixedOffset.outerHeight():n.options.fixedOffset:n.$scrollableArea.offset().top+(isNaN(n.options.fixedOffset)?0:n.options.fixedOffset),r=t.offset(),a=n.$scrollableArea.scrollTop()+o,i=n.$scrollableArea.scrollLeft(),l=n.options.cacheHeaderHeight?n.cachedHeaderHeight:n.$clonedHeader.height(),c=n.isWindowScrolling?a>r.top:o>r.top,d=(n.isWindowScrolling?a:0)<r.top+t.height()-l-(n.isWindowScrolling?0:o);c&&d?(e=r.left-i+n.options.leftOffset,n.$originalHeader.css({position:"fixed","margin-top":n.options.marginTop,left:e,"z-index":3}),n.leftOffset=e,n.topOffset=o,n.$clonedHeader.css("display",""),n.isSticky||(n.isSticky=!0,n.updateWidth(),t.trigger(`enabledStickiness.${xs}`)),n.setPositionValues()):n.isSticky&&(n.$originalHeader.css("position","static"),n.$clonedHeader.css("display","none"),n.isSticky=!1,n.resetWidth(s()("td,th",n.$clonedHeader),s()("td,th",n.$originalHeader)),t.trigger(`disabledStickiness.${xs}`))}))}),0),n.setPositionValues=n.debounce((()=>{var e=n.$window.scrollTop(),t=n.$window.scrollLeft();!n.isSticky||e<0||e+n.$window.height()>n.$document.height()||t<0||t+n.$window.width()>n.$document.width()||n.$originalHeader.css({top:n.topOffset-(n.isWindowScrolling?0:e),left:n.leftOffset-(n.isWindowScrolling?0:t)})}),0),n.updateWidth=n.debounce((()=>{if(n.isSticky){n.$originalHeaderCells||(n.$originalHeaderCells=s()("th,td",n.$originalHeader)),n.$clonedHeaderCells||(n.$clonedHeaderCells=s()("th,td",n.$clonedHeader));var e=n.getWidth(n.$clonedHeaderCells);n.setWidth(e,n.$clonedHeaderCells,n.$originalHeaderCells),n.$originalHeader.css("width",n.$clonedHeader.width()),n.options.cacheHeaderHeight&&(n.cachedHeaderHeight=n.$clonedHeader.height())}}),0),n.getWidth=function(e){var t=[];return e.each((function(e){var o,r=s()(this);if("border-box"===r.css("box-sizing")){var a=r[0].getBoundingClientRect();o=a.width?a.width:a.right-a.left}else{if("collapse"===s()("th",n.$originalHeader).css("border-collapse"))if(d.a.getComputedStyle)o=parseFloat(d.a.getComputedStyle(this,null).width);else{var i=parseFloat(r.css("padding-left")),l=parseFloat(r.css("padding-right")),c=parseFloat(r.css("border-width"));o=r.outerWidth()-i-l-c}else o=r.width()}t[e]=o})),t},n.setWidth=function(e,t,n){t.each((t=>{var o=e[t];n.eq(t).css({"min-width":o,"max-width":o})}))},n.resetWidth=function(e,t){e.each((function(e){var n=s()(this);t.eq(e).css({"min-width":n.css("min-width"),"max-width":n.css("max-width")})}))},n.setOptions=function(e){n.options=s.a.extend({},ks,e),n.$window=s()(n.options.objWindow),n.$head=s()(n.options.objHead),n.$document=s()(n.options.objDocument),n.$scrollableArea=s()(n.options.scrollableArea),n.isWindowScrolling=n.$scrollableArea[0]===n.$window[0]},n.updateOptions=function(e){n.setOptions(e),n.unbind(),n.bind(),n.updateWidth(),n.toggleHeaders()},n.init()}s.a.fn[xs]=function(e){return this.each((function(){var t=s.a.data(this,`plugin_${xs}`);t?"string"==typeof e?t[e].apply(t):t.updateOptions(e):"destroy"!==e&&s.a.data(this,`plugin_${xs}`,new Es(this,e))}))};var Ts=function(e){return!(e.parents("table").length>0)},Ds=function(e){return!(e.closest(".columnLayout").length>0)},Ss=function(){return!s()("body").hasClass("theme-documentation")},Is=function(e){var t=s()(e);return Ss()&&function(e){return!e.hasClass("stickyTableHeaders")}(t)&&Ds(t)&&Ts(t)&&function(e){return e.find("> thead:first").is(":visible")}(t)&&function(e){return 1===e.find("thead").children().length}(t)&&function(e){return 1===e.find(".confluenceTh").parent().length}(t)&&function(e){return e.find(".confluenceTh").siblings().hasClass("confluenceTh")}(t)},Os=function(e,t){var n=t||s()(window);e.closest(".table-wrap").scroll((()=>{n.trigger("scroll.stickyTableHeaders")}))},js=function(e){s()(e).each((function(){var e=s()(this),t=e.find(".confluenceTh[rowspan]").length>0,n=e.find("> :first-child > :first-child .confluenceTh"),o=n.length&&n.closest("thead").length>0,r=n.length&&0===n.parent().index();if(Ts(e)&&Ds(e)&&!o&&r&&!t){var a=s()("<thead />").append(n.parent());e.prepend(a)}}))},Ns=Ss,Ls=function(e,t){var n=e.filter((function(){return Is(this)}));n.stickyTableHeaders(t).addClass("stickyTableHeaders"),Object(C.a)("sticky-table-headers.change.options",((e,t)=>{n.stickyTableHeaders(t)})),Os(n)},Bs=function(){var e=s()(".confluenceTable"),t=s()(window);if(Ns()){if(js(e),window.MutationObserver){var n=document.querySelector("#page");if(!n)return;var o=/sticky|tableFloating|confluenceTh/;new MutationObserver(s.a.debounce((e=>{for(var n,r=!1,a=0,i=e.length;a<i;a++)if(n=e[a].target.className,!o.test(n)){r=!0;break}r&&t.trigger("resize.stickyTableHeaders")}),0)).observe(n,{subtree:!0,attributes:!0,childList:!0})}Ls(e,{cacheHeaderHeight:!0})}};function Rs(e){function t(e){var t,r,a,i={id:!0,class:!0,style:!0,rowspan:!0,colspan:!0,"data-mce-style":!0,"data-mce-bogus":!0,"data-macro-name":!0,"data-macro-parameters":!0,"data-macro-body-type":!0,"data-highlight-colour":!0,"data-highlight-class":!0,"data-mce-resize":!0,"data-snooker-col-series":!0,"data-snooker-locked-cols":!0,contenteditable:!0},l=["highlight","nohighlight","relative-table","fixed-table","fixed-width","numberingColumn"],s=0,c=[],d=$(e);if(!e||o(e))return e;if(function(e){var t;e&&e.getAttribute&&(t=e.getAttribute("class"));return t&&t.indexOf("table-wrap")>=0}(e)){var u=$("table",e);if(!u.length)return null;$(u).unwrap(),e=u[0]}if(function(e){return!!e.tagName&&("TABLE"===e.tagName||("TR"===e.tagName||("TH"===e.tagName||("TD"===e.tagName||("TBODY"===e.tagName||("THEAD"===e.tagName||("TFOOT"===e.tagName||("COL"===e.tagName||("COLGROUP"===e.tagName||"CAPTION"===e.tagName)))))))))}(e)&&e.attributes){for(;s<=e.attributes.length;)(t=e.attributes[s])&&!0===t.specified&&!i[t.name]?e.removeAttribute(t.name):s++;n(e)&&c.push(n(e));for(var g=0,m=l.length;g<m;g++)d.hasClass(l[g])&&c.push(l[g]);(r=d.attr("data-highlight-class"))&&c.push(r),(a=d.attr("data-highlight-colour"))&&c.push("highlight-"+a),d.attr("class",c.join(" "))}return e}function n(e){return e.tagName?"TABLE"===e.tagName?"confluenceTable":"TH"===e.tagName?"confluenceTh":"TD"===e.tagName?"confluenceTd":"":""}function o(e){var t;return e&&e.getAttribute&&(t=e.getAttribute("class")),!!e.tagName&&("TABLE"===e.tagName&&(!!t&&-1!==t.indexOf("wysiwyg-macro")))}function r(e,n,r){r.node=function(e,t){for(var n,r,a,i=e;i&&("function"==typeof t&&(i=t(i)),i);)!i.firstChild||(r=i,(a=n)&&a.parentNode===r)||o(i)?i.nextSibling?(n=i,i=i.nextSibling):(n=i,i=i.parentNode):(n=i,i=i.firstChild);return e}(r.node,t)}e.on("Init",(function(){He(document,"postPaste",r)})),e.on("Remove",(function(){Fe(document,"postPaste",r)}))}var Ps;function $s(e,t){var n=s.a.parseHTML(e),o=[Node.ELEMENT_NODE,Node.DOCUMENT_NODE,Node.DOCUMENT_FRAGMENT_NODE],r=!1;return n.forEach((function(e){(Ps.dom.is(e,t)||o.includes(e.nodeType)&&e.querySelector(t))&&(r=!0)})),r}function Hs(){Object(C.b)("analytics",{name:"confluence.table.image.insert",data:{pageId:m.a.get("page-id"),tableMode:zs()}})}function Fs(){return!!s()(Ps.selection.getNode()).closest("table.confluenceTable").length}function zs(){var e=s()(Ps.selection.getNode()).closest("table.confluenceTable");return e.hasClass("fixed-table")||e.hasClass("fixed-width")?"fixed":e.hasClass("relative-table")?"relative":"fluid"}function Us(){var e=s()(Ps.getBody()).find("table.confluenceTable");Object(C.b)("analytics",{name:"confluence.table.quality.in.page",data:{pageId:m.a.get("page-id"),total:e.length,fixed:e.filter(".fixed-table,.fixed-width").length,fluid:e.filter(":not(.fixed-table,.relative-table,.fixed-width)").length,relative:e.filter(".relative-table").length,nested:e.find("table.confluenceTable").length}})}function _s(){return{init(e){function t(e,t){Fs()&&function(e){var t,n;e&&e.name&&e.name.indexOf("confluence.editor.image.resize")>=0&&Object(C.b)("analytics",{name:"confluence.table.img.resize",data:{pageId:m.a.get("page-id"),tableMode:zs(),isImgBiggerCell:(t=s()(Ps.selection.getNode()),n=t.closest("th, td"),t.width()>n.width())}})}(t)}Ps=e,e.on("ExecCommand",(e=>{switch(e.command){case"mceAutoWidth":case"mceRelativeWidth":case"mceFixedWidth":Object(C.b)("analytics",{name:`confluence.table.mode.to.${zs()}`,data:{pageId:m.a.get("page-id")}});break;case"mceTableCopyRow":Object(C.b)("analytics",{name:"confluence.table.row.copy",data:{pageId:m.a.get("page-id")}});break;case"mceTablePasteRowBefore":case"mceTablePasteRowAfter":Object(C.b)("analytics",{name:"confluence.table.row.paste",data:{pageId:m.a.get("page-id")}});break;case"mceTableCopyCol":Object(C.b)("analytics",{name:"confluence.table.col.copy",data:{pageId:m.a.get("page-id")}});break;case"mceTablePasteColBefore":case"mceTablePasteColAfter":Object(C.b)("analytics",{name:"confluence.table.col.paste",data:{pageId:m.a.get("page-id")}});break;case"mceInsertContent":$s(t=e.value,"img")&&Fs()&&Hs(),$s(t,"table.confluenceTable")&&Object(C.b)("analytics",{name:"confluence.table.paste",data:{pageId:m.a.get("page-id")}});break;case"confTableSelectionToggleHighlight":Object(C.b)("analytics",{name:"confluence.editor.table.selection.toggle.highlight",data:{color:s()("#table-highlight-group").attr("data-highlight-colour")}})}var t})),e.on("Init",(()=>{e.on("SetContent",(e=>{Fs()&&e&&function(e){$s(e.content,".confluence-embedded-image")&&Hs()}(e)}))})),Object(C.a)("analyticsEvent",t),Object(C.a)("rte.safe-save.success",Us),e.on("Remove",(()=>{Object(C.c)("analyticsEvent",t),Object(C.c)("rte.safe-save.success",Us)}))},getInfo:()=>({longname:"Table Analytics Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function Qs(){var e=["img:not(.editor-inline-macro, .emoticon)"].concat(["time.non-editable",".editor-inline-macro","a.confluence-link[data-linked-resource-type='userinfo']"]).concat([".wysiwyg-macro"]).join(","),t="<div class='content-wrapper'>";return{init(n){function o(){var o="wrapped";s()(n.dom.select(`table.confluenceTable:not(.${o})`)).each(((n,r)=>{s()(r).addClass(o).find("> tbody > tr > th, > tbody > tr > td, > thead > tr > th").each(((n,o)=>{var r=s()(o);!r.find("> .content-wrapper").length&&r.find(e).length&&r.wrapInner(t)}))}))}Object(C.a)("rte-ready",o),n.on("Remove",(()=>{Object(C.c)("rte-ready",o)})),n.on("Change",(()=>{var o=n.selection;function r(){return o.getBookmark()}function a(e){o.moveToBookmark(e),Ct()}var i=o.getNode(),l=s()(i);if(i&&l.closest("table.confluenceTable").not("table.confluenceTable table.confluenceTable").length){!function(e){var t=o.getRng();if(e.is("tr")&&t&&s()(t.startContainer).is("tr")&&t.collapsed){var n=e.find(">td, >th").first(),r=n.find(":first-child:not(.content-wrapper)")[0]||n[0].firstChild;t.setStart(r,0),t.setEnd(r,0),o.setRng(t)}}(l);var c,d=l.closest("table.confluenceTable > tbody > tr > th, table.confluenceTable > tbody > tr > td, table.confluenceTable > thead > tr > th");if(d.find(e).length){var u=d.find("> .content-wrapper");u.length?(c=r(),function(e){for(var t=0;t<e.length;t++)e.eq(t).find("> p, > table, > ul, > ol").length||e.eq(t).wrapInner("<p/>"),t>0&&(e.eq(0).append(e.eq(t).children()),e.eq(t).remove())}(u),a(c)):d.find("> p").length?(c=r(),d.wrapInner(t),a(c)):(c=r(),d.wrapInner("<p/>").wrapInner(t),a(c))}}s()(n.getWin().document).find(".content-wrapper:empty").remove()}))},getInfo:()=>({longname:"Table Content Wrapper Plugin",author:"Atlassian",authorurl:"http://www.atlassian.com",version:"1.0"})}}var Ws=/^\u200b?(\[)$/;function Vs(e){return e.dom.getParent(e.selection.getStart(),"UL,OL")}function Ks(e){return!(!e||"ul"!==e.nodeName.toLowerCase()||!e.classList.contains("inline-task-list"))}function Gs(e){return e&&"ul"===e.nodeName.toLowerCase()&&!Ks(e)}function Ys(e){e&&e.classList.contains("inline-task-list")&&(e.classList.remove("inline-task-list"),0===e.classList.length&&e.removeAttribute("class"),e.removeAttribute("data-inline-tasks-content-id"),Array.prototype.slice.call(e.children).forEach((e=>{e.removeAttribute("data-inline-task-id"),e.classList.remove("checked"),e.style.backgroundImage=""})))}function Js(e){var t=Vs(e);t&&Ks(t)||function(e,t){var n=`a11y-notification-${e.dom.uniqueId()}`;e.getBody().insertAdjacentHTML("afterend",`<div class="assistive" aria-live="assertive" role="Alert" id="${n}"></div>`);var o=e.getDoc().getElementById(n);if(o){o.insertAdjacentHTML("afterbegin",`<span>${t}</span>`);var r=setTimeout((()=>{o.remove(),clearTimeout(r)}),3e3)}}(e,c.AJS.format("\u00c9l\u00e9ment de liste des t\u00e2ches cr\u00e9\u00e9"));var n=e.dom.uniqueId();e.execCommand("InsertUnorderedList",!1,{"list-attributes":{"data-task-list-id":n,class:"inline-task-list"},"list-item-attributes":{"data-inline-task-id":""}}),e.dom.select(`[data-task-list-id="${n}"]`).forEach((t=>{var n=t.querySelectorAll("li")[0];n&&e.dom.isEmpty(t)&&(n.innerHTML=`<span class="placeholder-inline-tasks">${Object(cn.a)("tinymce.confluence.placeholder.inline.tasks")}</span>`,e.selection.select(n.firstChild,!0)),t.removeAttribute("data-task-list-id")}))}function qs(){return!(e=m.a.get("use-inline-tasks"),"true"===e||!0===e||"page"===m.a.get("content-type")||"blogpost"===m.a.get("content-type")||"template"===m.a.get("content-type"));var e}function Zs(){return{init(e){e.on("init",(()=>{e.getBody().classList.add("template-editor")}))}}}var Xs=function(e){if(!e)return null;var t=e.endOffset;return 3===e.endContainer.nodeType?e.endContainer:e.endContainer.childNodes[t-1]},ec=function(e,t){if(t&&t.previousSibling&&t.previousSibling.hasChildNodes()){var n=t.previousSibling,o=n.childNodes.length,r=n.childNodes[o-1],a=r.length,i=e.dom.createRng();i.setStart(r,a),i.setEnd(r,a),e.selection.setRng(i)}};function tc(){return{init(e){e.on("KeyDown",(t=>{c.tinymce.VK.modifierPressed(t)||32!==t.keyCode||function(e){var t=e.selection.getNode(),n=s()(t).closest("a"),o=e.selection.getRng();n.length&&o&&Jo.isCursorAtEnd(e,o)&&(o.setStartAfter(n[0]),o.setEndAfter(n[0]),e.selection.setRng(o),e.selection.collapse())}(e),c.tinymce.VK.modifierPressed(t)||8!==t.keyCode&&37!==t.keyCode||function(e){if(e.selection.isCollapsed()&&!function(e){return!!e.dom.getParents(e.selection.getNode(),"#autocomplete-search-text").length}(e)){var t=Xs(e.selection.getRng());t&&t.nodeValue&&65279===t.nodeValue.charCodeAt(0)&&function(e,t){return 1==t.nodeValue.length&&1==e.selection.getNode().childNodes.length}(e,t)&&e.undoManager.ignore((()=>{ec(e,t),t.parentNode&&t.parentNode.removeChild(t)}))}}(e)}))}}}var nc=n(33),oc=n.n(nc);function rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(n),!0).forEach((function(t){ic(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ic(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lc=(e,t)=>{if("number"==typeof e)return e;if("string"==typeof e&&/^\d+/.test(e))try{return parseInt(e)}catch(e){return t}return t};class sc{constructor(e){ic(this,"scope",void 0),ic(this,"listeners",void 0),ic(this,"inDispatch",void 0),this.inDispatch=!1,this.scope=e||this,this.listeners=[]}add(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e}addToTop(e,t){var n=this,o={cb:e,scope:t||n.scope};return n.inDispatch?n.listeners=[o].concat(n.listeners):n.listeners.unshift(o),e}remove(e){var t=this.listeners,n=null;return c.tinymce.each(t,((o,r)=>{if(e==o.cb)return n=o,t.splice(r,1),!1})),n}dispatch(){var e,t,n,o=this,r=arguments,a=o.listeners;for(o.inDispatch=!0,t=0;t<a.length&&!1!==(n=(e=a[t]).cb.apply(e.scope,r.length>0?r:[e.scope]));t++);return o.inDispatch=!1,n}}function cc(e){return"object"==typeof e&&e.name}function dc(e,t){return"string"==typeof t?e.queryCommandState(t):!!cc(t)&&e.queryCommandState(t.name)}function uc(e){this.init=this.init(e)}function gc(e){var t={},n={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",justifyleft:"JustifyLeft",justifycenter:"JustifyCenter",justifyright:"JustifyRight",bullist:"InsertUnorderedList",numlist:"InsertOrderedList",tasklist:"InsertInlineTaskList",outdent:"Outdent",indent:"Indent",cut:"Cut",copy:"Copy",paste:"Paste",undo:"Undo",redo:"Redo",removeformat:"RemoveFormat",sub:"subscript",sup:"superscript",forecolor:"ForeColor",forecolorpicker:"mceForeColor",backcolor:"HiliteColor",backcolorpicker:"mceBackColor",charmap:"mceCharMap",visualaid:"mceToggleVisualAid",anchor:"mceInsertAnchor",newdocument:"mceNewDocument",blockquote:"mceBlockQuote",help:"mceConfShortcutDialog"},o=["bold","italic","underline","bullist","numlist","tasklist","justifyleft","justifycenter","justifyright","strikethrough,sub,sup,monospace"];function r(e){var n=e.undoManager;t.buttons.state.dispatch("undo","disabled",!n.hasUndo()&&!n.typing),t.buttons.state.dispatch("redo","disabled",!n.hasRedo())}function a(t){var o=e.ui.registry.getAll().buttons[t];if(!o)return!1;o.cmd?n[t]=o.cmd:n[t]={func:o.onAction,name:t}}function i(){c.tinymce.each(c.tinymce.explode("formatselect,confimage,conf_macro_browser,code,customtoolbar,monospace,searchreplace,linkbrowserbutton"),(n=>{if(!a(n)&&"formatselect"===n)t.formatselect={},t.formatselect.state=new sc,t.formatselect.click=new sc,t.formatselect.click.add((t=>{e.execCommand("FormatBlock",!1,t)}))})),t.buttons={},t.buttons.state=new sc,t.buttons.click=new sc,t.buttons.click.add((t=>{var o=n[t];"string"==typeof o?e.execCommand(n[t]):cc(o)&&o.func()})),function(){var t={toolbar:"toolbar-primary",title:"",tooltip:"",cmd:"",className:"",locationGroup:null,weight:1/0,onclick:null},n=e.ui.registry.getAll().buttons,o=[];for(var r in n)o.push(ac(ac(ac({},t),n[r]),{},{id:r,weight:lc(n[r].weight,1/0)}));o=o.filter((e=>!!e.locationGroup)),["toolbar-primary"].forEach((e=>{var t=s()(`.${e}`);o.filter((t=>t.toolbar===e)).sort(((e,t)=>e.weight-t.weight)).forEach((e=>{a(e.id);var n,o=t.find(`.${e.locationGroup}`),r=s()(`<li id="${(n=e).id}" class="toolbar-item ${n.className}" data-tooltip="${n.tooltip}" data-weight="${n.weight}">\n                            <a class="toolbar-trigger aui-button aui-button-subtle" role="button" aria-label="${n.tooltip}" href="#" data-control-id="${n.id}">\n                                <span class="icon ${n.icon}"></span>\n                                <span class="trigger-text">${n.title}</span>\n                            </a>\n                        </li>`);o.append(r).removeClass("hidden")}))}))}()}var l=uc.shouldInit();return l&&uc.suppressIncompatiblePlugins(),e.on("Init",(()=>{i(),e.mode.isReadOnly()||(e.on("NodeChange",(a=>{!function(e,a){c.tinymce.each(o,(o=>{var r,a=!1;if(o.indexOf(",")>0){var i=o.split(",");r=i[0],a=i.some((t=>!!dc(e,n[t])))}else a=!!dc(e,n[r=o]);t.buttons.state.dispatch(r,"active",a)})),r(e),t.buttons.state.dispatch("outdent","disabled",!dc(e,"Outdent"));var i=function(e){for(var t=a.parents,n=0;n<t.length;n++)if(e(t[n]))return t[n]}(e.dom.isBlock);i&&t.formatselect.state.dispatch(i.nodeName.toLowerCase())}(e,{parents:a.parents})})),e.on("keyup",(()=>{r(e)})),e.on("MouseUp",(()=>{r(e)})),e.dom.bind(e.dom.getRoot(),"dragend",(()=>{r(e)})),l&&new uc(e)),oc.a.use()})),e.on("Remove",(()=>{oc.a.unuse()})),{controlHandlers:t}}uc.INCOMPATIBLE_PLUGINS=["dfe"],uc.shouldInit=()=>{var e=s()("body");return e.hasClass("edit")||e.hasClass("create")||e.hasClass("copy-page")},uc.suppressIncompatiblePlugins=()=>{for(var e=()=>{},t=0,n=uc.INCOMPATIBLE_PLUGINS.length;t<n;t++)c.tinymce.PluginManager.lookup[uc.INCOMPATIBLE_PLUGINS[t]]=e},uc.prototype.init=e=>{var t=c.tinymce.util.VK,n=s()("#content-title"),o=s()("form.editor"),r=s()(e.getBody()),a=s()(e.getDoc()),i=s()("#editor-precursor"),l=s()(e.getWin()),u=s()("#toolbar"),g=a.scrollTop(),m=parseInt(r.css("padding-top"),10)+parseInt(r.css("margin-top"),10),p=parseInt(i.css("padding-top"),10),f=d.a.requestAnimationFrame||d.a.webkitRequestAnimationFrame;function h(t){e.plugins.customtoolbar.toggleToolbarButtons(t,t,t,(()=>!s()(this).parent().hasClass("close")))}function v(e){return e.getBoundingClientRect().top+document.body.scrollTop}function b(){var e=g-a.scrollTop(),t=v(u[0])-v(o[0]),n=i.outerHeight(),l=u.outerHeight();i.css("top",`${t+l+e+p}px`),r.css("padding-top",`${n+m}px`)}return n.on("keydown",(n=>{var o=n.keyCode||n.which;o!==t.ENTER&&o!==t.DOWN||(n.preventDefault(),n.stopPropagation(),e.focus(!1))})).on("focus click",(()=>{h(!0)})),l.on("focus",(()=>{h(!1)})),function(e){!function t(){e(t),b()}(),r.on("scroll mousewheel",(()=>{setTimeout(b,0)}))}(f),!0};var mc="confluence.spa.editor",pc=(e,t)=>{Object.keys(t).forEach((e=>{t[e]=ei(t[e])})),Object(C.b)("analytics",{name:`${mc}.plugins.${e}`,data:t})};function fc(){return{init(e){e.on("Init",(()=>{var e=m.a.get("version-comment");s()("#rte-savebar-tinymce-plugin-point").append(((e,t)=>`\n<span class="rte-toolbar-comment toolbar-item">\n    <input id="versionComment" name="versionComment" ${t?`value="${t}"`:""}\n           placeholder="${e("editor.change.comment")}"\n           class="text" type="text" size="35">\n    <label for="versionComment" class="assistive">${e("editor.change.comment")}</label>\n</span>\n`)((e=>Object(cn.a)(e)),e))}))},getInfo:()=>({longname:"Confluence Version Comment",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}function hc(){return{init:e=>{e.on("init",(()=>{if(m.a.get("use-watch")){var e={userWatchingOwnContent:m.a.get("user-watching-own-content")};s()("#rte-savebar-tinymce-plugin-point").append(`\n    <ul class="toolbar-group toolbar-group-watch-page" id="toolbar-group-watch-page-after-comment">\n        <li class="toolbar-item">\n            <input id="watchPage" name="watchPageAfterComment" value="true" type="checkbox" ${e.userWatchingOwnContent?'checked="checked"':""}/>\n            <label for="watchPage">${(e=>Object(cn.a)(e))("comment.notification.enable")}</label>\n        </li>\n    </ul>\n`)}}))},getInfo:()=>({longname:"Confluence Watch",author:"Atlassian",authorurl:"http://www.atlassian.com",version:`${c.tinymce.majorVersion}.${c.tinymce.minorVersion}`})}}var vc=[function(){var e;function t(){}function n(t){e||(e=!0,p.a.warn(`Deprecated TinyMCE API call: ${t}`))}function o(e,o,r,a){e=e||this;var i=[];o?(this.add=function(t,l,s){function c(n){var i=[];if("string"==typeof r&&(r=r.split(" ")),r&&"function"!=typeof r)for(var s=0;s<r.length;s++)i.push(n[r[s]]);("function"!=typeof r||(i=r(o,n,e)))&&(r||(i=[n]),i.unshift(a||e),!1===t.apply(l||a||e,i)&&n.stopImmediatePropagation())}n(`<target>.on${o}.add(..)`),e.on(o,c,s);var d={original:t,patched:c};return i.push(d),c},this.addToTop=function(e,t){this.add(e,t,!0)},this.remove=function(t){return i.forEach(((n,r)=>{if(n.original===t)return i.splice(r,1),e.off(o,n.patched)})),e.off(o,t)},this.dispatch=function(){return e.dispatch(o),!0}):this.add=this.addToTop=this.remove=this.dispatch=t}function r(e){function r(t,n){c.tinymce.each(t.split(" "),(t=>{e[`on${t}`]=new o(e,t,n)}))}function a(e,t,n){return[t.level,n]}function i(e){return function(t,n){if(!n.selection&&!e||n.selection==e)return[n]}}if(!e.controlManager){e.controlManager={buttons:{},setDisabled(e,t){n("controlManager.setDisabled(..)"),this.buttons[e]&&this.buttons[e].disabled(t)},setActive(e,t){n("controlManager.setActive(..)"),this.buttons[e]&&this.buttons[e].active(t)},onAdd:new o,onPostRender:new o,add:e=>e,createButton:l,createColorSplitButton:l,createControl:l,createDropMenu:l,createListBox:l,createMenuButton:l,createSeparator:l,createSplitButton:l,createToolbar:l,createToolbarGroup:l,destroy:t,get:t,setControlType:l},r("PreInit BeforeRenderUI PostRender Load Init Remove Activate Deactivate","editor"),r("Click MouseUp MouseDown DblClick KeyDown KeyUp KeyPress ContextMenu Paste Submit Reset"),r("BeforeExecCommand ExecCommand","command ui value args"),r("PreProcess PostProcess LoadContent SaveContent Change"),r("BeforeSetContent BeforeGetContent SetContent GetContent",i(!1)),r("SetProgressState","state time"),r("VisualAid","element hasVisual"),r("Undo Redo",a),r("NodeChange",((t,n)=>[e.controlManager,n.element,e.selection.isCollapsed(),n]));e.addButton;e.addButton=function(t,n){var o,r,a;n.title&&(n.text=(o=n.title,r=[e.options.isRegistered("language")?e.options.get("language"):"en",o].join("."),a=c.tinymce.i18n.translate(r),r!==a?a:c.tinymce.i18n.translate(o))),n.cmd&&(n.onAction=function(){ed.execCommand(n.cmd)}),e.ui.registry.addButton(t,n)},e.on("init",(()=>{var t=e.undoManager,n=e.selection;t.onUndo=new o(e,"Undo",a,null,t),t.onRedo=new o(e,"Redo",a,null,t),t.onBeforeAdd=new o(e,"BeforeAddUndo",null,t),t.onAdd=new o(e,"AddUndo",null,t),n.onBeforeGetContent=new o(e,"BeforeGetContent",i(!0),n),n.onGetContent=new o(e,"GetContent",i(!0),n),n.onBeforeSetContent=new o(e,"BeforeSetContent",i(!0),n),n.onSetContent=new o(e,"SetContent",i(!0),n)})),e.on("BeforeRenderUI",(()=>{var t=e.windowManager;t.onOpen=new o,t.onClose=new o,t.createInstance=function(e,t,o,r,a,i){return n("windowManager.createInstance(..)"),new(c.tinymce.resolve(e))(t,o,r,a,i)}})),e.getLang=(t,n)=>{var o=e.options.isRegistered("language")?e.options.get("language"):"en";return e.editorManager.i18n.data[o+"."+t]||(void 0!==n?n:"{#"+t+"}")}}function l(){var e={};function t(){return l()}return n("editor.controlManager.*"),c.tinymce.each("add addMenu addSeparator collapse createMenu destroy displayColor expand focus getLength hasMenus hideMenu isActive isCollapsed isDisabled isRendered isSelected mark postRender remove removeAll renderHTML renderMenu renderNode renderTo select selectByIndex setActive setAriaProperty setColor setDisabled setSelected setState showMenu update".split(" "),(n=>{e[n]=t})),e}}c.tinymce.util.Dispatcher=o,c.tinymce.onBeforeUnload=new o(c.tinymce,"BeforeUnload"),c.tinymce.onAddEditor=new o(c.tinymce,"AddEditor","editor"),c.tinymce.onRemoveEditor=new o(c.tinymce,"RemoveEditor","editor"),c.tinymce.util.Cookie={get:t,getHash:t,remove:t,set:t,setHash:t},c.tinymce.on("SetupEditor",(e=>{r(e.editor)})),c.tinymce.PluginManager.add("compat3x",r),c.tinymce.addI18n=function(e,t){var n=c.tinymce.util.I18n,o=c.tinymce.each;if("string"!=typeof e||-1!==e.indexOf("."))if(n.data=n.data||{},c.tinymce.is(e,"string"))if(c.tinymce.is(t,"string")){var r=e.split("."),a=r.shift(),i={};i[r.join()]=t,n.add(a,i)}else o(t,((t,o)=>{n.data[`${e}.${o}`]=t;var r=e.split("."),a=r.shift();r.push(o);var i={};i[r.join(".")]=t,n.add(a,i)}));else o(e,((e,t)=>{o(e,((e,r)=>{o(e,((e,o)=>{var a={};"common"===r?(n.data[`${t}.${o}`]=e,a[o]=e):(n.data[`${t}.${r}.${o}`]=e,a[`${r}.${o}`]=e),n.add(t,a)}))}))}));else n.add(e,t)}},function(){c.tinymce.PluginManager.add("atlassiantheme",gc)},function(){Object(C.a)("init.rte",Xo)},function(){c.tinymce.PluginManager.add("aePaste",yt)},()=>{c.tinymce.PluginManager.add("tablePasteFilter",Rs)},()=>{c.tinymce.PluginManager.add("conflist",_o)},function(){c.tinymce.PluginManager.add("tasklist",(function(e){var t=()=>{var t=Vs(e);t&&(t=>{var n=e.dom.getParent(t.parentElement,"UL");return t&&"UL"===t.tagName&&n&&n.classList.contains("inline-task-list")&&t!=n})(t)&&(e=>Array.from(e.childNodes).every((e=>e.hasAttribute("data-inline-task-id"))))(t)&&e.undoManager.ignore((()=>{t.classList.add("inline-task-list")}))},n=()=>("page"!==m.a.get("content-type")&&"blogpost"!==m.a.get("content-type")&&"template"!==m.a.get("content-type")||e.undoManager.transact((()=>{Gs(Vs(e))&&(e.execCommand("InsertOrderedList"),Ys(Vs(e))),Js(e)})),!1);function o(t,n){if(!qs()){var o=n.handlerManager,r=n.createHandler;o.registerHandler("]".charCodeAt(0),r(Ws,(()=>{e.execCommand("InsertInlineTaskList")}),!0))}}function r(){e.addQueryStateHandler("InsertInlineTaskList",(()=>Ks(Vs(e)))),e.addQueryStateHandler("InsertUnorderedList",(()=>Gs(Vs(e))))}function a(t,n,o){if(qs()){var r=e.dom.createFragment("");r.appendChild(o.node),Array.prototype.slice.call(r.querySelectorAll("ul.inline-task-list, ol.inline-task-list")).forEach((e=>Ys(e)))}}e.addCommand("InsertInlineTaskListNoToggle",(()=>(Ks(Vs(e))||n(),!1))),e.addCommand("InsertInlineTaskList",n),e.on("BeforeExecCommand",(t=>{"InsertUnorderedList"===t.command&&Ks(Vs(e))&&!t.value?e.undoManager.ignore((()=>{e.execCommand("InsertOrderedList"),Ys(Vs(e))})):"InsertOrderedList"!==t.command||t.value||e.undoManager.ignore((()=>{Ys(Vs(e))}))})),e.on("execCommand",(e=>{"Indent"===e.command&&t()})),e.on("Click",(function(t){var n=t.target;if("LI"===n.tagName){var o=e.dom.getParent(n,"ul,ol");"UL"===o.tagName&&e.dom.hasClass(o,"inline-task-list")&&function(t,n){var o,r;if(c.tinymce.Env.browser.isFirefox()){var a=n.getBoundingClientRect();o=t.pageX-(a.left+c.tinymce.DOM.getViewPort(e.getWin()).x),r=t.pageY-(a.top+c.tinymce.DOM.getViewPort(e.getWin()).y)}else o=t.offsetX,r=t.offsetY;return o>=3&&o<=14&&r>=3&&r<=14}(t,n)&&(e.dom.hasClass(n,"checked")?e.dom.removeClass(n,"checked"):e.dom.addClass(n,"checked"))}})),e.on("KeyUp",(function(t){if(t.keyCode===c.tinymce.util.VK.ENTER&&!t.shiftKey){var n=(o=e.selection.getStart())&&o.tagName&&"LI"===o.tagName.toUpperCase()?o:e.dom.getParent(o,"li");if(n){if(e.dom.removeClass(n,"checked"),!n.parentNode)return;e.dom.hasClass(n.parentNode,"inline-task-list")?n.setAttribute("data-inline-task-id",""):n.removeAttribute("data-inline-task-id")}}var o})),e.on("KeyDown",(e=>{e.shiftKey||e.keyCode!==c.tinymce.util.VK.TAB||c.tinymce.util.VK.metaKeyPressed(e)||t()})),Object(C.a)("confluence.editor.registerHandlers",o),Object(C.a)("rte-ready",r),He(c.document,"postPaste",a),e.on("Remove",(()=>{Object(C.c)("confluence.editor.registerHandlers",o),Object(C.c)("rte-ready",r),Fe(c.document,"postPaste",a)}))}))},()=>{Object(Lt.a)("confluence-editor/autoformat",(()=>({handlerManager:ho,createHandler:mo}))),Object(C.a)("init.rte",vo)},()=>{c.tinymce.PluginManager.add("deletecommand",Wa)},function(){},()=>{c.tinymce.AUIWindowManager=Nt,c.tinymce.PluginManager.add("auiwindowmanager",jt)},()=>{var e;e=Fl(),c.Confluence.PropertyPanel.TextPlaceholder=e,Object(C.a)("init.rte",(()=>{"template"===m.a.get("content-type")&&Object(C.b)("add-handler.property-panel",e)})),c.tinymce.PluginManager.add("textplaceholders",zl)},()=>{c.tinymce.PluginManager.add("emotions",li)},()=>{c.tinymce.PluginManager.add("confluence",Qo)},()=>{c.tinymce.PluginManager.add("macroplaceholder",Qi)},()=>{He(c.document,"initContextToolbars.Toolbar",(()=>{var e;Qa().initContextToolbars(),e=function(e){var t={},n={},o=function(e,n){var o,r;for(r in t)if(t.hasOwnProperty(r)&&t[r].isEnabled)for(var a=0,i=t[r].events.length;a<i;a++)(o=t[r].events[a]).type.toLowerCase().indexOf(n.type)>-1&&(o.shouldTrigger(e,n)?o.callback.apply(this,[n.target]):o.missed&&o.missed())};return{addEventsForComponent(r,a){r in t||(t[r]={},t[r].events=[],t[r].isEnabled=!0);for(var i=function(i){var l;!(a[i].type in n)&&(n[a[i].type]=!0,e[a[i].type].add(o)),"function"!=typeof a[i].shouldTrigger&&(l=a[i].shouldTrigger,a[i].shouldTrigger=function(e,t){return t.target.tagName.toLowerCase()==l}),t[r].events.push(a[i])},l=0,s=a.length;l<s;l++)i(l)},disableEventsForComponent(e){for(var n=0,o=t.length;n<o;n++)if(e in t)return t[e].isEnabled=!1,!0;return!1},enableEventsForComponent(e){for(var n=0,o=t.length;n<o;n++)if(e in t)return t[e].isEnabled=!0,!0;return!1}}}(c.tinymce),e.addEventsForComponent("TableToolbar",$a)}))},()=>{Pa(),c.tinymce.PluginManager.add("customtoolbar",Ra)},()=>{c.tinymce.PluginManager.add("insertwikimarkup",Pi)},()=>{c.tinymce.PluginManager.add("propertypanel",Vl)},function(){},()=>{c.tinymce.PluginManager.add("confmonospace",Vo)},function(){i.a.PluginManager.add("confcharmap",Uo)},()=>{c.tinymce.PluginManager.add("iosediting",$i)},()=>{c.tinymce.PluginManager.add("aeTable",z)},()=>{var e=function(){var e=function(e){var t=this;e.on("Undo",(()=>{t.cleanLinks(e)})),this.editor=e,this.weightedHandlers=[],this.handlers=[]};function t(e){for(var n=t.options,o=n.parser[n.strictMode?"strict":"loose"].exec(e),r={},a=14;a--;)r[n.key[a]]=o[a]||"";return r[n.q.name]={},r[n.key[12]].replace(n.q.parser,((e,t,o)=>(t&&(r[n.q.name][t]=o),""))),r}e.prototype={addHandler(e,t){this.weightedHandlers.push({handler:e,weight:t||0}),this.weightedHandlers.sort(((e,t)=>e.weight-t.weight)),this.handlers=[];for(var n=this.weightedHandlers.length,o=0;o<n;o++)this.handlers.push(this.weightedHandlers[o].handler)},cleanLinks:e=>(s()("a.atlassian-autoconvert",e.getDoc()).removeClass("atlassian-autoconvert"),!0),callHandlers(e){var o=0,r=this,a=s()(e),i=s()(e).clone(),l=i.attr("href"),u=t(n(l));function g(e){if(e&&(1!==e.length||!e.attr("href")))return f(e);if(e)o=0,u=t((i=e).attr("href")),m(r.handlers[o],u,i);else{if(!(++o<r.handlers.length))return f(i);m(r.handlers[o],u,i)}}function m(e,t,n){var a=g,i=d.a.setTimeout((()=>{p.a.error(`Autoconvert: Callback #${o} failed to call continuation in time. If there is no subsequent log, the handler is improperly implemented and should be uninstalled.`),a=function(){p.a.error(`Autoconvert: Callback #${o} did eventualy return. Probably a slow async call.`)},g()}),c.tinymce.plugins.Autoconvert.callbackTimeout);e(t,n,(function(){var e=o;clearTimeout(i),a.apply(r,arguments),a=function(){p.a.error(`Autoconvert: Callback #${e} called the continuation multiple times.`)}}))}function f(e){r.editor.undoManager.beforeChange();var t=r.editor.selection,n=r.editor.selection.getBookmark();a.replaceWith(e),t.moveToBookmark(n),r.editor.undoManager.add()}0!==this.handlers.length&&m(this.handlers[0],u,i)}},e.callbackTimeout=5e3,e.convertMacroToDom=function(e,t,n){var o={macro:e,contentId:m.a.get("content-id")};s.a.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:`${A.a}/rest/tinymce/1/macro/placeholder`,data:JSON.stringify(o),dataType:"text",success:t,error:n,timeout:45e3})},e.convertMacroToDomViaWikiText=function(t,n,o){var r=["{",t.name],a=!0;for(var i in t.defaultParameterValue&&(r.push(":",t.defaultParameterValue),a=!1),t.params)a?(r.push(":"),a=!1):r.push("|"),r.push(i,"=",t.params[i]);r.push("}"),e.getHtmlFromWikiMarkup(r.join(""),(e=>{n(s()(e)[0])}),(()=>{o()}))},e.getHtmlFromWikiMarkup=function(e,t,n){var o={wiki:e,entityId:m.a.get("content-id"),contextType:m.a.get("content-type"),spaceKey:m.a.get("space-key")};s.a.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:`${A.a}/rest/tinymce/1/wikixhtmlconverter`,data:JSON.stringify(o),dataType:"text",success:t,error:n,timeout:45e3})},t.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var n=function(e){return e.replace(/^(.*?\/\/[^/]*?\/.*?)(@)/,"$1%40")};return{autoConverter:e,plugin:function(){return{init(t){var n=new e(t);function o(e,o,r){var a=s()(r.node).children("a");1===a.length&&"A"===a[0].tagName&&a.text()===a.attr("href")&&(a.attr("class","atlassian-autoconvert"),setTimeout((()=>{var e=s()("a.atlassian-autoconvert",s()(t.selection.getNode().ownerDocument)).removeClass("atlassian-autoconvert");n.callHandlers(e)}),0))}c.tinymce.plugins.Autoconvert.autoConvert=n,t.on("init",(()=>{s()(document).on("postPaste",o),t.addCommand("addAutoconverter",((e,t)=>(n.addHandler(t),!1)))})),t.on("remove",(()=>{s()(document).off("postPaste",o)}))},getInfo:()=>({longname:"Atlassian Autoconvert",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:"1.0"})}}}}();!function(e){"object"==typeof c.tinymce?(void 0===c.tinymce.plugins&&(c.tinymce.plugins={}),c.tinymce.plugins.Autoconvert=e.autoConverter):p.a.error("Autoconvert global export failed because window.tinymce is not an object")}(e),c.tinymce.PluginManager.add("autoconvert",e.plugin),Jn()},function(){Object(C.a)("rte-ready",oo)},()=>{c.tinymce.PluginManager.add("draggable",Va)},()=>{c.tinymce.PluginManager.add("insertfiles",yi)},()=>{c.tinymce.PluginManager.add("flextofullsize",si)},()=>{c.tinymce.PluginManager.add("referrer",Kl)},()=>{c.tinymce.PluginManager.add("tableContentWrapper",Qs)},()=>{c.tinymce.PluginManager.add("linkbrowser",zi)},()=>{c.tinymce.PluginManager.add("confluenceversioncomment",fc)},()=>{c.tinymce.PluginManager.add("autocomplete",ln)},()=>{},()=>{c.tinymce.PluginManager.add("autocompletelink",mn)},()=>{c.tinymce.PluginManager.add("autocompletemacro",Tn)},()=>{c.tinymce.PluginManager.add("autocompletemedia",$n)},function(){s()(document).ready(Bs)},()=>{c.tinymce.PluginManager.add("confluenceleavecomment",Hi)},()=>{c.tinymce.PluginManager.add("confluenceleavetemplate",Fi)},()=>{es(),c.tinymce.PluginManager.add("searchreplace",Xl)},()=>{c.tinymce.PluginManager.add("confluencedrafts",Wo)},ll,()=>{var e,t,n,o;c.tinymce.PluginManager.add("pagelayoutplugin",bl),yl(),e=e=>!!e.querySelector(".contentLayout, .contentLayout2"),t=e=>Array.from(e.querySelectorAll(".contentLayout2 .columnLayout.single")),n=(e,t)=>{e.undoManager.ignore((()=>{t.forEach((t=>t.appendChild((e=>e.dom.create("div",{class:"pagelayout-delete-stub synchrony-exclude",style:"display:none;",contenteditable:"true"},"."))(e))))}))},o=(e,t)=>{var n=Array.from(t.querySelectorAll(".pagelayout-delete-stub"));e.undoManager.ignore((()=>{n.forEach((e=>e.parentNode&&e.parentNode.removeChild(e)))}))},Object(C.a)("rte-ready",(()=>{var r=c.tinymce.activeEditor,a=r.getDoc(),i=r.getBody();i.addEventListener("keydown",(o=>{if((8===o.keyCode||46===o.keyCode)&&e(a))if(r.dom.isEmpty(r.getBody()))o.stopImmediatePropagation();else{var i=t(a);i.length>0&&(n(r,i),o.stopImmediatePropagation())}}),!0),i.addEventListener("keyup",(t=>{8!==t.keyCode&&46!==t.keyCode||!e(a)||o(r,a)}),!0),r.on("beforeExecCommand",(o=>{if("delete"===o.command&&e(a)){var i=t(a);i.length>0&&n(r,i)}})),r.on("ExecCommand",(t=>{"delete"===t.command&&e(a)&&o(r,a)})),r.on("BeforeGetContent",(()=>{o(r,a)}))}))},function(){},()=>{c.tinymce.PluginManager.add("confluencemacrobrowser",_i)},()=>{c.tinymce.PluginManager.add("statusmacro",As),c.Confluence.PropertyPanel.Macro.registerInitHandler(((e,t)=>{var n,o;os=e,Cs(t),rs=c.Confluence.MacroParameterSerializer.deserialize(s()(os).attr("data-macro-parameters")),as=null,t.splice(1,0,(n=(o=rs).title||bs(o),{className:cs,text:zt(n),click:ws}))}),"status"),s.a.each(ms,((e,t)=>{c.Confluence.PropertyPanel.Macro.registerButtonHandler(t,(function(){rs.colour=t,c.Confluence.PropertyPanel.destroy()}),gs)})),Object(C.a)("destroyed.property-panel",(()=>{fs()&&vs()}))},function(){},function(){},function(){},function(){c.AJS.MacroBrowser.Macros.code=Ro},function(){},()=>{c.tinymce.PluginManager.add("confluencewatch",hc)},()=>{c.tinymce.PluginManager.add("confluencesortabletablesplugin",ts)},()=>{c.tinymce.PluginManager.add("autoresize",bo)},function(){},function(){},()=>{c.tinymce.PluginManager.add("confluencenotifywatchers",Wi)},function(){},()=>{c.Confluence.PropertyPanel.Macro.registerButtonHandler("office-connector-download-file-button",((e,t)=>{for(var n=(t=t.nodeType?t:t[0]).getAttribute("data-macro-parameters").split("|"),o={},r=0;r<n.length;r++){var a=n[r].split("=");a.length>1&&(o[a[0]]=a[1])}var i=m.a.get("page-id"),l=m.a.get("content-type");function s(e,t,n){return e&&t&&("?"!=n.charAt(n.length-1)&&(n+="&"),n=`${n}${e}=${encodeURI(t)}`),n}o.space||(o.space=m.a.get("space-key"));var c=m.a.get("context-path")+"/plugins/servlet/oc/getattachment?";c=s("title",o.page,c),c=s("date",o.date,c),c=s("space",o.space,c),c=s("filename",o.name,c),c=s("contextid",i,c),c=s("contexttype",l,c);var d=window.open(c,"download-office-attachment");d&&d.opener&&(d.opener=null)})),Vi()},function(){Object(C.a)("rte-ready",(()=>{var e;e=c.tinymce.activeEditor,Object(c.clearTimeout)(Xa),Xa=Object(c.setTimeout)(ai,6e4),e.on("ExecCommand",(e=>{var t,n="mceToggleFormat"===e.command?(t=e.value).charAt(0).toUpperCase()+t.slice(1):e.command;ri(ii[n])})),e.on("KeyPress",(()=>{ri("keys")})),e.on("KeyUp",(t=>{46===t.keyCode?ri("delete",ni):8===t.keyCode&&ri("backspace",ni),oi(e.selection)})),e.on("MouseUp",(()=>{oi(e.selection)})),e.on("PastePostProcess",(e=>{var t=e&&e.node?e.node.innerText||e.node.textContent:"";ri("paste",t.length)})),e.on("Remove",(()=>{ai(),Object(c.clearTimeout)(Xa)})),d.a.addEventListener("beforeunload",(()=>{ai()}))}))},function(){c.tinymce.PluginManager.add("tableAnalytics",_s)},()=>{Object(C.a)("init.rte",yo)},function(){Object(C.a)("init.rte",(()=>{Fe(c.document,"postPaste",bi),He(c.document,"postPaste",bi),c.tinymce.activeEditor&&c.tinymce.activeEditor.on("Remove",(()=>{Fe(c.document,"postPaste",bi)}))}))},()=>{c.tinymce.PluginManager.add("confindentation",Po)},function(){},()=>{c.tinymce.PluginManager.add("aetextpattern",tc)},function(){c.tinymce.Env.browser.isFirefox()&&Object(C.a)("rte-ready",wo)},()=>{c.tinymce.PluginManager.add("persist_scroll_position",Ol)},()=>{c.tinymce.PluginManager.add("templateeditor",Zs)},()=>{c.tinymce.PluginManager.add("preserve-paragraph-formatting-on-delete",Wl)},()=>{c.tinymce.PluginManager.add("macroNavigation",Ui)},()=>{c.tinymce.PluginManager.add("confluenceimagedialog",vi)},()=>{i.a.PluginManager.add("duplication-tags-removal",Ja)}],bc=()=>(vc.forEach(((e,t)=>{try{e()}catch(n){pc("initError",{fnName:e.name||t,message:n.message||"",exceptionName:n.name||""}),p.a.error(`Editor plugin '${e.name||t}' failed to load`,n)}})),!0),yc=()=>new Promise((e=>{!function(e,t){var n=e.listener,o=e.globalProperty,r=e.interval,a=void 0===r?250:r;if($e(o))return p.a.debug(`window.${o} is already available for use by ${n}.`),t(),null;var i=setInterval((()=>{p.a.debug(`${n} is waiting for window.${o} to be available`),$e(o)&&(p.a.debug(`window.${o} now available!`),clearInterval(i),t())}),a)}({listener:"editor-plugins/index",globalProperty:"AJS.Confluence.PropertyPanel.Macro",interval:20},(()=>{e()}))})),wc=!1,Cc=()=>{if(wc)return pc("initError",{message:"Editor was loaded already, stop re-running init phase"}),Promise.reject();var e=d.a.tinymce;return e.VK=e.util.VK,e.confluence=e.confluence||{},c.tinymce.confluence=c.tinymce.confluence||{},c.tinymce.confluence.macrobrowser=Mn,Pe(),c.tinymce.confluence=c.tinymce.confluence||{},c.tinymce.confluence.NodeUtils=bn,c.tinymce.confluence=c.tinymce.confluence||{},c.tinymce.confluence.MacroUtils=An,r.a.EditorUtils=Yo,r.a.Rte=r.a.Rte||{},r.a.Rte.Cursor=r.a.Rte.Cursor||{},s.a.extend(r.a.Rte.Cursor,{insertParagraph:Zo,isCursorAtStart:qo,isCursorAtEnd:Jo.isCursorAtEnd}),wc=!0,yc().then(bc)},Ac=n(37),xc=n.n(Ac),Mc=""!==m.a.get("remote-user"),kc=M("editor.ajax.save")&&!M("editor.ajax.save.disable"),Ec=()=>m.a.getBoolean("shared-drafts"),Tc=null,Dc=!1,Sc=!1,Ic=!1,Oc=!1,jc=!1;Object(C.a)("editor-shared-drafts-published editor-shared-drafts-discarded",(()=>{Dc=!1,Sc=!1})),Object(C.a)("synchrony.history.evicted",(()=>{Oc=!0})),Object(C.a)("synchrony.connected",(()=>{jc=!0}));var Nc=(e,t,n)=>s()("<input>").attr({type:"hidden",name:e,value:t}).appendTo(n),Lc=()=>Dc,Bc={isDraftManuallySaved:()=>Sc,isDraftBlank:()=>r.a.Rte.Content.isEmpty()&&!c.Confluence.Editor.getCurrentTitle().trim(),isNewContent:()=>r.a.Rte.getEditor()&&m.a.getBoolean("new-page"),isDraftDirty:()=>c.Confluence.Editor.hasContentChanged()||Lc()&&!c.Confluence.Editor.Drafts.isDraftManuallySaved(),unloadMessage:()=>{var e=()=>c.Confluence.Editor.Drafts.isDraftBlank()&&!Ec()?c.Confluence.Editor.Drafts.discardDraft(m.a.get("draft-id")):c.Confluence.Editor.Drafts.save({skipErrorHandler:!0});if(c.Confluence.Editor.isLimitedModeEnabled()||!Ec()){if(c.Confluence.Editor.hasContentChanged()||Lc()&&!c.Confluence.Editor.Drafts.isDraftManuallySaved())return e(),Object(cn.a)("saved.draft")}else if(e(),jc&&(Ic||c.Confluence.Editor.hasContentChanged()||Oc))return Object(cn.a)("saved.shared.draft.leave.page")},hasPendingChanges:()=>Ic,setPendingChanges:e=>Ic=e,isSharedDraftsEnabled:Ec,bindUnloadMessage:()=>{!c.Confluence.Editor.isLimitedModeEnabled()&&Ec()&&(Object(C.a)("synchrony.entity.ack",((e,t)=>{t.pendingChanges||(Ic=!1)})),Object(C.a)("editor.local.change",(()=>{Ic=!0}))),Object(C.a)("beforeunload",c.Confluence.Editor.Drafts.unloadMessage)},unBindUnloadMessage:()=>Object(C.c)("beforeunload"),useDraft:()=>((e,t)=>{c.Confluence.Editor.Drafts.unBindUnloadMessage();var n=c.Confluence.Editor.getCurrentForm();Nc(e,"true",n),Nc("contentChanged",""+c.Confluence.Editor.hasContentChanged(),n),Nc("pageId",r.a.params.pageId,n),s()("#draftId",c.Confluence.Editor.getCurrentForm()).val(t),n.spaceKey||Nc("spaceKey",m.a.get("space-key"),n),n.action=A.a+"/pages/"+(r.a.params.newPage?"create":"edit")+r.a.params.draftType+".action",n.submit()})("useDraft",m.a.get("existing-draft-id")),discardDraft:e=>r.a.safe.ajax({url:`${A.a}/rest/api/content/${e}?status=draft`,type:"DELETE",dataType:"json",data:{},contentType:"application/json",success:()=>{s()("#draft-messages").remove(),r.a.messages.success("#editor-messages",{body:"Your draft has been discarded."})},error:e=>{r.a.messages.error({title:"Error",body:e.errors||"An unknown error has occurred. Please check your logs."})}}),save:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Oc){if(c.Confluence.Editor.isPublishing()||!Aa()&&!e.forceSave)return p.a.debug("skipping draft save because:"),void(c.Confluence.Editor.isPublishing()?p.a.debug("The user is publishing the page already."):Aa()||e.forceSave||p.a.debug("The content hasn't changed and a forceSave wasn't requested in the options."));p.a.info("preparing to save editor draft");var t=s()("#content-title"),n=s()("#newSpaceKey"),o=s()("#originalVersion"),a=c.Confluence.Editor.inRichTextMode(),i={draftId:m.a.get("draft-id"),pageId:m.a.get("page-id"),parentPageId:m.a.get("parent-page-id"),type:r.a.params.draftType,title:t.hasClass("placeholded")?"":t.val(),spaceKey:n.length?n.val():encodeURIComponent(m.a.get("space-key"))};xc.a.getEditorContent().pipe((t=>{s.a.extend(i,t),o.length&&(i.pageVersion=parseInt(o.val(),10)),Tc=s.a.ajax({type:"POST",url:`${A.a}/rest/tinymce/1/drafts${e.ignoreRelations?"?ignoreRelations=true":""}`,data:JSON.stringify(i),contentType:"application/json",dataType:"text json",success:t=>{if(!(null==t||Mc&&0===t.draftId&&kc)){c.Confluence.Editor.contentHasChangedSinceLastSave=!1,a&&r.a.Rte.Content.editorResetContentChanged(),Dc=!0,Sc=!!e.manualSave,m.a.set("draft-id",t.draftId+""),s()("#draftId",c.Confluence.Editor.getCurrentForm()).val(t.draftId),s()("#draft-error").remove();var n,o,i,l,d=t.time||(l=(o=(n=new Date).getHours())>11?"PM":"AM",(0==(o%=12)?"12":o)+":"+((i=n.getMinutes())<10?"0":"")+i+" "+l);if(!m.a.get("collaborative-content")){var u,g=s()("#draft-status");u=Sc?Object(cn.a)("draft.saved.at.new",d):Object(cn.a)("draft.autosaved.at.new",d);var p=r.a.params.newPage?u:"<a id='view-diff-link-heartbeat' class='view-diff-link' href='#'>"+u+"</a>";g.attr("data-tooltip",u),g.html(p)}"function"==typeof e.onSuccessHandler&&e.onSuccessHandler(t),c.Confluence.Editor.Drafts.lastSaveTime=d,Object(C.b)("rte-draft-saved",{draftId:t.draftId})}},error:(t,n)=>{var o=()=>{c.Confluence.Editor.addErrorMessage("draft-error",c.Confluence.Editor.Drafts.lastSaveTime?Object(cn.a)("draft.saving.error.previous.draft",c.Confluence.Editor.Drafts.lastSaveTime):Object(cn.a)("draft.saving.error"),!0)};if(!e.skipErrorHandler&&!Ec()){if(400===t.status)if(t.responseText.indexOf("Legacy drafts deprecated")>=0)Xr.a.handleMessage("legacy-draft-deprecated",{type:"error",message:Object(cn.a)("editor.page.legacy.draft.deprecated")});else if(t.responseText.indexOf("Unsupported character found in content: ")>=0){var r=t.responseJSON.message.split("Unsupported character found in content: ")[1];Xr.a.handleMessage("utf8-validation-failed",{title:Object(cn.a)("mysql.utf8.content.validation.failed.title"),type:"error",message:Object(cn.a)("mysql.utf8.content.validation.failed.message",r)})}else o();else o();"function"==typeof e.onErrorHandler&&e.onErrorHandler(n)}},timeout:3e4}).always((()=>{Tc=null}))}))}},getDraftSavingPromise:()=>Tc};function Rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Pc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rc(Object(n),!0).forEach((function(t){$c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hc,Fc;n(89),n(90),n(91),n(92),n(93);i.a.confluenceEditorVersion="18.5.46",Ee(),Pe(),void 0!==c.AJS.Rte?void 0===c.AJS.Rte.BootstrapManager&&(c.AJS.Rte.BootstrapManager=Re):p.a.error("AJS.Rte is supposed to be defined"),void 0!==c.AJS.Rte?void 0===c.AJS.Rte.Placeholder&&(c.AJS.Rte.Placeholder=Hl):p.a.error("AJS.Rte is supposed to be defined"),void 0!==c.AJS.Rte?void 0===c.AJS.Rte.BookmarkManager&&(c.AJS.Rte.BookmarkManager=kt):p.a.error("AJS.Rte is supposed to be defined"),void 0!==(null===c.AJS||void 0===c.AJS?void 0:c.AJS.Confluence)?void 0===(null===c.AJS||void 0===c.AJS||null===(Hc=c.AJS.Confluence)||void 0===Hc||null===(Fc=Hc.Editor)||void 0===Fc?void 0:Fc.Drafts)&&(c.AJS.Confluence.Editor.Drafts=Bc):p.a.error("AJS.Confluence is supposed to be defined"),(()=>{var e,t,n;void 0!==(null===c.AJS||void 0===c.AJS?void 0:c.AJS.Confluence)?void 0===(null===c.AJS||void 0===c.AJS||null===(e=c.AJS.Confluence)||void 0===e||null===(t=e.Templates)||void 0===t||null===(n=t.Editor)||void 0===n?void 0:n.Page)&&(c.AJS.Confluence.Templates.Editor=Pc(Pc({},c.AJS.Confluence.Templates.Editor),{},{Page:Pc({},ol)})):p.a.error("AJS.Confluence is supposed to be defined")})(),Object(Lt.a)("confluence-editor/loader/tinymce-bootstrap",(()=>Re)),Object(Lt.a)("confluence-editor/editor/atlassian-editor",(()=>v)),Object(Lt.a)("confluence-editor/editor/atlassian-editor-content",(()=>b)),Object(Lt.a)("confluence-editor/utils/tinymce-node-utils",(()=>yn)),Object(Lt.a)("confluence-editor/init",(()=>{Cc().then((()=>{var e={locale:m.a.get("user-locale").replace("_","-")};r.a.toInit((()=>{!function(e){c.tinymce.ThemeManager.requireLangPack("advanced"),c.tinymce.ThemeManager.add("default",we),d.a.requestAnimFrame=d.a.requestAnimationFrame||d.a.webkitRequestAnimationFrame;var t=le();0===Number(t.page_id)&&(t.page_id=null,t.draft_type=m.a.get("draft-type")),Re.addBeforeInitCallback((e=>{e.contentCssTags=c.document.querySelector('script[title="editor-css"]').innerHTML,e.language=m.a.get("action-locale").replace("_","-");var t=m.a.get("min-editor-height");t&&(e.autoresize_min_height=t)}));var n=!(m.a.get("remote-user")&&m.a.get("confluence.prefs.editor.disable.autocomplete"));if(n&&(t.plugins+=",autocomplete,autocompletelink,autocompletemedia"),t.locale="object"==typeof e&&void 0!==e.locale?e.locale:"",m.a.get("auto-start")){if(Object(C.b)("rte-loaded",{editPermission:!0}),y()){var o=c.document.getElementById(t.editor_id);Object(C.b)("rte-collaborative-content-ready",{title:m.a.get("page-title")||m.a.get("original-content-title")||"",editorContent:o.value,confRev:m.a.get("conf-revision"),syncRev:c.document.getElementById("syncRev").value,syncRevSource:m.a.get("sync-revision-source")})}ve("confluence.editor"),n&&(t.plugins+=",autocompletemacro");var r="0"==`${m.a.get("page-id")}`,a=function(e,t){if("template"===e)return ye.createProfileForTemplateEditor();if("comment"===e)return ye.createProfileForCommentEditor();var n={versionComment:!t,notifyWatchers:!t};return ye.createProfileForPageEditor(n)}(m.a.get("content-type"),r).plugins.join(",");a&&(t.plugins+=`,${a}`),Re.preInitialise(t),Re.initialise(),be("confluence.editor")}else Re.preInitialise(t)}(e)}))}))}))}],[[38,"runtime","vendors~core~editor-content-loader~page-layout","vendors~core~page-editor-quit-dialog","vendors~core","core~editor-notifications~page-editor-message~page-editor-quit-dialog","core~page-editor-message~page-editor-quit-dialog","core~page-editor-quit-dialog","core~editor-notifications"]]]);
}catch(e){WRMCB(e)};