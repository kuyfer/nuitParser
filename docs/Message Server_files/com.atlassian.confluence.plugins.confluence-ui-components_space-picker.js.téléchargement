WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/internal/space-resolver.js' */
define("confluence-ui-components/js/internal/space-resolver",["underscore","jquery","ajs"],function(g,m,e){function p(a){return g.map(a,function(c){return"spaceKey\x3d"+encodeURI(c)}).join("\x26")}function k(a,c){var f="undefined"===typeof c;c=g.escape(f?a:c);return{id:a,text:c,idOnly:f}}var n={conf_all:"Tous les espaces",conf_current:"Espace actuel",conf_favorites:"Espaces favoris",
conf_global:"Espaces de site",conf_personal:"Espaces personnels"},q=["conf_favorites","conf_global","conf_personal"];return{getSpaceDisplayItems:function(a,c){var f={},l=[];g.each(a,function(d){var b=n[d];b?f[d]=k(d,b):l.push(d)});if(l.length){var h=e.contextPath()+"/rest/api/space?"+p(l);h=m.getJSON(h)}else h=new m.Deferred,h.resolve({results:[]});h.done(function(d){g.each(d.results,
function(b){f[b.key]=k(b.key,b.name)});d=g.map(a,function(b){return f[b]||k(b)});c(d)})},getSpaceCategoryDisplayName:function(a){return n[a]},getSpaceTypeKeys:function(){return q}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/space-picker.js' */
define("confluence-ui-components/js/space-picker",["underscore","ajs","jquery","confluence-ui-components/js/internal/space-resolver"],function(g,h,k,l){function r(a){var b=t(),d=u(a);return function(c,e,f){if(2>c.term.length)return d(c);"function"===typeof e&&(c.term=e(c.term));m=v(f);return b(c)}}function n(a,b,d){var c=[];a.forEach(function(e){if(e.children){var f=n(e.children,b,d);f.length&&c.push(k.extend({},e,{children:f}))}else if(f="undefined"!==typeof e.id&&g.contains(l.getSpaceTypeKeys(),
e.id),b&&f||!b&&!f)g.contains(d,e.id)||c.push(e)});return c}function p(a,b){if(!a.length||!b.length)return a;var d=0<g.intersection(b,l.getSpaceTypeKeys()).length;a=n(a,d,b);a.length||a.push({text:"Impossible de filtrer par types d\u0027espace ET espaces",disabled:!0});return a}function w(a){var b=k(".select2-container-active").next("input").val().trim();b=""!==b?b.split(","):[];return p(a,b)}var x={data:null,suggestCategories:null},v=function(a){return function(b){b={id:b.spaceKey,
text:b.spaceName};return"function"===typeof a?a(b):b}},m,y=function(a){return function(b,d){b=k(b).val();""!==b&&(b=b.split(","),l.getSpaceDisplayItems(b,function(c){a.multiple||(c=c[0]);d(c)}))}},u=function(a){var b;if(a.suggestCategories)var d={text:"S\u00e9lectionnez une suggestion ou tapez pour rechercher",children:g.map(a.suggestCategories,function(c){return{id:c,text:l.getSpaceCategoryDisplayName(c)}})};return function(c){b?c.callback(b):k.getJSON(h.contextPath()+"/rest/recentlyviewed/1.0/recent/spaces").done(function(e){var f=
{results:[]};d&&f.results.push(d);0<e.length&&f.results.push({text:"Espaces sugg\u00e9r\u00e9s",children:g.map(e,function(q){return{id:q.key,text:g.escape(q.name)}})});b=f;c.callback(b)}).fail(function(){h.log("Couldn't fetch recent spaces");var e={results:[]};d&&e.results.push(d);c.callback(e)})}},t=function(){return window.Select2.query.ajax({url:h.contextPath()+"/rest/quicknav/1/search?type\x3dspacedesc\x26type\x3dpersonalspacedesc",data:function(a){return{query:a,
maxPerCategory:25}},quietMillis:250,results:function(a){a=a.contentNameMatches;if(1>=a.length)return{results:[]};a=g.map(a[0],m);return{results:[{text:"R\u00e9sultats de la recherche",children:a}]}}})};return{build:function(a){a=g.extend({},x,a);var b={placeholder:"S\u00e9lectionnez un espace",formatResult:function(d,c,e){c.attr("title",k("\x3cdiv/\x3e").html(d.text).text());return k.fn.select2.defaults.formatResult.apply(this,
arguments)},escapeMarkup:function(d){return d},multiple:!0===a.multiple,containerCssClass:"space-picker-container"};a.disableMixedSpaceTypes&&(b.sortResults=w);return a.data?g.extend(b,{data:a.data}):g.extend(b,{initSelection:y(a),query:r(a)})},filterMixedTypesForValues:p}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-picker', location = '/js/internal/space-picker-legacy.js' */
window.Confluence.UI.Components.SpacePicker=require("confluence-ui-components/js/space-picker");require("ajs").deprecate.prop(window.Confluence.UI.Components.SpacePicker,"build",{sinceVersion:"1.4.22",extraInfo:"Use require('confluence-ui-components/js/space-picker')"});
}catch(e){WRMCB(e)};